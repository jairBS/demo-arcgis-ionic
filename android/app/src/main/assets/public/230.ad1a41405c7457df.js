"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[230],{33087:(re,W,p)=>{p.d(W,{q:()=>f});var x=p(60611);class f{constructor(M,z){this._storage=new x.F,this.id="",this.name="",this.size=0,this._storage.maxSize=M,this._storage.register(this),z&&this._storage.registerRemoveFunc("",z)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(M,z,Z=1){this._storage.put(this,M,z,Z,1)}pop(M){return this._storage.pop(this,M)}get(M){return this._storage.get(this,M)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(M){this._storage.maxSize=M}resetHitRate(){}}},60611:(re,W,p)=>{p.d(W,{F:()=>Z,Mn:()=>z});var M,T,x=p(12438);(T=M||(M={}))[T.ALL=0]="ALL",T[T.SOME=1]="SOME";class z{constructor(h,c,i){this.name=h,this._storage=c,this.id=K+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(h){return this._storage.getSize(this,h)}resetHitRate(){this._hit=this._miss=0}put(h,c,i,b=0){this._storage.put(this,h,c,i,b)}pop(h){const c=this._storage.pop(this,h);return void 0===c?++this._miss:++this._hit,c}get(h){const c=this._storage.get(this,h);return void 0===c?++this._miss:++this._hit,c}peek(h){return this._storage.peek(this,h)}updateSize(h,c,i){this._storage.updateSize(this,h,c,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class Z{get size(){return this._size}constructor(h=10485760){this._maxSize=h,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new x.A,this._users=new x.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(h){this._users.push(h)}deregister(h){this._users.removeUnordered(h)}registerRemoveFunc(h,c){this._removeFuncs.push([h,c])}deregisterRemoveFunc(h){this._removeFuncs.filterInPlace(c=>c[0]!==h)}get maxSize(){return this._maxSize}set maxSize(h){this._maxSize=Math.max(h,-1),this._checkSize()}getSize(h,c){var i;const b=this._db.get(h.id+c);return null!==(i=null==b?void 0:b.size)&&void 0!==i?i:0}put(h,c,i,b,D){const S=this._db.get(c=h.id+c);if(S&&(this._size-=S.size,h.size-=S.size,this._db.delete(c),S.entry!==i&&this._notifyRemove(c,S.entry,S.size,M.ALL)),b>this._maxSize)return void this._notifyRemove(c,i,b,M.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!b||b<0)return console.warn(`Refusing to cache entry with size ${b} for key ${c}`),void this._notifyRemove(c,i,0,M.ALL);const R=1+Math.max(D,-4)- -3;this._db.set(c,new j(i,b,R)),this._size+=b,h.size+=b,this._checkSize()}updateSize(h,c,i,b){const D=this._db.get(c=h.id+c);if(D&&D.entry===i){for(this._size-=D.size,h.size-=D.size;b>this._maxSize;){const S=this._notifyRemove(c,i,b,M.SOME);if(!(null!=S&&S>0))return void this._db.delete(c);b=S}D.size=b,this._size+=b,h.size+=b,this._checkSize()}}pop(h,c){const i=this._db.get(c=h.id+c);if(i)return this._size-=i.size,h.size-=i.size,this._db.delete(c),++this._hit,i.entry;++this._miss}get(h,c){const i=this._db.get(c=h.id+c);if(void 0!==i)return this._db.delete(c),i.lives=i.lifetime,this._db.set(c,i),++this._hit,i.entry;++this._miss}peek(h,c){const i=this._db.get(h.id+c);return i?++this._hit:++this._miss,null==i?void 0:i.entry}get performanceInfo(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},c={},i=new Array;this._db.forEach((S,R)=>{const Q=S.lifetime;i[Q]=(i[Q]||0)+S.size,this._users.forAll(Y=>{const{id:N,name:v}=Y;R.startsWith(N)&&(c[v]=(c[v]||0)+S.size)})});const b={};this._users.forAll(S=>{const R=S.name;"hitRate"in S&&"number"==typeof S.hitRate&&!isNaN(S.hitRate)&&S.hitRate>0?(c[R]=c[R]||0,b[R]=Math.round(100*S.hitRate)+"%"):b[R]="0%"});const D=Object.keys(c);D.sort((S,R)=>c[R]-c[S]),D.forEach(S=>h[S]=Math.round(c[S]/2**20)+"MB / "+b[S]);for(let S=i.length-1;S>=0;--S){const R=i[S];R&&(h["Priority "+(S+-3-1)]=Math.round(R/this._size*100)+"%")}return h}resetStats(){this._hit=this._miss=0,this._users.forAll(h=>h.resetHitRate())}clear(h){const c=h.id;this._db.forEach((i,b)=>{b.startsWith(c)&&(this._size-=i.size,this._db.delete(b),this._notifyRemove(b,i.entry,i.size,M.ALL))}),h.size=0}clearAll(){this._db.forEach((h,c)=>this._notifyRemove(c,h.entry,h.size,M.ALL)),this._users.forAll(h=>h.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(h,c,i,b){let D;return this._removeFuncs.some(S=>{if(h.startsWith(S[0])){const R=S[1](c,b,i);return"number"==typeof R&&(D=R),!0}return!1}),D}_checkSize(){this._users.forAll(h=>this._checkSizeLimits(h)),this._checkSizeLimits()}_checkSizeLimits(h){const c=null!=h?h:this;if(c.maxSize<0||c.size<=c.maxSize)return;const i=null==h?void 0:h.id;let b=!0;for(;b;){b=!1;for(const[D,S]of this._db)if(0===S.lifetime&&(!i||D.startsWith(i))){if(this._purgeItem(D,S,h),c.size<=.9*c.maxSize)return;b||(b=this._db.has(D))}}for(const[D,S]of this._db)if((!i||D.startsWith(i))&&(this._purgeItem(D,S,h),c.size<=.9*c.maxSize))return}_purgeItem(h,c,i=this._users.find(b=>h.startsWith(b.id))){if(this._db.delete(h),c.lives<=1){this._size-=c.size,i&&(i.size-=c.size);const b=this._notifyRemove(h,c.entry,c.size,M.SOME);null!=b&&b>0&&(this._size+=b,i&&(i.size+=b),c.lives=c.lifetime,c.size=b,this._db.set(h,c))}else--c.lives,this._db.set(h,c)}}let K=0;class j{constructor(h,c,i){this.entry=h,this.size=c,this.lifetime=i,this.lives=i}}},721:(re,W,p)=>{p.d(W,{$X:()=>Le,Gy:()=>ce,P5:()=>Re,SW:()=>Me,Tr:()=>xe,VV:()=>Z}),p(61320);const m=(a,o,d)=>[o,d],M=(a,o,d)=>[o,d,a[2]],z=(a,o,d)=>[o,d,a[2],a[3]];function Z(a){return a?{originPosition:"upper-left"===a.originPosition?"upperLeft":"lower-left"===a.originPosition?"lowerLeft":a.originPosition,scale:a.tolerance?[a.tolerance,a.tolerance]:[1,1],translate:null!=a.extent?[a.extent.xmin,a.extent.ymax]:[0,0]}:null}function S({scale:a,translate:o},d){return d*a[0]+o[0]}function R({scale:a,translate:o},d){return o[1]-d*a[1]}function Q(a,o,d){const A=new Array(d.length);if(!d.length)return A;const[O,$]=a.scale;let B=S(a,d[0][0]),U=R(a,d[0][1]);A[0]=o(d[0],B,U);for(let X=1;X<d.length;X++){const J=d[X];B+=J[0]*O,U-=J[1]*$,A[X]=o(J,B,U)}return A}function Y(a,o,d){const A=new Array(d.length);for(let O=0;O<d.length;O++)A[O]=Q(a,o,d[O]);return A}function ce(a,o,d,A,O){return o.x=function j({scale:a,translate:o},d){return Math.round((d-o[0])/a[0])}(a,d.x),o.y=function T({scale:a,translate:o},d){return Math.round((o[1]-d)/a[1])}(a,d.y),o!==d&&(A&&(o.z=d.z),O&&(o.m=d.m)),o}function Me(a,o,d,A,O){return null!=d&&(o.points=function v(a,o,d,A){return Q(a,d?A?z:M:A?M:m,o)}(a,d.points,A,O)),o}function xe(a,o,d,A,O){return null==d||(o.x=S(a,d.x),o.y=R(a,d.y),o!==d&&(A&&(o.z=d.z),O&&(o.m=d.m))),o}function Le(a,o,d,A,O){return null!=d&&(o.rings=function F(a,o,d,A){return Y(a,d?A?z:M:A?M:m,o)}(a,d.rings,A,O)),o}function Re(a,o,d,A,O){return null!=d&&(o.paths=function I(a,o,d,A){return Y(a,d?A?z:M:A?M:m,o)}(a,d.paths,A,O)),o}},11943:(re,W,p)=>{p.r(W),p.d(W,{default:()=>qe});var x=p(10467),f=p(8189),m=p(90660),M=p(31178),z=p(5922),Z=p(4879),K=p(39693),j=p(56492),T=p(48900),h=p(63484),c=p(45272),i=p(85211),D=(p(3248),p(35150)),R=(p(40707),p(17221)),Q=p(76576),Y=p(95478),N=p(94376),v=p(25936),I=p(93410),F=p(23e3),_=p(58277),E=p(73783),pe=p(17049),se=p(85551),de=p(1151),oe=p(33036),le=p(84311),ce=p(68438),q=p(81687),G=p(47516),Ee=p(3404),_e=p(86300),Me=p(92165),xe=p(79122),d=(p(70176),p(92089),p(9826),p(15317),p(38582)),A=p(73747),O=p(13318),B=(p(85718),p(3046)),U=p(77806),X=p(55098),J=p(89221),fe=p(50305),me=p(71224),Be=p(59598),Fe=p(69741),We=p(20329),Ne=p(73975),ze=p(87086),Ke=p(41843),Oe=p(91644);const Te={key:"type",base:d.A,errorContext:"renderer",typeMap:{simple:A.A,"unique-value":O.A,"class-breaks":xe.A}},De=(0,Ee.p)(),je=(0,me.C)({types:Te});let Qe=0;function ge(s){const l=s.json.write;return"object"==typeof l?l.ignoreOrigin=!0:s.json.write={ignoreOrigin:!0},s}function Ve(s){switch(s){case"point":case"multipoint":return Oe.UK.clone();case"polyline":return Oe.A7.clone();case"polygon":case"multipatch":return Oe.Cx.clone();default:return null}}function we(s,l){var y;return null==s?null:null===(y=l.subtypes)||void 0===y?void 0:y.find(g=>g.code===s)}function Je(s,l){let y=null;switch(l.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":y="point";break;case"esriGeometryPolyline":y="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":y="polygon";break;default:y=null}const g={},C=we(s,l);if(null!=C){const{defaultValues:L}=C;for(const w in L)g[w]=L[w]}return g[l.subtypeField]=s,new Fe.A({name:"New Feature",drawingTool:y,prototype:{attributes:g}})}const Ue="esri.layers.support.SubtypeSublayer";let P=class extends((0,K.P)((0,m.O)((0,B.sA)(X.A)))){constructor(s){super(s),this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${Qe++}`,this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}load(s){return(0,_e.yp)(this.renderer,this.fieldsIndex),Promise.resolve(this)}get capabilities(){var s;return null===(s=this.parent)||void 0===s?void 0:s.capabilities}get effectiveCapabilities(){var s;return null===(s=this.parent)||void 0===s?void 0:s.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:s}=this;return s?s.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){var s;return null===(s=this.parent)||void 0===s?void 0:s.elevationInfo}writeFieldOverrides(s,l,y){var g;const{fields:C,parent:L}=this;let w;if(C){w=[];let V=0;C.forEach(({name:k,alias:ee,editable:ae,visible:ne})=>{var ye;if(!ne)return;const te=null==L||null===(ye=L.fields)||void 0===ye?void 0:ye.find(Ce=>Ce.name===k);if(!te)return;const ue={name:k};let ve=!1;ee!==te.alias&&(ue.alias=ee,ve=!0),ae!==te.editable&&(ue.editable=ae,ve=!0),w.push(ue),ve&&V++}),0===V&&w.length===C.length&&(w=null)}else w=(0,U.o8)(s);null!==(g=w)&&void 0!==g&&g.length&&(0,J.sM)(y,w,l)}get fields(){const{parent:s,fieldOverrides:l,subtypeCode:y}=this,g=null==s?void 0:s.fields;if(!s||null==g||!g.length)return null;const{subtypes:C,subtypeField:L}=s,w=null==C?void 0:C.find(ye=>ye.code===y),V=null==w?void 0:w.defaultValues,k=null==w?void 0:w.domains,ee=[];for(const ye of g){var ae,ne;const te=ye.clone(),{name:ue}=te,ve=null==l?void 0:l.find(be=>be.name===ue);if(te.visible=!l||!!ve,ve){const{alias:be,editable:et}=ve;be&&(te.alias=be),!1===et&&(te.editable=!1)}const Ce=null!==(ae=null==V?void 0:V[ue])&&void 0!==ae?ae:null;te.defaultValue=ue===L?y:Ce;const Pe=null!==(ne=null==k?void 0:k[ue])&&void 0!==ne?ne:null;te.domain=ue===L?null:Pe?"inherited"===Pe.type?te.domain:Pe.clone():null,ee.push(te)}return ee}get floorInfo(){var s;return null===(s=this.parent)||void 0===s?void 0:s.floorInfo}get geometryType(){var s;return null===(s=this.parent)||void 0===s?void 0:s.geometryType}get effectiveScaleRange(){const{minScale:s,maxScale:l}=this;return{minScale:s,maxScale:l}}get objectIdField(){var s;return this.parent||D.A.getLogger(Ue).error(he("objectIdField")),null===(s=this.parent)||void 0===s?void 0:s.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(s){(0,_e.yp)(s,this.fieldsIndex),this._override("renderer",s)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:s}=this;return s&&!s.isTable&&"mesh"!==s.geometryType?function Ge(s){return new A.A({symbol:Ve(s)})}(s.geometryType):null}readRendererFromService(s,l,y){var g,C;if("Table"===l.type)return null;const L=null===(g=l.drawingInfo)||void 0===g?void 0:g.renderer,w=je(L,l,y);let V;const{subtypeCode:k}=this;if(null!=k&&function He(s,l){return!(!l||"unique-value"!==(null==s?void 0:s.type)||"string"!=typeof s.field||s.field.toLowerCase()!==l.toLowerCase()||s.field2||s.field3||s.valueExpression)}(w,l.subtypeField)){var ee;const ae=null===(ee=w.uniqueValueInfos)||void 0===ee?void 0:ee.find(({value:ne})=>(ne="number"==typeof ne?String(ne):ne)===String(k));ae&&(V=new A.A({symbol:ae.symbol}))}else"simple"!==(null==w?void 0:w.type)||null!==(C=w.visualVariables)&&void 0!==C&&C.length||(V=w);return V}readRenderer(s,l,y){var g,C;const L=null==l||null===(g=l.layerDefinition)||void 0===g||null===(g=g.drawingInfo)||void 0===g?void 0:g.renderer;return L?(null===(C=L.visualVariables)||void 0===C?void 0:C.some(V=>"rotationInfo"!==V.type))?void 0:je(L,l,y)||void 0:void 0}get spatialReference(){var s;return null===(s=this.parent)||void 0===s?void 0:s.spatialReference}get subtypeField(){var s;return null===(s=this.parent)||void 0===s?void 0:s.subtypeField}readTemplatesFromService(s,l){return[Je(this.subtypeCode,l)]}readTitleFromService(s,l){const y=we(this.subtypeCode,l);return null!=y?y.name:null}get url(){var s;return null===(s=this.parent)||void 0===s?void 0:s.url}get userHasUpdateItemPrivileges(){var s;return!(null===(s=this.parent)||void 0===s||!s.userHasUpdateItemPrivileges)}addAttachment(s,l){var y=this;return(0,x.A)(function*(){const{parent:g}=y;if(!g)throw he("addAttachment");if(s.getAttribute(g.subtypeField)!==y.subtypeCode)throw new z.A("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return g.addAttachment(s,l)})()}updateAttachment(s,l,y){var g=this;return(0,x.A)(function*(){const{parent:C}=g;if(!C)throw he("updateAttachment");if(s.getAttribute(C.subtypeField)!==g.subtypeCode)throw new z.A("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return C.updateAttachment(s,l,y)})()}deleteAttachments(s,l){var y=this;return(0,x.A)(function*(){const{parent:g}=y;if(!g)throw he("deleteAttachments");if(s.getAttribute(g.subtypeField)!==y.subtypeCode)throw new z.A("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return g.deleteAttachments(s,l)})()}applyEdits(s,l){var y=this;return(0,x.A)(function*(){if(!y.parent)throw he("applyEdits");return y.parent.applyEdits(s,l)})()}createPopupTemplate(s){let l=this;const{parent:y,fields:g,title:C}=this;if(y){const{displayField:L,editFieldsInfo:w,objectIdField:V}=y;l={displayField:L,editFieldsInfo:w,fields:g,objectIdField:V,title:C}}return(0,Ke.tn)(l,s)}createQuery(){if(!this.parent)throw he("createQuery");const s=(0,G.VZ)(this.parent);return s.where=(0,h.m)(`${this.parent.subtypeField}=${this.subtypeCode}`,this.parent.definitionExpression),s}getField(s){return this.fieldsIndex.get(s)}getFieldDomain(s){return this._getLayerDomain(s)}queryAttachments(s,l){var y=this;return(0,x.A)(function*(){const g=yield y.load();if(!g.parent)throw he("queryAttachments");const C=s.clone();return C.where=$e(C.where,g.parent.subtypeField,g.subtypeCode),g.parent.queryAttachments(s,l)})()}queryFeatures(s,l){var y=this;return(0,x.A)(function*(){var g;const C=yield y.load();if(!C.parent)throw he("queryFeatures");const L=null!==(g=ze.A.from(s))&&void 0!==g?g:C.createQuery();return null!=s&&(L.where=$e(L.where,C.parent.subtypeField,C.subtypeCode)),C.parent.queryFeatures(L,l)})()}_getLayerDomain(s){const l=this.fieldsIndex.get(s);return l?l.domain:null}};(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"capabilities",null),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"effectiveCapabilities",null),(0,f._)([(0,i.MZ)({json:{write:{ignoreOrigin:!0}}})],P.prototype,"charts",void 0),(0,f._)([(0,i.MZ)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],P.prototype,"editingEnabled",void 0),(0,f._)([(0,i.MZ)({type:Boolean,readOnly:!0})],P.prototype,"effectiveEditingEnabled",null),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"elevationInfo",null),(0,f._)([(0,i.MZ)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],P.prototype,"fieldOverrides",void 0),(0,f._)([(0,fe.K)("fieldOverrides")],P.prototype,"writeFieldOverrides",null),(0,f._)([(0,i.MZ)({...De.fields,readOnly:!0,json:{read:!1}})],P.prototype,"fields",null),(0,f._)([(0,i.MZ)(De.fieldsIndex)],P.prototype,"fieldsIndex",void 0),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"floorInfo",null),(0,f._)([(0,i.MZ)({type:Be.A,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],P.prototype,"formTemplate",void 0),(0,f._)([(0,i.MZ)({type:String,clonable:!1,readOnly:!0,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],P.prototype,"id",void 0),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"geometryType",null),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"type",void 0),(0,f._)([(0,i.MZ)(ge((0,U.o8)(q.kF)))],P.prototype,"labelsVisible",void 0),(0,f._)([(0,i.MZ)({type:[We.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:Ne.w},write:{ignoreOrigin:!0}}})],P.prototype,"labelingInfo",void 0),(0,f._)([(0,i.MZ)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],P.prototype,"layerType",void 0),(0,f._)([(0,i.MZ)(ge((0,U.o8)(q.fV)))],P.prototype,"legendEnabled",void 0),(0,f._)([(0,i.MZ)({type:["show","hide"]})],P.prototype,"listMode",void 0),(0,f._)([(0,i.MZ)((()=>{const s=(0,U.o8)(q.hn);return s.json.origins.service.read=!1,ge(s)})())],P.prototype,"minScale",void 0),(0,f._)([(0,i.MZ)((()=>{const s=(0,U.o8)(q.hG);return s.json.origins.service.read=!1,ge(s)})())],P.prototype,"maxScale",void 0),(0,f._)([(0,i.MZ)({readOnly:!0})],P.prototype,"effectiveScaleRange",null),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"objectIdField",null),(0,f._)([(0,i.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],P.prototype,"opacity",void 0),(0,f._)([(0,i.MZ)({clonable:!1})],P.prototype,"parent",void 0),(0,f._)([(0,i.MZ)(ge((0,U.o8)(q.M6)))],P.prototype,"popupEnabled",void 0),(0,f._)([(0,i.MZ)({type:Me.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],P.prototype,"popupTemplate",void 0),(0,f._)([(0,i.MZ)({readOnly:!0})],P.prototype,"defaultPopupTemplate",null),(0,f._)([(0,i.MZ)({types:Te,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],P.prototype,"renderer",null),(0,f._)([(0,R.w)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],P.prototype,"readRendererFromService",null),(0,f._)([(0,R.w)("renderer",["layerDefinition.drawingInfo.renderer"])],P.prototype,"readRenderer",null),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"spatialReference",null),(0,f._)([(0,i.MZ)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],P.prototype,"subtypeCode",void 0),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"subtypeField",null),(0,f._)([(0,i.MZ)({type:[Fe.A],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],P.prototype,"templates",void 0),(0,f._)([(0,R.w)("service","templates",["geometryType","subtypeField","subtypes","type"])],P.prototype,"readTemplatesFromService",null),(0,f._)([(0,i.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],P.prototype,"title",void 0),(0,f._)([(0,R.w)("service","title",["subtypes"])],P.prototype,"readTitleFromService",null),(0,f._)([(0,i.MZ)({readOnly:!0,json:{read:!1}})],P.prototype,"url",null),(0,f._)([(0,i.MZ)({readOnly:!0})],P.prototype,"userHasUpdateItemPrivileges",null),(0,f._)([(0,i.MZ)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],P.prototype,"visible",void 0),P=(0,f._)([(0,Q.$)(Ue)],P);const $e=(s,l,y)=>{const g=new RegExp(`${l}\\s*=\\s*\\d+`),C=`${l}=${y}`,L=null!=s?s:"";return g.test(L)?L.replace(g,C):(0,h.m)(C,L)},he=s=>new z.A(`This sublayer must have a parent SubtypeGroupLayer in order to use ${s}`),Se=P;var Ye=p(38488),Xe=p(5540),Ae=p(71655);const ie="SubtypeGroupLayer";function Ze(s,l){return new z.A("layer:unsupported",`Layer (${s.title}, ${s.id}) of type '${s.declaredClass}' ${l}`,{layer:s})}const Ie=(0,Ee.p)();let H=class extends((0,E.j)((0,_.w6)((0,I.d)((0,le.e)((0,oe.j)((0,de.J)((0,v.b)((0,pe.q)((0,se.A)((0,K.P)((0,F.d)((0,N.p)((0,m.O)(Y.A)))))))))))))){constructor(...s){var l;super(...s),l=this,this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.sublayers=new(M.A.ofType(Se)),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this._debouncedSaveOperations=(0,j.sg)(function(){var y=(0,x.A)(function*(g,C,L){const{save:w,saveAs:V}=yield Promise.all([p.e(2076),p.e(7881)]).then(p.bind(p,90639));switch(g){case Ae.X.SAVE:return w(l,C);case Ae.X.SAVE_AS:return V(l,L,C)}});return function(g,C,L){return y.apply(this,arguments)}}()),this.addHandles((0,T.wB)(()=>this.sublayers,(y,g)=>this._handleSublayersChange(y,g),T.OH))}destroy(){var s;null===(s=this.source)||void 0===s||s.destroy()}normalizeCtorArgs(s,l){return"string"==typeof s?{url:s,...l}:s}load(s){var l=this;const y=null!=s?s.signal:null,g=this.loadFromPortal({supportedTypes:["Feature Service"]},s).catch(j.QP).then((0,x.A)(function*(){if(!l.url)throw new z.A("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==l.layerId)throw new z.A("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return l._initLayerProperties(yield l.createGraphicsSource(y))})).then(()=>(0,G.VA)(this,"load",s));return this.addResolvingPromise(g),Promise.resolve(this)}get createQueryVersion(){var s;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(s=this._get("createQueryVersion"))&&void 0!==s?s:0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,G.C$)(this)}get parsedUrl(){const s=(0,c.An)(this.url);return null!=s&&null!=this.layerId&&(s.path=(0,c.fj)(s.path,this.layerId.toString())),s}set source(s){this._get("source")!==s&&this._set("source",s)}readTitleFromService(s,{name:l}){return this.url?(0,ce.yG)(this.url,l):l}addAttachment(s,l){var y=this;return(0,x.A)(function*(){return(0,G.Xl)(y,s,l,ie)})()}updateAttachment(s,l,y){var g=this;return(0,x.A)(function*(){return(0,G.bt)(g,s,l,y,ie)})()}applyEdits(s,l){var y=this;return(0,x.A)(function*(){return(0,G.ct)(y,s,l)})()}on(s,l){return super.on(s,l)}createGraphicsSource(s){var l=this;return(0,x.A)(function*(){const{default:y}=yield(0,j.qr)(Promise.all([p.e(1732),p.e(8304),p.e(5931),p.e(8570),p.e(4314)]).then(p.bind(p,28570)),s);return new y({layer:l}).load({signal:s})})()}createQuery(){const s=(0,G.VZ)(this),l=this.sublayers.map(y=>y.subtypeCode);return s.where=(0,h.m)(`${this.subtypeField} IN (${l.join(",")})`,this.definitionExpression),s}deleteAttachments(s,l){var y=this;return(0,x.A)(function*(){return(0,G.mm)(y,s,l,ie)})()}fetchRecomputedExtents(s){var l=this;return(0,x.A)(function*(){return(0,G.WP)(l,s,ie)})()}findSublayerForFeature(s){const l=this.fieldsIndex.get(this.subtypeField);return this.findSublayerForSubtypeCode(s.attributes[l.name])}findSublayerForSubtypeCode(s){return this._sublayerLookup.get(s)}getFieldDomain(s,l){return this._getLayerDomain(s)}getField(s){return this.fieldsIndex.get(s)}loadAll(){return(0,Z.g)(this,s=>{s(this.sublayers)})}queryAttachments(s,l){var y=this;return(0,x.A)(function*(){return(0,G.lV)(y,s,l,ie)})()}queryFeatures(s,l){var y=this;return(0,x.A)(function*(){var g,C;const L=yield y.load(),w=null!==(g=ze.A.from(s))&&void 0!==g?g:L.createQuery(),V=null!==(C=w.outFields)&&void 0!==C?C:[];V.includes(y.subtypeField)||(V.push(y.subtypeField),w.outFields=V);const k=yield L.source.queryFeatures(w,l);if(null!=k&&k.features)for(const ee of k.features)ee.layer=ee.sourceLayer=y.findSublayerForFeature(ee);return k})()}queryObjectIds(s,l){var y=this;return(0,x.A)(function*(){return(0,G.sg)(y,s,l,ie)})()}queryFeatureCount(s,l){var y=this;return(0,x.A)(function*(){return(0,G.Ye)(y,s,l,ie)})()}queryExtent(s,l){var y=this;return(0,x.A)(function*(){return(0,G.B5)(y,s,l,ie)})()}queryRelatedFeatures(s,l){var y=this;return(0,x.A)(function*(){return(0,G.hM)(y,s,l,ie)})()}queryRelatedFeaturesCount(s,l){var y=this;return(0,x.A)(function*(){return(0,G.S2)(y,s,l,ie)})()}save(s){var l=this;return(0,x.A)(function*(){return l._debouncedSaveOperations(Ae.X.SAVE,s)})()}saveAs(s,l){var y=this;return(0,x.A)(function*(){return y._debouncedSaveOperations(Ae.X.SAVE_AS,l,s)})()}write(s,l){var y;const{origin:g,layerContainerType:C,messages:L}=l;if(this.isTable){if("web-scene"===g||"web-map"===g&&"tables"!==C)return null!=L&&L.push(Ze(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===g&&"tables"===C)return null!=L&&L.push(Ze(this,"using a non-table source cannot be written to tables in web maps")),null;return null!==(y=this.sublayers)&&void 0!==y&&y.length?super.write(s,l):(null!=L&&L.push(new z.A("web-document-write:invalid-property",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(s){return!!this.loaded&&(0,Xe.D)(this,s)}_getLayerDomain(s){const l=this.fieldsIndex.get(s);return l?l.domain:null}_initLayerProperties(s){var l=this;return(0,x.A)(function*(){var y;l._set("source",s);const{sourceJSON:g}=s;if(g&&(l.sourceJSON=g,l.read(g,{origin:"service",url:l.parsedUrl})),l.isTable)throw new z.A("subtype-grouplayer:unsupported-source","SubtypeGroupLayer cannot be created using a layer with table source");if(null===(y=l.subtypes)||void 0===y||!y.length)throw new z.A("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");l._verifyFields(),(0,_e.sv)(l.timeInfo,l.fieldsIndex)})()}hasDataChanged(){var s=this;return(0,x.A)(function*(){return(0,G.jp)(s)})()}_verifyFields(){var s,l,y;const g=null!==(s=null===(l=this.parsedUrl)||void 0===l?void 0:l.path)&&void 0!==s?s:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+g+")"),this.isTable||-1!==g.search(/\/FeatureServer\//i)||null!==(y=this.fields)&&void 0!==y&&y.some(C=>"geometry"===C.type)||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+g+")")}_handleSublayersChange(s,l){l&&(l.forEach(y=>{y.parent=null}),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),s&&(s.forEach(y=>{y.parent=this,this._sublayerLookup.set(y.subtypeCode,y)}),this.addHandles([s.on("after-add",({item:y})=>{y.parent=this,this._sublayerLookup.set(y.subtypeCode,y)}),s.on("after-remove",({item:y})=>{y.parent=null,this._sublayerLookup.delete(y.subtypeCode)})],"sublayers-owner"))}};(0,f._)([(0,i.MZ)({readOnly:!0})],H.prototype,"createQueryVersion",null),(0,f._)([(0,i.MZ)({readOnly:!0})],H.prototype,"editingEnabled",null),(0,f._)([(0,i.MZ)({readOnly:!0})],H.prototype,"effectiveEditingEnabled",null),(0,f._)([(0,i.MZ)({...Ie.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],H.prototype,"fields",void 0),(0,f._)([(0,i.MZ)(Ie.fieldsIndex)],H.prototype,"fieldsIndex",void 0),(0,f._)([(0,i.MZ)(q.id)],H.prototype,"id",void 0),(0,f._)([(0,i.MZ)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],H.prototype,"listMode",void 0),(0,f._)([(0,i.MZ)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],H.prototype,"operationalLayerType",void 0),(0,f._)([(0,i.MZ)(Ie.outFields)],H.prototype,"outFields",void 0),(0,f._)([(0,i.MZ)({readOnly:!0})],H.prototype,"parsedUrl",null),(0,f._)([(0,i.MZ)({clonable:!1})],H.prototype,"source",null),(0,f._)([(0,i.MZ)({type:M.A.ofType(Se),json:{origins:{service:{read:{source:"subtypes",reader:(s,l,y)=>{const g=s.map(({code:C})=>{const L=new Se({subtypeCode:C});return L.read(l,y),L});return new(M.A.ofType(Se))(g)}}}},name:"layers",write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,f._)([(0,i.MZ)({type:Ye.A})],H.prototype,"timeInfo",void 0),(0,f._)([(0,i.MZ)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],H.prototype,"title",void 0),(0,f._)([(0,R.w)("service","title",["name"])],H.prototype,"readTitleFromService",null),(0,f._)([(0,i.MZ)({json:{read:!1}})],H.prototype,"type",void 0),H=(0,f._)([(0,Q.$)("esri.layers.SubtypeGroupLayer")],H);const qe=H},94376:(re,W,p)=>{p.d(W,{p:()=>j});var x=p(8189),f=p(85211),Z=(p(3248),p(35150),p(40707),p(76576));const j=T=>{let h=class extends T{get apiKey(){var c;return this._isOverridden("apiKey")?this._get("apiKey"):function K(T){return"portalItem"in T}(this)?null===(c=this.portalItem)||void 0===c?void 0:c.apiKey:null}set apiKey(c){null!=c?this._override("apiKey",c):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,x._)([(0,f.MZ)({type:String})],h.prototype,"apiKey",null),h=(0,x._)([(0,Z.$)("esri.layers.mixins.APIKeyMixin")],h),h}},25936:(re,W,p)=>{p.d(W,{b:()=>j});var x=p(8189),f=p(35150),m=p(85211),Z=(p(3248),p(40707),p(76576)),K=p(68438);const j=T=>{let h=class extends T{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const c=(0,K.qg)(this.url);if(null!=c&&c.title)return c.title}return this._get("title")||""}set title(c){this._set("title",c)}set url(c){this._set("url",(0,K.Jf)(c,f.A.getLogger(this)))}};return(0,x._)([(0,m.MZ)()],h.prototype,"title",null),(0,x._)([(0,m.MZ)({type:String})],h.prototype,"url",null),h=(0,x._)([(0,Z.$)("esri.layers.mixins.ArcGISService")],h),h}},64584:(re,W,p)=>{p.d(W,{A:()=>c});var T,x=p(8189),f=p(31178),m=p(71065),M=p(85211),j=(p(3248),p(35150),p(40707),p(76576));let h=T=class extends m.oY{constructor(i){super(i),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new f.A}clone(){return new T({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,x._)([(0,M.MZ)({type:String,json:{write:!0}})],h.prototype,"floorField",void 0),(0,x._)([(0,M.MZ)({json:{read:!1,write:!1}})],h.prototype,"viewAllMode",void 0),(0,x._)([(0,M.MZ)({json:{read:!1,write:!1}})],h.prototype,"viewAllLevelIds",void 0),h=T=(0,x._)([(0,j.$)("esri.layers.support.LayerFloorInfo")],h);const c=h},4858:(re,W,p)=>{p.d(W,{BI:()=>D,D3:()=>i,XJ:()=>b,lc:()=>c,mX:()=>R,rU:()=>S,tH:()=>F});var x=p(1119);const f="__begin__",m="__end__",M=new RegExp(f,"ig"),z=new RegExp(m,"ig"),Z=new RegExp("^"+f,"i"),K=new RegExp(m+"$","i"),j='"',T=j+" + ",h=" + "+j;function c(_){return _.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function i(_){return _.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function b(_){const E={expression:"",type:"none"};return _.labelExpressionInfo?_.labelExpressionInfo.value?(E.expression=_.labelExpressionInfo.value,E.type="conventional"):_.labelExpressionInfo.expression&&(E.expression=_.labelExpressionInfo.expression,E.type="arcade"):null!=_.labelExpression&&(E.expression=c(_.labelExpression),E.type="conventional"),E}function D(_){const E=b(_);if(!E)return null;switch(E.type){case"conventional":return R(E.expression);case"arcade":return E.expression}return null}function S(_){const E=b(_);if(!E)return null;switch(E.type){case"conventional":return function Y(_){const E=null==_?void 0:_.match(Q);return(null==E?void 0:E[1].trim())||null}(E.expression);case"arcade":return F(E.expression)}return null}function R(_){let E;return _?(E=(0,x.HC)(_,pe=>f+'$feature["'+pe+'"]'+m),E=Z.test(E)?E.replace(Z,""):j+E,E=K.test(E)?E.replace(K,""):E+j,E=E.replaceAll(M,T).replaceAll(z,h)):E='""',E}const Q=/^\s*\{([^}]+)\}\s*$/i,N=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,v=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,I=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function F(_){if(!_)return null;let E=N.exec(_)||v.exec(_);return E?E[1]||E[3]:(E=I.exec(_),E?E[2]:null)}},90543:(re,W,p)=>{p.d(W,{S:()=>T});var x=p(3248),f=p(68438);function m(v,I,F){return!!z(v,I,F)}function M(v,I,F){return z(v,I,F)}function z(v,I,F){return v&&v.hasOwnProperty(I)?v[I]:F}const Z={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function K(v){var I;const F=null==v||null===(I=v.supportedSpatialAggregationStatistics)||void 0===I?void 0:I.map(_=>_.toLowerCase());return{envelope:!(null==F||!F.includes("envelopeaggregate")),centroid:!(null==F||!F.includes("centroidaggregate")),convexHull:!(null==F||!F.includes("convexhullaggregate"))}}function j(v,I){var F;const _=null==v||null===(F=v.supportedOperationsWithCacheHint)||void 0===F?void 0:F.map(E=>E.toLowerCase());return!(null==_||!_.includes(I.toLowerCase()))}function T(v,I){return{analytics:h(v),attachment:c(v),data:i(v),metadata:b(v),operations:D(v.capabilities,v,I),query:S(v,I),queryRelated:R(v),queryTopFeatures:Q(v),editing:Y(v)}}function h(v){return{supportsCacheHint:j(v.advancedQueryCapabilities,"queryAnalytics")}}function c(v){const I=v.attachmentProperties,F={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:j(v.advancedQueryCapabilities,"queryAttachments"),supportsResize:m(v,"supportsAttachmentsResizing",!1)};return I&&Array.isArray(I)&&I.forEach(_=>{const E=Z[_.name];E&&(F[E]=!!_.isEnabled)}),F}function i(v){return{isVersioned:m(v,"isDataVersioned",!1),supportsAttachment:m(v,"hasAttachments",!1),supportsM:m(v,"hasM",!1),supportsZ:m(v,"hasZ",!1)}}function b(v){return{supportsAdvancedFieldProperties:m(v,"supportsFieldDescriptionProperty",!1)}}function D(v,I,F){const _=v?v.toLowerCase().split(",").map(G=>G.trim()):[],E=F?(0,f.qg)(F):null,pe=_.includes(null!=E&&"MapServer"===E.serverType?"data":"query"),se=_.includes("editing")&&!I.datesInUnknownTimezone;let de=se&&_.includes("create"),oe=se&&_.includes("delete"),le=se&&_.includes("update");const ce=_.includes("changetracking"),q=I.advancedQueryCapabilities;return se&&!(de||oe||le)&&(de=oe=le=!0),{supportsCalculate:m(I,"supportsCalculate",!1),supportsTruncate:m(I,"supportsTruncate",!1),supportsValidateSql:m(I,"supportsValidateSql",!1),supportsAdd:de,supportsDelete:oe,supportsEditing:se,supportsChangeTracking:ce,supportsQuery:pe,supportsQueryAnalytics:m(q,"supportsQueryAnalytic",!1),supportsQueryAttachments:m(q,"supportsQueryAttachments",!1),supportsQueryTopFeatures:m(q,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:m(I,"supportsAttachmentsResizing",!1),supportsSync:_.includes("sync"),supportsUpdate:le,supportsExceedsLimitStatistics:m(I,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:m(I,"supportsAsyncConvert3D",!1)}}function S(v,I){var F;const _=v.advancedQueryCapabilities,E=v.ownershipBasedAccessControlForFeatures,pe=v.archivingInfo,se=v.currentVersion,oe=!(null==I?void 0:I.includes("MapServer"))||se>=(0,x.A)("mapserver-pbf-version-support"),le=(0,f.Wo)(I),ce=new Set((null!==(F=v.supportedQueryFormats)&&void 0!==F?F:"").split(",").map(q=>q.toLowerCase().trim()));return{supportsStatistics:m(_,"supportsStatistics",v.supportsStatistics),supportsPercentileStatistics:m(_,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:m(_,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:K(_),supportsCentroid:m(_,"supportsReturningGeometryCentroid",!1),supportsDistance:m(_,"supportsQueryWithDistance",!1),supportsDistinct:m(_,"supportsDistinct",v.supportsAdvancedQueries),supportsExtent:m(_,"supportsReturningQueryExtent",!1),supportsGeometryProperties:m(_,"supportsReturningGeometryProperties",!1),supportsHavingClause:m(_,"supportsHavingClause",!1),supportsOrderBy:m(_,"supportsOrderBy",v.supportsAdvancedQueries),supportsPagination:m(_,"supportsPagination",!1),supportsQuantization:m(v,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:m(v,"supportsQuantizationEditMode",!1),supportsQueryGeometry:m(v,"supportsReturningQueryGeometry",!1),supportsResultType:m(_,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:m(_,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:m(_,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:m(v,"useStandardizedQueries",!1),supportsTopFeaturesQuery:m(_,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:m(E,"allowAnonymousToQuery",!0),supportsQueryByOthers:m(E,"allowOthersToQuery",!0),supportsHistoricMoment:m(pe,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:oe&&ce.has("pbf"),supportsDisjointSpatialRelationship:m(_,"supportsDisjointSpatialRel",!1),supportsCacheHint:m(_,"supportsQueryWithCacheHint",!1)||j(_,"query"),supportsDefaultSpatialReference:m(_,"supportsDefaultSR",!1),supportsCompactGeometry:le,supportsFullTextSearch:m(_,"supportsFullTextSearch",!1),maxRecordCountFactor:M(v,"maxRecordCountFactor",void 0),maxRecordCount:M(v,"maxRecordCount",void 0),standardMaxRecordCount:M(v,"standardMaxRecordCount",void 0),tileMaxRecordCount:M(v,"tileMaxRecordCount",void 0)}}function R(v){const I=v.advancedQueryCapabilities,F=m(I,"supportsAdvancedQueryRelated",!1);return{supportsPagination:m(I,"supportsQueryRelatedPagination",!1),supportsCount:F,supportsOrderBy:F,supportsCacheHint:j(I,"queryRelated")}}function Q(v){return{supportsCacheHint:j(v.advancedQueryCapabilities,"queryTopFilter")}}function Y(v){const I=v.ownershipBasedAccessControlForFeatures,F=v?v.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:m(v,"allowGeometryUpdates",!0),supportsGlobalId:m(v,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:m(v,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:m(v,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:m(v,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:m(v,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:m(I,"allowAnonymousToDelete",!0),supportsDeleteByOthers:m(I,"allowOthersToDelete",!0),supportsUpdateByAnonymous:m(I,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:m(I,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:m(F,"supportsAsyncApplyEdits",!1),zDefault:M(v,"zDefault",void 0)}}},78592:(re,W,p)=>{p.d(W,{O3:()=>T,PU:()=>K,YW:()=>c,ex:()=>z,hv:()=>h,zp:()=>Z});var x=p(69287),f=p(67685),m=p(53781),M=p(89141);const z=2.4;function Z(i){return(0,f.PN)(i*z)}function K(i){return(0,f.Lz)(i)/z}function j(i,b,D,S){let{color:R,ratio:Q}=b,{color:Y,ratio:N}=D;N===Q&&(1===N?Q-=1e-6:N+=1e-6);const v=(0,x.qE)((S-Q)/(N-Q),0,1);(0,m.l)(i,R.toArray(),Y.toArray(),v)}function T(i){const D=new Uint8ClampedArray(2048);if((i=i.filter(({ratio:N})=>N>=0&&N<=1).sort((N,v)=>N.ratio-v.ratio).map(({color:N,ratio:v})=>({color:N,ratio:Math.max(v,.001)}))).length<1)return D;let S=i[0],R=i[0],Q=1;const Y=(0,M.vt)();for(let N=0;N<512;N++){const v=(N+.5)/512;for(;v>R.ratio&&Q<i.length;)S=R,R=i[Q++];j(Y,S,R,v),D.set(Y,4*N)}return D}function h(i,b,D){const S=Math.sqrt(i**2+b**2)/D;return S>1?0:3/(Math.PI*D**2)*(1-S**2)**2}function c(i){return"function"==typeof i?i:i?b=>+b[i]:()=>1}},91644:(re,W,p)=>{p.d(W,{A7:()=>j,Cx:()=>T,Hk:()=>h,JJ:()=>D,UK:()=>K,jM:()=>i,x3:()=>b}),p(3248);var f=p(88521),m=p(55417),M=p(46602),z=p(47705),Z=p(48254);const K=M.A.fromJSON(Z.Cb),j=m.A.fromJSON(Z.yM),T=f.A.fromJSON(Z.WR),h=z.A.fromJSON(Z.JZ),i=M.A.fromJSON(Z.nC),b=m.A.fromJSON(Z.HW),D=f.A.fromJSON(Z.b6)},48254:(re,W,p)=>{p.d(W,{Cb:()=>m,HW:()=>j,JZ:()=>Z,WR:()=>z,b6:()=>T,nC:()=>K,yM:()=>M});const x=[252,146,31,255],m={type:"esriSMS",style:"esriSMSCircle",size:6,color:x,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},M={type:"esriSLS",style:"esriSLSSolid",width:.75,color:x},z={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Z={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},K={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},j={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},T={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);