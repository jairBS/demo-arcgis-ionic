"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2138,9927],{99980:(re,W,r)=>{r.d(W,{A:()=>d});var h=r(8189),u=r(90660),w=r(71065),b=r(97442),Z=r(85211),T=(r(3248),r(35150),r(40707),r(15463)),O=r(76576),A=r(26957);let E=class extends((0,u.O)(w.oY)){constructor(y){super(y),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,b.t)(this.value,this.unit,"milliseconds")}};(0,h._)([(0,T.e)(A.j,{nonNullable:!0})],E.prototype,"unit",void 0),(0,h._)([(0,Z.MZ)({type:Number,json:{write:!0},nonNullable:!0})],E.prototype,"value",void 0),E=(0,h._)([(0,O.$)("esri.TimeInterval")],E);const d=E},40856:(re,W,r)=>{r.d(W,{X_:()=>b,i1:()=>Z,zx:()=>T});var h=r(69287),u=r(82663);const w=96;function b(E,d){const y=d||E.extent,a=E.width,f=(0,u.GA)(null==y?void 0:y.spatialReference);return y&&a?y.width/a*f*u.dy*w:0}function Z(E,d){return E/((0,u.GA)(d)*u.dy*w)}function T(E,d,y){return function O(E,d){return 0===d||(0,h.Sp)(E,d)||E<d}(E,d)&&function A(E,d){return 0===d||(0,h.Sp)(E,d)||E>d}(E,y)}},52138:(re,W,r)=>{r.r(W),r.d(W,{default:()=>dt});var Me,h=r(10467),u=r(8189),w=r(23098),b=r(81098),Z=r(92165),C=r(89563),$=r(31178),N=r(2993),T=r(49976),O=r(77806),A=r(39693),E=r(56492),d=r(48900),y=r(45272),a=r(85211),f=r(55739),p=r(17221),_=r(76576),K=r(50305),V=r(56558),Y=r(28067),J=r(32034),q=r(40856),ne=r(58701),ge=r(95478),te=r(93410),L=r(17049),x=r(85551),c=r(1151),m=r(33036),S=r(84311),D=r(32282),ee=r(68438),oe=r(81687),ue=r(2277),de=r(63014),se=r(3046),ke=r(48669);r(40707),r(3248);let qe=0,H=Me=class extends((0,se.sA)(A.L)){constructor(t){super(t),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([(0,d.on)(()=>this.sublayers,"after-add",({item:s})=>{s.parent=this,s.layer=this.layer},d.OH),(0,d.on)(()=>this.sublayers,"after-remove",({item:s})=>{s.layer=s.parent=null},d.OH),(0,d.wB)(()=>this.sublayers,(s,i)=>{if(i)for(const o of i)o.layer=o.parent=null;if(s)for(const o of s)o.parent=this,o.layer=this.layer},d.OH),(0,d.wB)(()=>this.layer,s=>{if(this.sublayers)for(const i of this.sublayers)i.layer=s},d.OH)])}get id(){const t=this._get("id");return null!=t?t:qe++}set id(t){this._set("id",t)}readLegendUrl(t,s){var i,o;return null!==(i=null!==(o=s.legendUrl)&&void 0!==o?o:s.legendURL)&&void 0!==i?i:null}get effectiveScaleRange(){const{minScale:t,maxScale:s}=this;return{minScale:t,maxScale:s}}castSublayers(t){return(0,f.dp)($.A.ofType(Me),t)}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){var t,s,i,o;const l=new Me;return this.hasOwnProperty("description")&&(l.description=this.description),this.hasOwnProperty("fullExtent")&&(l.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(l.fullExtents=null!==(t=null===(s=this.fullExtents)||void 0===s?void 0:s.map(P=>P.clone()))&&void 0!==t?t:null),this.hasOwnProperty("legendUrl")&&(l.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(l.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(l.layer=this.layer),this.hasOwnProperty("name")&&(l.name=this.name),this.hasOwnProperty("parent")&&(l.parent=this.parent),this.hasOwnProperty("queryable")&&(l.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(l.sublayers=null===(i=this.sublayers)||void 0===i?void 0:i.map(P=>P.clone())),this.hasOwnProperty("spatialReferences")&&(l.spatialReferences=null===(o=this.spatialReferences)||void 0===o?void 0:o.map(P=>P)),this.hasOwnProperty("visible")&&(l.visible=this.visible),this.hasOwnProperty("title")&&(l.title=this.title),l}_setAndNotifyLayer(t,s){const i=this.layer;this._get(t)!==s&&(this._set(t,s),i&&i.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};(0,u._)([(0,a.MZ)()],H.prototype,"description",void 0),(0,u._)([(0,a.MZ)({readOnly:!0})],H.prototype,"dimensions",void 0),(0,u._)([(0,a.MZ)({type:Y.A,json:{name:"extent"}})],H.prototype,"fullExtent",void 0),(0,u._)([(0,a.MZ)()],H.prototype,"fullExtents",void 0),(0,u._)([(0,a.MZ)({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],H.prototype,"id",null),(0,u._)([(0,a.MZ)({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],H.prototype,"legendUrl",void 0),(0,u._)([(0,p.w)("legendUrl",["legendUrl","legendURL"])],H.prototype,"readLegendUrl",null),(0,u._)([(0,a.MZ)({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],H.prototype,"legendEnabled",void 0),(0,u._)([(0,a.MZ)()],H.prototype,"layer",void 0),(0,u._)([(0,a.MZ)()],H.prototype,"maxScale",void 0),(0,u._)([(0,a.MZ)()],H.prototype,"minScale",void 0),(0,u._)([(0,a.MZ)({readOnly:!0})],H.prototype,"effectiveScaleRange",null),(0,u._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],H.prototype,"name",void 0),(0,u._)([(0,a.MZ)()],H.prototype,"parent",void 0),(0,u._)([(0,a.MZ)({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],H.prototype,"popupEnabled",void 0),(0,u._)([(0,a.MZ)({type:Boolean,json:{write:{ignoreOrigin:!0}}})],H.prototype,"queryable",void 0),(0,u._)([(0,a.MZ)()],H.prototype,"sublayers",void 0),(0,u._)([(0,ke.w)("sublayers")],H.prototype,"castSublayers",null),(0,u._)([(0,a.MZ)({type:[Number],json:{read:{source:"spatialReferences"}}})],H.prototype,"spatialReferences",void 0),(0,u._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],H.prototype,"title",void 0),(0,u._)([(0,a.MZ)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],H.prototype,"visible",null),H=Me=(0,u._)([(0,_.$)("esri.layers.support.WMSSublayer")],H);const Ae=H;var fe=r(89952),et=r(5922);const Le={84:4326,83:4269,27:4267};function tt(t){var s,i,o;if(!t)return null;const l={idCounter:-1};"string"==typeof t&&(t=(new DOMParser).parseFromString(t,"text/xml"));const P=t.documentElement;if("ServiceExceptionReport"===P.nodeName){const k=Array.prototype.slice.call(P.childNodes).map(Ee=>Ee.textContent).join("\r\n");throw new et.A("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",k)}const g=Q("Capability",P),I=Q("Service",P),M=g&&Q("Request",g);if(!g||!I||!M)return null;const v=Q("Layer",g);if(!v)return null;const j="WMS_Capabilities"===P.nodeName||"WMT_MS_Capabilities"===P.nodeName?P.getAttribute("version"):"1.3.0",F=le("Title",I,"")||le("Name",I,""),z=le("AccessConstraints",I,""),R=/^none$/i.test(z)?"":z,G=le("Abstract",I,""),B=parseInt(le("MaxWidth",I,"5000"),10),ie=parseInt(le("MaxHeight",I,"5000"),10),ye=be(M,"GetMap"),_e=Ce(M,"GetMap"),X=ve(v,j,l);if(!X)return null;let Ve,Ue=0;const ct=Array.prototype.slice.call(g.childNodes),pt=null!==(s=X.sublayers)&&void 0!==s?s:[],Te=k=>{null!=k&&pt.push(k)};ct.forEach(k=>{"Layer"===k.nodeName&&(0===Ue?Ve=k:(1===Ue&&X.name&&(X.name="",Te(ve(Ve,j,l))),Te(ve(k,j,l))),Ue++)});let me=X.sublayers,Re=X.extent;const mt=null!==(i=X.fullExtents)&&void 0!==i?i:[];if(me||(me=[]),0===me.length&&me.push(X),!Re){const k=new Y.A(me[0].extent);X.extent=k.toJSON(),Re=X.extent}const ft=X.spatialReferences.length>0?X.spatialReferences:Se(X),Je=Ce(M,"GetFeatureInfo"),ht=Je?be(M,"GetFeatureInfo"):null,Xe=je(me),vt=X.minScale||0,yt=X.maxScale||0,Ye=null!==(o=X.dimensions)&&void 0!==o?o:[],_t=Xe.reduce((k,Ee)=>{var ae;return k.concat(null!==(ae=Ee.dimensions)&&void 0!==ae?ae:[])},[]),Qe=Ye.concat(_t).filter(xe);let ze=null;if(Qe.length){const k=Qe.map(Ee=>{const{extent:ae}=Ee;return function st(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}(ae)?ae.map(Ie=>Ie.getTime()):null==ae?void 0:ae.map(Ie=>[Ie.min.getTime(),Ie.max.getTime()])}).flat(2).filter(fe.Ru);ze={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...k),Math.max(...k)]}}return{copyright:R,description:G,dimensions:Ye,extent:Re,fullExtents:mt,featureInfoFormats:ht,featureInfoUrl:Je,mapUrl:_e,maxWidth:B,maxHeight:ie,maxScale:yt,minScale:vt,layers:Xe,spatialReferences:ft,supportedImageFormatTypes:ye,timeInfo:ze,title:F,version:j}}function Se(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const s of t.sublayers){const i=Se(s);if(i.length>0)return i}return[]}function je(t){let s=[];for(const o of t){var i;s.push(o),null!==(i=o.sublayers)&&void 0!==i&&i.length&&(s=s.concat(je(o.sublayers)),delete o.sublayers)}return s}function Oe(t,s,i){var o;return null!==(o=s.getAttribute(t))&&void 0!==o?o:i}function Q(t,s){for(let i=0;i<s.childNodes.length;i++){const o=s.childNodes[i];if(we(o)&&o.nodeName===t)return o}return null}function Pe(t,s){if(null==s)return[];const i=[];for(let o=0;o<s.childNodes.length;o++){const l=s.childNodes[o];we(l)&&l.nodeName===t&&i.push(l)}return i}function le(t,s,i){var o,l;return null!==(o=null===(l=Q(t,s))||void 0===l?void 0:l.textContent)&&void 0!==o?o:i}function he(t,s,i){if(!t)return null;const o=parseFloat(t.getAttribute("minx")),l=parseFloat(t.getAttribute("miny")),P=parseFloat(t.getAttribute("maxx")),g=parseFloat(t.getAttribute("maxy"));let I,M,v,j;i?(I=isNaN(l)?-Number.MAX_VALUE:l,M=isNaN(o)?-Number.MAX_VALUE:o,v=isNaN(g)?Number.MAX_VALUE:g,j=isNaN(P)?Number.MAX_VALUE:P):(I=isNaN(o)?-Number.MAX_VALUE:o,M=isNaN(l)?-Number.MAX_VALUE:l,v=isNaN(P)?Number.MAX_VALUE:P,j=isNaN(g)?Number.MAX_VALUE:g);const F=new J.A({wkid:s});return new Y.A({xmin:I,ymin:M,xmax:v,ymax:j,spatialReference:F})}function Ce(t,s){const i=Q(s,t);if(i){const o=Q("DCPType",i);if(o){const l=Q("HTTP",o);if(l){const P=Q("Get",l);if(P){let g=function nt(t,s,i,o){const l=Q(t,i);return l?Oe(s,l,o):o}("OnlineResource","xlink:href",P,null);if(g)return g.indexOf("&")===g.length-1&&(g=g.substring(0,g.length-1)),function it(t,s){const i=[],o=(0,y.An)(t);for(const l in o.query)o.query.hasOwnProperty(l)&&(s.includes(l.toLowerCase())||i.push(l+"="+o.query[l]));return o.path+(i.length?"?"+i.join("&"):"")}(g,["service","request"])}}}}return null}function be(t,s){const i=Pe("Operation",t);if(!i.length)return Pe("Format",Q(s,t)).map(({textContent:l})=>l).filter(fe.Ru);const o=[];for(const l of i)if(l.getAttribute("name")===s){const P=Pe("Format",l);for(const{textContent:g}of P)null!=g&&o.push(g)}return o}function Be(t,s,i){const o=Q(s,t);if(!o)return i;const{textContent:l}=o;if(null==l||""===l)return i;const P=Number(l);return isNaN(P)?i:P}function ve(t,s,i){var o;if(!t)return null;const l={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:"1"===t.getAttribute("queryable"),spatialReferences:[],sublayers:null},P=Q("LatLonBoundingBox",t),g=Q("EX_GeographicBoundingBox",t);let I=null;P&&(I=he(P,4326)),g&&(I=new Y.A(0,0,0,0,new J.A({wkid:4326})),I.xmin=parseFloat(le("westBoundLongitude",g,"0")),I.ymin=parseFloat(le("southBoundLatitude",g,"0")),I.xmax=parseFloat(le("eastBoundLongitude",g,"0")),I.ymax=parseFloat(le("northBoundLatitude",g,"0"))),P||g||(I=new Y.A(-180,-90,180,90,new J.A({wkid:4326}))),l.minScale=Be(t,"MaxScaleDenominator",0),l.maxScale=Be(t,"MinScaleDenominator",0);const M=["1.0.0","1.1.0","1.1.1"].includes(s)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(v=>{if("Name"===v.nodeName)l.name=v.textContent||"";else if("Title"===v.nodeName)l.title=v.textContent||"";else if("Abstract"===v.nodeName)l.description=v.textContent||"";else if("BoundingBox"===v.nodeName){const R=v.getAttribute(M);if(R&&0===R.indexOf("EPSG:")){const B=parseInt(R.substring(5),10);0===B||isNaN(B)||I||(I="1.3.0"===s?he(v,B,(0,D.m)(B)):he(v,B))}const G=R&&R.indexOf(":");if(G&&G>-1){var j;let B=parseInt(R.substring(G+1,R.length),10);0===B||isNaN(B)||(B=null!==(j=Le[B])&&void 0!==j?j:B);const ie="1.3.0"===s?he(v,B,(0,D.m)(B)):he(v,B);ie&&l.fullExtents&&l.fullExtents.push(ie)}}else if(v.nodeName===M){var F,z;(null!==(F=null===(z=v.textContent)||void 0===z?void 0:z.split(" "))&&void 0!==F?F:[]).forEach(R=>{const G=R.includes(":")?parseInt(R.split(":")[1],10):parseInt(R,10);if(0!==G&&!isNaN(G)){var B;const ie=null!==(B=Le[G])&&void 0!==B?B:G;l.spatialReferences.includes(ie)||l.spatialReferences.push(ie)}})}else if("Style"!==v.nodeName||l.legendUrl){if("Layer"===v.nodeName){const R=ve(v,s,i);R&&(R.parentLayerId=l.id,l.sublayers||(l.sublayers=[]),l.sublayers.push(R))}}else{const R=Q("LegendURL",v);if(R){const G=Q("OnlineResource",R);G&&(l.legendUrl=G.getAttribute("xlink:href"))}}}),l.extent=null===(o=I)||void 0===o?void 0:o.toJSON(),l.dimensions=Pe("Dimension",t).filter(v=>v.getAttribute("name")&&v.getAttribute("units")&&v.textContent).map(v=>{var j,F;const z=v.getAttribute("name"),R=v.getAttribute("units"),G=v.textContent,B=null!==(j=v.getAttribute("unitSymbol"))&&void 0!==j?j:void 0,ie=null!==(F=v.getAttribute("default"))&&void 0!==F?F:void 0,ye="0"!==Oe("default",v,"0"),_e="0"!==Oe("nearestValue",v,"0"),X="0"!==Oe("current",v,"0");return xe({name:z,units:R})?{name:"time",units:"ISO8601",extent:Fe(G),default:Fe(ie),multipleValues:ye,nearestValue:_e,current:X}:function We(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}({name:z,units:R})?{name:"elevation",units:R,extent:Ne(G),unitSymbol:B,default:Ne(ie),multipleValues:ye,nearestValue:_e}:{name:z,units:R,extent:Ke(G),unitSymbol:B,default:Ke(ie),multipleValues:ye,nearestValue:_e}}),l}function we(t){return t.nodeType===Node.ELEMENT_NODE}function xe(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function Ne(t){if(!t)return;const s=t.includes("/"),i=t.split(",");return s?i.map(o=>{const l=o.split("/");return l.length<2?null:{min:parseFloat(l[0]),max:parseFloat(l[1]),resolution:l.length>=3&&"0"!==l[2]?parseFloat(l[2]):void 0}}).filter(fe.Ru):i.map(o=>parseFloat(o))}function Ke(t){if(!t)return;const s=t.includes("/"),i=t.split(",");return s?i.map(o=>{const l=o.split("/");return l.length<2?null:{min:l[0],max:l[1],resolution:l.length>=3&&"0"!==l[2]?l[2]:void 0}}).filter(fe.Ru):i}function Fe(t){if(!t)return;const s=t.includes("/"),i=t.split(",");return s?i.map(o=>{const l=o.split("/");return l.length<2?null:{min:new Date(l[0]),max:new Date(l[1]),resolution:l.length>=3&&"0"!==l[2]?ot(l[2]):void 0}}).filter(fe.Ru):i.map(o=>new Date(o))}function ot(t){const i=t.match(/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i);return i?{years:ce(i[1]),months:ce(i[2]),days:ce(i[3]),hours:ce(i[4]),minutes:ce(i[5]),seconds:ce(i[6])}:null}function ce(t){if(!t)return 0;const i=t.match(/(?:\d+(?:\.|,)\d+|\d+)/);if(!i)return 0;const o=i[0].replace(",",".");return Number(o)}function pe(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}const Ze=new Set([102100,3857,102113,900913]),lt=new Set([3395,54004]),De=new T.J({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function $e(t){return"text/html"===t}function He(t){return"text/plain"===t}let U=class extends((0,te.d)((0,S.e)((0,c.J)((0,m.j)((0,L.q)((0,x.A)((0,A.P)(ge.A)))))))){constructor(...t){super(...t),this.allSublayers=new N.A({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([(0,d.on)(()=>this.sublayers,"after-add",({item:s})=>{s.parent=s.layer=this},d.OH),(0,d.on)(()=>this.sublayers,"after-remove",({item:s})=>{s.layer=s.parent=null},d.OH),(0,d.wB)(()=>this.sublayers,(s,i)=>{if(i)for(const o of i)o.layer=o.parent=null;if(s)for(const o of s)o.parent=o.layer=this},d.OH)])}normalizeCtorArgs(t,s){return"string"==typeof t?{url:t,...s}:t}destroy(){this.allSublayers.destroy()}load(t){const s=null!=t?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(E.QP).then(()=>this._fetchService(s))),Promise.resolve(this)}readFullExtentFromItemOrMap(t,s){const i=s.extent;return i?new Y.A({xmin:i[0][0],ymin:i[0][1],xmax:i[1][0],ymax:i[1][1]}):null}writeFullExtent(t,s){s.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){var t,s;return null==this.featureInfoFormats?null:null!==(t=null!==(s=this.featureInfoFormats.find($e))&&void 0!==s?s:this.featureInfoFormats.find(He))&&void 0!==t?t:null}set featureInfoFormat(t){null==t?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):($e(t)||He(t))&&this._override("featureInfoFormat",t)}readImageFormat(t,s){const i=s.supportedImageFormatTypes;return i&&i.includes("image/png")?"image/png":i&&i[0]}readSpatialReferenceFromItemOrDocument(t,s){return new J.A(s.spatialReferences[0])}writeSpatialReferences(t,s){var i;const o=null===(i=this.spatialReference)||void 0===i?void 0:i.wkid;t&&o?(s.spatialReferences=t.filter(l=>l!==o),s.spatialReferences.unshift(o)):s.spatialReferences=t}readSublayersFromItemOrMap(t,s,i){return Ge(s.layers,i,s.visibleLayers)}readSublayers(t,s,i){return Ge(s.layers,i)}writeSublayers(t,s,i,o){s.layers=[];const l=new Map,P=t.flatten(({sublayers:M})=>null!=M?M:[]);for(const M of P){var g;if("number"==typeof(null===(g=M.parent)||void 0===g?void 0:g.id)){const v=l.get(M.parent.id);null!=v?v.push(M.id):l.set(M.parent.id,[M.id])}}for(const M of P){var I;const v={sublayer:M,...o},j=M.write({parentLayerId:"number"==typeof(null===(I=M.parent)||void 0===I?void 0:I.id)?M.parent.id:-1},v);if(l.has(M.id)&&(j.sublayerIds=l.get(M.id)),!M.sublayers&&M.name){const F=M.write({},v);delete F.id,s.layers.push(F)}}s.visibleLayers=P.filter(({visible:M,sublayers:v})=>M&&!v).map(({name:M})=>M).toArray()}set url(t){if(!t)return void this._set("url",t);const{path:s,query:i}=(0,y.An)(t);for(const l in i)/^(request|service)$/i.test(l)&&delete i[l];const o=(0,y.a6)(s,null!=i?i:{});this._set("url",o)}createExportImageParameters(t,s,i,o){var l;const P=null!==(l=null==o?void 0:o.pixelRatio)&&void 0!==l?l:1,g=(0,q.X_)({extent:t,width:s})*P,I=new ue.r({layer:this,scale:g}),{xmin:M,ymin:v,xmax:j,ymax:F,spatialReference:z}=t,R=function at(t,s){let i=t.wkid;return null==s?i:(null!=i&&s.includes(i)||!t.latestWkid||(i=t.latestWkid),null!=i&&Ze.has(i)?s.find(o=>Ze.has(o))||s.find(o=>lt.has(o))||102100:i)}(z,this.spatialReferences),G="1.3.0"===this.version&&(0,D.m)(R)?`${v},${M},${F},${j}`:`${M},${v},${j},${F}`,B=I.toJSON();return{bbox:G,["1.3.0"===this.version?"crs":"srs"]:null==R||isNaN(R)?void 0:"EPSG:"+R,...B}}fetchImage(t,s,i,o){var l=this;return(0,h.A)(function*(){var P,g;const I=l.mapUrl,M=l.createExportImageParameters(t,s,i,o);if(!M.layers){const R=document.createElement("canvas");return R.width=s,R.height=i,R}const v=null==o||null===(P=o.timeExtent)||void 0===P?void 0:P.start,j=null==o||null===(g=o.timeExtent)||void 0===g?void 0:g.end,F=null!=v&&null!=j?v.getTime()===j.getTime()?pe(v):`${pe(v)}/${pe(j)}`:void 0,z={responseType:"image",query:l._mixCustomParameters({width:s,height:i,...M,time:F,...l.refreshParameters}),signal:null==o?void 0:o.signal};return(0,C.A)(null!=I?I:"",z).then(R=>R.data)})()}fetchImageBitmap(t,s,i,o){var l=this;return(0,h.A)(function*(){var P,g,I;const M=null!==(P=l.mapUrl)&&void 0!==P?P:"",v=l.createExportImageParameters(t,s,i,o);if(!v.layers){const B=document.createElement("canvas");return B.width=s,B.height=i,B}const j=null==o||null===(g=o.timeExtent)||void 0===g?void 0:g.start,F=null==o||null===(I=o.timeExtent)||void 0===I?void 0:I.end,z=null!=j&&null!=F?j.getTime()===F.getTime()?pe(j):`${pe(j)}/${pe(F)}`:void 0,R={responseType:"blob",query:l._mixCustomParameters({width:s,height:i,...v,time:z,...l.refreshParameters}),signal:null==o?void 0:o.signal},{data:G}=yield(0,C.A)(M,R);return(0,de.m)(G,M,null==o?void 0:o.signal)})()}fetchFeatureInfo(t,s,i,o,l){const P=(0,q.X_)({extent:t,width:s}),I=function rt(t){const s=t.filter(i=>i.popupEnabled&&i.name&&i.queryable);return s.length?s.map(({name:i})=>i).join():null}(new ue.r({layer:this,scale:P}).visibleSublayers);if(null==this.featureInfoUrl||null==I)return Promise.resolve([]);if(null==this.fetchFeatureInfoFunction&&null==this.featureInfoFormat)return Promise.resolve([]);const v={query_layers:I,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:s,height:i,..."1.3.0"===this.version?{I:o,J:l}:{x:o,y:l}},j={...this.createExportImageParameters(t,s,i),...v},F=this._mixCustomParameters(j);return null!=this.fetchFeatureInfoFunction?this.fetchFeatureInfoFunction(F):this._defaultFetchFeatureInfoFunction((0,y.a6)(this.featureInfoUrl,F))}findSublayerById(t){return this.allSublayers.find(s=>s.id===t)}findSublayerByName(t){return this.allSublayers.find(s=>s.name===t)}serviceSupportsSpatialReference(t){return(0,ee.bd)(this.url)||null!=this.spatialReferences&&this.spatialReferences.some(s=>{const i=900913===s?J.A.WebMercator:new J.A({wkid:s});return(0,ne.aI)(i,t)})}_defaultFetchFeatureInfoFunction(t){const s=document.createElement("iframe");s.src=(0,y.yM)(t),s.style.border="none",s.style.margin="0",s.style.width="100%",s.setAttribute("sandbox","");const i=new Z.A({title:this.title,content:s}),o=new b.A({sourceLayer:this,popupTemplate:i});return Promise.resolve([o])}_fetchService(t){var s=this;return(0,h.A)(function*(){var i;if(!s.resourceInfo&&null!==(i=s.parsedUrl)&&void 0!==i&&i.path){const{path:o,query:l}=s.parsedUrl,{data:P}=yield(0,C.A)(o,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...l,...s.customParameters},responseType:"xml",signal:t});s.resourceInfo=tt(P)}if(s.parsedUrl){const o=new y.s0(s.parsedUrl.path),{httpsDomains:l}=w.A.request;"https"!==o.scheme||o.port&&"443"!==o.port||!o.host||l.includes(o.host)||l.push(o.host)}s.read(s.resourceInfo,{origin:"service"})})()}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const s={...this.customParameters,...this.customLayerParameters};for(const i in s)t[i.toLowerCase()]=s[i];return t}};function Ge(t,s,i){var o;t=null!==(o=t)&&void 0!==o?o:[];const l=new Map;t.every(g=>null==g.id)&&(t=(0,O.o8)(t)).forEach((g,I)=>g.id=I);for(const g of t){const I=new Ae;I.read(g,s),i&&!i.includes(I.name)&&(I.visible=!1),l.set(I.id,I)}const P=[];for(const g of t){const I=null!=g.id?l.get(g.id):null;if(I)if(null!=g.parentLayerId&&g.parentLayerId>=0){const M=l.get(g.parentLayerId);if(!M)continue;M.sublayers||(M.sublayers=new $.A),M.sublayers.push(I)}else P.push(I)}return P}(0,u._)([(0,a.MZ)({readOnly:!0})],U.prototype,"allSublayers",void 0),(0,u._)([(0,a.MZ)({json:{type:Object,write:!0}})],U.prototype,"customParameters",void 0),(0,u._)([(0,a.MZ)({json:{type:Object,write:!0}})],U.prototype,"customLayerParameters",void 0),(0,u._)([(0,a.MZ)({type:String,json:{write:!0}})],U.prototype,"copyright",void 0),(0,u._)([(0,a.MZ)()],U.prototype,"description",void 0),(0,u._)([(0,a.MZ)({readOnly:!0})],U.prototype,"dimensions",void 0),(0,u._)([(0,a.MZ)({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],U.prototype,"fullExtent",void 0),(0,u._)([(0,p.w)(["web-document","portal-item"],"fullExtent",["extent"])],U.prototype,"readFullExtentFromItemOrMap",null),(0,u._)([(0,K.K)(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],U.prototype,"writeFullExtent",null),(0,u._)([(0,a.MZ)()],U.prototype,"fullExtents",void 0),(0,u._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],U.prototype,"featureInfoFormat",null),(0,u._)([(0,a.MZ)({type:[String],readOnly:!0})],U.prototype,"featureInfoFormats",void 0),(0,u._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],U.prototype,"featureInfoUrl",void 0),(0,u._)([(0,a.MZ)()],U.prototype,"fetchFeatureInfoFunction",void 0),(0,u._)([(0,a.MZ)({type:String,json:{origins:{"web-document":{default:"image/png",type:De.jsonValues,read:{reader:De.read,source:"format"},write:{writer:De.write,target:"format"}}}}})],U.prototype,"imageFormat",void 0),(0,u._)([(0,p.w)("imageFormat",["supportedImageFormatTypes"])],U.prototype,"readImageFormat",null),(0,u._)([(0,a.MZ)({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],U.prototype,"imageMaxHeight",void 0),(0,u._)([(0,a.MZ)({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],U.prototype,"imageMaxWidth",void 0),(0,u._)([(0,a.MZ)()],U.prototype,"imageTransparency",void 0),(0,u._)([(0,a.MZ)(oe.fV)],U.prototype,"legendEnabled",void 0),(0,u._)([(0,a.MZ)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),(0,u._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],U.prototype,"mapUrl",void 0),(0,u._)([(0,a.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],U.prototype,"isReference",void 0),(0,u._)([(0,a.MZ)({type:["WMS"]})],U.prototype,"operationalLayerType",void 0),(0,u._)([(0,a.MZ)()],U.prototype,"resourceInfo",void 0),(0,u._)([(0,a.MZ)({type:J.A,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],U.prototype,"spatialReference",void 0),(0,u._)([(0,p.w)(["web-document","portal-item"],"spatialReference",["spatialReferences"])],U.prototype,"readSpatialReferenceFromItemOrDocument",null),(0,u._)([(0,a.MZ)({type:[f.jz],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],U.prototype,"spatialReferences",void 0),(0,u._)([(0,K.K)(["web-document","portal-item"],"spatialReferences")],U.prototype,"writeSpatialReferences",null),(0,u._)([(0,a.MZ)({type:$.A.ofType(Ae),json:{write:{target:"layers",overridePolicy(t,s,i){if(function ut(t,s){return t.some(i=>{for(const o in i)if((0,V.R)(i,o,null,s))return!0;return!1})}(this.allSublayers,i))return{ignoreOrigin:!0}}}}})],U.prototype,"sublayers",void 0),(0,u._)([(0,p.w)(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],U.prototype,"readSublayersFromItemOrMap",null),(0,u._)([(0,p.w)("service","sublayers",["layers"])],U.prototype,"readSublayers",null),(0,u._)([(0,K.K)("sublayers",{layers:{type:[Ae]},visibleLayers:{type:[String]}})],U.prototype,"writeSublayers",null),(0,u._)([(0,a.MZ)({json:{read:!1},readOnly:!0,value:"wms"})],U.prototype,"type",void 0),(0,u._)([(0,a.MZ)(oe.OZ)],U.prototype,"url",null),(0,u._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],U.prototype,"version",void 0),U=(0,u._)([(0,_.$)("esri.layers.WMSLayer")],U);const dt=U},72211:(re,W,r)=>{r.d(W,{LF:()=>Z,M9:()=>C,zu:()=>O});var h=r(5922),u=r(89221),w=r(79845),b=r(26073);function Z(d,y,a){try{return function N(d){if(!d||0===d.length)return null;if(function T(d){const y=d[0];return!!y&&"scale"in y}(d)){const y=[];for(const a of d)y.push({scale:a.scale,value:O(a.value)});return y}return O(d)}(d)}catch(p){var f;null==a||null===(f=a.messages)||void 0===f||f.push(p)}return null}function C(d,y,a,f){try{const p=function $(d){const y=(0,w.q)(d);return y?(0,b.dw)(y)?y.map(a=>a.toJSON()):y.map(({scale:a,effects:f})=>({scale:a,value:f.map(p=>p.toJSON())})):null}(d);(0,u.sM)(a,p,y)}catch(p){f.messages&&f.messages.push(p)}}function O(d){if(null==d||!d.length)return"";const y=[];for(const a of d){let f=[];switch(a.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":f=[A(a,"amount")];break;case"blur":f=[A(a,"radius","pt")];break;case"hue-rotate":f=[A(a,"angle","deg")];break;case"drop-shadow":f=[A(a,"xoffset","pt"),A(a,"yoffset","pt"),A(a,"blurRadius","pt"),E(a,"color")];break;case"bloom":f=[A(a,"strength"),A(a,"radius","pt"),A(a,"threshold")]}const p=`${a.type}(${f.filter(Boolean).join(" ")})`;(0,w.q)(p),y.push(p)}return y.join(" ")}function A(d,y,a){if(null==d[y])throw new h.A("effect:missing-parameter",`Missing parameter '${y}' in ${d.type} effect`,{effect:d});return a?d[y]+a:""+d[y]}function E(d,y){if(null==d[y])throw new h.A("effect:missing-parameter",`Missing parameter '${y}' in ${d.type} effect`,{effect:d});const a=d[y];return`rgba(${a[0]||0}, ${a[1]||0}, ${a[2]||0}, ${a[3]/255||0})`}},93410:(re,W,r)=>{r.d(W,{d:()=>T});var h=r(8189),u=r(85211),C=(r(3248),r(35150),r(40707),r(76576)),$=r(72211);const N={read:{reader:$.LF},write:{allowNull:!0,writer:$.M9}},T=O=>{let A=class extends O{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,h._)([(0,u.MZ)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],A.prototype,"blendMode",void 0),(0,h._)([(0,u.MZ)({json:{read:!1,write:!1,origins:{"web-map":N,"portal-item":N}}})],A.prototype,"effect",void 0),A=(0,h._)([(0,C.$)("esri.layers.mixins.BlendLayer")],A),A}},85551:(re,W,r)=>{r.d(W,{A:()=>q});var h=r(10467),u=r(8189),w=r(23098),b=r(77469),Z=r(89563),C=r(89447),$=r(5922),N=r(35150),T=r(11432),O=r(56492),A=r(45272),E=r(85211),a=(r(3248),r(40707),r(17221)),f=r(76576),p=r(50305),_=r(58443),K=r(73874),V=r(46577),Y=r(52606),J=r(69927);const q=ge=>{let te=class extends ge{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,T.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(L){L!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",L))}readPortalItem(L,x,c){if(x.itemId)return new V.default({id:x.itemId,portal:null==c?void 0:c.portal})}writePortalItem(L,x){null!=L&&L.id&&(x.itemId=L.id)}loadFromPortal(L,x){var c=this;return(0,h.A)(function*(){var m;if(null!==(m=c.portalItem)&&void 0!==m&&m.id)try{const{load:S}=yield Promise.all([r.e(5565),r.e(2076),r.e(6180)]).then(r.bind(r,56180));return(0,O.Te)(x),yield S({instance:c,supportedTypes:L.supportedTypes,validateItem:L.validateItem,supportsData:L.supportsData,layerModuleTypeMap:L.layerModuleTypeMap},x)}catch(S){throw(0,O.zf)(S)||N.A.getLogger(c).warn(`Failed to load layer (${c.title}, ${c.id}) portal item (${c.portalItem.id})\n  ${S}`),S}})()}finishLoadEditablePortalLayer(L){var x=this;return(0,h.A)(function*(){x._set("userHasEditingPrivileges",yield x._fetchUserHasEditingPrivileges(L).catch(c=>((0,O.QP)(c),!0)))})()}setUserPrivileges(L,x){var c=this;return(0,h.A)(function*(){if(!w.A.userPrivilegesApplied)return c.finishLoadEditablePortalLayer(x);if(c.url)try{const{features:{edit:m,fullEdit:S},content:{updateItem:D}}=yield c._fetchUserPrivileges(L,x);c._set("userHasEditingPrivileges",m),c._set("userHasFullEditingPrivileges",S),c._set("userHasUpdateItemPrivileges",D)}catch(m){(0,O.QP)(m)}})()}_fetchUserPrivileges(L,x){var c=this;return(0,h.A)(function*(){let m=c.portalItem;if(!L||!m||!m.loaded||m.sourceUrl)return c._fetchFallbackUserPrivileges(x);const S=L===m.id;if(S&&m.portal.user)return(0,J.It)(m);let D,ee;if(S)D=m.portal.url;else try{D=yield(0,_.wI)(c.url,x)}catch(se){(0,O.QP)(se)}if(!D||!(0,A.b8)(D,m.portal.url))return c._fetchFallbackUserPrivileges(x);try{const se=null!=x?x.signal:null;ee=yield null==b.id?void 0:b.id.getCredential(`${D}/sharing`,{prompt:!1,signal:se})}catch(se){(0,O.QP)(se)}if(!ee)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(S?yield m.reload():(m=new V.default({id:L,portal:{url:D}}),yield m.load(x)),m.portal.user)return(0,J.It)(m)}catch(se){(0,O.QP)(se)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(L){var x=this;return(0,h.A)(function*(){let c=!0;try{c=yield x._fetchUserHasEditingPrivileges(L)}catch(m){(0,O.QP)(m)}return{features:{edit:c,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(L){var x=this;return(0,h.A)(function*(){const c=x.url?null==b.id?void 0:b.id.findCredential(x.url):null;if(!c)return!0;const m=ne.credential===c?ne.user:yield x._fetchEditingUser(L);return ne.credential=c,ne.user=m,null==(null==m?void 0:m.privileges)||m.privileges.includes("features:user:edit")})()}_fetchEditingUser(L){var x=this;return(0,h.A)(function*(){var c,m;const S=null===(c=x.portalItem)||void 0===c||null===(c=c.portal)||void 0===c?void 0:c.user;if(S)return S;const D=b.id.findServerInfo(null!==(m=x.url)&&void 0!==m?m:"");if(null==D||!D.owningSystemUrl)return null;const ee=`${D.owningSystemUrl}/sharing/rest`,oe=K.A.getDefault();if(oe&&oe.loaded&&(0,A.S8)(oe.restUrl)===(0,A.S8)(ee))return oe.user;const ue=`${ee}/community/self`,de=null!=L?L.signal:null,se=yield(0,C.Ke)((0,Z.A)(ue,{authMode:"no-prompt",query:{f:"json"},signal:de}));return se.ok?Y.A.fromJSON(se.value.data):null})()}read(L,x){x&&(x.layer=this),super.read(L,x)}write(L,x){var c;const m=null==x?void 0:x.portal,S=(null===(c=this.portalItem)||void 0===c?void 0:c.id)&&(this.portalItem.portal||K.A.getDefault());return m&&S&&!(0,A.ut)(S.restUrl,m.restUrl)?(x.messages&&x.messages.push(new $.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(L,{...x,layer:this})}};return(0,u._)([(0,E.MZ)({type:V.default})],te.prototype,"portalItem",null),(0,u._)([(0,a.w)("web-document","portalItem",["itemId"])],te.prototype,"readPortalItem",null),(0,u._)([(0,p.K)("web-document","portalItem",{itemId:{type:String}})],te.prototype,"writePortalItem",null),(0,u._)([(0,E.MZ)({clonable:!1})],te.prototype,"resourceReferences",void 0),(0,u._)([(0,E.MZ)({type:Boolean,readOnly:!0})],te.prototype,"userHasEditingPrivileges",void 0),(0,u._)([(0,E.MZ)({type:Boolean,readOnly:!0})],te.prototype,"userHasFullEditingPrivileges",void 0),(0,u._)([(0,E.MZ)({type:Boolean,readOnly:!0})],te.prototype,"userHasUpdateItemPrivileges",void 0),te=(0,u._)([(0,f.$)("esri.layers.mixins.PortalLayer")],te),te},ne={credential:null,user:null}},1151:(re,W,r)=>{r.d(W,{J:()=>x});var h=r(10467),u=r(8189),w=r(35150),b=r(56492),Z=r(85211),C=r(48669),T=(r(40707),r(3248),r(76576)),O=r(50501),A=r(31178),a=(r(89447),r(5922),r(76410),r(34703));const f=new A.A,p=new WeakMap;function Y(c,m){return Number.isFinite(c)&&Number.isFinite(m)?m<=0?c:Y(m,c%m):0}let J=0,q=0;function ne(){const c=Date.now();let m=!1;for(const D of f){const ee=D.deref();var S;ee?ee.refreshInterval&&c-(null!==(S=p.get(ee))&&void 0!==S?S:0)+5>=6e4*ee.refreshInterval&&(p.set(ee,c),ee.refresh(c)):m=!0}if(m)for(let D=f.length-1;D>=0;D--)f.at(D).deref()||f.removeAt(D)}(0,a.fm)(()=>{const c=Date.now();let m=0;for(const S of f){const D=S.deref();D&&(m=Y(Math.round(6e4*D.refreshInterval),m),D.refreshInterval?p.get(D)||p.set(D,c):p.delete(D))}if(m!==q){if(q=m,clearInterval(J),0===q)return void(J=0);J=setInterval(ne,q)}});const x=c=>{let m=class extends c{constructor(...S){super(...S),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,b.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function _(c){(function V(c){return null!=c&&"object"==typeof c&&"refreshInterval"in c&&"refresh"in c})(c)&&f.push(new WeakRef(c))}(this)},()=>{})}destroy(){!function K(c){const m=f.find(S=>S.deref()===c);m&&f.remove(m)}(this)}castRefreshInterval(S){return S>=.1?S:S<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(S=Date.now()){(0,b.QZ)(this._debounceHasDataChanged()).then(D=>{D&&this._set("refreshTimestamp",S),this.emit("refresh",{dataChanged:D})},D=>{w.A.getLogger(this).error(D),this.emit("refresh",{dataChanged:!1,error:D})})}hasDataChanged(){return(0,h.A)(function*(){return!0})()}get test(){const S=this;return{set refreshInterval(D){S._set("refreshInterval",D)}}}};return(0,u._)([(0,Z.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:O.K}}}}})],m.prototype,"refreshInterval",void 0),(0,u._)([(0,C.w)("refreshInterval")],m.prototype,"castRefreshInterval",null),(0,u._)([(0,Z.MZ)({readOnly:!0})],m.prototype,"refreshTimestamp",void 0),(0,u._)([(0,Z.MZ)({readOnly:!0})],m.prototype,"refreshParameters",null),m=(0,u._)([(0,T.$)("esri.layers.mixins.RefreshableLayer")],m),m}},33036:(re,W,r)=>{r.d(W,{j:()=>$});var h=r(8189),u=r(85211),C=(r(3248),r(35150),r(40707),r(76576));const $=T=>{let O=class extends T{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const A={minScale:this.minScale,maxScale:this.maxScale},E=this.parent;E&&"effectiveScaleRange"in E&&function N(T,O){T.minScale=T.minScale>0?O.minScale>0?Math.min(T.minScale,O.minScale):T.minScale:O.minScale,T.maxScale=T.maxScale>0?O.maxScale>0?Math.max(T.maxScale,O.maxScale):T.maxScale:O.maxScale}(A,E.effectiveScaleRange);const d=this._get("effectiveScaleRange");return d&&d.minScale===A.minScale&&d.maxScale===A.maxScale?d:A}};return(0,h._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],O.prototype,"minScale",void 0),(0,h._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],O.prototype,"maxScale",void 0),(0,h._)([(0,u.MZ)({readOnly:!0})],O.prototype,"effectiveScaleRange",null),O=(0,h._)([(0,C.$)("esri.layers.mixins.ScaleRangeLayer")],O),O}},84311:(re,W,r)=>{r.d(W,{e:()=>d});var h=r(8189),u=r(12849),w=r(99980),b=r(85211),N=(r(3248),r(35150),r(40707),r(17221)),T=r(76576),O=r(86300),A=r(38488),E=r(26957);const d=y=>{let a=class extends y{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(f,p){const _=p.timeInfo.exportOptions;if(!_)return null;const K=_.timeOffset,V=E.j.fromJSON(_.timeOffsetUnits);return K&&V?new w.A({value:K,unit:V}):null}set timeInfo(f){(0,O.sv)(f,this.fieldsIndex),this._set("timeInfo",f)}};return(0,h._)([(0,b.MZ)({type:u.A,json:{write:!1}})],a.prototype,"timeExtent",void 0),(0,h._)([(0,b.MZ)({type:w.A})],a.prototype,"timeOffset",void 0),(0,h._)([(0,N.w)("service","timeOffset",["timeInfo.exportOptions"])],a.prototype,"readOffset",null),(0,h._)([(0,b.MZ)({value:null,type:A.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"timeInfo",null),(0,h._)([(0,b.MZ)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"useViewTime",void 0),a=(0,h._)([(0,T.$)("esri.layers.mixins.TemporalLayer")],a),a}},38488:(re,W,r)=>{r.d(W,{A:()=>f});var h=r(8189),u=r(12849),w=r(99980),b=r(90660),Z=r(71065),C=r(85211),O=(r(3248),r(35150),r(40707),r(17221)),A=r(76576),E=r(50305),d=r(22639);function y(p,_){return w.A.fromJSON({value:p,unit:_})}let a=class extends((0,b.O)(Z.oY)){constructor(p){super(p),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(p,_){if(!_.timeExtent||!Array.isArray(_.timeExtent)||2!==_.timeExtent.length)return null;const K=new Date(_.timeExtent[0]),V=new Date(_.timeExtent[1]);return new u.A({start:K,end:V})}writeFullTimeExtent(p,_){_.timeExtent=null!=(null==p?void 0:p.start)&&null!=p.end?[p.start.getTime(),p.end.getTime()]:null}readInterval(p,_){return _.timeInterval&&_.timeIntervalUnits?y(_.timeInterval,_.timeIntervalUnits):_.defaultTimeInterval&&_.defaultTimeIntervalUnits?y(_.defaultTimeInterval,_.defaultTimeIntervalUnits):null}writeInterval(p,_){var K,V;_.timeInterval=null!==(K=null==p?void 0:p.toJSON().value)&&void 0!==K?K:null,_.timeIntervalUnits=null!==(V=null==p?void 0:p.toJSON().unit)&&void 0!==V?V:null}};(0,h._)([(0,C.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],a.prototype,"cumulative",void 0),(0,h._)([(0,C.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],a.prototype,"endField",void 0),(0,h._)([(0,C.MZ)({type:u.A,json:{write:{enabled:!0,allowNull:!0}}})],a.prototype,"fullTimeExtent",void 0),(0,h._)([(0,O.w)("fullTimeExtent",["timeExtent"])],a.prototype,"readFullTimeExtent",null),(0,h._)([(0,E.K)("fullTimeExtent")],a.prototype,"writeFullTimeExtent",null),(0,h._)([(0,C.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"hasLiveData",void 0),(0,h._)([(0,C.MZ)({type:w.A,json:{write:{enabled:!0,allowNull:!0}}})],a.prototype,"interval",void 0),(0,h._)([(0,O.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],a.prototype,"readInterval",null),(0,h._)([(0,E.K)("interval")],a.prototype,"writeInterval",null),(0,h._)([(0,C.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],a.prototype,"startField",void 0),(0,h._)([(0,C.MZ)((0,d.P6)("timeReference",!0))],a.prototype,"timeZone",void 0),(0,h._)([(0,C.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],a.prototype,"trackIdField",void 0),(0,h._)([(0,C.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],a.prototype,"useTime",void 0),a=(0,h._)([(0,A.$)("esri.layers.support.TimeInfo")],a);const f=a},63014:(re,W,r)=>{r.d(W,{C:()=>C,m:()=>b});var h=r(10467),u=r(5922),w=r(56492);function b(N,T,O){return Z.apply(this,arguments)}function Z(){return(Z=(0,h.A)(function*(N,T,O){let A;try{A=yield createImageBitmap(N)}catch(E){throw new u.A("request:server",`Unable to load ${T}`,{url:T,error:E})}return(0,w.Te)(O),A})).apply(this,arguments)}function C(N,T,O,A,E){return $.apply(this,arguments)}function $(){return($=(0,h.A)(function*(N,T,O,A,E){let d;try{d=yield createImageBitmap(N)}catch(y){throw new u.A("request:server",`Unable to load tile ${T}/${O}/${A}`,{error:y,level:T,row:O,col:A})}return(0,w.Te)(E),d})).apply(this,arguments)}},69927:(re,W,r)=>{r.d(W,{It:()=>a,LG:()=>$,OM:()=>O,Sm:()=>A,Y:()=>N,bK:()=>T,mm:()=>y,sQ:()=>E});var h=r(10467),u=r(11817),w=r(32034),b=r(55039);function C(){return(C=(0,h.A)(function*(f){const p=f.spatialReference;if(p.isWGS84)return f.clone();if(p.isWebMercator)return(0,b.ci)(f);const _=w.A.WGS84;return yield(0,u.initializeProjection)(p,_),(0,u.project)(f,_)})).apply(this,arguments)}function $(f,p){if(!N(f,p)){const _=f.typeKeywords;_?_.push(p):f.typeKeywords=[p]}}function N(f,p){var _;return!(null===(_=f.typeKeywords)||void 0===_||!_.includes(p))}function T(f){return N(f,y.HOSTED_SERVICE)}function O(f,p){const _=f.typeKeywords;if(_){const K=_.indexOf(p);K>-1&&_.splice(K,1)}}function A(f,p,_){_?$(f,p):O(f,p)}function E(f){return d.apply(this,arguments)}function d(){return d=(0,h.A)(function*(f){const p=f.clone().normalize();let _;if(p.length>1)for(const K of p)_?K.width>_.width&&(_=K):_=K;else _=p[0];return function Z(f){return C.apply(this,arguments)}(_)}),d.apply(this,arguments)}const y={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function a(f){var p;const{portal:_,isOrgItem:K,itemControl:V}=f,Y=null===(p=_.user)||void 0===p?void 0:p.privileges;let J=!Y||Y.includes("features:user:edit"),q=!!K&&!(null==Y||!Y.includes("features:user:fullEdit"));const ne="update"===V||"admin"===V;return ne?q=J=!0:q&&(J=!0),{features:{edit:J,fullEdit:q},content:{updateItem:ne}}}},26957:(re,W,r)=>{r.d(W,{j:()=>u});const u=(0,r(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})}}]);