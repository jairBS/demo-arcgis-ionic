"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4410],{53781:(Q,Z,y)=>{y.d(Z,{a:()=>i,b:()=>Y,c:()=>A,e:()=>u,f:()=>D,g:()=>S,i:()=>g,j:()=>C,l:()=>E,n:()=>O,s:()=>N,t:()=>o});var v=y(85952);function A(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function N(e,r,n,_,w){return e[0]=r,e[1]=n,e[2]=_,e[3]=w,e}function D(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e}function z(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e}function W(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e[3]=r[3]*n[3],e}function x(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e[3]=r[3]/n[3],e}function Y(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e}function s(e,r){const n=r[0]-e[0],_=r[1]-e[1],w=r[2]-e[2],I=r[3]-e[3];return Math.sqrt(n*n+_*_+w*w+I*I)}function f(e,r){const n=r[0]-e[0],_=r[1]-e[1],w=r[2]-e[2],I=r[3]-e[3];return n*n+_*_+w*w+I*I}function g(e){const r=e[0],n=e[1],_=e[2],w=e[3];return Math.sqrt(r*r+n*n+_*_+w*w)}function C(e){const r=e[0],n=e[1],_=e[2],w=e[3];return r*r+n*n+_*_+w*w}function O(e,r){const n=r[0],_=r[1],w=r[2],I=r[3];let L=n*n+_*_+w*w+I*I;return L>0&&(L=1/Math.sqrt(L),e[0]=n*L,e[1]=_*L,e[2]=w*L,e[3]=I*L),e}function S(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}function E(e,r,n,_){const w=r[0],I=r[1],L=r[2],K=r[3];return e[0]=w+_*(n[0]-w),e[1]=I+_*(n[1]-I),e[2]=L+_*(n[2]-L),e[3]=K+_*(n[3]-K),e}function o(e,r,n){const _=r[0],w=r[1],I=r[2],L=r[3];return e[0]=n[0]*_+n[4]*w+n[8]*I+n[12]*L,e[1]=n[1]*_+n[5]*w+n[9]*I+n[13]*L,e[2]=n[2]*_+n[6]*w+n[10]*I+n[14]*L,e[3]=n[3]*_+n[7]*w+n[11]*I+n[15]*L,e}function i(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]}function u(e,r){const n=e[0],_=e[1],w=e[2],I=e[3],L=r[0],K=r[1],X=r[2],J=r[3],G=(0,v.FD)();return Math.abs(n-L)<=G*Math.max(1,Math.abs(n),Math.abs(L))&&Math.abs(_-K)<=G*Math.max(1,Math.abs(_),Math.abs(K))&&Math.abs(w-X)<=G*Math.max(1,Math.abs(w),Math.abs(X))&&Math.abs(I-J)<=G*Math.max(1,Math.abs(I),Math.abs(J))}Object.freeze(Object.defineProperty({__proto__:null,add:D,ceil:function V(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e[3]=Math.ceil(r[3]),e},copy:A,copyVec3:function P(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e},dist:s,distance:s,div:x,divide:x,dot:S,equals:u,exactEquals:i,floor:function j(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e[3]=Math.floor(r[3]),e},inverse:function l(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e},len:g,length:g,lerp:E,max:function k(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e[3]=Math.max(r[3],n[3]),e},min:function F(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e[3]=Math.min(r[3],n[3]),e},mul:W,multiply:W,negate:function T(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e},normalize:O,random:function R(e,r){const n=v.Ov;let _,w,I,L,K,X;r=r||1;do{_=2*n()-1,w=2*n()-1,K=_*_+w*w}while(K>=1);do{I=2*n()-1,L=2*n()-1,X=I*I+L*L}while(X>=1);const J=Math.sqrt((1-K)/X);return e[0]=r*_,e[1]=r*w,e[2]=r*I*J,e[3]=r*L*J,e},round:function B(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e[3]=Math.round(r[3]),e},scale:Y,scaleAndAdd:function H(e,r,n,_){return e[0]=r[0]+n[0]*_,e[1]=r[1]+n[1]*_,e[2]=r[2]+n[2]*_,e[3]=r[3]+n[3]*_,e},set:N,sqrDist:f,sqrLen:C,squaredDistance:f,squaredLength:C,str:function a(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:z,subtract:z,transformMat4:o,transformQuat:function t(e,r,n){const _=r[0],w=r[1],I=r[2],L=n[0],K=n[1],X=n[2],J=n[3],G=J*_+K*I-X*w,$=J*w+X*_-L*I,q=J*I+L*w-K*_,ee=-L*_-K*w-X*I;return e[0]=G*J+ee*-L+$*-X-q*-K,e[1]=$*J+ee*-K+q*-L-G*-X,e[2]=q*J+ee*-X+G*-K-$*-L,e[3]=r[3],e}},Symbol.toStringTag,{value:"Module"}))},12225:(Q,Z,y)=>{function v(){return new Float32Array(3)}function A(s){const f=new Float32Array(3);return f[0]=s[0],f[1]=s[1],f[2]=s[2],f}function P(s,f,g){const C=new Float32Array(3);return C[0]=s,C[1]=f,C[2]=g,C}function D(){return v()}function z(){return P(1,1,1)}function W(){return P(1,0,0)}function x(){return P(0,1,0)}function V(){return P(0,0,1)}y.d(Z,{fA:()=>P,o8:()=>A,vt:()=>v});const j=D(),F=z(),k=W(),B=x(),Y=V();Object.freeze(Object.defineProperty({__proto__:null,ONES:F,UNIT_X:k,UNIT_Y:B,UNIT_Z:Y,ZEROS:j,clone:A,create:v,createView:function N(s,f){return new Float32Array(s,f,3)},fromValues:P,ones:z,unitX:W,unitY:x,unitZ:V,zeros:D},Symbol.toStringTag,{value:"Module"}))},89141:(Q,Z,y)=>{function v(){return[0,0,0,0]}function P(C,T,l,O){return[C,T,l,O]}function W(){return P(1,1,1,1)}function x(){return P(1,0,0,0)}function V(){return P(0,1,0,0)}function j(){return P(0,0,1,0)}function F(){return P(0,0,0,1)}y.d(Z,{fA:()=>P,vt:()=>v});const B=W(),Y=x(),H=V(),s=j(),f=F();Object.freeze(Object.defineProperty({__proto__:null,ONES:B,UNIT_W:f,UNIT_X:Y,UNIT_Y:H,UNIT_Z:s,ZEROS:[0,0,0,0],clone:function A(C){return[C[0],C[1],C[2],C[3]]},create:v,createView:function D(C,T){return new Float64Array(C,T,4)},fromArray:function N(C,T=[0,0,0,0]){const l=Math.min(4,C.length);for(let O=0;O<l;++O)T[O]=C[O];return T},fromValues:P,ones:W,unitW:F,unitX:x,unitY:V,unitZ:j,zeros:function z(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},26768:(Q,Z,y)=>{y.d(Z,{q:()=>V});var x,v=y(8189),A=y(71065),P=y(85211),W=(y(3248),y(35150),y(40707),y(76576));let V=x=class extends A.oY{constructor(){super(...arguments),this.title=null}clone(){return new x({title:this.title})}};(0,v._)([(0,P.MZ)({type:String,json:{write:!0}})],V.prototype,"title",void 0),V=x=(0,v._)([(0,W.$)("esri.renderers.support.LegendOptions")],V)},5236:(Q,Z,y)=>{y.d(Z,{A:()=>k});var j,v=y(8189),A=y(68677),P=y(71065),N=y(85211),D=y(55739),x=(y(40707),y(3248),y(76576)),V=y(50305);let F=j=class extends P.oY{constructor(B){super(B),this.color=null,this.label=null,this.value=null}writeValue(B,Y,H){Y[H]=null!=B?B:0}clone(){return new j({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,v._)([(0,N.MZ)({type:A.A,json:{type:[D.jz],write:!0}})],F.prototype,"color",void 0),(0,v._)([(0,N.MZ)({type:String,json:{write:!0}})],F.prototype,"label",void 0),(0,v._)([(0,N.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],F.prototype,"value",void 0),(0,v._)([(0,V.K)("value")],F.prototype,"writeValue",null),F=j=(0,v._)([(0,x.$)("esri.renderers.visualVariables.support.ColorStop")],F);const k=F},90192:(Q,Z,y)=>{y.r(Z),y.d(Z,{default:()=>R});var v=y(89952),A=y(79139),P=y(19890),N=y(14214),D=y(28714),z=y(12225),W=y(32034),x=y(23234),j=(y(3248),y(49873)),F=y(87862),k=y(87701),B=y(70787),Y=y(46835);function f(o,t,a){return null!=o&&o.attributeInfo.useElevation?t?function g(o,t){const a=new Float64Array(t);for(let i=0;i<t;i++)a[i]=o[3*i+2];return a}(t,a):null:null!=o&&o.attributeInfo.storageInfo?(0,B.m0)(o.attributeInfo.storageInfo,o.buffer,a):null}function T(o){switch(o){default:case null:case"none":return t=>t;case"low-four-bit":return t=>15&t;case"high-four-bit":return t=>(240&t)>>4;case"absolute-value":return t=>Math.abs(t);case"modulo-ten":return t=>t%10}}function l(o){let t=0;for(const a of o||[])t|=1<<a;return t}var O=y(19641);class S{transform(t){const a=this._transform(t),i=[a.points.buffer,a.rgb.buffer];null!=a.pointIdFilterMap&&i.push(a.pointIdFilterMap.buffer);for(const u of a.attributes)"buffer"in u.values&&(0,A.mw)(u.values.buffer)&&u.values.buffer!==a.rgb.buffer&&i.push(u.values.buffer);return Promise.resolve({result:a,transferList:i})}_transform(t){const a=function s(o,t){if(null==o.encoding||""===o.encoding){const a=(0,B.wH)(t,o);if(null==a.vertexAttributes.position)return;const i=(0,B.MA)(t,a.vertexAttributes.position),u=a.header.fields,d=[u.offsetX,u.offsetY,u.offsetZ],m=[u.scaleX,u.scaleY,u.scaleZ],h=i.length/3,M=new Float64Array(3*h);for(let c=0;c<h;c++)M[3*c]=i[3*c]*m[0]+d[0],M[3*c+1]=i[3*c+1]*m[1]+d[1],M[3*c+2]=i[3*c+2]*m[2]+d[2];return M}if("lepcc-xyz"===o.encoding)return(0,Y.Me)(t).result}(t.schema,t.geometryBuffer);let i=a.length/3,u=null;const d=new Array,m=f(t.primaryAttributeData,a,i);null!=t.primaryAttributeData&&m&&d.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:m});const h=f(t.modulationAttributeData,a,i);null!=t.modulationAttributeData&&h&&d.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:h});let M=function H(o,t,a,i){var u;const{rendererJSON:d,isRGBRenderer:m}=o;let h=null,M=null;if(t&&m)h=t;else if(t&&"pointCloudUniqueValueRenderer"===(null==d?void 0:d.type)){M=k.A.fromJSON(d);const c=M.colorUniqueValueInfos;h=new Uint8Array(3*i);const b=T(M.fieldTransformType);for(let p=0;p<i;p++){const U=(b?b(t[p]):t[p])+"";for(let e=0;e<c.length;e++)if(c[e].values.includes(U)){h[3*p]=c[e].color.r,h[3*p+1]=c[e].color.g,h[3*p+2]=c[e].color.b;break}}}else if(t&&"pointCloudStretchRenderer"===(null==d?void 0:d.type)){M=F.A.fromJSON(d);const c=M.stops;h=new Uint8Array(3*i);const b=T(M.fieldTransformType);for(let p=0;p<i;p++){const U=b?b(t[p]):t[p],e=c.length-1;if(U<c[0].value)h[3*p]=c[0].color.r,h[3*p+1]=c[0].color.g,h[3*p+2]=c[0].color.b;else if(U>=c[e].value)h[3*p]=c[e].color.r,h[3*p+1]=c[e].color.g,h[3*p+2]=c[e].color.b;else for(let r=1;r<c.length;r++)if(U<c[r].value){const n=(U-c[r-1].value)/(c[r].value-c[r-1].value);h[3*p]=c[r].color.r*n+c[r-1].color.r*(1-n),h[3*p+1]=c[r].color.g*n+c[r-1].color.g*(1-n),h[3*p+2]=c[r].color.b*n+c[r-1].color.b*(1-n);break}}}else if(t&&"pointCloudClassBreaksRenderer"===(null==d?void 0:d.type)){M=j.A.fromJSON(d);const c=M.colorClassBreakInfos;h=new Uint8Array(3*i);const b=T(M.fieldTransformType);for(let p=0;p<i;p++){const U=b?b(t[p]):t[p];for(let e=0;e<c.length;e++)if(U>=c[e].minValue&&U<=c[e].maxValue){h[3*p]=c[e].color.r,h[3*p+1]=c[e].color.g,h[3*p+2]=c[e].color.b;break}}}else h=new Uint8Array(3*i).fill(255);if(a&&null!==(u=M)&&void 0!==u&&u.colorModulation){const c=M.colorModulation.minValue,b=M.colorModulation.maxValue,p=.3;for(let U=0;U<i;U++){const e=a[U],r=e>=b?1:e<=c?p:p+(1-p)*(e-c)/(b-c);h[3*U]=r*h[3*U],h[3*U+1]=r*h[3*U+1],h[3*U+2]=r*h[3*U+2]}}return h}(t.rendererInfo,m,h,i);if(t.filterInfo&&t.filterInfo.length>0&&null!=t.filterAttributesData){const b=t.filterAttributesData.filter(v.Ru).map(p=>{const U=f(p,a,i),e={attributeInfo:p.attributeInfo,values:U};return d.push(e),e});u=new Uint32Array(i),i=function C(o,t,a,i,u){const d=o.length/3;let m=0;for(let h=0;h<d;h++){let M=!0;for(let c=0;c<i.length&&M;c++){const{filterJSON:b}=i[c],p=u[c].values[h];switch(b.type){case"pointCloudValueFilter":{const U="exclude"===b.mode;b.values.includes(p)===U&&(M=!1);break}case"pointCloudBitfieldFilter":{const U=l(b.requiredSetBits),e=l(b.requiredClearBits);(p&U)===U&&!(p&e)||(M=!1);break}case"pointCloudReturnFilter":{const U=15&p,e=p>>>4&15,r=e>1,n=1===U,_=U===e;let w=!1;for(const I of b.includedReturns)if("last"===I&&_||"firstOfMany"===I&&n&&r||"lastOfMany"===I&&_&&r||"single"===I&&!r){w=!0;break}w||(M=!1);break}}}M&&(a[m]=h,o[3*m]=o[3*h],o[3*m+1]=o[3*h+1],o[3*m+2]=o[3*h+2],t[3*m]=t[3*h],t[3*m+1]=t[3*h+1],t[3*m+2]=t[3*h+2],m++)}return m}(a,M,u,t.filterInfo,b)}for(const b of t.userAttributesData){const p=f(b,a,i);d.push({attributeInfo:b.attributeInfo,values:p})}3*i<M.length&&(M=new Uint8Array(M.buffer.slice(0,3*i))),this._applyElevationOffsetInPlace(a,i,t.elevationOffset);const c=this._transformCoordinates(a,i,O.ab.fromData(t.obbData),W.A.fromJSON(t.inSR),W.A.fromJSON(t.outSR));return{obbData:t.obbData,points:c,rgb:M,attributes:d,pointIdFilterMap:u}}_transformCoordinates(t,a,i,u,d){if(!(0,x.projectBuffer)(t,u,0,t,d,0,a))throw new Error("Can't reproject");const m=(0,z.o8)(i.center),h=(0,z.vt)(),M=(0,z.vt)(),c=(0,z.o8)(i.halfSize);(0,P.Xr)(E,i.quaternion);const b=new Float32Array(3*a);for(let p=0;p<a;p++){let U=3*p;h[0]=t[U]-m[0],h[1]=t[U+1]-m[1],h[2]=t[U+2]-m[2],(0,D.u)(M,h,E),c[0]=Math.max(c[0],Math.abs(M[0])),c[1]=Math.max(c[1],Math.abs(M[1])),c[2]=Math.max(c[2],Math.abs(M[2])),b[U++]=h[0],b[U++]=h[1],b[U]=h[2]}return i.halfSize=c,b}_applyElevationOffsetInPlace(t,a,i){if(0!==i)for(let u=0;u<a;u++)t[3*u+2]+=i}}const E=(0,N.vt)();function R(){return new S}},70787:(Q,Z,y)=>{y.d(Z,{MA:()=>F,m0:()=>l,wH:()=>s});var v=y(5922),A=y(77806),P=y(35150),N=y(46835),D=y(40972);const z=()=>P.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function W(o,t,a){let i="",u=0;for(;u<a;){const d=o[t+u];if(d<128)i+=String.fromCharCode(d),u++;else if(d>=192&&d<224){if(u+1>=a)throw new v.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");i+=String.fromCharCode((31&d)<<6|63&o[t+u+1]),u+=2}else if(d>=224&&d<240){if(u+2>=a)throw new v.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");i+=String.fromCharCode((15&d)<<12|(63&o[t+u+1])<<6|63&o[t+u+2]),u+=3}else{if(!(d>=240&&d<248))throw new v.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(u+3>=a)throw new v.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const m=(7&d)<<18|(63&o[t+u+1])<<12|(63&o[t+u+2])<<6|63&o[t+u+3];i+=m>=65536?String.fromCharCode(55296+(m-65536>>10),56320+(1023&m)):String.fromCharCode(m),u+=4}}}return i}function x(o,t){const a={byteOffset:0,byteCount:0,fields:Object.create(null)};let i=0;for(let u=0;u<t.length;u++){const d=t[u],m=d.valueType||d.type;a.fields[d.property]=(0,S[m])(o,i),i+=O[m].BYTES_PER_ELEMENT}return a.byteCount=i,a}function j(o,t,a){const i=[];let u,d,m=0;for(d=0;d<o;d+=1){if(u=t[d],u>0){if(i.push(W(a,m,u-1)),0!==a[m+u-1])throw new v.A("string-array-error","Invalid string array: missing null termination.")}else i.push(null);m+=u}return i}function F(o,t){return new O[t.valueType](o,t.byteOffset,t.count*t.valuesPerElement)}function Y(o,t,a){if(t!==o&&z().error(`Invalid ${a} buffer size\n expected: ${o}, actual: ${t})`),t<o)throw new v.A("buffer-too-small","Binary buffer is too small",{expectedSize:o,actualSize:t})}function s(o,t){const a=x(o,t&&t.header);let i=a.byteCount;const u={isDraco:!1,header:a,byteOffset:a.byteCount,byteCount:0,vertexAttributes:{}},d=a.fields,m=null!=d.vertexCount?d.vertexCount:d.count;for(const c of t.ordering){if(!t.vertexAttributes[c])continue;const b={...t.vertexAttributes[c],byteOffset:i,count:m};u.vertexAttributes[T[c]||"_"+c]=b,i+=R(b.valueType)*b.valuesPerElement*m}const h=d.faceCount;if(t.faces&&h){u.faces={};for(const c of t.ordering){if(!t.faces[c])continue;const b={...t.faces[c],byteOffset:i,count:h};u.faces[c]=b,i+=R(b.valueType)*b.valuesPerElement*h}}const M=d.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&M){u.featureAttributes={};for(const c of t.featureAttributeOrder){if(!t.featureAttributes[c])continue;const b={...t.featureAttributes[c],byteOffset:i,count:M};u.featureAttributes[c]=b,i+=("UInt64"===b.valueType?8:R(b.valueType))*b.valuesPerElement*M}}return Y(i,o.byteLength,"geometry"),u.byteCount=i-u.byteOffset,u}const T={position:D.r.POSITION,normal:D.r.NORMAL,color:D.r.COLOR,uv0:D.r.UV0,region:D.r.UVREGION};function l(o,t,a){if("lepcc-rgb"===o.encoding)return(0,N.mb)(t);if("lepcc-intensity"===o.encoding)return(0,N.Ax)(t);if(null!=o.encoding&&""!==o.encoding)throw new v.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");o["attributeByteCounts "]&&!o.attributeByteCounts&&(z().warn("Warning: Trailing space in 'attributeByteCounts '."),o.attributeByteCounts=o["attributeByteCounts "]),"ObjectIds"===o.ordering[0]&&o.hasOwnProperty("objectIds")&&(z().warn("Warning: Case error in objectIds"),o.ordering[0]="objectIds");const i=function B(o,t,a){const i=null!=t.header?x(o,t.header):{byteOffset:0,byteCount:0,fields:{count:a}},u={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let d=i.byteCount;for(let M=0;M<t.ordering.length;M++){var m,h;const c=t.ordering[M],b=(0,A.o8)(t[c]);if(b.count=null!==(m=i.fields.count)&&void 0!==m?m:0,"String"===b.valueType){if(b.byteOffset=d,b.byteCount=i.fields[c+"ByteCount"],"UTF-8"!==b.encoding)throw new v.A("unsupported-encoding","Unsupported String encoding.",{encoding:b.encoding});if(b.timeEncoding&&"ECMA_ISO8601"!==b.timeEncoding)throw new v.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:b.timeEncoding})}else{if(!E(b.valueType))throw new v.A("unsupported-value-type","Unsupported binary valueType",{valueType:b.valueType});{const p=R(b.valueType);d+=d%p!=0?p-d%p:0,b.byteOffset=d,b.byteCount=p*b.valuesPerElement*b.count}}d+=null!==(h=b.byteCount)&&void 0!==h?h:0,u.entries[c]=b}return u.byteCount=d-u.byteOffset,u}(t,o,a);Y(i.byteOffset+i.byteCount,t.byteLength,"attribute");const u=i.entries.attributeValues||i.entries.objectIds;if(u){if("String"===u.valueType){const d=i.entries.attributeByteCounts,m=F(t,d),h=function k(o,t){return new Uint8Array(o,t.byteOffset,t.byteCount)}(t,u);return u.timeEncoding?function V(o,t,a){return j(o,t,a).map(i=>{const u=i?Date.parse(i):null;return u&&!Number.isNaN(u)?u:null})}(d.count,m,h):j(d.count,m,h)}return F(t,u)}throw new v.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const O={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},S={Float32:(o,t)=>new DataView(o,0).getFloat32(t,!0),Float64:(o,t)=>new DataView(o,0).getFloat64(t,!0),UInt8:(o,t)=>new DataView(o,0).getUint8(t),Int8:(o,t)=>new DataView(o,0).getInt8(t),UInt16:(o,t)=>new DataView(o,0).getUint16(t,!0),Int16:(o,t)=>new DataView(o,0).getInt16(t,!0),UInt32:(o,t)=>new DataView(o,0).getUint32(t,!0),Int32:(o,t)=>new DataView(o,0).getInt32(t,!0)};function E(o){return O.hasOwnProperty(o)}function R(o){return E(o)?O[o].BYTES_PER_ELEMENT:0}},46835:(Q,Z,y)=>{y.d(Z,{Ax:()=>H,Me:()=>W,mb:()=>k});var v=y(5922);const A=!0,P={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function N(s,f,g){return{identifier:String.fromCharCode.apply(null,new Uint8Array(s,g+P.identifierOffset,P.identifierLength)),version:f.getUint16(g+P.versionOffset,A),checksum:f.getUint32(g+P.checksumOffset,A)}}const D={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function W(s){const f=new DataView(s,0);let g=0;const{identifier:C,version:T}=N(s,f,g);if(g+=P.byteCount,"LEPCC     "!==C)throw new v.A("lepcc-decode-error","Bad identifier");if(T>1)throw new v.A("lepcc-decode-error","Unknown version");const l=function z(s,f){return{sizeLo:s.getUint32(f+D.sizeLo,A),sizeHi:s.getUint32(f+D.sizeHi,A),minX:s.getFloat64(f+D.minX,A),minY:s.getFloat64(f+D.minY,A),minZ:s.getFloat64(f+D.minZ,A),maxX:s.getFloat64(f+D.maxX,A),maxY:s.getFloat64(f+D.maxY,A),maxZ:s.getFloat64(f+D.maxZ,A),errorX:s.getFloat64(f+D.errorX,A),errorY:s.getFloat64(f+D.errorY,A),errorZ:s.getFloat64(f+D.errorZ,A),count:s.getUint32(f+D.count,A),reserved:s.getUint32(f+D.reserved,A)}}(f,g);if(g+=D.byteCount,l.sizeHi*2**32+l.sizeLo!==s.byteLength)throw new v.A("lepcc-decode-error","Bad size");const O=new Float64Array(3*l.count),S=[],E=[],R=[],o=[];if(g=x(s,g,S),g=x(s,g,E),g=x(s,g,R),g=x(s,g,o),g!==s.byteLength)throw new v.A("lepcc-decode-error","Bad length");let t=0,a=0;for(let i=0;i<S.length;i++){a+=S[i];let u=0;for(let d=0;d<E[i];d++){u+=R[t];const m=o[t];O[3*t]=Math.min(l.maxX,l.minX+2*l.errorX*u),O[3*t+1]=Math.min(l.maxY,l.minY+2*l.errorY*a),O[3*t+2]=Math.min(l.maxZ,l.minZ+2*l.errorZ*m),t++}}return{errorX:l.errorX,errorY:l.errorY,errorZ:l.errorZ,result:O}}function x(s,f,g){const C=[];f=V(s,f,C);const T=[];for(let l=0;l<C.length;l++){T.length=0,f=V(s,f,T);for(let O=0;O<T.length;O++)g.push(T[O]+C[l])}return f}function V(s,f,g){const C=new DataView(s,f),T=C.getUint8(0),l=31&T,O=!!(32&T),S=(192&T)>>6;let E=0;if(0===S)E=C.getUint32(1,A),f+=5;else if(1===S)E=C.getUint16(1,A),f+=3;else{if(2!==S)throw new v.A("lepcc-decode-error","Bad count type");E=C.getUint8(1),f+=2}if(O)throw new v.A("lepcc-decode-error","LUT not implemented");const R=Math.ceil(E*l/8),o=new Uint8Array(s,f,R);let t=0,a=0,i=0;const u=-1>>>32-l;for(let d=0;d<E;d++){for(;a<l;)t|=o[i]<<a,a+=8,i+=1;g[d]=t&u,t>>>=l,a-=l,a+l>32&&(t|=o[i-1]>>8-a)}return f+i}const j={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function k(s){const f=new DataView(s,0);let g=0;const{identifier:C,version:T}=N(s,f,g);if(g+=P.byteCount,"ClusterRGB"!==C)throw new v.A("lepcc-decode-error","Bad identifier");if(T>1)throw new v.A("lepcc-decode-error","Unknown version");const l=function F(s,f){return{sizeLo:s.getUint32(f+j.sizeLo,A),sizeHi:s.getUint32(f+j.sizeHi,A),count:s.getUint32(f+j.count,A),colorMapCount:s.getUint16(f+j.colorMapCount,A),lookupMethod:s.getUint8(f+j.lookupMethod),compressionMethod:s.getUint8(f+j.compressionMethod)}}(f,g);if(g+=j.byteCount,l.sizeHi*2**32+l.sizeLo!==s.byteLength)throw new v.A("lepcc-decode-error","Bad size");if((2===l.lookupMethod||1===l.lookupMethod)&&0===l.compressionMethod){if(3*l.colorMapCount+l.count+g!==s.byteLength||l.colorMapCount>256)throw new v.A("lepcc-decode-error","Bad count");const O=new Uint8Array(s,g,3*l.colorMapCount),S=new Uint8Array(s,g+3*l.colorMapCount,l.count),E=new Uint8Array(3*l.count);for(let R=0;R<l.count;R++){const o=S[R];E[3*R]=O[3*o],E[3*R+1]=O[3*o+1],E[3*R+2]=O[3*o+2]}return E}if(0===l.lookupMethod&&0===l.compressionMethod){if(3*l.count+g!==s.byteLength||0!==l.colorMapCount)throw new v.A("lepcc-decode-error","Bad count");return new Uint8Array(s,g).slice()}if(l.lookupMethod<=2&&1===l.compressionMethod){if(g+3!==s.byteLength||1!==l.colorMapCount)throw new v.A("lepcc-decode-error","Bad count");const O=f.getUint8(g),S=f.getUint8(g+1),E=f.getUint8(g+2),R=new Uint8Array(3*l.count);for(let o=0;o<l.count;o++)R[3*o]=O,R[3*o+1]=S,R[3*o+2]=E;return R}throw new v.A("lepcc-decode-error","Bad method "+l.lookupMethod+","+l.compressionMethod)}const B={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function H(s){const f=new DataView(s,0);let g=0;const{identifier:C,version:T}=N(s,f,g);if(g+=P.byteCount,"Intensity "!==C)throw new v.A("lepcc-decode-error","Bad identifier");if(T>1)throw new v.A("lepcc-decode-error","Unknown version");const l=function Y(s,f){return{sizeLo:s.getUint32(f+B.sizeLo,A),sizeHi:s.getUint32(f+B.sizeHi,A),count:s.getUint32(f+B.count,A),scaleFactor:s.getUint16(f+B.scaleFactor,A),bitsPerPoint:s.getUint8(f+B.bitsPerPoint),reserved:s.getUint8(f+B.reserved)}}(f,g);if(g+=B.byteCount,l.sizeHi*2**32+l.sizeLo!==s.byteLength)throw new v.A("lepcc-decode-error","Bad size");const O=new Uint16Array(l.count);if(8===l.bitsPerPoint){if(l.count+g!==s.byteLength)throw new v.A("lepcc-decode-error","Bad size");const S=new Uint8Array(s,g,l.count);for(let E=0;E<l.count;E++)O[E]=S[E]*l.scaleFactor}else if(16===l.bitsPerPoint){if(2*l.count+g!==s.byteLength)throw new v.A("lepcc-decode-error","Bad size");const S=new Uint16Array(s,g,l.count);for(let E=0;E<l.count;E++)O[E]=S[E]*l.scaleFactor}else{const S=[];if(V(s,g,S)!==s.byteLength)throw new v.A("lepcc-decode-error","Bad size");for(let E=0;E<l.count;E++)O[E]=S[E]*l.scaleFactor}return O}}}]);