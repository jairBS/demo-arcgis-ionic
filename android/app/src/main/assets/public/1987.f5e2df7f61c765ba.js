"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1987],{53781:(Y,W,l)=>{l.d(W,{a:()=>P,b:()=>D,c:()=>w,e:()=>p,f:()=>O,g:()=>f,i:()=>L,j:()=>u,l:()=>s,n:()=>R,s:()=>C,t:()=>n});var m=l(85952);function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function C(e,t,r,a,i){return e[0]=t,e[1]=r,e[2]=a,e[3]=i,e}function O(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function j(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function I(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function S(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function D(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function U(e,t){const r=t[0]-e[0],a=t[1]-e[1],i=t[2]-e[2],c=t[3]-e[3];return Math.sqrt(r*r+a*a+i*i+c*c)}function b(e,t){const r=t[0]-e[0],a=t[1]-e[1],i=t[2]-e[2],c=t[3]-e[3];return r*r+a*a+i*i+c*c}function L(e){const t=e[0],r=e[1],a=e[2],i=e[3];return Math.sqrt(t*t+r*r+a*a+i*i)}function u(e){const t=e[0],r=e[1],a=e[2],i=e[3];return t*t+r*r+a*a+i*i}function R(e,t){const r=t[0],a=t[1],i=t[2],c=t[3];let d=r*r+a*a+i*i+c*c;return d>0&&(d=1/Math.sqrt(d),e[0]=r*d,e[1]=a*d,e[2]=i*d,e[3]=c*d),e}function f(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function s(e,t,r,a){const i=t[0],c=t[1],d=t[2],E=t[3];return e[0]=i+a*(r[0]-i),e[1]=c+a*(r[1]-c),e[2]=d+a*(r[2]-d),e[3]=E+a*(r[3]-E),e}function n(e,t,r){const a=t[0],i=t[1],c=t[2],d=t[3];return e[0]=r[0]*a+r[4]*i+r[8]*c+r[12]*d,e[1]=r[1]*a+r[5]*i+r[9]*c+r[13]*d,e[2]=r[2]*a+r[6]*i+r[10]*c+r[14]*d,e[3]=r[3]*a+r[7]*i+r[11]*c+r[15]*d,e}function P(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function p(e,t){const r=e[0],a=e[1],i=e[2],c=e[3],d=t[0],E=t[1],T=t[2],v=t[3],$=(0,m.FD)();return Math.abs(r-d)<=$*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-E)<=$*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-T)<=$*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(c-v)<=$*Math.max(1,Math.abs(c),Math.abs(v))}Object.freeze(Object.defineProperty({__proto__:null,add:O,ceil:function B(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:w,copyVec3:function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:U,distance:U,div:S,divide:S,dot:f,equals:p,exactEquals:P,floor:function A(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:L,length:L,lerp:s,max:function N(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},min:function K(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},mul:I,multiply:I,negate:function _(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:R,random:function o(e,t){const r=m.Ov;let a,i,c,d,E,T;t=t||1;do{a=2*r()-1,i=2*r()-1,E=a*a+i*i}while(E>=1);do{c=2*r()-1,d=2*r()-1,T=c*c+d*d}while(T>=1);const v=Math.sqrt((1-E)/T);return e[0]=t*a,e[1]=t*i,e[2]=t*c*v,e[3]=t*d*v,e},round:function F(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:D,scaleAndAdd:function q(e,t,r,a){return e[0]=t[0]+r[0]*a,e[1]=t[1]+r[1]*a,e[2]=t[2]+r[2]*a,e[3]=t[3]+r[3]*a,e},set:C,sqrDist:b,sqrLen:u,squaredDistance:b,squaredLength:u,str:function g(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:j,subtract:j,transformMat4:n,transformQuat:function h(e,t,r){const a=t[0],i=t[1],c=t[2],d=r[0],E=r[1],T=r[2],v=r[3],$=v*a+E*c-T*i,H=v*i+T*a-d*c,k=v*c+d*i-E*a,ee=-d*a-E*i-T*c;return e[0]=$*v+ee*-d+H*-T-k*-E,e[1]=H*v+ee*-E+k*-d-$*-T,e[2]=k*v+ee*-T+$*-E-H*-d,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},89141:(Y,W,l)=>{function m(){return[0,0,0,0]}function M(u,_,y,R){return[u,_,y,R]}function I(){return M(1,1,1,1)}function S(){return M(1,0,0,0)}function B(){return M(0,1,0,0)}function A(){return M(0,0,1,0)}function K(){return M(0,0,0,1)}l.d(W,{fA:()=>M,vt:()=>m});const F=I(),D=S(),q=B(),U=A(),b=K();Object.freeze(Object.defineProperty({__proto__:null,ONES:F,UNIT_W:b,UNIT_X:D,UNIT_Y:q,UNIT_Z:U,ZEROS:[0,0,0,0],clone:function w(u){return[u[0],u[1],u[2],u[3]]},create:m,createView:function O(u,_){return new Float64Array(u,_,4)},fromArray:function C(u,_=[0,0,0,0]){const y=Math.min(4,u.length);for(let R=0;R<y;++R)_[R]=u[R];return _},fromValues:M,ones:I,unitW:K,unitX:S,unitY:B,unitZ:A,zeros:function j(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},18219:(Y,W,l)=>{l.r(W),l.d(W,{default:()=>L});var m=l(10467),w=l(89447),M=l(5922),C=l(35150),O=l(56492),j=l(96996),I=l(58701),S=l(31732),B=l(64373),A=l(88840),K=l(40753),N=l(36761),F=l(51248),D=l(73650),q=l(73258),U=l(22639);const b="esri.layers.WFSLayer";class L{constructor(){this._customParameters=null,this._queryEngine=null,this._supportsPagination=!0}destroy(){var s;null!==(s=this._queryEngine)&&void 0!==s&&s.destroy(),this._queryEngine=null}load(s,o={}){var n=this;return(0,m.A)(function*(){const{getFeatureUrl:h,getFeatureOutputFormat:g,fields:P,geometryType:p,featureType:x,maxRecordCount:Q,maxTotalRecordCount:G,maxPageCount:V,objectIdField:Z,customParameters:X}=s,{spatialReference:z,getFeatureSpatialReference:J}=(0,D.UH)(h,x,s.spatialReference);try{yield(0,A.Nk)(J,z)}catch{throw new M.A("unsupported-projection","Projection not supported",{inSpatialReference:J,outSpatialReference:z})}(0,O.Te)(o),n._customParameters=X,n._featureType=x,n._fieldsIndex=q.A.fromLayerJSON({fields:P,dateFieldsTimeReference:P.some(t=>"esriFieldTypeDate"===t.type)?{timeZoneIANA:U.n$}:null}),n._geometryType=p,n._getFeatureUrl=h,n._getFeatureOutputFormat=g,n._getFeatureSpatialReference=J,n._maxRecordCount=Q,n._maxTotalRecordCount=G,n._maxPageCount=V,n._objectIdField=Z,n._spatialReference=z;let e=yield n._snapshotFeatures(o);if(e.errors.length>0&&(n._supportsPagination=!1,e=yield n._snapshotFeatures(o),e.errors.length>0))throw e.errors[0];return n._queryEngine=new K.d({fieldsIndex:n._fieldsIndex,geometryType:p,hasM:!1,hasZ:!1,objectIdField:Z,spatialReference:z,timeInfo:null,featureStore:new B.A({geometryType:p,hasM:!1,hasZ:!1})}),n._queryEngine.featureStore.addMany(e.features),{warnings:R(e),extent:(yield n._queryEngine.fetchRecomputedExtents()).fullExtent}})()}applyEdits(){return(0,m.A)(function*(){throw new M.A("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")})()}queryFeatures(s={},o={}){var n=this;return(0,m.A)(function*(){return yield n._waitSnapshotComplete(),n._queryEngine.executeQuery(s,o.signal)})()}queryFeatureCount(s={},o={}){var n=this;return(0,m.A)(function*(){return yield n._waitSnapshotComplete(),n._queryEngine.executeQueryForCount(s,o.signal)})()}queryObjectIds(s={},o={}){var n=this;return(0,m.A)(function*(){return yield n._waitSnapshotComplete(),n._queryEngine.executeQueryForIds(s,o.signal)})()}queryExtent(s={},o={}){var n=this;return(0,m.A)(function*(){return yield n._waitSnapshotComplete(),n._queryEngine.executeQueryForExtent(s,o.signal)})()}querySnapping(s,o={}){var n=this;return(0,m.A)(function*(){return yield n._waitSnapshotComplete(),n._queryEngine.executeQueryForSnapping(s,o.signal)})()}refresh(s){var o=this;return(0,m.A)(function*(){var n;return o._customParameters=s.customParameters,o._maxRecordCount=s.maxRecordCount,o._maxTotalRecordCount=s.maxTotalRecordCount,o._maxPageCount=s.maxPageCount,null!==(n=o._snapshotTask)&&void 0!==n&&n.abort(),o._snapshotTask=(0,w.UT)(h=>o._snapshotFeatures({signal:h})),o._snapshotTask.promise.then(h=>{var g;o._queryEngine.featureStore.clear(),o._queryEngine.featureStore.addMany(h.features);for(const P of R(h))C.A.getLogger(b).warn(new j.A("wfs-layer:refresh-warning",P.message,P.details));null!==(g=h.errors)&&void 0!==g&&g.length&&C.A.getLogger(b).warn(new j.A("wfs-layer:refresh-error","Refresh completed with errors",{errors:h.errors}))},()=>{o._queryEngine.featureStore.clear()}),yield o._waitSnapshotComplete(),{extent:(yield o._queryEngine.fetchRecomputedExtents()).fullExtent}})()}_waitSnapshotComplete(){var s=this;return(0,m.A)(function*(){if(s._snapshotTask&&!s._snapshotTask.finished){try{yield s._snapshotTask.promise}catch{}return s._waitSnapshotComplete()}})()}_snapshotFeatures(s){var o=this;return(0,m.A)(function*(){const n=null==s?void 0:s.signal,h=o._maxTotalRecordCount,g=o._maxPageCount,P=o._supportsPagination?yield(0,D.E)(o._getFeatureUrl,o._featureType.typeName,{customParameters:o._customParameters,signal:n}):void 0;let p=[];const x=[];if(null==P)try{p=yield o._singleQuery(n)}catch(Q){(0,O.zf)(Q)||x.push(Q)}else{const Q=Math.min(P,h),G=function*u(f,s,o){for(let n=0;n<s;n++)yield f._pageQuery(n,o)}(o,Math.max(1,Math.min(Math.ceil(Q/o._maxRecordCount),g)),n);yield Promise.allSettled(Array.from({length:10}).map(()=>function _(f,s,o){return y.apply(this,arguments)}(G,p,x)))}return(0,O.Te)(n),{features:p,totalRecordCount:P,maxTotalRecordCount:h,maxPageCount:g,errors:x}})()}_singleQuery(s){var o=this;return(0,m.A)(function*(){const n=yield(0,D.x$)(o._getFeatureUrl,o._featureType.typeName,o._getFeatureSpatialReference,o._getFeatureOutputFormat,{customParameters:o._customParameters,signal:s});return o._processGeoJSON(n,{signal:s})})()}_pageQuery(s,o){var n=this;return(0,m.A)(function*(){const h=s*n._maxRecordCount,g=yield(0,D.x$)(n._getFeatureUrl,n._featureType.typeName,n._getFeatureSpatialReference,n._getFeatureOutputFormat,{customParameters:n._customParameters,startIndex:h,count:n._maxRecordCount,signal:o});return n._processGeoJSON(g,{startIndex:h,signal:o})})()}_processGeoJSON(s,o){(0,N.sO)(s,this._getFeatureSpatialReference.wkid);const{startIndex:n,signal:h}=o;(0,O.Te)(h);const g=(0,N.bd)(s,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!(0,I.aI)(this._spatialReference,this._getFeatureSpatialReference))for(const p of g)null!=p.geometry&&(p.geometry=(0,S.Ux)((0,A.Cv)((0,S.zv)(p.geometry,this._geometryType,!1,!1),this._getFeatureSpatialReference,this._spatialReference)));let P=null!=n?n:1;for(const p of g){const x={};(0,F.MB)(this._fieldsIndex,x,p.attributes,!0),p.attributes=x,null==x[this._objectIdField]&&(p.objectId=x[this._objectIdField]=P++)}return g}}function y(){return(y=(0,m.A)(function*(f,s,o){let n=f.next();for(;!n.done;){try{const h=yield n.value;s.push(...h)}catch(h){(0,O.zf)(h)||o.push(h)}n=f.next()}})).apply(this,arguments)}function R(f){const s=[];return null!=f.totalRecordCount&&(f.features.length<f.totalRecordCount&&s.push({name:"wfs-layer:maxRecordCount-too-low",message:`Could only fetch ${f.features.length} of ${f.totalRecordCount} in ${f.maxPageCount} queries. Try increasing the value of WFSLayer.maxRecordCount.`,details:{recordCount:f.features.length,totalRecordCount:f.totalRecordCount}}),f.totalRecordCount>f.maxTotalRecordCount&&s.push({name:"wfs-layer:large-dataset",message:`The number of ${f.totalRecordCount} features exceeds the maximum allowed of ${f.maxTotalRecordCount}.`,details:{recordCount:f.features.length,totalRecordCount:f.totalRecordCount,maxTotalRecordCount:f.maxTotalRecordCount}})),s}},51248:(Y,W,l)=>{l.d(W,{$1:()=>b,CR:()=>D,MB:()=>K,Yx:()=>I,bP:()=>B});var m=l(10467),w=l(28250),M=l(58701),C=l(86300);class O{constructor(){this.code=null,this.description=null}}class j{constructor(_){this.error=new O,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=_}}function I(u){return new j(u)}class S{constructor(_){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=_}}function B(u){return new S(u)}const A=new Set;function K(u,_,y,R=!1){A.clear();for(const s in y){const o=u.get(s);if(!o)continue;const n=N(o,y[s]);if(A.add(o.name),o&&(R||o.editable)){const h=(0,C.CJ)(o,n);if(h)return I((0,C.uo)(h,o,n));_[o.name]=n}}for(const s of null!==(f=null==u?void 0:u.requiredFields)&&void 0!==f?f:[]){var f;if(!A.has(s.name))return I(`missing required field "${s.name}"`)}return null}function N(u,_){let y=_;return(0,C.WA)(u)&&"string"==typeof _?y=parseFloat(_):(0,C.yM)(u)&&null!=_&&"string"!=typeof _?y=String(_):(0,C.vE)(u)&&"string"==typeof _&&(y=(0,w._U)(_)),(0,C.WX)(y)}let F;function D(u,_){if(!u||!(0,M.fn)(_))return u;if("rings"in u||"paths"in u){if(null==F)throw new TypeError("geometry engine not loaded");return F.simplify(_,u)}return u}function U(){return(U=(0,m.A)(function*(){return null==F&&(F=yield Promise.all([l.e(3930),l.e(2076),l.e(2296)]).then(l.bind(l,27815))),F})).apply(this,arguments)}function b(u,_){return L.apply(this,arguments)}function L(){return L=(0,m.A)(function*(u,_){!(0,M.fn)(u)||"esriGeometryPolygon"!==_&&"esriGeometryPolyline"!==_||(yield function q(){return U.apply(this,arguments)}())}),L.apply(this,arguments)}}}]);