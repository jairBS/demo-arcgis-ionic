"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3290,93,9927,4098,3258],{99980:(X,F,i)=>{i.d(F,{A:()=>f});var _=i(8189),E=i(90660),K=i(71065),L=i(97442),W=i(85211),x=(i(3248),i(35150),i(40707),i(15463)),d=i(76576),c=i(26957);let p=class extends((0,E.O)(K.oY)){constructor(S){super(S),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,L.t)(this.value,this.unit,"milliseconds")}};(0,_._)([(0,x.e)(c.j,{nonNullable:!0})],p.prototype,"unit",void 0),(0,_._)([(0,W.MZ)({type:Number,json:{write:!0},nonNullable:!0})],p.prototype,"value",void 0),p=(0,_._)([(0,d.$)("esri.TimeInterval")],p);const f=p},33087:(X,F,i)=>{i.d(F,{q:()=>E});var _=i(60611);class E{constructor(L,W){this._storage=new _.F,this.id="",this.name="",this.size=0,this._storage.maxSize=L,this._storage.register(this),W&&this._storage.registerRemoveFunc("",W)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(L,W,R=1){this._storage.put(this,L,W,R,1)}pop(L){return this._storage.pop(this,L)}get(L){return this._storage.get(this,L)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(L){this._storage.maxSize=L}resetHitRate(){}}},60611:(X,F,i)=>{i.d(F,{F:()=>R,Mn:()=>W});var L,x,_=i(12438);(x=L||(L={}))[x.ALL=0]="ALL",x[x.SOME=1]="SOME";class W{constructor(d,c,p){this.name=d,this._storage=c,this.id=j+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),p&&(this._storage.registerRemoveFunc(this.id,p),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(d){return this._storage.getSize(this,d)}resetHitRate(){this._hit=this._miss=0}put(d,c,p,f=0){this._storage.put(this,d,c,p,f)}pop(d){const c=this._storage.pop(this,d);return void 0===c?++this._miss:++this._hit,c}get(d){const c=this._storage.get(this,d);return void 0===c?++this._miss:++this._hit,c}peek(d){return this._storage.peek(this,d)}updateSize(d,c,p){this._storage.updateSize(this,d,c,p)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class R{get size(){return this._size}constructor(d=10485760){this._maxSize=d,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new _.A,this._users=new _.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(d){this._users.push(d)}deregister(d){this._users.removeUnordered(d)}registerRemoveFunc(d,c){this._removeFuncs.push([d,c])}deregisterRemoveFunc(d){this._removeFuncs.filterInPlace(c=>c[0]!==d)}get maxSize(){return this._maxSize}set maxSize(d){this._maxSize=Math.max(d,-1),this._checkSize()}getSize(d,c){var p;const f=this._db.get(d.id+c);return null!==(p=null==f?void 0:f.size)&&void 0!==p?p:0}put(d,c,p,f,S){const o=this._db.get(c=d.id+c);if(o&&(this._size-=o.size,d.size-=o.size,this._db.delete(c),o.entry!==p&&this._notifyRemove(c,o.entry,o.size,L.ALL)),f>this._maxSize)return void this._notifyRemove(c,p,f,L.ALL);if(void 0===p)return void console.warn("Refusing to cache undefined entry ");if(!f||f<0)return console.warn(`Refusing to cache entry with size ${f} for key ${c}`),void this._notifyRemove(c,p,0,L.ALL);const y=1+Math.max(S,-4)- -3;this._db.set(c,new w(p,f,y)),this._size+=f,d.size+=f,this._checkSize()}updateSize(d,c,p,f){const S=this._db.get(c=d.id+c);if(S&&S.entry===p){for(this._size-=S.size,d.size-=S.size;f>this._maxSize;){const o=this._notifyRemove(c,p,f,L.SOME);if(!(null!=o&&o>0))return void this._db.delete(c);f=o}S.size=f,this._size+=f,d.size+=f,this._checkSize()}}pop(d,c){const p=this._db.get(c=d.id+c);if(p)return this._size-=p.size,d.size-=p.size,this._db.delete(c),++this._hit,p.entry;++this._miss}get(d,c){const p=this._db.get(c=d.id+c);if(void 0!==p)return this._db.delete(c),p.lives=p.lifetime,this._db.set(c,p),++this._hit,p.entry;++this._miss}peek(d,c){const p=this._db.get(d.id+c);return p?++this._hit:++this._miss,null==p?void 0:p.entry}get performanceInfo(){const d={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},c={},p=new Array;this._db.forEach((o,y)=>{const I=o.lifetime;p[I]=(p[I]||0)+o.size,this._users.forAll(A=>{const{id:P,name:T}=A;y.startsWith(P)&&(c[T]=(c[T]||0)+o.size)})});const f={};this._users.forAll(o=>{const y=o.name;"hitRate"in o&&"number"==typeof o.hitRate&&!isNaN(o.hitRate)&&o.hitRate>0?(c[y]=c[y]||0,f[y]=Math.round(100*o.hitRate)+"%"):f[y]="0%"});const S=Object.keys(c);S.sort((o,y)=>c[y]-c[o]),S.forEach(o=>d[o]=Math.round(c[o]/2**20)+"MB / "+f[o]);for(let o=p.length-1;o>=0;--o){const y=p[o];y&&(d["Priority "+(o+-3-1)]=Math.round(y/this._size*100)+"%")}return d}resetStats(){this._hit=this._miss=0,this._users.forAll(d=>d.resetHitRate())}clear(d){const c=d.id;this._db.forEach((p,f)=>{f.startsWith(c)&&(this._size-=p.size,this._db.delete(f),this._notifyRemove(f,p.entry,p.size,L.ALL))}),d.size=0}clearAll(){this._db.forEach((d,c)=>this._notifyRemove(c,d.entry,d.size,L.ALL)),this._users.forAll(d=>d.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(d,c,p,f){let S;return this._removeFuncs.some(o=>{if(d.startsWith(o[0])){const y=o[1](c,f,p);return"number"==typeof y&&(S=y),!0}return!1}),S}_checkSize(){this._users.forAll(d=>this._checkSizeLimits(d)),this._checkSizeLimits()}_checkSizeLimits(d){const c=null!=d?d:this;if(c.maxSize<0||c.size<=c.maxSize)return;const p=null==d?void 0:d.id;let f=!0;for(;f;){f=!1;for(const[S,o]of this._db)if(0===o.lifetime&&(!p||S.startsWith(p))){if(this._purgeItem(S,o,d),c.size<=.9*c.maxSize)return;f||(f=this._db.has(S))}}for(const[S,o]of this._db)if((!p||S.startsWith(p))&&(this._purgeItem(S,o,d),c.size<=.9*c.maxSize))return}_purgeItem(d,c,p=this._users.find(f=>d.startsWith(f.id))){if(this._db.delete(d),c.lives<=1){this._size-=c.size,p&&(p.size-=c.size);const f=this._notifyRemove(d,c.entry,c.size,L.SOME);null!=f&&f>0&&(this._size+=f,p&&(p.size+=f),c.lives=c.lifetime,c.size=f,this._db.set(d,c))}else--c.lives,this._db.set(d,c)}}let j=0;class w{constructor(d,c,p){this.entry=d,this.size=c,this.lifetime=p,this.lives=p}}},24098:(X,F,i)=>{i.d(F,{GB:()=>E,Qo:()=>L,Y4:()=>K});var _=i(44549);class E{}function K(R){return R instanceof _.bo?R===E.instance:"unknown"===(null==R?void 0:R.toString().toLowerCase())}function L(R){return K(R)?E.instance:R}E.instance=new _.oh("Etc/UTC")},721:(X,F,i)=>{i.d(F,{$X:()=>se,Gy:()=>m,P5:()=>_e,SW:()=>re,Tr:()=>ie,VV:()=>R}),i(61320);const K=(v,h,D)=>[h,D],L=(v,h,D)=>[h,D,v[2]],W=(v,h,D)=>[h,D,v[2],v[3]];function R(v){return v?{originPosition:"upper-left"===v.originPosition?"upperLeft":"lower-left"===v.originPosition?"lowerLeft":v.originPosition,scale:v.tolerance?[v.tolerance,v.tolerance]:[1,1],translate:null!=v.extent?[v.extent.xmin,v.extent.ymax]:[0,0]}:null}function o({scale:v,translate:h},D){return D*v[0]+h[0]}function y({scale:v,translate:h},D){return h[1]-D*v[1]}function I(v,h,D){const Z=new Array(D.length);if(!D.length)return Z;const[N,Q]=v.scale;let q=o(v,D[0][0]),ee=y(v,D[0][1]);Z[0]=h(D[0],q,ee);for(let ae=1;ae<D.length;ae++){const oe=D[ae];q+=oe[0]*N,ee-=oe[1]*Q,Z[ae]=h(oe,q,ee)}return Z}function A(v,h,D){const Z=new Array(D.length);for(let N=0;N<D.length;N++)Z[N]=I(v,h,D[N]);return Z}function m(v,h,D,Z,N){return h.x=function w({scale:v,translate:h},D){return Math.round((D-h[0])/v[0])}(v,D.x),h.y=function x({scale:v,translate:h},D){return Math.round((h[1]-D)/v[1])}(v,D.y),h!==D&&(Z&&(h.z=D.z),N&&(h.m=D.m)),h}function re(v,h,D,Z,N){return null!=D&&(h.points=function T(v,h,D,Z){return I(v,D?Z?W:L:Z?L:K,h)}(v,D.points,Z,N)),h}function ie(v,h,D,Z,N){return null==D||(h.x=o(v,D.x),h.y=y(v,D.y),h!==D&&(Z&&(h.z=D.z),N&&(h.m=D.m))),h}function se(v,h,D,Z,N){return null!=D&&(h.rings=function G(v,h,D,Z){return A(v,D?Z?W:L:Z?L:K,h)}(v,D.rings,Z,N)),h}function _e(v,h,D,Z,N){return null!=D&&(h.paths=function z(v,h,D,Z){return A(v,D?Z?W:L:Z?L:K,h)}(v,D.paths,Z,N)),h}},19373:(X,F,i)=>{i.r(F),i.d(F,{default:()=>Le});var pe,_=i(10467),E=i(8189),L=(i(21152),i(92165)),f=(i(79122),i(70176),i(92089),i(9826),i(15317),i(38582),i(73747),i(13318),i(85718)),S=i(36156),o=i(89563),y=i(90660),I=i(5922),A=i(17715),P=i(77806),T=i(35150),z=i(39693),G=i(56492),O=i(85211),b=i(55739),ne=i(17221),Y=i(76576),V=i(6434),g=i(95478),M=i(25936),m=i(93410),C=i(23e3),U=i(31446),$=i(61495),k=i(17049),re=i(85551),ie=i(1151),se=i(33036),_e=i(84311),v=i(81687),h=i(47516),D=i(29141),Z=i(3404),N=i(86300),Q=i(20329),q=i(73975),ee=i(71065);i(3248),i(40707);let ce=pe=class extends ee.oY{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new pe({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,E._)([(0,O.MZ)({type:Number,json:{write:!0}})],ce.prototype,"age",void 0),(0,E._)([(0,O.MZ)({type:Number,json:{write:!0}})],ce.prototype,"ageReceived",void 0),(0,E._)([(0,O.MZ)({type:Number,json:{write:!0}})],ce.prototype,"displayCount",void 0),(0,E._)([(0,O.MZ)({type:Number,json:{write:!0}})],ce.prototype,"maxObservations",void 0),ce=pe=(0,E._)([(0,Y.$)("esri.layers.support.PurgeOptions")],ce);const ye=ce;var Oe=i(8691),Ie=i(87086),De=i(41843),Se=i(88485),he=i(71655),Me=i(32034),Ae=i(28067);const ge=(0,Z.p)();function Pe(J,B){return new I.A("layer:unsupported",`Layer (${J.title}, ${J.id}) of type '${J.declaredClass}' ${B}`,{layer:J})}let H=class extends((0,$.J)((0,U.F)((0,m.d)((0,_e.e)((0,se.j)((0,ie.J)((0,M.b)((0,k.q)((0,re.A)((0,z.P)((0,C.d)((0,y.O)(g.A))))))))))))){constructor(...J){var B;super(...J),B=this,this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new ye,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=Me.A.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,G.sg)(function(){var te=(0,_.A)(function*(le,de,ue){const{save:me,saveAs:fe}=yield Promise.all([i.e(2076),i.e(5994)]).then(i.bind(i,4069));switch(le){case he.X.SAVE:return me(B,de);case he.X.SAVE_AS:return fe(B,ue,de)}});return function(le,de,ue){return te.apply(this,arguments)}}())}normalizeCtorArgs(J,B){return"string"==typeof J?{url:J,...B}:J}load(J){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new I.A("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const B=null!=J?J.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},J).catch(G.QP).then(()=>this._fetchService(B))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(J){const B=this._normalizeFeatureReduction(J);this._set("featureReduction",B)}set renderer(J){(0,N.yp)(J,this.fieldsIndex),this._set("renderer",J)}readRenderer(J,B,te){var le;const de=null===(le=(B=B.layerDefinition||B).drawingInfo)||void 0===le?void 0:le.renderer;if(de){const ue=(0,f.L)(de,B,te)||void 0;return ue||T.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:B.drawingInfo.renderer,layer:this,context:te}),ue}return(0,h.PD)(B,te)}connect(J){var B=this;return(0,_.A)(function*(){const[{createConnection:te}]=yield Promise.all([Promise.all([i.e(8304),i.e(2190),i.e(8846)]).then(i.bind(i,69809)),B.load()]),le=B.geometryType?V.g.toJSON(B.geometryType):null,{customParameters:de=null,definitionExpression:ue=null,geometryDefinition:me=null,maxReconnectionAttempts:fe=0,maxReconnectionInterval:Re=20,spatialReference:Te=B.spatialReference}=J||B.createConnectionParameters(),ve=te(B.parsedUrl,B.spatialReference,Te,le,ue,me,fe,Re,null!=de?de:void 0),xe=(0,A.vE)([B.on("send-message-to-socket",Ee=>ve.sendMessageToSocket(Ee)),B.on("send-message-to-client",Ee=>ve.sendMessageToClient(Ee))]);return ve.once("destroy",xe.remove),ve})()}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(J){return(0,De.tn)(this,J)}createQuery(){const J=new Ie.A;return J.returnGeometry=!0,J.outFields=["*"],J.where=this.definitionExpression||"1=1",J}getFieldDomain(J,B){if(!this.fields)return null;let te=null;return this.fields.some(le=>(le.name===J&&(te=le.domain),!!te)),te}getField(J){return this.fieldsIndex.get(J)}serviceSupportsSpatialReference(J){return!0}sendMessageToSocket(J){this.emit("send-message-to-socket",J)}sendMessageToClient(J){this.emit("send-message-to-client",J)}save(J){var B=this;return(0,_.A)(function*(){return B._debouncedSaveOperations(he.X.SAVE,J)})()}saveAs(J,B){var te=this;return(0,_.A)(function*(){return te._debouncedSaveOperations(he.X.SAVE_AS,B,J)})()}write(J,B){const te=null==B?void 0:B.messages;return this.webSocketUrl?(null!=te&&te.push(Pe(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(J,B):(null!=te&&te.push(Pe(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}_fetchService(J){var B=this;return(0,_.A)(function*(){var te;if(!B.webSocketUrl&&B.parsedUrl){if(!B.sourceJSON){const{data:ue}=yield(0,o.A)(B.parsedUrl.path,{query:{f:"json",...B.customParameters,...B.parsedUrl.query},responseType:"json",signal:J});B.sourceJSON=ue}}else{var le;if(null===(le=B.timeInfo)||void 0===le||!le.trackIdField)throw new I.A("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!B.objectIdField){var de;const ue=null===(de=B.fields.find(me=>"oid"===me.type))||void 0===de?void 0:de.name;if(!ue)throw new I.A("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");B.objectIdField=ue}if(!B.fields)throw new I.A("stream-layer:missing-metadata","The stream layer fields must be specified.");if(B.fields.some(ue=>ue.name===B.objectIdField)||B.fields.push(new D.A({name:B.objectIdField,alias:B.objectIdField,type:"oid"})),!B.geometryType)throw new I.A("stream-layer:missing-metadata","The stream layer geometryType must be specified.");B.webSocketUrl&&(B.url=B.webSocketUrl)}return B.read(B.sourceJSON,{origin:"service",portalItem:B.portalItem,portal:null===(te=B.portalItem)||void 0===te?void 0:te.portal,url:B.parsedUrl}),(0,N.yp)(B.renderer,B.fieldsIndex),(0,N.sv)(B.timeInfo,B.fieldsIndex),B.objectIdField||(B.objectIdField="__esri_stream_id__"),(0,Oe.L)(B,{origin:"service"})})()}};(0,E._)([(0,O.MZ)({type:String})],H.prototype,"copyright",void 0),(0,E._)([(0,O.MZ)({readOnly:!0})],H.prototype,"defaultPopupTemplate",null),(0,E._)([(0,O.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],H.prototype,"definitionExpression",void 0),(0,E._)([(0,O.MZ)({type:String})],H.prototype,"displayField",void 0),(0,E._)([(0,O.MZ)({type:Se.A})],H.prototype,"elevationInfo",void 0),(0,E._)([(0,O.MZ)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],H.prototype,"featureReduction",null),(0,E._)([(0,O.MZ)(ge.fields)],H.prototype,"fields",void 0),(0,E._)([(0,O.MZ)(ge.fieldsIndex)],H.prototype,"fieldsIndex",void 0),(0,E._)([(0,O.MZ)({type:Ae.A,json:{name:"layerDefinition.definitionGeometry",write:!0}})],H.prototype,"geometryDefinition",void 0),(0,E._)([(0,O.MZ)({type:V.g.apiValues,json:{read:{reader:V.g.read}}})],H.prototype,"geometryType",void 0),(0,E._)([(0,O.MZ)(v.kF)],H.prototype,"labelsVisible",void 0),(0,E._)([(0,O.MZ)({type:[Q.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:q.w},write:!0}})],H.prototype,"labelingInfo",void 0),(0,E._)([(0,O.MZ)(v.fV)],H.prototype,"legendEnabled",void 0),(0,E._)([(0,O.MZ)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],H.prototype,"listMode",void 0),(0,E._)([(0,O.MZ)({type:b.jz})],H.prototype,"maxReconnectionAttempts",void 0),(0,E._)([(0,O.MZ)({type:b.jz})],H.prototype,"maxReconnectionInterval",void 0),(0,E._)([(0,O.MZ)(v.hG)],H.prototype,"maxScale",void 0),(0,E._)([(0,O.MZ)(v.hn)],H.prototype,"minScale",void 0),(0,E._)([(0,O.MZ)({type:String})],H.prototype,"objectIdField",void 0),(0,E._)([(0,O.MZ)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],H.prototype,"operationalLayerType",void 0),(0,E._)([(0,O.MZ)({readOnly:!0})],H.prototype,"outFields",void 0),(0,E._)([(0,O.MZ)(v.M6)],H.prototype,"popupEnabled",void 0),(0,E._)([(0,O.MZ)({type:L.A,json:{name:"popupInfo",write:!0}})],H.prototype,"popupTemplate",void 0),(0,E._)([(0,O.MZ)({type:ye})],H.prototype,"purgeOptions",void 0),(0,E._)([(0,O.MZ)({json:{read:!1,write:!1}})],H.prototype,"refreshInterval",void 0),(0,E._)([(0,O.MZ)({types:S.H,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:S.X,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],H.prototype,"renderer",null),(0,E._)([(0,ne.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,ne.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],H.prototype,"readRenderer",null),(0,E._)([(0,O.MZ)((()=>{const J=(0,P.o8)(v.PY);return J.json.origins["portal-item"]={read:!1,write:!1},J})())],H.prototype,"screenSizePerspectiveEnabled",void 0),(0,E._)([(0,O.MZ)()],H.prototype,"sourceJSON",void 0),(0,E._)([(0,O.MZ)({type:Me.A,json:{origins:{service:{read:{source:"spatialReference"}}}}})],H.prototype,"spatialReference",void 0),(0,E._)([(0,O.MZ)({json:{read:!1}})],H.prototype,"type",void 0),(0,E._)([(0,O.MZ)(v.OZ)],H.prototype,"url",void 0),(0,E._)([(0,O.MZ)({type:Number})],H.prototype,"updateInterval",void 0),(0,E._)([(0,O.MZ)({json:{read:!1,write:!1}})],H.prototype,"useViewTime",void 0),(0,E._)([(0,O.MZ)({type:String})],H.prototype,"webSocketUrl",void 0),H=(0,E._)([(0,Y.$)("esri.layers.StreamLayer")],H);const Le=H},72211:(X,F,i)=>{i.d(F,{LF:()=>W,M9:()=>R,zu:()=>d});var _=i(5922),E=i(89221),K=i(79845),L=i(26073);function W(f,S,o){try{return function w(f){if(!f||0===f.length)return null;if(function x(f){const S=f[0];return!!S&&"scale"in S}(f)){const S=[];for(const o of f)S.push({scale:o.scale,value:d(o.value)});return S}return d(f)}(f)}catch(I){var y;null==o||null===(y=o.messages)||void 0===y||y.push(I)}return null}function R(f,S,o,y){try{const I=function j(f){const S=(0,K.q)(f);return S?(0,L.dw)(S)?S.map(o=>o.toJSON()):S.map(({scale:o,effects:y})=>({scale:o,value:y.map(I=>I.toJSON())})):null}(f);(0,E.sM)(o,I,S)}catch(I){y.messages&&y.messages.push(I)}}function d(f){if(null==f||!f.length)return"";const S=[];for(const o of f){let y=[];switch(o.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":y=[c(o,"amount")];break;case"blur":y=[c(o,"radius","pt")];break;case"hue-rotate":y=[c(o,"angle","deg")];break;case"drop-shadow":y=[c(o,"xoffset","pt"),c(o,"yoffset","pt"),c(o,"blurRadius","pt"),p(o,"color")];break;case"bloom":y=[c(o,"strength"),c(o,"radius","pt"),c(o,"threshold")]}const I=`${o.type}(${y.filter(Boolean).join(" ")})`;(0,K.q)(I),S.push(I)}return S.join(" ")}function c(f,S,o){if(null==f[S])throw new _.A("effect:missing-parameter",`Missing parameter '${S}' in ${f.type} effect`,{effect:f});return o?f[S]+o:""+f[S]}function p(f,S){if(null==f[S])throw new _.A("effect:missing-parameter",`Missing parameter '${S}' in ${f.type} effect`,{effect:f});const o=f[S];return`rgba(${o[0]||0}, ${o[1]||0}, ${o[2]||0}, ${o[3]/255||0})`}},25936:(X,F,i)=>{i.d(F,{b:()=>w});var _=i(8189),E=i(35150),K=i(85211),R=(i(3248),i(40707),i(76576)),j=i(68438);const w=x=>{let d=class extends x{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const c=(0,j.qg)(this.url);if(null!=c&&c.title)return c.title}return this._get("title")||""}set title(c){this._set("title",c)}set url(c){this._set("url",(0,j.Jf)(c,E.A.getLogger(this)))}};return(0,_._)([(0,K.MZ)()],d.prototype,"title",null),(0,_._)([(0,K.MZ)({type:String})],d.prototype,"url",null),d=(0,_._)([(0,R.$)("esri.layers.mixins.ArcGISService")],d),d}},93410:(X,F,i)=>{i.d(F,{d:()=>x});var _=i(8189),E=i(85211),R=(i(3248),i(35150),i(40707),i(76576)),j=i(72211);const w={read:{reader:j.LF},write:{allowNull:!0,writer:j.M9}},x=d=>{let c=class extends d{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,_._)([(0,E.MZ)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],c.prototype,"blendMode",void 0),(0,_._)([(0,E.MZ)({json:{read:!1,write:!1,origins:{"web-map":w,"portal-item":w}}})],c.prototype,"effect",void 0),c=(0,_._)([(0,R.$)("esri.layers.mixins.BlendLayer")],c),c}},23e3:(X,F,i)=>{i.d(F,{d:()=>j});var _=i(8189),E=i(85211),R=(i(3248),i(35150),i(40707),i(76576));const j=w=>{let x=class extends w{constructor(){super(...arguments),this.customParameters=null}};return(0,_._)([(0,E.MZ)({type:Object,json:{write:{overridePolicy:d=>({enabled:!!(d&&Object.keys(d).length>0)})}}})],x.prototype,"customParameters",void 0),x=(0,_._)([(0,R.$)("esri.layers.mixins.CustomParametersMixin")],x),x}},31446:(X,F,i)=>{i.d(F,{F:()=>x});var _=i(8189),E=i(85211),R=(i(3248),i(35150),i(40707),i(76576)),j=i(66722);const w={write:{allowNull:!0}},x=d=>{let c=class extends d{constructor(){super(...arguments),this.featureEffect=null}};return(0,_._)([(0,E.MZ)({type:j.A,json:{origins:{"web-map":w,"portal-item":w}}})],c.prototype,"featureEffect",void 0),c=(0,_._)([(0,R.$)("esri.layers.mixins.FeatureEffectLayer")],c),c}},85551:(X,F,i)=>{i.d(F,{A:()=>O});var _=i(10467),E=i(8189),K=i(23098),L=i(77469),W=i(89563),R=i(89447),j=i(5922),w=i(35150),x=i(11432),d=i(56492),c=i(45272),p=i(85211),o=(i(3248),i(40707),i(17221)),y=i(76576),I=i(50305),A=i(58443),P=i(73874),T=i(46577),z=i(52606),G=i(69927);const O=ne=>{let Y=class extends ne{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,x.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(V){V!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",V))}readPortalItem(V,g,M){if(g.itemId)return new T.default({id:g.itemId,portal:null==M?void 0:M.portal})}writePortalItem(V,g){null!=V&&V.id&&(g.itemId=V.id)}loadFromPortal(V,g){var M=this;return(0,_.A)(function*(){var m;if(null!==(m=M.portalItem)&&void 0!==m&&m.id)try{const{load:C}=yield Promise.all([i.e(5565),i.e(2076),i.e(6180)]).then(i.bind(i,56180));return(0,d.Te)(g),yield C({instance:M,supportedTypes:V.supportedTypes,validateItem:V.validateItem,supportsData:V.supportsData,layerModuleTypeMap:V.layerModuleTypeMap},g)}catch(C){throw(0,d.zf)(C)||w.A.getLogger(M).warn(`Failed to load layer (${M.title}, ${M.id}) portal item (${M.portalItem.id})\n  ${C}`),C}})()}finishLoadEditablePortalLayer(V){var g=this;return(0,_.A)(function*(){g._set("userHasEditingPrivileges",yield g._fetchUserHasEditingPrivileges(V).catch(M=>((0,d.QP)(M),!0)))})()}setUserPrivileges(V,g){var M=this;return(0,_.A)(function*(){if(!K.A.userPrivilegesApplied)return M.finishLoadEditablePortalLayer(g);if(M.url)try{const{features:{edit:m,fullEdit:C},content:{updateItem:U}}=yield M._fetchUserPrivileges(V,g);M._set("userHasEditingPrivileges",m),M._set("userHasFullEditingPrivileges",C),M._set("userHasUpdateItemPrivileges",U)}catch(m){(0,d.QP)(m)}})()}_fetchUserPrivileges(V,g){var M=this;return(0,_.A)(function*(){let m=M.portalItem;if(!V||!m||!m.loaded||m.sourceUrl)return M._fetchFallbackUserPrivileges(g);const C=V===m.id;if(C&&m.portal.user)return(0,G.It)(m);let U,$;if(C)U=m.portal.url;else try{U=yield(0,A.wI)(M.url,g)}catch(se){(0,d.QP)(se)}if(!U||!(0,c.b8)(U,m.portal.url))return M._fetchFallbackUserPrivileges(g);try{const se=null!=g?g.signal:null;$=yield null==L.id?void 0:L.id.getCredential(`${U}/sharing`,{prompt:!1,signal:se})}catch(se){(0,d.QP)(se)}if(!$)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(C?yield m.reload():(m=new T.default({id:V,portal:{url:U}}),yield m.load(g)),m.portal.user)return(0,G.It)(m)}catch(se){(0,d.QP)(se)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(V){var g=this;return(0,_.A)(function*(){let M=!0;try{M=yield g._fetchUserHasEditingPrivileges(V)}catch(m){(0,d.QP)(m)}return{features:{edit:M,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(V){var g=this;return(0,_.A)(function*(){const M=g.url?null==L.id?void 0:L.id.findCredential(g.url):null;if(!M)return!0;const m=b.credential===M?b.user:yield g._fetchEditingUser(V);return b.credential=M,b.user=m,null==(null==m?void 0:m.privileges)||m.privileges.includes("features:user:edit")})()}_fetchEditingUser(V){var g=this;return(0,_.A)(function*(){var M,m;const C=null===(M=g.portalItem)||void 0===M||null===(M=M.portal)||void 0===M?void 0:M.user;if(C)return C;const U=L.id.findServerInfo(null!==(m=g.url)&&void 0!==m?m:"");if(null==U||!U.owningSystemUrl)return null;const $=`${U.owningSystemUrl}/sharing/rest`,k=P.A.getDefault();if(k&&k.loaded&&(0,c.S8)(k.restUrl)===(0,c.S8)($))return k.user;const re=`${$}/community/self`,ie=null!=V?V.signal:null,se=yield(0,R.Ke)((0,W.A)(re,{authMode:"no-prompt",query:{f:"json"},signal:ie}));return se.ok?z.A.fromJSON(se.value.data):null})()}read(V,g){g&&(g.layer=this),super.read(V,g)}write(V,g){var M;const m=null==g?void 0:g.portal,C=(null===(M=this.portalItem)||void 0===M?void 0:M.id)&&(this.portalItem.portal||P.A.getDefault());return m&&C&&!(0,c.ut)(C.restUrl,m.restUrl)?(g.messages&&g.messages.push(new j.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(V,{...g,layer:this})}};return(0,E._)([(0,p.MZ)({type:T.default})],Y.prototype,"portalItem",null),(0,E._)([(0,o.w)("web-document","portalItem",["itemId"])],Y.prototype,"readPortalItem",null),(0,E._)([(0,I.K)("web-document","portalItem",{itemId:{type:String}})],Y.prototype,"writePortalItem",null),(0,E._)([(0,p.MZ)({clonable:!1})],Y.prototype,"resourceReferences",void 0),(0,E._)([(0,p.MZ)({type:Boolean,readOnly:!0})],Y.prototype,"userHasEditingPrivileges",void 0),(0,E._)([(0,p.MZ)({type:Boolean,readOnly:!0})],Y.prototype,"userHasFullEditingPrivileges",void 0),(0,E._)([(0,p.MZ)({type:Boolean,readOnly:!0})],Y.prototype,"userHasUpdateItemPrivileges",void 0),Y=(0,E._)([(0,y.$)("esri.layers.mixins.PortalLayer")],Y),Y},b={credential:null,user:null}},1151:(X,F,i)=>{i.d(F,{J:()=>g});var _=i(10467),E=i(8189),K=i(35150),L=i(56492),W=i(85211),R=i(48669),x=(i(40707),i(3248),i(76576)),d=i(50501),c=i(31178),o=(i(89447),i(5922),i(76410),i(34703));const y=new c.A,I=new WeakMap;function z(M,m){return Number.isFinite(M)&&Number.isFinite(m)?m<=0?M:z(m,M%m):0}let G=0,O=0;function b(){const M=Date.now();let m=!1;for(const U of y){const $=U.deref();var C;$?$.refreshInterval&&M-(null!==(C=I.get($))&&void 0!==C?C:0)+5>=6e4*$.refreshInterval&&(I.set($,M),$.refresh(M)):m=!0}if(m)for(let U=y.length-1;U>=0;U--)y.at(U).deref()||y.removeAt(U)}(0,o.fm)(()=>{const M=Date.now();let m=0;for(const C of y){const U=C.deref();U&&(m=z(Math.round(6e4*U.refreshInterval),m),U.refreshInterval?I.get(U)||I.set(U,M):I.delete(U))}if(m!==O){if(O=m,clearInterval(G),0===O)return void(G=0);G=setInterval(b,O)}});const g=M=>{let m=class extends M{constructor(...C){super(...C),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,L.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function A(M){(function T(M){return null!=M&&"object"==typeof M&&"refreshInterval"in M&&"refresh"in M})(M)&&y.push(new WeakRef(M))}(this)},()=>{})}destroy(){!function P(M){const m=y.find(C=>C.deref()===M);m&&y.remove(m)}(this)}castRefreshInterval(C){return C>=.1?C:C<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(C=Date.now()){(0,L.QZ)(this._debounceHasDataChanged()).then(U=>{U&&this._set("refreshTimestamp",C),this.emit("refresh",{dataChanged:U})},U=>{K.A.getLogger(this).error(U),this.emit("refresh",{dataChanged:!1,error:U})})}hasDataChanged(){return(0,_.A)(function*(){return!0})()}get test(){const C=this;return{set refreshInterval(U){C._set("refreshInterval",U)}}}};return(0,E._)([(0,W.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:d.K}}}}})],m.prototype,"refreshInterval",void 0),(0,E._)([(0,R.w)("refreshInterval")],m.prototype,"castRefreshInterval",null),(0,E._)([(0,W.MZ)({readOnly:!0})],m.prototype,"refreshTimestamp",void 0),(0,E._)([(0,W.MZ)({readOnly:!0})],m.prototype,"refreshParameters",null),m=(0,E._)([(0,x.$)("esri.layers.mixins.RefreshableLayer")],m),m}},33036:(X,F,i)=>{i.d(F,{j:()=>j});var _=i(8189),E=i(85211),R=(i(3248),i(35150),i(40707),i(76576));const j=x=>{let d=class extends x{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const c={minScale:this.minScale,maxScale:this.maxScale},p=this.parent;p&&"effectiveScaleRange"in p&&function w(x,d){x.minScale=x.minScale>0?d.minScale>0?Math.min(x.minScale,d.minScale):x.minScale:d.minScale,x.maxScale=x.maxScale>0?d.maxScale>0?Math.max(x.maxScale,d.maxScale):x.maxScale:d.maxScale}(c,p.effectiveScaleRange);const f=this._get("effectiveScaleRange");return f&&f.minScale===c.minScale&&f.maxScale===c.maxScale?f:c}};return(0,_._)([(0,E.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],d.prototype,"minScale",void 0),(0,_._)([(0,E.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],d.prototype,"maxScale",void 0),(0,_._)([(0,E.MZ)({readOnly:!0})],d.prototype,"effectiveScaleRange",null),d=(0,_._)([(0,R.$)("esri.layers.mixins.ScaleRangeLayer")],d),d}},84311:(X,F,i)=>{i.d(F,{e:()=>f});var _=i(8189),E=i(12849),K=i(99980),L=i(85211),w=(i(3248),i(35150),i(40707),i(17221)),x=i(76576),d=i(86300),c=i(38488),p=i(26957);const f=S=>{let o=class extends S{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(y,I){const A=I.timeInfo.exportOptions;if(!A)return null;const P=A.timeOffset,T=p.j.fromJSON(A.timeOffsetUnits);return P&&T?new K.A({value:P,unit:T}):null}set timeInfo(y){(0,d.sv)(y,this.fieldsIndex),this._set("timeInfo",y)}};return(0,_._)([(0,L.MZ)({type:E.A,json:{write:!1}})],o.prototype,"timeExtent",void 0),(0,_._)([(0,L.MZ)({type:K.A})],o.prototype,"timeOffset",void 0),(0,_._)([(0,w.w)("service","timeOffset",["timeInfo.exportOptions"])],o.prototype,"readOffset",null),(0,_._)([(0,L.MZ)({value:null,type:c.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],o.prototype,"timeInfo",null),(0,_._)([(0,L.MZ)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],o.prototype,"useViewTime",void 0),o=(0,_._)([(0,x.$)("esri.layers.mixins.TemporalLayer")],o),o}},66722:(X,F,i)=>{i.d(F,{A:()=>I});var p,_=i(8189),E=i(5922),K=i(71065),L=i(89221),W=i(85211),x=(i(3248),i(35150),i(40707),i(76576)),d=i(72211),c=i(95877);const f={read:{reader:d.LF},write:{writer:d.M9,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},S={read:{reader:d.LF},write:{writer:d.M9,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},o={name:"showExcludedLabels",default:!0};let y=p=class extends K.oY{constructor(A){super(A),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(A,P){const T=super.write(A,P);if(null!=P&&P.origin){var z;if(T.filter){var G;const O=Object.keys(T.filter);if(O.length>1||"where"!==O[0])return null!==(G=P.messages)&&void 0!==G&&G.push(new E.A("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:P.layer,effect:this})),null}if("showExcludedLabels"in T)return null!==(z=P.messages)&&void 0!==z&&z.push(new E.A("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:P.layer,effect:this})),null}return T}clone(){return new p({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,_._)([(0,W.MZ)({type:c.A,json:{write:{allowNull:!0,writer(A,P,T,z){const G=null==A?void 0:A.write({},z);G&&0!==Object.keys(G).length?(0,L.sM)(T,G,P):(0,L.sM)(T,null,P)}}}})],y.prototype,"filter",void 0),(0,_._)([(0,W.MZ)({json:{write:!0,origins:{"web-map":f,"portal-item":f}}})],y.prototype,"includedEffect",void 0),(0,_._)([(0,W.MZ)({json:{write:!0,origins:{"web-map":S,"portal-item":S}}})],y.prototype,"excludedEffect",void 0),(0,_._)([(0,W.MZ)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":o,"portal-item":o}}})],y.prototype,"excludedLabelsVisible",void 0),y=p=(0,_._)([(0,x.$)("esri.layers.support.FeatureEffect")],y);const I=y},95877:(X,F,i)=>{i.d(F,{A:()=>y});var p,_=i(8189),E=i(21152),K=i(12849),L=i(49976),W=i(71065),R=i(77806),j=i(85211),d=(i(3248),i(35150),i(76576)),c=i(87086);const f=new L.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S=new L.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let o=p=class extends W.oY{constructor(I){super(I),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(I={}){const{where:A,geometry:P,spatialRelationship:T,timeExtent:z,objectIds:G,units:O,distance:b}=this;return new c.A({geometry:(0,R.o8)(P),objectIds:(0,R.o8)(G),spatialRelationship:T,timeExtent:(0,R.o8)(z),where:A,units:O,distance:b,...I})}clone(){const{where:I,geometry:A,spatialRelationship:P,timeExtent:T,objectIds:z,units:G,distance:O}=this;return new p({geometry:(0,R.o8)(A),objectIds:(0,R.o8)(z),spatialRelationship:P,timeExtent:(0,R.o8)(T),where:I,units:G,distance:O})}};(0,_._)([(0,j.MZ)({type:String,json:{write:!0}})],o.prototype,"where",void 0),(0,_._)([(0,j.MZ)({types:E.yR,json:{write:!0}})],o.prototype,"geometry",void 0),(0,_._)([(0,j.MZ)({type:f.apiValues,json:{name:"spatialRel",read:{reader:f.read},write:{allowNull:!1,writer:f.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],o.prototype,"spatialRelationship",void 0),(0,_._)([(0,j.MZ)({type:Number,json:{write:{overridePolicy(I){return{enabled:null!=I&&null!=this.geometry}}}}})],o.prototype,"distance",void 0),(0,_._)([(0,j.MZ)({type:[Number],json:{write:!0}})],o.prototype,"objectIds",void 0),(0,_._)([(0,j.MZ)({type:S.apiValues,json:{read:S.read,write:{writer:S.write,overridePolicy(I){return{enabled:null!=I&&null!=this.geometry}}}}})],o.prototype,"units",void 0),(0,_._)([(0,j.MZ)({type:K.A,json:{write:!0}})],o.prototype,"timeExtent",void 0),o=p=(0,_._)([(0,d.$)("esri.layers.support.FeatureFilter")],o);const y=o},73258:(X,F,i)=>{i.d(F,{A:()=>f});var _=i(5922),E=i(71065),K=i(35150),L=i(60797),W=i(24098),R=i(86300),j=i(22639),w=i(44549);const p=new Map;class f{static fromJSON(P){return new f(P.fields,P.timeZoneByFieldName)}static fromLayer(P){var T;return new f(null!==(T=P.fields)&&void 0!==T?T:[],I(P))}static fromLayerJSON(P){var T;return new f(null!==(T=P.fields)&&void 0!==T?T:[],I(P))}constructor(P=[],T){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=P||[],this._timeZoneByFieldName=T?new Map(T):null;const z=[];for(const O of this.fields){const b=null==O?void 0:O.name,ne=o(b);if(b&&ne){var G;const Y=S(b);this._fieldsMap.set(b,O),this._fieldsMap.set(Y,O),this._normalizedFieldsMap.set(ne,O),z.push(`${Y}:${O.type}:${null===(G=this._timeZoneByFieldName)||void 0===G?void 0:G.get(b)}`),(0,R.vE)(O)?(this.dateFields.push(O),this._dateFieldsSet.add(O)):(0,R.WA)(O)&&(this._numericFieldsSet.add(O),this.numericFields.push(O)),(0,R.te)(O)||(0,R.Xz)(O)||(O.editable=null==O.editable||!!O.editable,O.nullable=null==O.nullable||!!O.nullable)}}z.sort(),this.uid=z.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const P of this.fields)(0,R.te)(P)||(0,R.Xz)(P)||P.nullable||void 0!==(0,R.lD)(P)||this._requiredFields.push(P)}return this._requiredFields}equals(P){return this.uid===(null==P?void 0:P.uid)}has(P){return null!=this.get(P)}get(P){var T;if(!P)return;let z=this._fieldsMap.get(P);return z||(z=null!==(T=this._fieldsMap.get(S(P)))&&void 0!==T?T:this._normalizedFieldsMap.get(o(P)),z&&this._fieldsMap.set(P,z),z)}getTimeZone(P){const T=this.get(P&&"string"!=typeof P?P.name:P);return T?this._timeZoneByFieldName?this._timeZoneByFieldName.get(T.name):"date"===T.type||"esriFieldTypeDate"===T.type?(K.A.getLogger("esri.layers.support.FieldsIndex").error(new _.A("getTimeZone:no-timezone-information",`no time zone information for field '${T.name}'`)),j.n$):y.has(T.type)?j.L5:null:null}getLuxonTimeZone(P){const T=this.getTimeZone(P);return T?T===j.L5?W.GB.instance:T===j.n$?w.mQ.utcInstance:(0,L.tE)(p,T,()=>w.oh.create(T)):null}isDateField(P){return this._dateFieldsSet.has(this.get(P))}isTimeOnlyField(P){return(0,R.OH)(this.get(P))}isNumericField(P){return this._numericFieldsSet.has(this.get(P))}normalizeFieldName(P){var T,z;return null!==(T=null===(z=this.get(P))||void 0===z?void 0:z.name)&&void 0!==T?T:void 0}toJSON(){return{fields:this.fields.map(P=>(0,E.Wj)(P)?P.toJSON():P),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function S(A){return A.trim().toLowerCase()}function o(A){var P,T;return null!==(P=null===(T=(0,R.rS)(A))||void 0===T?void 0:T.toLowerCase())&&void 0!==P?P:""}const y=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function I(A){var P,T,z,G,O,b,ne;const Y=new Map;if(!A.fields)return Y;const V=!0===A.datesInUnknownTimezone,{timeInfo:g,editFieldsInfo:M}=A,m=null!==(P=g?"startField"in g?g.startField:g.startTimeField:"")&&void 0!==P?P:"",C=null!==(T=g?"endField"in g?g.endField:g.endTimeField:"")&&void 0!==T?T:"",U=function c(A){return"dateFieldsTimeZone"in A}(A)?null!==(z=A.dateFieldsTimeZone)&&void 0!==z?z:null:A.dateFieldsTimeReference?(0,j.ZS)(A.dateFieldsTimeReference):null,$=M?function x(A){return"timeZone"in A}(M)?null!==(G=M.timeZone)&&void 0!==G?G:U:M.dateFieldsTimeReference?(0,j.ZS)(M.dateFieldsTimeReference):null!=U?U:j.n$:null,k=g?function d(A){return"timeZone"in A}(g)?null!==(O=g.timeZone)&&void 0!==O?O:U:g.timeReference?(0,j.ZS)(g.timeReference):U:null,re=new Map([[S(null!==(b=null==M?void 0:M.creationDateField)&&void 0!==b?b:""),$],[S(null!==(ne=null==M?void 0:M.editDateField)&&void 0!==ne?ne:""),$],[S(m),k],[S(C),k]]);for(const{name:se,type:_e}of A.fields)if(y.has(_e))Y.set(se,j.L5);else if("date"!==_e&&"esriFieldTypeDate"!==_e)Y.set(se,null);else if(V)Y.set(se,j.L5);else{var ie;const v=null!==(ie=re.get(S(null!=se?se:"")))&&void 0!==ie?ie:U;Y.set(se,v)}return Y}},20329:(X,F,i)=>{i.d(F,{A:()=>M});var o,_=i(8189),E=i(47280),K=i(49976),L=i(71065),W=i(77806),R=i(67685),j=i(85211),d=(i(3248),i(35150),i(17221)),c=i(76576),p=i(50305),S=(i(40707),i(4858));let y=o=class extends L.oY{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(m,C){return C.value?(0,S.mX)(C.value):m}writeExpression(m,C,U){null!=this.value&&(m=(0,S.mX)(this.value)),null!=m&&(C[U]=m)}clone(){return new o({expression:this.expression,title:this.title,value:this.value})}};(0,_._)([(0,j.MZ)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],y.prototype,"expression",void 0),(0,_._)([(0,d.w)("expression",["expression","value"])],y.prototype,"readExpression",null),(0,_._)([(0,p.K)("expression")],y.prototype,"writeExpression",null),(0,_._)([(0,j.MZ)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],y.prototype,"title",void 0),(0,_._)([(0,j.MZ)({json:{read:!1,write:!1}})],y.prototype,"value",void 0),y=o=(0,_._)([(0,c.$)("esri.layers.support.LabelExpressionInfo")],y);const I=y;var z,A=i(58443),P=i(91644),T=i(35564);const G=new K.J({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function O(m,C,U){return{enabled:!(0,A.TU)(null==U?void 0:U.layer)}}function b(m){var C;return!m||"service"!==m.origin&&"map-image"!==(null===(C=m.layer)||void 0===C?void 0:C.type)}function Y(m){var C;return!!function ne(m){return"map-image"===(null==m?void 0:m.type)}(m)&&!(null===(C=m.capabilities)||void 0===C||null===(C=C.exportMap)||void 0===C||!C.supportsArcadeExpressionForLabeling)}let g=z=class extends L.oY{static evaluateWhere(m,C){const U=($,k,re)=>{switch(k){case"=":return $==re;case"<>":return $!=re;case">":return $>re;case">=":return $>=re;case"<":return $<re;case"<=":return $<=re}return!1};try{if(null==m)return!0;const $=m.split(" ");if(3===$.length)return U(C[$[0]],$[1],$[2]);if(7===$.length){const k=U(C[$[0]],$[1],$[2]),re=$[3],ie=U(C[$[4]],$[5],$[6]);switch(re){case"AND":return k&&ie;case"OR":return k||ie}}return!1}catch{console.log("Error.: can't parse = "+m)}}constructor(m){super(m),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=P.Hk,this.useCodedValues=void 0,this.where=null}readLabelExpression(m,C){const U=C.labelExpressionInfo;if(!U||!U.value&&!U.expression)return m}writeLabelExpression(m,C,U){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)m=(0,S.D3)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const $=(0,S.tH)(this.labelExpressionInfo.expression);$&&(m="["+$+"]")}null!=m&&(C[U]=m)}writeLabelExpressionInfo(m,C,U,$){if(null==m&&null!=this.labelExpression&&b($))m=new I({expression:this.getLabelExpressionArcade()});else if(!m)return;const k=m.toJSON($);k.expression&&(C[U]=k)}writeMaxScale(m,C){(m||this.minScale)&&(C.maxScale=m)}writeMinScale(m,C){(m||this.maxScale)&&(C.minScale=m)}getLabelExpression(){return(0,S.XJ)(this)}getLabelExpressionArcade(){return(0,S.BI)(this)}getLabelExpressionSingleField(){return(0,S.rU)(this)}hash(){return JSON.stringify(this)}clone(){return new z({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,W.o8)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,W.o8)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,_._)([(0,j.MZ)({type:String,json:{write:!0}})],g.prototype,"name",void 0),(0,_._)([(0,j.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:O}}}}})],g.prototype,"allowOverrun",void 0),(0,_._)([(0,j.MZ)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:O}}}}})],g.prototype,"deconflictionStrategy",void 0),(0,_._)([(0,j.MZ)({type:String,json:{write:{overridePolicy(m,C,U){return this.labelExpressionInfo&&"service"===(null==U?void 0:U.origin)&&Y(U.layer)?{enabled:!1}:{allowNull:!0}}}}})],g.prototype,"labelExpression",void 0),(0,_._)([(0,d.w)("labelExpression")],g.prototype,"readLabelExpression",null),(0,_._)([(0,p.K)("labelExpression")],g.prototype,"writeLabelExpression",null),(0,_._)([(0,j.MZ)({type:I,json:{write:{overridePolicy:(m,C,U)=>function V(m){return b(m)||Y(null==m?void 0:m.layer)}(U)?{allowNull:!0}:{enabled:!1}}}})],g.prototype,"labelExpressionInfo",void 0),(0,_._)([(0,p.K)("labelExpressionInfo")],g.prototype,"writeLabelExpressionInfo",null),(0,_._)([(0,j.MZ)({type:G.apiValues,json:{type:G.jsonValues,read:G.read,write:G.write}})],g.prototype,"labelPlacement",void 0),(0,_._)([(0,j.MZ)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],g.prototype,"labelPosition",void 0),(0,_._)([(0,j.MZ)({type:Number})],g.prototype,"maxScale",void 0),(0,_._)([(0,p.K)("maxScale")],g.prototype,"writeMaxScale",null),(0,_._)([(0,j.MZ)({type:Number})],g.prototype,"minScale",void 0),(0,_._)([(0,p.K)("minScale")],g.prototype,"writeMinScale",null),(0,_._)([(0,j.MZ)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:O}}}}})],g.prototype,"repeatLabel",void 0),(0,_._)([(0,j.MZ)({type:Number,cast:R.cr,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:O}}}}})],g.prototype,"repeatLabelDistance",void 0),(0,_._)([(0,j.MZ)({types:E.em,json:{origins:{"web-scene":{types:E.Rv,write:T.oO,default:null}},write:T.oO,default:null}})],g.prototype,"symbol",void 0),(0,_._)([(0,j.MZ)({type:Boolean,json:{write:!0}})],g.prototype,"useCodedValues",void 0),(0,_._)([(0,j.MZ)({type:String,json:{write:!0}})],g.prototype,"where",void 0),g=z=(0,_._)([(0,c.$)("esri.layers.support.LabelClass")],g);const M=g},38488:(X,F,i)=>{i.d(F,{A:()=>y});var _=i(8189),E=i(12849),K=i(99980),L=i(90660),W=i(71065),R=i(85211),d=(i(3248),i(35150),i(40707),i(17221)),c=i(76576),p=i(50305),f=i(22639);function S(I,A){return K.A.fromJSON({value:I,unit:A})}let o=class extends((0,L.O)(W.oY)){constructor(I){super(I),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(I,A){if(!A.timeExtent||!Array.isArray(A.timeExtent)||2!==A.timeExtent.length)return null;const P=new Date(A.timeExtent[0]),T=new Date(A.timeExtent[1]);return new E.A({start:P,end:T})}writeFullTimeExtent(I,A){A.timeExtent=null!=(null==I?void 0:I.start)&&null!=I.end?[I.start.getTime(),I.end.getTime()]:null}readInterval(I,A){return A.timeInterval&&A.timeIntervalUnits?S(A.timeInterval,A.timeIntervalUnits):A.defaultTimeInterval&&A.defaultTimeIntervalUnits?S(A.defaultTimeInterval,A.defaultTimeIntervalUnits):null}writeInterval(I,A){var P,T;A.timeInterval=null!==(P=null==I?void 0:I.toJSON().value)&&void 0!==P?P:null,A.timeIntervalUnits=null!==(T=null==I?void 0:I.toJSON().unit)&&void 0!==T?T:null}};(0,_._)([(0,R.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],o.prototype,"cumulative",void 0),(0,_._)([(0,R.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],o.prototype,"endField",void 0),(0,_._)([(0,R.MZ)({type:E.A,json:{write:{enabled:!0,allowNull:!0}}})],o.prototype,"fullTimeExtent",void 0),(0,_._)([(0,d.w)("fullTimeExtent",["timeExtent"])],o.prototype,"readFullTimeExtent",null),(0,_._)([(0,p.K)("fullTimeExtent")],o.prototype,"writeFullTimeExtent",null),(0,_._)([(0,R.MZ)({type:Boolean,json:{write:!0}})],o.prototype,"hasLiveData",void 0),(0,_._)([(0,R.MZ)({type:K.A,json:{write:{enabled:!0,allowNull:!0}}})],o.prototype,"interval",void 0),(0,_._)([(0,d.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],o.prototype,"readInterval",null),(0,_._)([(0,p.K)("interval")],o.prototype,"writeInterval",null),(0,_._)([(0,R.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],o.prototype,"startField",void 0),(0,_._)([(0,R.MZ)((0,f.P6)("timeReference",!0))],o.prototype,"timeZone",void 0),(0,_._)([(0,R.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],o.prototype,"trackIdField",void 0),(0,_._)([(0,R.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],o.prototype,"useTime",void 0),o=(0,_._)([(0,c.$)("esri.layers.support.TimeInfo")],o);const y=o},4858:(X,F,i)=>{i.d(F,{BI:()=>S,D3:()=>p,XJ:()=>f,lc:()=>c,mX:()=>y,rU:()=>o,tH:()=>G});var _=i(1119);const E="__begin__",K="__end__",L=new RegExp(E,"ig"),W=new RegExp(K,"ig"),R=new RegExp("^"+E,"i"),j=new RegExp(K+"$","i"),w='"',x=w+" + ",d=" + "+w;function c(O){return O.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function p(O){return O.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(O){const b={expression:"",type:"none"};return O.labelExpressionInfo?O.labelExpressionInfo.value?(b.expression=O.labelExpressionInfo.value,b.type="conventional"):O.labelExpressionInfo.expression&&(b.expression=O.labelExpressionInfo.expression,b.type="arcade"):null!=O.labelExpression&&(b.expression=c(O.labelExpression),b.type="conventional"),b}function S(O){const b=f(O);if(!b)return null;switch(b.type){case"conventional":return y(b.expression);case"arcade":return b.expression}return null}function o(O){const b=f(O);if(!b)return null;switch(b.type){case"conventional":return function A(O){const b=null==O?void 0:O.match(I);return(null==b?void 0:b[1].trim())||null}(b.expression);case"arcade":return G(b.expression)}return null}function y(O){let b;return O?(b=(0,_.HC)(O,ne=>E+'$feature["'+ne+'"]'+K),b=R.test(b)?b.replace(R,""):w+b,b=j.test(b)?b.replace(j,""):b+w,b=b.replaceAll(L,x).replaceAll(W,d)):b='""',b}const I=/^\s*\{([^}]+)\}\s*$/i,P=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,T=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,z=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function G(O){if(!O)return null;let b=P.exec(O)||T.exec(O);return b?b[1]||b[3]:(b=z.exec(O),b?b[2]:null)}},73975:(X,F,i)=>{i.d(F,{w:()=>j,z:()=>d});var _=i(5922),E=i(77806),K=i(35150),L=i(20329);const W=()=>K.A.getLogger("esri.layers.support.labelingInfo"),R=/\[([^\[\]]+)\]/gi;function j(p,f,S){return p?p.map(o=>{const y=new L.A;if(y.read(o,S),y.labelExpression){var I;const A=f.fields||(null===(I=f.layerDefinition)||void 0===I?void 0:I.fields)||this.fields;y.labelExpression=y.labelExpression.replaceAll(R,(P,T)=>`[${function w(p,f){if(!f)return p;const S=p.toLowerCase();for(let o=0;o<f.length;o++){const y=f[o].name;if(y.toLowerCase()===S)return y}return p}(T,A)}]`)}return y}):null}const x={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function d(p,f){const S=(0,E.o8)(p);return S.some(o=>function c(p,f){const S=p.labelPlacement,o=x[f];if(!p.symbol)return W().warn("No ILabelClass symbol specified."),!0;if(!o)return W().error(new _.A("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${f}' is not supported`)),!0;if(!o.includes(S)){const y=o[0];S&&W().warn(`Found invalid label placement type ${S} for ${f}. Defaulting to ${y}`),p.labelPlacement=y}return!1}(o,f))?[]:S}},69927:(X,F,i)=>{i.d(F,{It:()=>o,LG:()=>j,OM:()=>d,Sm:()=>c,Y:()=>w,bK:()=>x,mm:()=>S,sQ:()=>p});var _=i(10467),E=i(11817),K=i(32034),L=i(55039);function R(){return(R=(0,_.A)(function*(y){const I=y.spatialReference;if(I.isWGS84)return y.clone();if(I.isWebMercator)return(0,L.ci)(y);const A=K.A.WGS84;return yield(0,E.initializeProjection)(I,A),(0,E.project)(y,A)})).apply(this,arguments)}function j(y,I){if(!w(y,I)){const A=y.typeKeywords;A?A.push(I):y.typeKeywords=[I]}}function w(y,I){var A;return!(null===(A=y.typeKeywords)||void 0===A||!A.includes(I))}function x(y){return w(y,S.HOSTED_SERVICE)}function d(y,I){const A=y.typeKeywords;if(A){const P=A.indexOf(I);P>-1&&A.splice(P,1)}}function c(y,I,A){A?j(y,I):d(y,I)}function p(y){return f.apply(this,arguments)}function f(){return f=(0,_.A)(function*(y){const I=y.clone().normalize();let A;if(I.length>1)for(const P of I)A?P.width>A.width&&(A=P):A=P;else A=I[0];return function W(y){return R.apply(this,arguments)}(A)}),f.apply(this,arguments)}const S={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function o(y){var I;const{portal:A,isOrgItem:P,itemControl:T}=y,z=null===(I=A.user)||void 0===I?void 0:I.privileges;let G=!z||z.includes("features:user:edit"),O=!!P&&!(null==z||!z.includes("features:user:fullEdit"));const b="update"===T||"admin"===T;return b?O=G=!0:O&&(G=!0),{features:{edit:G,fullEdit:O},content:{updateItem:b}}}},26957:(X,F,i)=>{i.d(F,{j:()=>E});const E=(0,i(49976).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},78592:(X,F,i)=>{i.d(F,{O3:()=>x,PU:()=>j,YW:()=>c,ex:()=>W,hv:()=>d,zp:()=>R});var _=i(69287),E=i(67685),K=i(53781),L=i(89141);const W=2.4;function R(p){return(0,E.PN)(p*W)}function j(p){return(0,E.Lz)(p)/W}function w(p,f,S,o){let{color:y,ratio:I}=f,{color:A,ratio:P}=S;P===I&&(1===P?I-=1e-6:P+=1e-6);const T=(0,_.qE)((o-I)/(P-I),0,1);(0,K.l)(p,y.toArray(),A.toArray(),T)}function x(p){const S=new Uint8ClampedArray(2048);if((p=p.filter(({ratio:P})=>P>=0&&P<=1).sort((P,T)=>P.ratio-T.ratio).map(({color:P,ratio:T})=>({color:P,ratio:Math.max(T,.001)}))).length<1)return S;let o=p[0],y=p[0],I=1;const A=(0,L.vt)();for(let P=0;P<512;P++){const T=(P+.5)/512;for(;T>y.ratio&&I<p.length;)o=y,y=p[I++];w(A,o,y,T),S.set(A,4*P)}return S}function d(p,f,S){const o=Math.sqrt(p**2+f**2)/S;return o>1?0:3/(Math.PI*S**2)*(1-o**2)**2}function c(p){return"function"==typeof p?p:p?f=>+f[p]:()=>1}},8691:(X,F,i)=>{i.d(F,{L:()=>W});var _=i(10467),E=i(89447),K=i(56492),L=i(96996);function W(j,w,x){return R.apply(this,arguments)}function R(){return(R=(0,_.A)(function*(j,w,x){const d=j&&j.getAtOrigin&&j.getAtOrigin("renderer",w.origin);if(d&&"unique-value"===d.type&&d.styleOrigin){const c=yield(0,E.Ke)(d.populateFromStyle());if((0,K.Te)(x),!1===c.ok){const p=c.error;null!=w&&w.messages&&w.messages.push(new L.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${p.message}`,{error:p,context:w})),j.clear("renderer",null==w?void 0:w.origin)}}})).apply(this,arguments)}},52466:(X,F,i)=>{i.d(F,{A:()=>d});var w,_=i(8189),E=i(71065),K=i(77806),L=i(85211),W=i(55739),R=i(76576),j=i(50305);let x=w=class extends E.oY{constructor(c){super(c),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(c,p){p.resultOffset=this.start,p.resultRecordCount=this.num||10}clone(){return new w((0,K.o8)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,_._)([(0,L.MZ)({type:[String],json:{write:!0}})],x.prototype,"attachmentTypes",void 0),(0,_._)([(0,L.MZ)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],x.prototype,"attachmentsWhere",void 0),(0,_._)([(0,L.MZ)({type:Boolean,json:{write:!0}})],x.prototype,"cacheHint",void 0),(0,_._)([(0,L.MZ)({type:[String],json:{write:!0}})],x.prototype,"keywords",void 0),(0,_._)([(0,L.MZ)({type:[Number],json:{write:!0}})],x.prototype,"globalIds",void 0),(0,_._)([(0,L.MZ)({json:{write:!0}})],x.prototype,"name",void 0),(0,_._)([(0,L.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),(0,_._)([(0,L.MZ)({type:[Number],json:{write:!0}})],x.prototype,"objectIds",void 0),(0,_._)([(0,L.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"returnMetadata",void 0),(0,_._)([(0,L.MZ)({type:[Number],json:{write:!0}})],x.prototype,"size",void 0),(0,_._)([(0,L.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),(0,_._)([(0,j.K)("start"),(0,j.K)("num")],x.prototype,"writeStart",null),(0,_._)([(0,L.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],x.prototype,"where",void 0),x=w=(0,_._)([(0,R.$)("esri.rest.support.AttachmentQuery")],x),x.from=(0,W.dp)(x);const d=x},41843:(X,F,i)=>{i.d(F,{tn:()=>f});var _=i(92165),E=i(86300),K=i(54042),j=(i(75432),i(65121),i(558),i(8975)),c=(i(90792),i(83902),i(98089),i(61099)),p=i(17580);function f({displayField:g,editFieldsInfo:M,fields:m,objectIdField:C,title:U},$){if(!m)return null;const k=function P(g,M){var m;const C=null==M?void 0:M.visibleFieldNames;return function y(g,M){const m=g;return M&&(g=g.filter(C=>!M.includes(C.type))),g===m&&(g=g.slice()),g.sort(I),g}(null!==(m=g.fields)&&void 0!==m?m:[],(null==M?void 0:M.ignoreFieldTypes)||V).map(U=>new c.A({fieldName:U.name,isEditable:(0,E.R$)(U,g),label:U.alias,format:G(U),visible:o(U,{...g,visibleFieldNames:C})}))}({editFieldsInfo:M,fields:m,objectIdField:C},$);if(!k.length)return null;const re=function ne(g){const M=(0,E.mB)(g),{titleBase:m}=g;return M?`${m}: {${M.trim()}}`:null!=m?m:""}({titleBase:U,fields:m,displayField:g}),ie=function O(){return[new j.A,new K.A]}();return new _.A({title:re,content:ie,fieldInfos:k})}const o=(g,M)=>M.visibleFieldNames?M.visibleFieldNames.has(g.name):(0,E.Bz)(g,M);function I(g,M){return"oid"===g.type?-1:"oid"===M.type?1:Y(g)?-1:Y(M)?1:(g.alias||g.name).toLocaleLowerCase().localeCompare((M.alias||M.name).toLocaleLowerCase())}function G(g){switch(g.type){case"small-integer":case"integer":case"single":return new p.A({digitSeparator:!0,places:0});case"double":return new p.A({digitSeparator:!0,places:2});case"string":return(0,E.JL)(g.name)?new p.A({digitSeparator:!0,places:0}):null;default:return null}}function Y(g){return"name"===(g.name&&g.name.toLowerCase())||"name"===(g.alias&&g.alias.toLowerCase())}const V=["geometry","blob","raster","guid","xml"]},91644:(X,F,i)=>{i.d(F,{A7:()=>w,Cx:()=>x,Hk:()=>d,JJ:()=>S,UK:()=>j,jM:()=>p,x3:()=>f}),i(3248);var E=i(88521),K=i(55417),L=i(46602),W=i(47705),R=i(48254);const j=L.A.fromJSON(R.Cb),w=K.A.fromJSON(R.yM),x=E.A.fromJSON(R.WR),d=W.A.fromJSON(R.JZ),p=L.A.fromJSON(R.nC),f=K.A.fromJSON(R.HW),S=E.A.fromJSON(R.b6)},48254:(X,F,i)=>{i.d(F,{Cb:()=>K,HW:()=>w,JZ:()=>R,WR:()=>W,b6:()=>x,nC:()=>j,yM:()=>L});const _=[252,146,31,255],K={type:"esriSMS",style:"esriSMSCircle",size:6,color:_,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},L={type:"esriSLS",style:"esriSLSSolid",width:.75,color:_},W={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},R={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},j={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},w={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},x={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},71655:(X,F,i)=>{var _,E;i.d(F,{X:()=>_}),(E=_||(_={}))[E.SAVE=0]="SAVE",E[E.SAVE_AS=1]="SAVE_AS"}}]);