"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8155,9927,4098,3258],{24098:(te,V,o)=>{o.d(V,{GB:()=>f,Qo:()=>R,Y4:()=>z});var j=o(44549);class f{}function z(D){return D instanceof j.bo?D===f.instance:"unknown"===(null==D?void 0:D.toString().toLowerCase())}function R(D){return z(D)?f.instance:D}f.instance=new j.oh("Etc/UTC")},721:(te,V,o)=>{o.d(V,{$X:()=>J,Gy:()=>d,P5:()=>M,SW:()=>ee,Tr:()=>K,VV:()=>D}),o(61320);const z=(s,l,i)=>[l,i],R=(s,l,i)=>[l,i,s[2]],H=(s,l,i)=>[l,i,s[2],s[3]];function D(s){return s?{originPosition:"upper-left"===s.originPosition?"upperLeft":"lower-left"===s.originPosition?"lowerLeft":s.originPosition,scale:s.tolerance?[s.tolerance,s.tolerance]:[1,1],translate:null!=s.extent?[s.extent.xmin,s.extent.ymax]:[0,0]}:null}function y({scale:s,translate:l},i){return i*s[0]+l[0]}function m({scale:s,translate:l},i){return l[1]-i*s[1]}function P(s,l,i){const h=new Array(i.length);if(!i.length)return h;const[_,F]=s.scale;let Z=y(s,i[0][0]),N=m(s,i[0][1]);h[0]=l(i[0],Z,N);for(let k=1;k<i.length;k++){const X=i[k];Z+=X[0]*_,N-=X[1]*F,h[k]=l(X,Z,N)}return h}function g(s,l,i){const h=new Array(i.length);for(let _=0;_<i.length;_++)h[_]=P(s,l,i[_]);return h}function d(s,l,i,h,_){return l.x=function x({scale:s,translate:l},i){return Math.round((i-l[0])/s[0])}(s,i.x),l.y=function U({scale:s,translate:l},i){return Math.round((l[1]-i)/s[1])}(s,i.y),l!==i&&(h&&(l.z=i.z),_&&(l.m=i.m)),l}function ee(s,l,i,h,_){return null!=i&&(l.points=function E(s,l,i,h){return P(s,i?h?H:R:h?R:z,l)}(s,i.points,h,_)),l}function K(s,l,i,h,_){return null==i||(l.x=y(s,i.x),l.y=m(s,i.y),l!==i&&(h&&(l.z=i.z),_&&(l.m=i.m))),l}function J(s,l,i,h,_){return null!=i&&(l.rings=function G(s,l,i,h){return g(s,i?h?H:R:h?R:z,l)}(s,i.rings,h,_)),l}function M(s,l,i,h,_){return null!=i&&(l.paths=function b(s,l,i,h){return g(s,i?h?H:R:h?R:z,l)}(s,i.paths,h,_)),l}},27160:(te,V,o)=>{o.r(V),o.d(V,{default:()=>J});var O,j=o(10467),f=o(8189),R=(o(21152),o(31178)),H=o(2993),D=o(39693),W=o(56492),x=o(48900),U=o(45272),v=o(85211),L=(o(3248),o(35150),o(40707),o(17221)),y=o(76576),m=o(50305),P=o(32034),g=o(95478),c=o(93410),E=o(17049),b=o(85551),G=o(1151),S=o(33036),$=o(81687),q=o(42425),w=o(71065),A=o(55098),p=o(1119),a=o(55739),d=o(70264),T=o(28067);let B=O=class extends(q.A.EventedMixin((0,w.Te)(A.A))){constructor(...M){super(...M),this.description=null,this.fullExtent=null,this.id=null,this.networkLink=null,this.parent=null,this.sublayers=null,this.title=null,this.sourceJSON=null,this.layer=null,this.addHandles([(0,x.on)(()=>this.sublayers,"after-add",({item:s})=>{s.parent=this,s.layer=this.layer},x.OH),(0,x.on)(()=>this.sublayers,"after-remove",({item:s})=>{s.layer=s.parent=null},x.OH),(0,x.wB)(()=>this.sublayers,(s,l)=>{if(l)for(const i of l)i.layer=i.parent=null;if(s)for(const i of s)i.parent=this,i.layer=this.layer},x.OH),(0,x.wB)(()=>this.layer,s=>{if(this.sublayers)for(const l of this.sublayers)l.layer=s},x.OH)])}initialize(){(0,x.C_)(()=>this.networkLink).then(()=>(0,x.C_)(()=>!0===this.visible)).then(()=>this.load())}load(M){var s,l;if(!this.networkLink||this.networkLink.viewFormat)return;const i=null!=M?M.signal:null,h=this._fetchService(null!==(s=null===(l=this._get("networkLink"))||void 0===l?void 0:l.href)&&void 0!==s?s:"",i).then(_=>{var F;const Z=(0,d.Qm)(_.sublayers);this.fullExtent=T.A.fromJSON(Z),this.sourceJSON=_;const N=(0,a.dp)(R.A.ofType(O),(0,d.Jy)(O,_));this.sublayers?this.sublayers.addMany(N):this.sublayers=N,null!==(F=this.layer)&&void 0!==F&&F.emit("sublayer-update"),this.layer&&this.layer.notifyChange("visibleSublayers")});return this.addResolvingPromise(h),Promise.resolve(this)}get visible(){return this._get("visible")}set visible(M){this._get("visible")!==M&&(this._set("visible",M),this.layer&&this.layer.notifyChange("visibleSublayers"))}readVisible(M,s){return!!s.visibility}_fetchService(M,s){return(0,d.Ox)(M,this.layer.outSpatialReference,this.layer.refreshInterval,s).then(l=>(0,d._4)(l.data))}};(0,f._)([(0,v.MZ)()],B.prototype,"description",void 0),(0,f._)([(0,v.MZ)({type:T.A})],B.prototype,"fullExtent",void 0),(0,f._)([(0,v.MZ)()],B.prototype,"id",void 0),(0,f._)([(0,v.MZ)({readOnly:!0,value:null})],B.prototype,"networkLink",void 0),(0,f._)([(0,v.MZ)({json:{write:{allowNull:!0}}})],B.prototype,"parent",void 0),(0,f._)([(0,v.MZ)({type:R.A.ofType(B),json:{write:{allowNull:!0}}})],B.prototype,"sublayers",void 0),(0,f._)([(0,v.MZ)({value:null,json:{read:{source:"name",reader:M=>(0,p._e)(M)}}})],B.prototype,"title",void 0),(0,f._)([(0,v.MZ)({value:!0})],B.prototype,"visible",null),(0,f._)([(0,L.w)("visible",["visibility"])],B.prototype,"readVisible",null),(0,f._)([(0,v.MZ)()],B.prototype,"sourceJSON",void 0),(0,f._)([(0,v.MZ)()],B.prototype,"layer",void 0),B=O=(0,f._)([(0,y.$)("esri.layers.support.KMLSublayer")],B);const Q=B,ee=["kml","xml"];let K=class extends((0,c.d)((0,G.J)((0,S.j)((0,E.q)((0,b.A)((0,D.P)(g.A))))))){constructor(...M){super(...M),this._visibleFolders=[],this.allSublayers=new H.A({getCollections:()=>[this.sublayers],getChildrenFunction:s=>s.sublayers}),this.outSpatialReference=P.A.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType="KML",this.sublayers=null,this.type="kml",this.url=null}initialize(){this.addHandles([(0,x.wB)(()=>this.sublayers,(M,s)=>{s&&s.forEach(l=>{l.parent=null,l.layer=null}),M&&M.forEach(l=>{l.parent=this,l.layer=this})},x.OH),this.on("sublayer-update",()=>this.notifyChange("fullExtent"))])}normalizeCtorArgs(M,s){return"string"==typeof M?{url:M,...s}:M}readSublayersFromItemOrWebMap(M,s){this._visibleFolders=s.visibleFolders}readSublayers(M,s,l){return(0,d.Jy)(Q,s,l,this._visibleFolders)}writeSublayers(M,s){const l=[],i=M.toArray();for(;i.length;){const h=i[0];h.networkLink||(h.visible&&l.push(h.id),h.sublayers&&i.push(...h.sublayers.toArray())),i.shift()}s.visibleFolders=l}get title(){const M=this._get("title");return M&&"defaults"!==this.originOf("title")?M:this.url?(0,U.e7)(this.url,ee)||"KML":M||""}set title(M){this._set("title",M)}get visibleSublayers(){const M=this.sublayers,s=[],l=i=>{i.visible&&(s.push(i),i.sublayers&&i.sublayers.forEach(l))};return M&&M.forEach(l),s}get fullExtent(){return this._recomputeFullExtent()}load(M){const s=null!=M?M.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"],supportsData:!1},M).catch(W.QP).then(()=>this._fetchService(s))),Promise.resolve(this)}destroy(){super.destroy(),this.allSublayers.destroy()}_fetchService(M){var s=this;return(0,j.A)(function*(){const l=yield Promise.resolve().then(()=>{var h;return s.resourceInfo?{ssl:!1,data:s.resourceInfo}:(0,d.Ox)(null!==(h=s.url)&&void 0!==h?h:"",s.outSpatialReference,s.refreshInterval,M)}),i=(0,d._4)(l.data);i&&s.read(i,{origin:"service"})})()}_recomputeFullExtent(){let M=null;null!=this.extent&&(M=this.extent.clone());const s=l=>{if(l.sublayers)for(const i of l.sublayers.items)s(i),i.visible&&i.fullExtent&&(null!=M?M.union(i.fullExtent):M=i.fullExtent.clone())};return s(this),M}};(0,f._)([(0,v.MZ)({readOnly:!0})],K.prototype,"allSublayers",void 0),(0,f._)([(0,v.MZ)({type:P.A})],K.prototype,"outSpatialReference",void 0),(0,f._)([(0,v.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],K.prototype,"path",void 0),(0,f._)([(0,v.MZ)({readOnly:!0,json:{read:!1,write:!1}})],K.prototype,"legendEnabled",void 0),(0,f._)([(0,v.MZ)({type:["show","hide","hide-children"]})],K.prototype,"listMode",void 0),(0,f._)([(0,v.MZ)({type:["KML"]})],K.prototype,"operationalLayerType",void 0),(0,f._)([(0,v.MZ)({})],K.prototype,"resourceInfo",void 0),(0,f._)([(0,v.MZ)({type:R.A.ofType(Q),json:{write:{ignoreOrigin:!0}}})],K.prototype,"sublayers",void 0),(0,f._)([(0,L.w)(["web-map","portal-item"],"sublayers",["visibleFolders"])],K.prototype,"readSublayersFromItemOrWebMap",null),(0,f._)([(0,L.w)("service","sublayers",["sublayers"])],K.prototype,"readSublayers",null),(0,f._)([(0,m.K)("sublayers")],K.prototype,"writeSublayers",null),(0,f._)([(0,v.MZ)({readOnly:!0,json:{read:!1}})],K.prototype,"type",void 0),(0,f._)([(0,v.MZ)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],K.prototype,"title",null),(0,f._)([(0,v.MZ)($.OZ)],K.prototype,"url",void 0),(0,f._)([(0,v.MZ)({readOnly:!0})],K.prototype,"visibleSublayers",null),(0,f._)([(0,v.MZ)({type:T.A})],K.prototype,"extent",void 0),(0,f._)([(0,v.MZ)()],K.prototype,"fullExtent",null),K=(0,f._)([(0,y.$)("esri.layers.KMLLayer")],K);const J=K},72211:(te,V,o)=>{o.d(V,{LF:()=>H,M9:()=>D,zu:()=>v});var j=o(5922),f=o(89221),z=o(79845),R=o(26073);function H(I,L,y){try{return function x(I){if(!I||0===I.length)return null;if(function U(I){const L=I[0];return!!L&&"scale"in L}(I)){const L=[];for(const y of I)L.push({scale:y.scale,value:v(y.value)});return L}return v(I)}(I)}catch(P){var m;null==y||null===(m=y.messages)||void 0===m||m.push(P)}return null}function D(I,L,y,m){try{const P=function W(I){const L=(0,z.q)(I);return L?(0,R.dw)(L)?L.map(y=>y.toJSON()):L.map(({scale:y,effects:m})=>({scale:y,value:m.map(P=>P.toJSON())})):null}(I);(0,f.sM)(y,P,L)}catch(P){m.messages&&m.messages.push(P)}}function v(I){if(null==I||!I.length)return"";const L=[];for(const y of I){let m=[];switch(y.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":m=[C(y,"amount")];break;case"blur":m=[C(y,"radius","pt")];break;case"hue-rotate":m=[C(y,"angle","deg")];break;case"drop-shadow":m=[C(y,"xoffset","pt"),C(y,"yoffset","pt"),C(y,"blurRadius","pt"),Y(y,"color")];break;case"bloom":m=[C(y,"strength"),C(y,"radius","pt"),C(y,"threshold")]}const P=`${y.type}(${m.filter(Boolean).join(" ")})`;(0,z.q)(P),L.push(P)}return L.join(" ")}function C(I,L,y){if(null==I[L])throw new j.A("effect:missing-parameter",`Missing parameter '${L}' in ${I.type} effect`,{effect:I});return y?I[L]+y:""+I[L]}function Y(I,L){if(null==I[L])throw new j.A("effect:missing-parameter",`Missing parameter '${L}' in ${I.type} effect`,{effect:I});const y=I[L];return`rgba(${y[0]||0}, ${y[1]||0}, ${y[2]||0}, ${y[3]/255||0})`}},93410:(te,V,o)=>{o.d(V,{d:()=>U});var j=o(8189),f=o(85211),D=(o(3248),o(35150),o(40707),o(76576)),W=o(72211);const x={read:{reader:W.LF},write:{allowNull:!0,writer:W.M9}},U=v=>{let C=class extends v{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,j._)([(0,f.MZ)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],C.prototype,"blendMode",void 0),(0,j._)([(0,f.MZ)({json:{read:!1,write:!1,origins:{"web-map":x,"portal-item":x}}})],C.prototype,"effect",void 0),C=(0,j._)([(0,D.$)("esri.layers.mixins.BlendLayer")],C),C}},85551:(te,V,o)=>{o.d(V,{A:()=>S});var j=o(10467),f=o(8189),z=o(23098),R=o(77469),H=o(89563),D=o(89447),W=o(5922),x=o(35150),U=o(11432),v=o(56492),C=o(45272),Y=o(85211),y=(o(3248),o(40707),o(17221)),m=o(76576),P=o(50305),g=o(58443),c=o(73874),E=o(46577),b=o(52606),G=o(69927);const S=q=>{let w=class extends q{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,U.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(A){A!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",A))}readPortalItem(A,p,a){if(p.itemId)return new E.default({id:p.itemId,portal:null==a?void 0:a.portal})}writePortalItem(A,p){null!=A&&A.id&&(p.itemId=A.id)}loadFromPortal(A,p){var a=this;return(0,j.A)(function*(){var d;if(null!==(d=a.portalItem)&&void 0!==d&&d.id)try{const{load:T}=yield Promise.all([o.e(5565),o.e(2076),o.e(6180)]).then(o.bind(o,56180));return(0,v.Te)(p),yield T({instance:a,supportedTypes:A.supportedTypes,validateItem:A.validateItem,supportsData:A.supportsData,layerModuleTypeMap:A.layerModuleTypeMap},p)}catch(T){throw(0,v.zf)(T)||x.A.getLogger(a).warn(`Failed to load layer (${a.title}, ${a.id}) portal item (${a.portalItem.id})\n  ${T}`),T}})()}finishLoadEditablePortalLayer(A){var p=this;return(0,j.A)(function*(){p._set("userHasEditingPrivileges",yield p._fetchUserHasEditingPrivileges(A).catch(a=>((0,v.QP)(a),!0)))})()}setUserPrivileges(A,p){var a=this;return(0,j.A)(function*(){if(!z.A.userPrivilegesApplied)return a.finishLoadEditablePortalLayer(p);if(a.url)try{const{features:{edit:d,fullEdit:T},content:{updateItem:O}}=yield a._fetchUserPrivileges(A,p);a._set("userHasEditingPrivileges",d),a._set("userHasFullEditingPrivileges",T),a._set("userHasUpdateItemPrivileges",O)}catch(d){(0,v.QP)(d)}})()}_fetchUserPrivileges(A,p){var a=this;return(0,j.A)(function*(){let d=a.portalItem;if(!A||!d||!d.loaded||d.sourceUrl)return a._fetchFallbackUserPrivileges(p);const T=A===d.id;if(T&&d.portal.user)return(0,G.It)(d);let O,B;if(T)O=d.portal.url;else try{O=yield(0,g.wI)(a.url,p)}catch(J){(0,v.QP)(J)}if(!O||!(0,C.b8)(O,d.portal.url))return a._fetchFallbackUserPrivileges(p);try{const J=null!=p?p.signal:null;B=yield null==R.id?void 0:R.id.getCredential(`${O}/sharing`,{prompt:!1,signal:J})}catch(J){(0,v.QP)(J)}if(!B)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(T?yield d.reload():(d=new E.default({id:A,portal:{url:O}}),yield d.load(p)),d.portal.user)return(0,G.It)(d)}catch(J){(0,v.QP)(J)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(A){var p=this;return(0,j.A)(function*(){let a=!0;try{a=yield p._fetchUserHasEditingPrivileges(A)}catch(d){(0,v.QP)(d)}return{features:{edit:a,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(A){var p=this;return(0,j.A)(function*(){const a=p.url?null==R.id?void 0:R.id.findCredential(p.url):null;if(!a)return!0;const d=$.credential===a?$.user:yield p._fetchEditingUser(A);return $.credential=a,$.user=d,null==(null==d?void 0:d.privileges)||d.privileges.includes("features:user:edit")})()}_fetchEditingUser(A){var p=this;return(0,j.A)(function*(){var a,d;const T=null===(a=p.portalItem)||void 0===a||null===(a=a.portal)||void 0===a?void 0:a.user;if(T)return T;const O=R.id.findServerInfo(null!==(d=p.url)&&void 0!==d?d:"");if(null==O||!O.owningSystemUrl)return null;const B=`${O.owningSystemUrl}/sharing/rest`,Q=c.A.getDefault();if(Q&&Q.loaded&&(0,C.S8)(Q.restUrl)===(0,C.S8)(B))return Q.user;const ee=`${B}/community/self`,K=null!=A?A.signal:null,J=yield(0,D.Ke)((0,H.A)(ee,{authMode:"no-prompt",query:{f:"json"},signal:K}));return J.ok?b.A.fromJSON(J.value.data):null})()}read(A,p){p&&(p.layer=this),super.read(A,p)}write(A,p){var a;const d=null==p?void 0:p.portal,T=(null===(a=this.portalItem)||void 0===a?void 0:a.id)&&(this.portalItem.portal||c.A.getDefault());return d&&T&&!(0,C.ut)(T.restUrl,d.restUrl)?(p.messages&&p.messages.push(new W.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(A,{...p,layer:this})}};return(0,f._)([(0,Y.MZ)({type:E.default})],w.prototype,"portalItem",null),(0,f._)([(0,y.w)("web-document","portalItem",["itemId"])],w.prototype,"readPortalItem",null),(0,f._)([(0,P.K)("web-document","portalItem",{itemId:{type:String}})],w.prototype,"writePortalItem",null),(0,f._)([(0,Y.MZ)({clonable:!1})],w.prototype,"resourceReferences",void 0),(0,f._)([(0,Y.MZ)({type:Boolean,readOnly:!0})],w.prototype,"userHasEditingPrivileges",void 0),(0,f._)([(0,Y.MZ)({type:Boolean,readOnly:!0})],w.prototype,"userHasFullEditingPrivileges",void 0),(0,f._)([(0,Y.MZ)({type:Boolean,readOnly:!0})],w.prototype,"userHasUpdateItemPrivileges",void 0),w=(0,f._)([(0,m.$)("esri.layers.mixins.PortalLayer")],w),w},$={credential:null,user:null}},1151:(te,V,o)=>{o.d(V,{J:()=>p});var j=o(10467),f=o(8189),z=o(35150),R=o(56492),H=o(85211),D=o(48669),U=(o(40707),o(3248),o(76576)),v=o(50501),C=o(31178),y=(o(89447),o(5922),o(76410),o(34703));const m=new C.A,P=new WeakMap;function b(a,d){return Number.isFinite(a)&&Number.isFinite(d)?d<=0?a:b(d,a%d):0}let G=0,S=0;function $(){const a=Date.now();let d=!1;for(const O of m){const B=O.deref();var T;B?B.refreshInterval&&a-(null!==(T=P.get(B))&&void 0!==T?T:0)+5>=6e4*B.refreshInterval&&(P.set(B,a),B.refresh(a)):d=!0}if(d)for(let O=m.length-1;O>=0;O--)m.at(O).deref()||m.removeAt(O)}(0,y.fm)(()=>{const a=Date.now();let d=0;for(const T of m){const O=T.deref();O&&(d=b(Math.round(6e4*O.refreshInterval),d),O.refreshInterval?P.get(O)||P.set(O,a):P.delete(O))}if(d!==S){if(S=d,clearInterval(G),0===S)return void(G=0);G=setInterval($,S)}});const p=a=>{let d=class extends a{constructor(...T){super(...T),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,R.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function g(a){(function E(a){return null!=a&&"object"==typeof a&&"refreshInterval"in a&&"refresh"in a})(a)&&m.push(new WeakRef(a))}(this)},()=>{})}destroy(){!function c(a){const d=m.find(T=>T.deref()===a);d&&m.remove(d)}(this)}castRefreshInterval(T){return T>=.1?T:T<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(T=Date.now()){(0,R.QZ)(this._debounceHasDataChanged()).then(O=>{O&&this._set("refreshTimestamp",T),this.emit("refresh",{dataChanged:O})},O=>{z.A.getLogger(this).error(O),this.emit("refresh",{dataChanged:!1,error:O})})}hasDataChanged(){return(0,j.A)(function*(){return!0})()}get test(){const T=this;return{set refreshInterval(O){T._set("refreshInterval",O)}}}};return(0,f._)([(0,H.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:v.K}}}}})],d.prototype,"refreshInterval",void 0),(0,f._)([(0,D.w)("refreshInterval")],d.prototype,"castRefreshInterval",null),(0,f._)([(0,H.MZ)({readOnly:!0})],d.prototype,"refreshTimestamp",void 0),(0,f._)([(0,H.MZ)({readOnly:!0})],d.prototype,"refreshParameters",null),d=(0,f._)([(0,U.$)("esri.layers.mixins.RefreshableLayer")],d),d}},33036:(te,V,o)=>{o.d(V,{j:()=>W});var j=o(8189),f=o(85211),D=(o(3248),o(35150),o(40707),o(76576));const W=U=>{let v=class extends U{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const C={minScale:this.minScale,maxScale:this.maxScale},Y=this.parent;Y&&"effectiveScaleRange"in Y&&function x(U,v){U.minScale=U.minScale>0?v.minScale>0?Math.min(U.minScale,v.minScale):U.minScale:v.minScale,U.maxScale=U.maxScale>0?v.maxScale>0?Math.max(U.maxScale,v.maxScale):U.maxScale:v.maxScale}(C,Y.effectiveScaleRange);const I=this._get("effectiveScaleRange");return I&&I.minScale===C.minScale&&I.maxScale===C.maxScale?I:C}};return(0,j._)([(0,f.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],v.prototype,"minScale",void 0),(0,j._)([(0,f.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],v.prototype,"maxScale",void 0),(0,j._)([(0,f.MZ)({readOnly:!0})],v.prototype,"effectiveScaleRange",null),v=(0,j._)([(0,D.$)("esri.layers.mixins.ScaleRangeLayer")],v),v}},73258:(te,V,o)=>{o.d(V,{A:()=>I});var j=o(5922),f=o(71065),z=o(35150),R=o(60797),H=o(24098),D=o(86300),W=o(22639),x=o(44549);const Y=new Map;class I{static fromJSON(c){return new I(c.fields,c.timeZoneByFieldName)}static fromLayer(c){var E;return new I(null!==(E=c.fields)&&void 0!==E?E:[],P(c))}static fromLayerJSON(c){var E;return new I(null!==(E=c.fields)&&void 0!==E?E:[],P(c))}constructor(c=[],E){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=c||[],this._timeZoneByFieldName=E?new Map(E):null;const b=[];for(const S of this.fields){const $=null==S?void 0:S.name,q=y($);if($&&q){var G;const w=L($);this._fieldsMap.set($,S),this._fieldsMap.set(w,S),this._normalizedFieldsMap.set(q,S),b.push(`${w}:${S.type}:${null===(G=this._timeZoneByFieldName)||void 0===G?void 0:G.get($)}`),(0,D.vE)(S)?(this.dateFields.push(S),this._dateFieldsSet.add(S)):(0,D.WA)(S)&&(this._numericFieldsSet.add(S),this.numericFields.push(S)),(0,D.te)(S)||(0,D.Xz)(S)||(S.editable=null==S.editable||!!S.editable,S.nullable=null==S.nullable||!!S.nullable)}}b.sort(),this.uid=b.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const c of this.fields)(0,D.te)(c)||(0,D.Xz)(c)||c.nullable||void 0!==(0,D.lD)(c)||this._requiredFields.push(c)}return this._requiredFields}equals(c){return this.uid===(null==c?void 0:c.uid)}has(c){return null!=this.get(c)}get(c){var E;if(!c)return;let b=this._fieldsMap.get(c);return b||(b=null!==(E=this._fieldsMap.get(L(c)))&&void 0!==E?E:this._normalizedFieldsMap.get(y(c)),b&&this._fieldsMap.set(c,b),b)}getTimeZone(c){const E=this.get(c&&"string"!=typeof c?c.name:c);return E?this._timeZoneByFieldName?this._timeZoneByFieldName.get(E.name):"date"===E.type||"esriFieldTypeDate"===E.type?(z.A.getLogger("esri.layers.support.FieldsIndex").error(new j.A("getTimeZone:no-timezone-information",`no time zone information for field '${E.name}'`)),W.n$):m.has(E.type)?W.L5:null:null}getLuxonTimeZone(c){const E=this.getTimeZone(c);return E?E===W.L5?H.GB.instance:E===W.n$?x.mQ.utcInstance:(0,R.tE)(Y,E,()=>x.oh.create(E)):null}isDateField(c){return this._dateFieldsSet.has(this.get(c))}isTimeOnlyField(c){return(0,D.OH)(this.get(c))}isNumericField(c){return this._numericFieldsSet.has(this.get(c))}normalizeFieldName(c){var E,b;return null!==(E=null===(b=this.get(c))||void 0===b?void 0:b.name)&&void 0!==E?E:void 0}toJSON(){return{fields:this.fields.map(c=>(0,f.Wj)(c)?c.toJSON():c),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function L(g){return g.trim().toLowerCase()}function y(g){var c,E;return null!==(c=null===(E=(0,D.rS)(g))||void 0===E?void 0:E.toLowerCase())&&void 0!==c?c:""}const m=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function P(g){var c,E,b,G,S,$,q;const w=new Map;if(!g.fields)return w;const A=!0===g.datesInUnknownTimezone,{timeInfo:p,editFieldsInfo:a}=g,d=null!==(c=p?"startField"in p?p.startField:p.startTimeField:"")&&void 0!==c?c:"",T=null!==(E=p?"endField"in p?p.endField:p.endTimeField:"")&&void 0!==E?E:"",O=function C(g){return"dateFieldsTimeZone"in g}(g)?null!==(b=g.dateFieldsTimeZone)&&void 0!==b?b:null:g.dateFieldsTimeReference?(0,W.ZS)(g.dateFieldsTimeReference):null,B=a?function U(g){return"timeZone"in g}(a)?null!==(G=a.timeZone)&&void 0!==G?G:O:a.dateFieldsTimeReference?(0,W.ZS)(a.dateFieldsTimeReference):null!=O?O:W.n$:null,Q=p?function v(g){return"timeZone"in g}(p)?null!==(S=p.timeZone)&&void 0!==S?S:O:p.timeReference?(0,W.ZS)(p.timeReference):O:null,ee=new Map([[L(null!==($=null==a?void 0:a.creationDateField)&&void 0!==$?$:""),B],[L(null!==(q=null==a?void 0:a.editDateField)&&void 0!==q?q:""),B],[L(d),Q],[L(T),Q]]);for(const{name:J,type:M}of g.fields)if(m.has(M))w.set(J,W.L5);else if("date"!==M&&"esriFieldTypeDate"!==M)w.set(J,null);else if(A)w.set(J,W.L5);else{var K;const s=null!==(K=ee.get(L(null!=J?J:"")))&&void 0!==K?K:O;w.set(J,s)}return w}},69927:(te,V,o)=>{o.d(V,{It:()=>y,LG:()=>W,OM:()=>v,Sm:()=>C,Y:()=>x,bK:()=>U,mm:()=>L,sQ:()=>Y});var j=o(10467),f=o(11817),z=o(32034),R=o(55039);function D(){return(D=(0,j.A)(function*(m){const P=m.spatialReference;if(P.isWGS84)return m.clone();if(P.isWebMercator)return(0,R.ci)(m);const g=z.A.WGS84;return yield(0,f.initializeProjection)(P,g),(0,f.project)(m,g)})).apply(this,arguments)}function W(m,P){if(!x(m,P)){const g=m.typeKeywords;g?g.push(P):m.typeKeywords=[P]}}function x(m,P){var g;return!(null===(g=m.typeKeywords)||void 0===g||!g.includes(P))}function U(m){return x(m,L.HOSTED_SERVICE)}function v(m,P){const g=m.typeKeywords;if(g){const c=g.indexOf(P);c>-1&&g.splice(c,1)}}function C(m,P,g){g?W(m,P):v(m,P)}function Y(m){return I.apply(this,arguments)}function I(){return I=(0,j.A)(function*(m){const P=m.clone().normalize();let g;if(P.length>1)for(const c of P)g?c.width>g.width&&(g=c):g=c;else g=P[0];return function H(m){return D.apply(this,arguments)}(g)}),I.apply(this,arguments)}const L={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function y(m){var P;const{portal:g,isOrgItem:c,itemControl:E}=m,b=null===(P=g.user)||void 0===P?void 0:P.privileges;let G=!b||b.includes("features:user:edit"),S=!!c&&!(null==b||!b.includes("features:user:fullEdit"));const $="update"===E||"admin"===E;return $?S=G=!0:S&&(G=!0),{features:{edit:G,fullEdit:S},content:{updateItem:$}}}}}]);