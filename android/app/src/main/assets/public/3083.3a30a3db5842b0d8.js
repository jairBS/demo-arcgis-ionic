"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3083],{43083:(M,h,e)=>{e.r(h),e.d(h,{executeAttachmentQuery:()=>j,fetchAttachments:()=>u,processAttachmentQueryResult:()=>I});var a=e(10467),f=e(77469),i=e(89563),m=e(45272),O=e(1832),_=e(70994);function y(o){const t=o.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function I(o,t){const n={};for(const r of t){const{parentObjectId:s,parentGlobalId:l,attachmentInfos:d}=r;for(const p of d){const{id:g}=p,E=(0,m.yM)((0,f.Y3)(`${o.path}/${s}/attachments/${g}`)),v=_.A.fromJSON(p);v.set({url:E,parentObjectId:s,parentGlobalId:l}),n[s]?n[s].push(v):n[s]=[v]}}return n}function j(o,t,n){let r={query:(0,O.z)({...o.query,f:"json",...y(t)})};return n&&(r={...n,...r,query:{...n.query,...r.query}}),(0,i.A)(o.path+"/queryAttachments",r).then(s=>s.data.attachmentGroups)}function u(o,t,n){return c.apply(this,arguments)}function c(){return(c=(0,a.A)(function*(o,t,n){const{objectIds:r}=t,s=[];for(const l of r)s.push((0,i.A)(o.path+"/"+l+"/attachments",n));return Promise.all(s).then(l=>r.map((d,p)=>({parentObjectId:d,attachmentInfos:l[p].data.attachmentInfos})))})).apply(this,arguments)}},70994:(M,h,e)=>{e.d(h,{A:()=>t});var u,a=e(8189),f=e(71065),i=e(85211),m=e(55739),y=(e(40707),e(3248),e(76576));const c={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let o=u=class extends f.oY{constructor(n){super(n),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:n}=this,r=function I(n){const{exifInfo:r,exifName:s,tagName:l}=n;if(!r||!s||!l)return null;const d=r.find(p=>p.name===s);return d?function j(n){const{tagName:r,tags:s}=n;if(!s||!r)return null;const l=s.find(d=>d.name===r);return(null==l?void 0:l.value)||null}({tagName:l,tags:d.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:n});return c[r]||null}clone(){return new u({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,a._)([(0,i.MZ)({type:String})],o.prototype,"contentType",void 0),(0,a._)([(0,i.MZ)()],o.prototype,"exifInfo",void 0),(0,a._)([(0,i.MZ)({readOnly:!0})],o.prototype,"orientationInfo",null),(0,a._)([(0,i.MZ)({type:m.jz})],o.prototype,"id",void 0),(0,a._)([(0,i.MZ)({type:String})],o.prototype,"globalId",void 0),(0,a._)([(0,i.MZ)({type:String})],o.prototype,"keywords",void 0),(0,a._)([(0,i.MZ)({type:String})],o.prototype,"name",void 0),(0,a._)([(0,i.MZ)({json:{read:!1}})],o.prototype,"parentGlobalId",void 0),(0,a._)([(0,i.MZ)({json:{read:!1}})],o.prototype,"parentObjectId",void 0),(0,a._)([(0,i.MZ)({type:m.jz})],o.prototype,"size",void 0),(0,a._)([(0,i.MZ)({json:{read:!1}})],o.prototype,"url",void 0),o=u=(0,a._)([(0,y.$)("esri.layers.support.AttachmentInfo")],o);const t=o}}]);