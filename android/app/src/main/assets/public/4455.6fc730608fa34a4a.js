"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4455],{33087:(w,B,s)=>{s.d(B,{q:()=>U});var p=s(60611);class U{constructor(A,f){this._storage=new p.F,this.id="",this.name="",this.size=0,this._storage.maxSize=A,this._storage.register(this),f&&this._storage.registerRemoveFunc("",f)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(A,f,O=1){this._storage.put(this,A,f,O,1)}pop(A){return this._storage.pop(this,A)}get(A){return this._storage.get(this,A)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(A){this._storage.maxSize=A}resetHitRate(){}}},60611:(w,B,s)=>{s.d(B,{F:()=>O,Mn:()=>f});var A,W,p=s(12438);(W=A||(A={}))[W.ALL=0]="ALL",W[W.SOME=1]="SOME";class f{constructor(l,i,t){this.name=l,this._storage=i,this.id=L+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),t&&(this._storage.registerRemoveFunc(this.id,t),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(l){return this._storage.getSize(this,l)}resetHitRate(){this._hit=this._miss=0}put(l,i,t,o=0){this._storage.put(this,l,i,t,o)}pop(l){const i=this._storage.pop(this,l);return void 0===i?++this._miss:++this._hit,i}get(l){const i=this._storage.get(this,l);return void 0===i?++this._miss:++this._hit,i}peek(l){return this._storage.peek(this,l)}updateSize(l,i,t){this._storage.updateSize(this,l,i,t)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class O{get size(){return this._size}constructor(l=10485760){this._maxSize=l,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new p.A,this._users=new p.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(l){this._users.push(l)}deregister(l){this._users.removeUnordered(l)}registerRemoveFunc(l,i){this._removeFuncs.push([l,i])}deregisterRemoveFunc(l){this._removeFuncs.filterInPlace(i=>i[0]!==l)}get maxSize(){return this._maxSize}set maxSize(l){this._maxSize=Math.max(l,-1),this._checkSize()}getSize(l,i){var t;const o=this._db.get(l.id+i);return null!==(t=null==o?void 0:o.size)&&void 0!==t?t:0}put(l,i,t,o,v){const r=this._db.get(i=l.id+i);if(r&&(this._size-=r.size,l.size-=r.size,this._db.delete(i),r.entry!==t&&this._notifyRemove(i,r.entry,r.size,A.ALL)),o>this._maxSize)return void this._notifyRemove(i,t,o,A.ALL);if(void 0===t)return void console.warn("Refusing to cache undefined entry ");if(!o||o<0)return console.warn(`Refusing to cache entry with size ${o} for key ${i}`),void this._notifyRemove(i,t,0,A.ALL);const y=1+Math.max(v,-4)- -3;this._db.set(i,new I(t,o,y)),this._size+=o,l.size+=o,this._checkSize()}updateSize(l,i,t,o){const v=this._db.get(i=l.id+i);if(v&&v.entry===t){for(this._size-=v.size,l.size-=v.size;o>this._maxSize;){const r=this._notifyRemove(i,t,o,A.SOME);if(!(null!=r&&r>0))return void this._db.delete(i);o=r}v.size=o,this._size+=o,l.size+=o,this._checkSize()}}pop(l,i){const t=this._db.get(i=l.id+i);if(t)return this._size-=t.size,l.size-=t.size,this._db.delete(i),++this._hit,t.entry;++this._miss}get(l,i){const t=this._db.get(i=l.id+i);if(void 0!==t)return this._db.delete(i),t.lives=t.lifetime,this._db.set(i,t),++this._hit,t.entry;++this._miss}peek(l,i){const t=this._db.get(l.id+i);return t?++this._hit:++this._miss,null==t?void 0:t.entry}get performanceInfo(){const l={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},t=new Array;this._db.forEach((r,y)=>{const M=r.lifetime;t[M]=(t[M]||0)+r.size,this._users.forAll(E=>{const{id:z,name:a}=E;y.startsWith(z)&&(i[a]=(i[a]||0)+r.size)})});const o={};this._users.forAll(r=>{const y=r.name;"hitRate"in r&&"number"==typeof r.hitRate&&!isNaN(r.hitRate)&&r.hitRate>0?(i[y]=i[y]||0,o[y]=Math.round(100*r.hitRate)+"%"):o[y]="0%"});const v=Object.keys(i);v.sort((r,y)=>i[y]-i[r]),v.forEach(r=>l[r]=Math.round(i[r]/2**20)+"MB / "+o[r]);for(let r=t.length-1;r>=0;--r){const y=t[r];y&&(l["Priority "+(r+-3-1)]=Math.round(y/this._size*100)+"%")}return l}resetStats(){this._hit=this._miss=0,this._users.forAll(l=>l.resetHitRate())}clear(l){const i=l.id;this._db.forEach((t,o)=>{o.startsWith(i)&&(this._size-=t.size,this._db.delete(o),this._notifyRemove(o,t.entry,t.size,A.ALL))}),l.size=0}clearAll(){this._db.forEach((l,i)=>this._notifyRemove(i,l.entry,l.size,A.ALL)),this._users.forAll(l=>l.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(l,i,t,o){let v;return this._removeFuncs.some(r=>{if(l.startsWith(r[0])){const y=r[1](i,o,t);return"number"==typeof y&&(v=y),!0}return!1}),v}_checkSize(){this._users.forAll(l=>this._checkSizeLimits(l)),this._checkSizeLimits()}_checkSizeLimits(l){const i=null!=l?l:this;if(i.maxSize<0||i.size<=i.maxSize)return;const t=null==l?void 0:l.id;let o=!0;for(;o;){o=!1;for(const[v,r]of this._db)if(0===r.lifetime&&(!t||v.startsWith(t))){if(this._purgeItem(v,r,l),i.size<=.9*i.maxSize)return;o||(o=this._db.has(v))}}for(const[v,r]of this._db)if((!t||v.startsWith(t))&&(this._purgeItem(v,r,l),i.size<=.9*i.maxSize))return}_purgeItem(l,i,t=this._users.find(o=>l.startsWith(o.id))){if(this._db.delete(l),i.lives<=1){this._size-=i.size,t&&(t.size-=i.size);const o=this._notifyRemove(l,i.entry,i.size,A.SOME);null!=o&&o>0&&(this._size+=o,t&&(t.size+=o),i.lives=i.lifetime,i.size=o,this._db.set(l,i))}else--i.lives,this._db.set(l,i)}}let L=0;class I{constructor(l,i,t){this.entry=l,this.size=i,this.lifetime=t,this.lives=t}}},40856:(w,B,s)=>{s.d(B,{X_:()=>A,i1:()=>f,zx:()=>W});var p=s(69287),U=s(82663);const j=96;function A(t,o){const v=o||t.extent,r=t.width,y=(0,U.GA)(null==v?void 0:v.spatialReference);return v&&r?v.width/r*y*U.dy*j:0}function f(t,o){return t/((0,U.GA)(o)*U.dy*j)}function W(t,o,v){return function l(t,o){return 0===o||(0,p.Sp)(t,o)||t<o}(t,o)&&function i(t,o){return 0===o||(0,p.Sp)(t,o)||t>o}(t,v)}},78592:(w,B,s)=>{s.d(B,{O3:()=>W,PU:()=>L,YW:()=>i,ex:()=>f,hv:()=>l,zp:()=>O});var p=s(69287),U=s(67685),j=s(53781),A=s(89141);const f=2.4;function O(t){return(0,U.PN)(t*f)}function L(t){return(0,U.Lz)(t)/f}function I(t,o,v,r){let{color:y,ratio:M}=o,{color:E,ratio:z}=v;z===M&&(1===z?M-=1e-6:z+=1e-6);const a=(0,p.qE)((r-M)/(z-M),0,1);(0,j.l)(t,y.toArray(),E.toArray(),a)}function W(t){const v=new Uint8ClampedArray(2048);if((t=t.filter(({ratio:z})=>z>=0&&z<=1).sort((z,a)=>z.ratio-a.ratio).map(({color:z,ratio:a})=>({color:z,ratio:Math.max(a,.001)}))).length<1)return v;let r=t[0],y=t[0],M=1;const E=(0,A.vt)();for(let z=0;z<512;z++){const a=(z+.5)/512;for(;a>y.ratio&&M<t.length;)r=y,y=t[M++];I(E,r,y,a),v.set(E,4*z)}return v}function l(t,o,v){const r=Math.sqrt(t**2+o**2)/v;return r>1?0:3/(Math.PI*v**2)*(1-r**2)**2}function i(t){return"function"==typeof t?t:t?o=>+o[t]:()=>1}},93327:(w,B,s)=>{s.d(B,{A:()=>z});var y,p=s(8189),U=s(21152),j=s(81098),A=s(49976),f=s(71065),O=s(77806),L=s(85211),l=(s(3248),s(35150),s(17221)),i=s(76576),t=s(50305),o=s(32034),v=s(61320),r=s(29141);const M=new A.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let E=y=class extends f.oY{constructor(a){super(a),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(a,g){const P=o.A.fromJSON(g.spatialReference),d=[];for(let _=0;_<a.length;_++){var h;const m=a[_],R=j.A.fromJSON(m),D=null===(h=m.geometry)||void 0===h?void 0:h.spatialReference;null==R.geometry||D||(R.geometry.spatialReference=P);const c=m.aggregateGeometries,C=R.aggregateGeometries;if(c&&null!=C)for(const u in C){const T=C[u],K=c[u];null==T||(null==K?void 0:K.spatialReference)||(T.spatialReference=P)}d.push(R)}return d}writeGeometryType(a,g,P,d){if(a)return void M.write(a,g,P,d);const{features:h}=this;if(h)for(const _ of h)if(null!=(null==_?void 0:_.geometry))return void M.write(_.geometry.type,g,P,d)}readQueryGeometry(a,g){if(!a)return null;const P=!!a.spatialReference,d=(0,v.rS)(a);return d&&!P&&g.spatialReference&&(d.spatialReference=o.A.fromJSON(g.spatialReference)),d}writeSpatialReference(a,g){if(a)return void(g.spatialReference=a.toJSON());const{features:P}=this;if(P)for(const d of P)if(d&&null!=d.geometry&&d.geometry.spatialReference)return void(g.spatialReference=d.geometry.spatialReference.toJSON())}clone(){return new y(this.cloneProperties())}cloneProperties(){return(0,O.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(a){const g=this.write();if(g.features&&Array.isArray(a)&&a.length>0)for(let P=0;P<g.features.length;P++){const d=g.features[P];if(d.geometry){const h=null==a?void 0:a[P];d.geometry=(null==h?void 0:h.toJSON())||d.geometry}}return g}quantize(a){const{scale:[g,P],translate:[d,h]}=a,R=this.features,D=this._getQuantizationFunction(this.geometryType,c=>Math.round((c-d)/g),c=>Math.round((h-c)/P));for(let c=0,C=R.length;c<C;c++)null!=D&&D(R[c].geometry)||(R.splice(c,1),c--,C--);return this.transform=a,this}unquantize(){var a,g;const{geometryType:P,features:d,transform:h}=this;if(!h)return this;const{translate:[_,m],scale:[R,D]}=h;let u=null,T=null;if(this.hasZ&&null!=(null==h||null===(a=h.scale)||void 0===a?void 0:a[2])){const{translate:[,,S],scale:[,,Z]}=h;u=x=>x*Z+S}if(this.hasM&&null!=(null==h||null===(g=h.scale)||void 0===g?void 0:g[3])){const{translate:[,,,S],scale:[,,,Z]}=h;T=x=>null==x?x:x*Z+S}const K=this._getHydrationFunction(P,S=>S*R+_,S=>m-S*D,u,T);for(const{geometry:S}of d)null!=S&&K&&K(S);return this.transform=null,this}_quantizePoints(a,g,P){let d,h;const _=[];for(let m=0,R=a.length;m<R;m++){const D=a[m];if(m>0){const c=g(D[0]),C=P(D[1]);c===d&&C===h||(_.push([c-d,C-h]),d=c,h=C)}else d=g(D[0]),h=P(D[1]),_.push([d,h])}return _.length>0?_:null}_getQuantizationFunction(a,g,P){return"point"===a?d=>(d.x=g(d.x),d.y=P(d.y),d):"polyline"===a||"polygon"===a?d=>{const h=(0,v.Bi)(d)?d.rings:d.paths,_=[];for(let m=0,R=h.length;m<R;m++){const c=this._quantizePoints(h[m],g,P);c&&_.push(c)}return _.length>0?((0,v.Bi)(d)?d.rings=_:d.paths=_,d):null}:"multipoint"===a?d=>{const h=this._quantizePoints(d.points,g,P);return h&&h.length>0?(d.points=h,d):null}:"extent"===a?d=>d:null}_getHydrationFunction(a,g,P,d,h){return"point"===a?_=>{_.x=g(_.x),_.y=P(_.y),d&&(_.z=d(_.z))}:"polyline"===a||"polygon"===a?_=>{const m=(0,v.Bi)(_)?_.rings:_.paths;let R,D;for(let c=0,C=m.length;c<C;c++){const u=m[c];for(let T=0,K=u.length;T<K;T++){const S=u[T];T>0?(R+=S[0],D+=S[1]):(R=S[0],D=S[1]),S[0]=g(R),S[1]=P(D)}}if(d&&h)for(let c=0,C=m.length;c<C;c++){const u=m[c];for(let T=0,K=u.length;T<K;T++){const S=u[T];S[2]=d(S[2]),S[3]=h(S[3])}}else if(d)for(let c=0,C=m.length;c<C;c++){const u=m[c];for(let T=0,K=u.length;T<K;T++){const S=u[T];S[2]=d(S[2])}}else if(h)for(let c=0,C=m.length;c<C;c++){const u=m[c];for(let T=0,K=u.length;T<K;T++){const S=u[T];S[2]=h(S[2])}}}:"extent"===a?_=>{_.xmin=g(_.xmin),_.ymin=P(_.ymin),_.xmax=g(_.xmax),_.ymax=P(_.ymax),d&&null!=_.zmax&&null!=_.zmin&&(_.zmax=d(_.zmax),_.zmin=d(_.zmin)),h&&null!=_.mmax&&null!=_.mmin&&(_.mmax=h(_.mmax),_.mmin=h(_.mmin))}:"multipoint"===a?_=>{const m=_.points;let R,D;for(let c=0,C=m.length;c<C;c++){const u=m[c];c>0?(R+=u[0],D+=u[1]):(R=u[0],D=u[1]),u[0]=g(R),u[1]=P(D)}if(d&&h)for(let c=0,C=m.length;c<C;c++){const u=m[c];u[2]=d(u[2]),u[3]=h(u[3])}else if(d)for(let c=0,C=m.length;c<C;c++){const u=m[c];u[2]=d(u[2])}else if(h)for(let c=0,C=m.length;c<C;c++){const u=m[c];u[2]=h(u[2])}}:null}};(0,p._)([(0,L.MZ)({type:String,json:{write:!0}})],E.prototype,"displayFieldName",void 0),(0,p._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:a=>({enabled:a})}}})],E.prototype,"exceededTransferLimit",void 0),(0,p._)([(0,L.MZ)({type:[j.A],json:{write:!0}})],E.prototype,"features",void 0),(0,p._)([(0,l.w)("features")],E.prototype,"readFeatures",null),(0,p._)([(0,L.MZ)({type:[r.A],json:{write:!0}})],E.prototype,"fields",void 0),(0,p._)([(0,L.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:M.read}}})],E.prototype,"geometryType",void 0),(0,p._)([(0,t.K)("geometryType")],E.prototype,"writeGeometryType",null),(0,p._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:a=>({enabled:a})}}})],E.prototype,"hasM",void 0),(0,p._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:a=>({enabled:a})}}})],E.prototype,"hasZ",void 0),(0,p._)([(0,L.MZ)({types:U.yR,json:{write:!0}})],E.prototype,"queryGeometry",void 0),(0,p._)([(0,l.w)("queryGeometry")],E.prototype,"readQueryGeometry",null),(0,p._)([(0,L.MZ)({type:o.A,json:{write:!0}})],E.prototype,"spatialReference",void 0),(0,p._)([(0,t.K)("spatialReference")],E.prototype,"writeSpatialReference",null),(0,p._)([(0,L.MZ)({json:{write:!0}})],E.prototype,"transform",void 0),E=y=(0,p._)([(0,i.$)("esri.rest.support.FeatureSet")],E),E.prototype.toJSON.isDefaultToJSON=!0;const z=E},46698:(w,B,s)=>{s.r(B),s.d(B,{default:()=>z});var p=s(10467),U=s(8189),j=s(92165),A=s(31178),f=s(48900),l=(s(35150),s(3248),s(40707),s(5922),s(76576)),i=s(73747),t=s(85718),o=s(93327),v=s(29459),r=s(57052),y=s(80745),M=s(41474);let E=class extends((0,v.e)(M.A)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(a,g){var P=this;return(0,p.A)(function*(){if(!P.graphicsViews.length)return null;const d=P.layer;return P.graphicsViews.reverse().flatMap(h=>{const _=P._popupTemplates.get(h),m=h.hitTest(a);for(const R of m)R.layer=d,R.sourceLayer=d,R.popupTemplate=_;return m}).map(h=>({type:"graphic",graphic:h,layer:d,mapPoint:a}))})()}update(a){if(this.graphicsViews)for(const g of this.graphicsViews)g.processUpdate(a)}attach(){this.addAttachHandles([(0,f.wB)(()=>{var a;return null===(a=this.layer)||void 0===a?void 0:a.featureCollections},a=>{this._clear();for(const{popupInfo:g,featureSet:P,layerDefinition:d}of a){const h=o.A.fromJSON(P),_=new A.A(h.features),m=d.drawingInfo,R=g?j.A.fromJSON(g):null,D=(0,t.r)(m.renderer),c=new y.A({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:_,renderer:D,container:new r.A(this.view.featuresTilingScheme)});this._graphicsViewMap[h.geometryType]=c,this._popupTemplates.set(c,R),"polygon"!==h.geometryType||this.layer.polygonSymbol?"polyline"!==h.geometryType||this.layer.lineSymbol?"point"!==h.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=D.symbol):this.layer.lineSymbol=D.symbol:this.layer.polygonSymbol=D.symbol,this.graphicsViews.push(c),this.container.addChild(c.container)}},f.Vh),(0,f.wB)(()=>{var a;return null===(a=this.layer)||void 0===a?void 0:a.polygonSymbol},a=>{this._graphicsViewMap.polygon.renderer=new i.A({symbol:a})},f.Vh),(0,f.wB)(()=>{var a;return null===(a=this.layer)||void 0===a?void 0:a.lineSymbol},a=>{this._graphicsViewMap.polyline.renderer=new i.A({symbol:a})},f.Vh),(0,f.wB)(()=>{var a;return null===(a=this.layer)||void 0===a?void 0:a.pointSymbol},a=>{this._graphicsViewMap.point.renderer=new i.A({symbol:a})},f.Vh)])}detach(){this._clear()}moveStart(){}moveEnd(){}viewChange(){for(const a of this.graphicsViews)a.viewChange()}_clear(){this.container.removeAllChildren();for(const a of this.graphicsViews)a.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};E=(0,U._)([(0,l.$)("esri.views.2d.layers.GeoRSSLayerView2D")],E);const z=E},29459:(w,B,s)=>{s.d(B,{e:()=>P});var r,p=s(8189),U=s(31178),j=s(5605),A=s(5922),f=s(48900),O=s(85211),l=(s(3248),s(35150),s(40707),s(76576)),i=s(40856),t=s(88766),o=s(60746),v=s(66727);let y=r=class extends v.A{constructor(d){super(d),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new r({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,p._)([(0,O.MZ)({type:[Number,String],json:{write:!0}})],y.prototype,"left",void 0),(0,p._)([(0,O.MZ)({type:[Number,String],json:{write:!0}})],y.prototype,"right",void 0),(0,p._)([(0,O.MZ)({type:[Number,String],json:{write:!0}})],y.prototype,"top",void 0),(0,p._)([(0,O.MZ)({type:[Number,String],json:{write:!0}})],y.prototype,"bottom",void 0),y=r=(0,p._)([(0,l.$)("esri.views.layers.support.ClipRect")],y);const M=y;var E=s(75644);let z=class extends v.A{constructor(d){super(d),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,p._)([(0,O.MZ)({type:[[[Number]]],json:{write:!0}})],z.prototype,"path",void 0),z=(0,p._)([(0,l.$)("esri.views.layers.support.Path")],z);const g=U.A.ofType({key:"type",base:null,typeMap:{rect:M,path:z,geometry:E.A}}),P=d=>{let h=class extends d{constructor(){super(...arguments),this.attached=!1,this.clips=new g,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1,this.highlightOptions=null}initialize(){var _,m,R,D;const c=null===(_=null===(m=this.view)||void 0===m?void 0:m.spatialReferenceLocked)||void 0===_||_;(null===(R=this.view)||void 0===R?void 0:R.spatialReference)&&c&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new A.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new t.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,f.wB)(()=>this.suspended,u=>{this.container&&(this.container.visible=!u)},f.pc),(0,f.wB)(()=>this.updateSuspended,u=>{this.view&&!u&&this.updateRequested&&this.view.requestUpdate()},f.pc),(0,f.wB)(()=>{var u,T;return null!==(u=null===(T=this.layer)||void 0===T?void 0:T.opacity)&&void 0!==u?u:1},u=>{this.container&&(this.container.opacity=u)},f.pc),(0,f.wB)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",u=>{this.container&&(this.container.blendMode=u)},f.pc),(0,f.wB)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,u=>{this.container&&(this.container.effect=u)},f.pc),(0,f.wB)(()=>this.highlightOptions,u=>this.container.highlightOptions=u,f.pc),(0,f.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},f.pc),(0,f.wB)(()=>{var u;return{scale:null===(u=this.view)||void 0===u?void 0:u.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}},({scale:u})=>{const T=null!=u&&this.isVisibleAtScale(u);T!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",T)},f.pc)],"constructor"),null!==(D=this.view)&&void 0!==D&&D.whenLayerView?this.view.whenLayerView(this.layer).then(u=>{u===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){var _;const m=null===(_=this.view)||void 0===_?void 0:_.spatialReference;return null==m||this.supportsSpatialReference(m)}get updateSuspended(){return this.suspended}get updating(){var _;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null===(_=this._updatingHandles)||void 0===_||!_.updating))}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}isVisibleAtScale(_){const m=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!m)return!0;const{minScale:R,maxScale:D}=m;return(0,i.zx)(_,R,D)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(_){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",_),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(_))):this.updateRequested=!1}hitTest(_,m){return Promise.resolve(null)}supportsSpatialReference(_){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const _=super.getSuspendInfo(),m=!this.spatialReferenceSupported,R=this.visibleAtCurrentScale;return m&&(_.spatialReferenceNotSupported=m),R&&(_.outsideScaleRange=R),_}addAttachHandles(_){this.addHandles(_,"attach")}};return(0,p._)([(0,O.MZ)()],h.prototype,"attached",void 0),(0,p._)([(0,O.MZ)({type:g,set(_){const m=(0,j.V)(_,this._get("clips"),g);this._set("clips",m)}})],h.prototype,"clips",void 0),(0,p._)([(0,O.MZ)()],h.prototype,"container",void 0),(0,p._)([(0,O.MZ)()],h.prototype,"moving",void 0),(0,p._)([(0,O.MZ)({readOnly:!0})],h.prototype,"spatialReferenceSupported",null),(0,p._)([(0,O.MZ)({readOnly:!0})],h.prototype,"updateParameters",void 0),(0,p._)([(0,O.MZ)()],h.prototype,"updateRequested",void 0),(0,p._)([(0,O.MZ)()],h.prototype,"updateSuspended",null),(0,p._)([(0,O.MZ)()],h.prototype,"updating",null),(0,p._)([(0,O.MZ)()],h.prototype,"view",void 0),(0,p._)([(0,O.MZ)({readOnly:!0})],h.prototype,"visibleAtCurrentScale",void 0),(0,p._)([(0,O.MZ)({type:o.A})],h.prototype,"highlightOptions",void 0),h=(0,p._)([(0,l.$)("esri.views.2d.layers.LayerView2D")],h),h}},57052:(w,B,s)=>{s.d(B,{A:()=>A});var p=s(69473),U=s(57641),j=s(62931);class A extends U.f{renderChildren(O){for(const L of this.children)L.setTransform(O.state);if(super.renderChildren(O),this.attributeView.update(),this.children.some(L=>L.hasData)){switch(O.drawPhase){case p.S5.MAP:this._renderChildren(O,p.RI.All);break;case p.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(O)}this._boundsRenderer&&this._boundsRenderer.doRender(O)}}_renderHighlight(O){(0,j.lB)(O,!1,L=>{this._renderChildren(L,p.RI.Highlight)})}}},41474:(w,B,s)=>{s.d(B,{A:()=>v});var p=s(8189),U=s(98877),j=s(42425),A=s(3046),f=s(35150),O=s(11432),L=s(64261),I=s(85211),i=(s(3248),s(40707),s(76576)),t=s(56985);let o=class extends((0,A.sA)((0,L.g)(j.A.EventedMixin(U.A)))){constructor(r){super(r),this._updatingHandles=new t.U,this.layer=null,this.parent=null}initialize(){this.when().catch(r=>{if("layerview:create-error"!==r.name){var y;const M=this.layer&&this.layer.id||"no id",E=(null===(y=this.layer)||void 0===y?void 0:y.title)||"no title";f.A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${E}', id: '${M}')`,r)}})}destroy(){this._updatingHandles=(0,O.pR)(this._updatingHandles)}get fullOpacity(){var r,y,M,E;return(null!==(r=null===(y=this.layer)||void 0===y?void 0:y.opacity)&&void 0!==r?r:1)*(null!==(M=null===(E=this.parent)||void 0===E?void 0:E.fullOpacity)&&void 0!==M?M:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var r;return!this.suspended&&!0===(null===(r=this.layer)||void 0===r?void 0:r.legendEnabled)}get updating(){var r;return!!(null!==(r=this._updatingHandles)&&void 0!==r&&r.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var r;return!0===(null===(r=this.layer)||void 0===r?void 0:r.visible)}set visible(r){this._overrideIfSome("visible",r)}canResume(){var r,y,M;return this.visible&&(null===(r=this.layer)||void 0===r?void 0:r.loaded)&&!(null!==(y=this.parent)&&void 0!==y&&y.suspended)&&(null===(M=this.view)||void 0===M?void 0:M.ready)||!1}getSuspendInfo(){var r,y;const M=null!==(r=this.parent)&&void 0!==r&&r.suspended?this.parent.suspendInfo:{};return null!==(y=this.view)&&void 0!==y&&y.ready||(M.viewNotReady=!0),this.layer&&this.layer.loaded||(M.layerNotLoaded=!0),this.visible||(M.layerInvisible=!0),M}isUpdating(){return!1}};(0,p._)([(0,I.MZ)()],o.prototype,"fullOpacity",null),(0,p._)([(0,I.MZ)()],o.prototype,"layer",void 0),(0,p._)([(0,I.MZ)()],o.prototype,"parent",void 0),(0,p._)([(0,I.MZ)({readOnly:!0})],o.prototype,"suspended",null),(0,p._)([(0,I.MZ)({readOnly:!0})],o.prototype,"suspendInfo",null),(0,p._)([(0,I.MZ)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,p._)([(0,I.MZ)({type:Boolean,readOnly:!0})],o.prototype,"updating",null),(0,p._)([(0,I.MZ)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,p._)([(0,I.MZ)()],o.prototype,"visible",null),(0,p._)([(0,I.MZ)()],o.prototype,"view",void 0),o=(0,p._)([(0,i.$)("esri.views.layers.LayerView")],o);const v=o},66727:(w,B,s)=>{s.d(B,{A:()=>W});var p=s(8189),U=s(71065),j=s(85211),L=(s(3248),s(35150),s(40707),s(76576));let I=class extends U.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,p._)([(0,j.MZ)({readOnly:!0})],I.prototype,"version",null),I=(0,p._)([(0,L.$)("esri.views.layers.support.ClipArea")],I);const W=I},75644:(w,B,s)=>{s.d(B,{A:()=>y});var o,p=s(8189),j=(s(21152),s(85211)),L=(s(3248),s(35150),s(40707),s(76576)),I=s(68643),W=s(61320),l=s(66727),i=s(28067),t=s(55861);const v={base:I.A,key:"type",typeMap:{extent:i.A,polygon:t.A}};let r=o=class extends l.A{constructor(M){super(M),this.type="geometry",this.geometry=null}clone(){var M,E;return new o({geometry:null!==(M=null===(E=this.geometry)||void 0===E?void 0:E.clone())&&void 0!==M?M:null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,p._)([(0,j.MZ)({types:v,json:{read:W.rS,write:!0}})],r.prototype,"geometry",void 0),r=o=(0,p._)([(0,L.$)("esri.views.layers.support.Geometry")],r);const y=r}}]);