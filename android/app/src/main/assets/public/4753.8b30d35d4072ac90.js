"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4753],{44753:($,g,r)=>{r.r(g),r.d(g,{registerFunctions:()=>b});var h=r(10467),O=r(23098),A=(r(21152),r(45369)),U=r(53787),s=r(55279),a=r(42686),w=r(32832),K=r(68643),R=r(11817),L=r(55039),B=r(73874),X=r(46577),N=r(66456),F=r(36775),J=r(74490),Q=r(49238),V=r(36303),H=r(97870),Y=r(77436),S=r(32034);let E=null;function T(){return(T=(0,h.A)(function*(n){var t;const o=null!==(t=O.A.geometryServiceUrl)&&void 0!==t?t:"";if(!o){(0,R.isLoaded)()||(yield(0,R.load)());for(const e of n)e.container[e.indexer]=(0,R.project)(e.container[e.indexer],S.A.WGS84);return}const l=n.map(e=>e.container[e.indexer]),_=new Y.A({geometries:l,outSpatialReference:S.A.WGS84}),i=yield(0,N.C)(o,_);for(let e=0;e<i.length;e++){const u=n[e];u.container[u.indexer]=i[e]}})).apply(this,arguments)}function x(n,t){return I.apply(this,arguments)}function I(){return(I=(0,h.A)(function*(n,t){const o=new X.default({portal:n,id:t});return yield o.load(),null===E&&(E=yield r.e(2246).then(r.bind(r,22246))),yield E.fetchKnowledgeGraph(o.url)})).apply(this,arguments)}function j(n,t,o,l,_){if(null===n)return null;if((0,a.c)(n)||(0,a.b)(n))return n;if((0,a.k)(n)||(0,a.k)(n))return n.toJSDate();if((0,a.m)(n))return n.toStorageFormat();if((0,a.n)(n))return n.toStorageString();if((0,a.v)(n)){const i={};for(const e of n.keys())i[e]=j(n.field(e),t,o,l,_),i[e]instanceof K.A&&_.push({container:i,indexer:e});return i}if((0,a.o)(n)){const i=n.map(e=>j(e,t,o,l,_));for(let e=0;e<i.length;e++)i[e]instanceof K.A&&_.push({container:i,indexer:e});return i}if((0,a.p)(n)){if(n.spatialReference.isWGS84)return n;if(n.spatialReference.isWebMercator&&t)return(0,L.ci)(n);if(!t||!o)return n;throw new s.D$(l,s.TX.WrongSpatialReference,null)}}function W(n,t){if(!n)return null;const o={};for(const l in n)o[l]=D(n[l],t);return o}function D(n,t){var o,l;return null===n?null:(0,a.o)(n)?n.map(_=>D(_,t)):n instanceof F.A?{graphTypeName:n.typeName,id:n.id,graphType:"entity",properties:W(n.properties,t)}:n instanceof Q.A?{graphType:"object",properties:W(n.properties,t)}:n instanceof H.A?{graphTypeName:n.typeName,id:n.id,graphType:"relationship",originId:null!==(o=n.originId)&&void 0!==o?o:null,destinationId:null!==(l=n.destinationId)&&void 0!==l?l:null,properties:W(n.properties,t)}:n instanceof V.A?{graphType:"path",path:n.path?n.path.map(_=>D(_,t)):null}:(0,a.p)(n)?function Z(n,t){if(!n)return n;if(n.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,L.Gh)(n);if(n.spatialReference.equals(t.spatialReference))return n;throw new s.D$(t,s.TX.WrongSpatialReference,null)}(n,t):(0,a.c)(n)||(0,a.b)(n)||(0,a.a7)(n)?n:null}function b(n){"async"===n.mode&&(n.functions.knowledgegraphbyportalitem=function(t,o){return n.standardFunctionAsync(t,o,(l,_,i)=>{var e,u;if((0,a.H)(i,2,2,t,o),null===i[0])throw new s.D$(t,s.TX.PortalRequired,o);if(i[0]instanceof A.A){var c;const v=(0,a.j)(i[1]);let P=null;return P=null!==(c=t.services)&&void 0!==c&&c.portal?t.services.portal:B.A.getDefault(),x((0,w.R)(i[0],P),v)}if(!1===(0,a.c)(i[0]))throw new s.D$(t,s.TX.InvalidParameter,o);const d=(0,a.j)(i[0]);return x(null!==(e=null===(u=t.services)||void 0===u?void 0:u.portal)&&void 0!==e?e:B.A.getDefault(),d)})},n.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),n.functions.querygraph=function(t,o){return n.standardFunctionAsync(t,o,function(){var l=(0,h.A)(function*(_,i,e){var u,c;(0,a.H)(e,2,4,t,o);const d=e[0];if(!(0,a.w)(d))throw new s.D$(t,s.TX.InvalidParameter,o);const v=e[1];if(!(0,a.c)(v))throw new s.D$(t,s.TX.InvalidParameter,o);null===E&&(E=yield r.e(2246).then(r.bind(r,22246)));let P=null;const y=(0,a.K)(e[2],null);if(!(y instanceof U.A||null===y))throw new s.D$(t,s.TX.InvalidParameter,o);if(y){let f=[];P=j(y,!0,!1,t,f),f=f.filter(p=>!p.container[p.indexer].spatialReference.isWGS84),f.length>0&&(yield function z(n){return T.apply(this,arguments)}(f))}const G=new J.A({openCypherQuery:v,bindParameters:P});(null!==(u=null==d||null===(c=d.serviceDefinition)||void 0===c?void 0:c.currentVersion)&&void 0!==u?u:11.3)>11.2&&(G.outputSpatialReference=t.spatialReference);const k=(yield E.executeQueryStreaming(d,G)).resultRowsStream.getReader(),C=[];try{for(;;){const{done:f,value:p}=yield k.read();if(f)break;if((0,a.o)(p))for(const M of p)C.push(D(M,t));else{const M=[];for(const q of p)M.push(D(p[q],t));C.push(M)}}}catch(f){throw f}return U.A.convertJsonToArcade(C,(0,a.N)(t),!1,!0)});return function(_,i,e){return l.apply(this,arguments)}}())},n.signatures.push({name:"querygraph",min:2,max:4}))}},32832:($,g,r)=>{r.d(g,{R:()=>O});var h=r(73874);function O(m,A){return null===m?A:new h.A({url:m.field("url")})}}}]);