"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[18],{40018:(Fn,En,T)=>{T.d(En,{DO:()=>Ln,FT:()=>b,Hh:()=>On,OM:()=>sn,Ps:()=>zn,Wo:()=>nn,_I:()=>tn,_l:()=>on,dK:()=>Kn,eh:()=>Mn,l0:()=>Dn,t$:()=>Un,uk:()=>In,vI:()=>xn,xh:()=>H});var X,n,wn=T(10467),vn=(T(21152),T(89952)),Sn=T(5922),D=T(82663),E=T(33658),G=T(11817),An=T(58701),B=T(28067),O=T(13303),fn=T(55861),Gn=T(32034);function H(n,t,e){return!(0,G.canProjectWithoutEngine)(n,t,e)}function L(n,t,e){const s=H(n,t,e);if(s&&!(0,G.isLoaded)())throw new Sn.A("rasterprojectionhelper-project","projection engine is not loaded");return s}(n=X||(X={}))[n.None=0]="None",n[n.North=1]="North",n[n.South=2]="South",n[n.Both=3]="Both";const un=(n,t,e,s=0)=>{if(1===e[0])return[0,0];let r=1,i=-1,o=1,u=-1;for(let f=0;f<n.length;f+=2)isNaN(n[f])||(r=r>n[f]?n[f]:r,i=i>n[f]?i:n[f],o=o>n[f+1]?n[f+1]:o,u=u>n[f+1]?u:n[f+1]);const{cols:a,rows:c}=t,l=(i-r)/a/e[0],M=(u-o)/c/e[1],y=2*s;let x=0,m=!1,h=[0,0];for(let f=0;f<a-3;f++){for(let P=0;P<c-3;P++){const g=f*c*2+2*P,d=(n[g+1]+n[g+5]+n[g+4*c+1]+n[g+4*c+5])/4,_=Math.abs(((n[g]+n[g+4]+n[g+4*c]+n[g+4*c+4])/4-n[g+2*c+2])/l),R=Math.abs((d-n[g+2*c+3])/M);if(_+R>x&&(x=_+R,h=[_,R]),y&&x>y){m=!0;break}}if(m)break}return h},Tn={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},K=32,F=4,V=F,Q=new Map,Z=new Map,Y=500;function On(){return q.apply(this,arguments)}function q(){return(q=(0,wn.A)(function*(){(0,G.isLoaded)()||(yield(0,G.load)())})).apply(this,arguments)}function xn(n,t,e){return L(n.spatialReference,t),e?(0,G.getTransformation)(t,n.spatialReference,n):(0,G.getTransformation)(n.spatialReference,t,n)}function nn(n,t,e,s=null){const r=n.spatialReference;if(r.equals(t))return n;L(r,t,s);const i=e.center,o=new B.A({xmin:i.x-n.x/2,xmax:i.x+n.x/2,ymin:i.y-n.y/2,ymax:i.y+n.y/2,spatialReference:r}),u=(0,G.project)(o,t,s),a=b(t);let c;if(null==u||null!=a&&u.width>=a){const l=(0,D.GA)(r)/(0,D.GA)(t);c={x:n.x*l,y:n.y*l}}else c={x:u.width,y:u.height};return c}function C(n,t=.01){return(0,D.GA)(n)?t/(0,D.GA)(n):0}function tn(n,t,e=null,s=!0){const r=n.spatialReference;if(r.equals(t))return n;L(r,t,e);const i=(0,G.project)(n,t,e);return s&&i&&mn([n],[i],r,t),i}function mn(n,t,e,s){const r=$(e,!0),i=$(s,!0),o=C(e,Y),u=C(s,Y);if(o&&null!=r&&null!=i)for(let a=0;a<n.length;a++){const c=t[a];if(!c)continue;const{x:l}=n[a],{x:M}=c;M>=i[1]-u&&Math.abs(l-r[0])<o?c.x-=i[1]-i[0]:M<=i[0]+u&&Math.abs(l-r[1])<o&&(c.x+=i[1]-i[0])}}function W(n,t=!1){let e=n.wkid||n.wkt2||n.wkt;if(!e||n.isGeographic)return null;if(e=String(e),Q.has(e)){const o=Q.get(e);return t?null==o?void 0:o.gcs:null==o?void 0:o.pcs}const s=n.wkid?E.P.coordsys(n.wkid):E.P.fromString(n.isGeographic?E.a.PE_TYPE_GEOGCS:E.a.PE_TYPE_PROJCS,n.wkt2||n.wkt),r=pn(s,C(n,1e-4)),i=pn(s,0,!0);return Q.set(e,{pcs:r,gcs:i}),t?i:r}function pn(n,t=0,e=!1){const s=E.j.generate(n),r=e?n.horizonGcsGenerate():n.horizonPcsGenerate();if(!s||null==r||!r.length)return null;let i=!1,o=r.find(f=>1===f.getInclusive()&&1===f.getKind());if(!o){if(o=r.find(f=>1===f.getInclusive()&&0===f.getKind()),!o)return null;i=!0}const u=e?0:(2===s.getNorthPoleLocation()?1:0)|(2===s.getSouthPoleLocation()?2:0),a=s.isPannableRectangle(),c=o.getCoord();if(i)return{isEnvelope:i,isPannable:a,vertices:c,coef:null,bbox:[c[0][0]-t,c[0][1]-t,c[1][0]+t,c[1][1]+t],poleLocation:u};let l=0;const M=[];let[y,x]=c[0],[m,h]=c[0];for(let f=0,P=c.length;f<P;f++){l++,l===P&&(l=0);const[g,p]=c[f],[d,_]=c[l];if(_===p)M.push([g,d,p,_,2]);else{const R=(d-g)/(_-p||1e-4),A=g-R*p;M.push(p<_?[R,A,p,_,0]:[R,A,_,p,1])}y=y<g?y:g,x=x<p?x:p,m=m>g?m:g,h=h>p?h:p}return{isEnvelope:!1,isPannable:a,vertices:c,coef:M,bbox:[y,x,m,h],poleLocation:u}}function en(n,t){const e=[],{cols:s,rows:r,xres:i,yres:o,usePixelCenter:u}=n;let{xmin:a,ymax:c}=n;if(u&&(a+=i/2,c-=o/2),null==t){for(let x=0;x<s;x++)for(let m=0;m<r;m++)e.push([a+i*x,c-o*m]);return{points:e}}const l=new Uint8Array(s*r);if(t.isEnvelope){const{bbox:[x,m,h,f]}=t;for(let P=0,g=0;P<s;P++){const p=a+i*P,d=t.isPannable||p>=x&&p<=h;for(let _=0;_<r;_++,g++){const R=c-o*_;d&&R>=m&&R<=f&&(e.push([p,R]),l[g]=1)}}return{points:e,mask:l}}const M=t.coef,y=[];for(let x=0;x<r;x++){const m=c-o*x,h=[],f=[];for(let g=0;g<M.length;g++){const[p,d,_,R,A]=M[g];m===_&&_===R?(h.push(p),h.push(d),f.push(2),f.push(2)):m>=_&&m<=R&&(h.push(p*m+d),f.push(A))}let P=h;if(h.length>2){let g=2===f[0]?0:f[0],p=h[0];P=[];for(let d=1;d<f.length;d++)2===f[d]&&d!==f.length-1||(f[d]!==g&&(P.push(0===g?Math.min(p,h[d-1]):Math.max(p,h[d-1])),g=f[d],p=h[d]),d===f.length-1&&P.push(0===f[d]?Math.min(p,h[d]):Math.max(p,h[d])));P.sort((d,_)=>d-_)}else h[0]>h[1]&&(P=[h[1],h[0]]);y.push(P)}for(let x=0,m=0;x<s;x++){const h=a+i*x;for(let f=0;f<r;f++,m++){const P=c-o*f,g=y[f];if(2===g.length)h>=g[0]&&h<=g[1]&&(e.push([h,P]),l[m]=1);else if(g.length>2){let p=!1;for(let d=0;d<g.length;d+=2)if(h>=g[d]&&h<=g[d+1]){p=!0;break}p&&(e.push([h,P]),l[m]=1)}}}return{points:e,mask:l}}function gn(n,t){var e;const s=b(n[0].spatialReference);if(n.length<2||null==s||(t=null!==(e=t)&&void 0!==e?e:C(n[0].spatialReference),1===(n=n.filter(a=>a.width>t)).length))return n[0];let{xmin:r,xmax:i,ymin:o,ymax:u}=n[0];for(let a=1;a<n.length;a++){const c=n[a];i=c.xmax+s*a,o=Math.min(o,c.ymin),u=Math.max(u,c.ymax)}return new B.A({xmin:r,xmax:i,ymin:o,ymax:u,spatialReference:n[0].spatialReference})}function on(n,t,e=null,s=!0){const r=n.spatialReference;if(r.equals(t))return n;const i=sn(n),o=b(r,!0),u=b(t);if(0===i||null==o||null==u){const c=dn(n,t,e,s);if(null==o&&null!=u&&Math.abs(c.width-u)<C(t)&&(0,G.isLoaded)()){const l=W(r);if(null!=l&&l.poleLocation===X.None&&n.width<(l.bbox[2]-l.bbox[0])/2)return function jn(n,t){const e=b(t);if(null==e)return null;let{xmin:s,ymin:r,xmax:i,ymax:o}=n;const u=n.spatialReference,a=new fn.A({spatialReference:u,rings:[[[s,r],[i,r],[i,o],[s,o],[s,r]]]}),c=(0,G.project)(a,t);if(2!==c.rings.length||!c.rings[0].length||!c.rings[1].length)return null;const{rings:l}=c,M=C(u),y=new B.A({spatialReference:t});for(let x=0;x<2;x++){s=i=l[x][0][0],r=o=l[x][0][1];for(let m=0;m<l[x].length;m++)s=s>l[x][m][0]?l[x][m][0]:s,i=i<l[x][m][0]?l[x][m][0]:i,r=r>l[x][m][1]?l[x][m][1]:r,o=o<l[x][m][1]?l[x][m][1]:o;if(0===x)y.ymin=r,y.ymax=o,y.xmin=s,y.xmax=i;else if(y.ymin=Math.min(y.ymin,r),y.ymax=Math.max(y.ymax,o),Math.abs(i-e/2)<M)y.xmin=s,y.xmax=y.xmax+e;else{if(!(Math.abs(s+e/2)<M))return null;y.xmax=i+e}}return y}(n,t)||c}return c}const a=n.clone().normalize();if(1===a.length&&n.xmax<o&&n.xmax-o/2>C(r)){const{xmin:c,xmax:l}=n;for(let M=0;M<=i;M++)a[M]=new B.A({xmin:0===M?c:-o/2,xmax:M===i?l-o*M:o/2,ymin:n.ymin,ymax:n.ymax,spatialReference:r})}return gn(a.map(c=>dn(c,t,e,s)).filter(vn.Ru))}function In(n,t,e){if("extent"===n.type){const{xmin:s,ymin:r,xmax:i,ymax:o,spatialReference:u}=n;n=new fn.A({rings:[[[s,o],[i,o],[i,r],[s,r],[s,o]]],spatialReference:u})}return n.spatialReference.equals(t)?n:(L(n.spatialReference,t,e),(0,G.project)(n,t,e))}function dn(n,t,e=null,s=!0,r=!0){const i=n.spatialReference;if(i.equals(t)||!t)return n;L(i,t,e);const o=(0,G.project)(n,t,e);if(r&&t.isWebMercator&&o&&(o.ymax=Math.min(20037508.342787,o.ymax),o.ymin=Math.max(-20037508.342787,o.ymin),o.ymin>=o.ymax))return null;if(!s||!o)return o;const u=$(i,!0),a=$(t,!0);if(null==u||null==a)return o;const c=C(i,.001),l=C(i,Y),M=C(t,.001);if(Math.abs(o.xmin-a[0])<M&&Math.abs(o.xmax-a[1])<M){const y=Math.abs(n.xmin-u[0]),x=Math.abs(u[1]-n.xmax);if(y<c&&x>l){o.xmin=a[0];const m=[];m.push(new O.A(n.xmax,n.ymin,i)),m.push(new O.A(n.xmax,(n.ymin+n.ymax)/2,i)),m.push(new O.A(n.xmax,n.ymax,i));const h=m.map(f=>tn(f,t,e)).filter(f=>!isNaN(null==f?void 0:f.x)).map(f=>f.x);o.xmax=Math.max.apply(null,h)}if(x<c&&y>l){o.xmax=a[1];const m=[];m.push(new O.A(n.xmin,n.ymin,i)),m.push(new O.A(n.xmin,(n.ymin+n.ymax)/2,i)),m.push(new O.A(n.xmin,n.ymax,i));const h=m.map(f=>tn(f,t,e)).filter(f=>!isNaN(null==f?void 0:f.x)).map(f=>f.x);o.xmin=Math.min.apply(null,h)}}else{const y=C(t,.001);Math.abs(o.xmin-a[0])<y&&(o.xmin=a[0]),Math.abs(o.xmax-a[1])<y&&(o.xmax=a[1])}return o}function b(n,t=!1){return n?n.isWebMercator?2*(t?20037508.342787:20037508.342788905):n.wkid&&n.isGeographic?360:2*Tn[n.wkid]||null:null}function $(n,t=!1){if(n.isGeographic)return[-180,180];const e=b(n,t);return null!=e?[-e/2,e/2]:null}function yn(n,t,e,s){let r=(n-t)/e;return r-Math.floor(r)!=0?r=Math.floor(r):s&&(r-=1),r}function sn(n,t=!1){const e=b(n.spatialReference);if(null==e)return 0;const s=t?0:-e/2,r=C(n.spatialReference),i=!t&&Math.abs(n.xmax-e/2)<r?e/2:n.xmax,o=!t&&Math.abs(n.xmin+e/2)<r?-e/2:n.xmin;return yn(i,s,e,!0)-yn(o,s,e,!1)}function Ln(n){const t=n.storageInfo.origin.x,e=b(n.spatialReference,!0);if(null==e)return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const s=e/2,{nativePixelSize:r,storageInfo:i,extent:o}=n,{maximumPyramidLevel:u,blockWidth:a,pyramidScalingFactor:c}=i;let l=r.x;const M=[],y=null!=n.transform&&"gcs-shift"===n.transform.type,x=t+(y?0:s),m=y?e-t:s-t;for(let h=0;h<=u;h++){const f=(o.xmax-t)/l/a,P=f-Math.floor(f)==0?f:Math.ceil(f),g=m/l/a,p=g-Math.floor(g)==0?g:Math.ceil(g),d=Math.floor(x/l/a),_=Math.round(x/l)%a,R=(a-Math.round(m/l)%a)%a;M.push({resolutionX:l,blockWidth:a,datasetColumnCount:P,worldColumnCountFromOrigin:p,leftMargin:_,rightPadding:R,originColumnOffset:d}),l*=c}return{originX:t,halfWorldWidth:s,pyramidsInfo:M,hasGCSSShiftTransform:y}}function Dn(n){const t=n.isAdaptive&&null==n.spacing;let e=n.spacing||[K,K],s=rn(n),r={cols:s.size[0]+1,rows:s.size[1]+1};const i=s.outofBoundPointCount>0&&s.outofBoundPointCount<s.offsets.length/2;let o=s.outofBoundPointCount===s.offsets.length/2||t&&i?[0,0]:un(s.offsets,r,e,V);const a=n.projectedExtent.spatialReference,c=n.srcBufferExtent.spatialReference;if(t&&(i||(o[0]+o[1])/2>V)&&(H(a,c,n.datumTransformation)&&(a.isGeographic||W(a)),e=[F,F],s=rn({...n,spacing:e}),r={cols:s.size[0]+1,rows:s.size[1]+1},o=un(s.offsets,r,e,V)),s.error=o,e[0]>1&&(s.coefficients=_n(s.offsets,r,i)),n.includeGCSGrid&&!a.isGeographic&&!a.isWebMercator)if(c.isGeographic)s.gcsGrid={offsets:s.offsets,coefficients:s.coefficients,spacing:e};else{const l=W(a);if(null!=l&&!l.isEnvelope){const M=function Wn(n){if(!n||n.isGeographic)return n;const t=String(n.wkid||n.wkt2||n.wkt);let e;return Z.has(t)?e=Z.get(t):(e=(n.wkid?E.P.coordsys(n.wkid):E.P.fromString(E.a.PE_TYPE_PROJCS,n.wkt2||n.wkt)).getGeogcs().getCode(),Z.set(t,e)),new Gn.A({wkid:e})}(a),y=on(n.projectedExtent,M),{offsets:x}=rn({...n,srcBufferExtent:y,spacing:e}),m=_n(x,r,i);s.gcsGrid={offsets:x,coefficients:m,spacing:e}}}return s}function rn(n){const{projectedExtent:t,srcBufferExtent:e,pixelSize:s,datumTransformation:r,rasterTransform:i}=n,o=t.spatialReference,u=e.spatialReference,a=L(o,u),{xmin:c,ymin:l,xmax:M,ymax:y}=t,x=b(u),m=null!=x&&(n.hasWrapAround||"gcs-shift"===(null==i?void 0:i.type)),h=n.spacing||[K,K],f=h[0]*s.x,P=h[1]*s.y,g=1===h[0],p=Math.ceil((M-c)/f-.1/h[0])+(g?0:1),d=Math.ceil((y-l)/P-.1/h[1])+(g?0:1),_=function Cn(n){const{inSR:t,outSR:e,datumTransformation:s,preferPE:r}=n;if(t.equals(e)){const{points:i}=en(n,null);return i}return t.isWebMercator&&e.isWGS84||t.isWGS84&&e.isWebMercator?function Nn(n){const{cols:t,rows:e,xres:s,yres:r,usePixelCenter:i,inSR:o,outSR:u}=n;let{xmin:a,ymax:c}=n;i&&(a+=s/2,c-=r/2);const l=[],M=[],y=Math.max(t,e);for(let m=0;m<y;m++){const h=a+s*Math.min(t,m),f=c-r*Math.min(e,m),P=(0,G.project)(new O.A({x:h,y:f,spatialReference:o}),u);m<=t&&l.push(P.x),m<=e&&M.push(P.y)}const x=[];for(let m=0;m<t;m++)for(let h=0;h<e;h++)x.push([l[m],M[h]]);return x}(n):L(t,e,s)&&r&&(t.isGeographic||null!=W(t))?function hn(n){const{inSR:t,outSR:e,datumTransformation:s}=n,r=W(t),{points:i,mask:o}=en(n,r);if(!t.isGeographic){const a=t.wkid?E.P.coordsys(t.wkid):E.P.fromString(t.isGeographic?E.a.PE_TYPE_GEOGCS:E.a.PE_TYPE_PROJCS,t.wkt2||t.wkt);E.g.projToGeog(a,i.length,i)}if(null!=s&&s.steps.length){let a;if(e.isGeographic&&(a=i.map(([l])=>l>179.9955?1:l<-179.9955?-1:0)),s.steps.forEach(l=>{const M=l.wkid?E.P.geogtran(l.wkid):E.P.fromString(E.a.PE_TYPE_GEOGTRAN,l.wkt);E.h.geogToGeog(M,i.length,i,null,l.isInverse?E.a.PE_TRANSFORM_2_TO_1:E.a.PE_TRANSFORM_1_TO_2)}),a)for(let l=0;l<i.length;l++){const M=a[l],y=i[l][0],x=y>179.9955?1:y<-179.9955?-1:0;M&&x&&M!==x&&(i[l][0]=M>0?y+360:y-360)}}if(!e.isGeographic){const a=W(e,!0);!function kn(n,t){const[e,s]=t;for(let r=0;r<n.length;r++){const i=n[r][1];(i<e||i>s)&&(n[r]=[NaN,NaN])}}(i,null!=a&&a.isEnvelope?[a.bbox[1],a.bbox[3]]:[-90,90]);const l=e.wkid?E.P.coordsys(e.wkid):E.P.fromString(e.isGeographic?E.a.PE_TYPE_GEOGCS:E.a.PE_TYPE_PROJCS,e.wkt2||e.wkt);E.g.geogToProj(l,i.length,i)}let u=i;if(o&&i.length!==o.length){u=[];for(let a=0,c=0;a<o.length;a++)u.push(o[a]?i[c++]:[NaN,NaN])}return u}(n):function bn(n){const{points:t}=en(n,null),{inSR:e,outSR:s,datumTransformation:r}=n,i=t.map(u=>new O.A(u[0],u[1],e)),o=(0,G.project)(i,s,r);return r&&mn(i,o,e,s),o.map(u=>u?[u.x,u.y]:[NaN,NaN])}(n)}({cols:p,rows:d,xmin:c,ymax:y,xres:f,yres:P,inSR:o,outSR:u,datumTransformation:r,preferPE:h[0]<=F,usePixelCenter:g}),R=[];let A,k=0;const I=g?-1:NaN,{xmin:J,xmax:z,ymax:v,width:S,height:N}=e,an=C(u,Y),ln=null!=x&&J>0&&z>x/2;let Pn=!1;if(a){const j=W(o);Pn=null!=j&&j.poleLocation>0}for(let j=0;j<p;j++){const cn=[];for(let U=0;U<d;U++){let w=_[j*d+U];if(m&&w[0]>z&&w[0]>x/2-an?w[0]-=x:m&&0===j&&w[0]<0&&ln&&!i&&(w[0]+=x),!w||isNaN(w[0])||isNaN(w[1]))R.push(I),R.push(I),cn.push(null),k++;else{if(i){const Rn=i.inverseTransform(new O.A({x:w[0],y:w[1],spatialReference:u}));w=[Rn.x,Rn.y]}cn.push(w),j>0&&m&&A[U]&&w[0]<A[U][0]&&(w[0]+=x,Pn&&w[0]>z&&w[0]>x&&(w[0]-=x)),R.push((w[0]-J)/S),R.push((v-w[1])/N)}}A=cn}return{offsets:R,error:null,coefficients:null,outofBoundPointCount:k,spacing:h,size:g?[p,d]:[p-1,d-1]}}function _n(n,t,e){const{cols:s,rows:r}=t,i=new Float32Array((s-1)*(r-1)*2*6),o=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),u=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let a=0;a<s-1;a++){for(let c=0;c<r-1;c++){let l=a*r*2+2*c;const M=n[l],y=n[l+1],x=n[l+2],m=n[l+3];l+=2*r;const h=n[l],f=n[l+1],P=n[l+2],g=n[l+3];let p=0,d=12*(c*(s-1)+a);for(let _=0;_<3;_++)i[d++]=o[p++]*M+o[p++]*x+o[p++]*P;p=0;for(let _=0;_<3;_++)i[d++]=o[p++]*y+o[p++]*m+o[p++]*g;p=0;for(let _=0;_<3;_++)i[d++]=u[p++]*M+u[p++]*h+u[p++]*P;p=0;for(let _=0;_<3;_++)i[d++]=u[p++]*y+u[p++]*f+u[p++]*g}if(e)for(let c=0;c<i.length;c++)isNaN(i[c])&&(i[c]=-1)}return i}function zn(n){const{spatialReference:t}=n,e=(0,An.Vp)(t);if(!e)return n;const[s,r]=e.valid,i=r-s;let o=0;return n.xmin<s?o=Math.ceil((s-n.xmin)/i):n.xmin>r&&(o=-Math.ceil((n.xmin-r)/i)),new B.A({spatialReference:n.spatialReference,xmin:n.xmin+o*i,ymin:n.ymin,xmax:n.xmax+o*i,ymax:n.ymax})}function Un(n,t,e){var s;const{storageInfo:r,pixelSize:i}=t;let o=0,u=!1;const{pyramidResolutions:a}=r,c="mixed"===(null===(s=r.tileInfo.format)||void 0===s?void 0:s.toLowerCase())?Math.max(1,Math.min(3,r.tileInfo.dpi/96)):1,l=(n.x+n.y)/2/c;if(null!=a&&a.length){const h=a[a.length-1],f=(h.x+h.y)/2,P=(i.x+i.y)/2;if(l<=P)o=0;else if(l>=f)o=a.length,u=l/f>8;else{let p,d=P;for(let _=1;_<=a.length;_++){if(p=(a[_-1].x+a[_-1].y)/2,l<=p){l===p?o=_:"down"===e?(o=_-1,u=l/d>8):o="up"===e||l-d>p-l||l/d>2?_:_-1;break}d=p}}const g=0===o?i:a[o-1];return u&&Math.min(g.x,g.y)*(0,D.GA)(t.spatialReference)>19567&&(u=!1),{pyramidLevel:o,pyramidResolution:new O.A({x:g.x,y:g.y,spatialReference:t.spatialReference}),excessiveReading:u}}const M=Math.log(n.x/i.x)/Math.LN2,y=Math.log(n.y/i.y)/Math.LN2,x=t.storageInfo.maximumPyramidLevel||0;o="down"===e?Math.floor(Math.min(M,y)):"up"===e?Math.ceil(Math.max(M,y)):Math.round((M+y)/2),o<0?o=0:o>x&&(u=o>x+3,o=x);const m=2**o;return{pyramidLevel:o,pyramidResolution:new O.A({x:m*t.nativePixelSize.x,y:m*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:u}}function Mn(n,t){const{pixelSize:e,extent:s}=n,r=xn(s,t,!1);return on(function Bn(n,t){const e=n.clone().normalize();return 1===e.length?e[0]:gn(e,t)}(s,(e.x+e.y)/16),t,r)}function Kn(n,t,e){var s,r,i;const o=null!==(s=null==e?void 0:e.tileSize)&&void 0!==s?s:512,u=null===(r=null==e?void 0:e.alignGlobalDatasetWithAGOL)||void 0===r||r,a=!(null==e||!e.limitToSrcResolution),{extent:c,spatialReference:l,pixelSize:M}=n,y=nn(new O.A({x:M.x,y:M.y,spatialReference:l}),t,c);if(null==y)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const x=(y.x+y.y)/2,m=(0,D.GA)(t),h=x*m*96*39.37,f=t.isGeographic?256/o*295828763.7958547:256/o*591657527.591555;let P="vector-magdir"===n.dataType||"vector-uv"===n.dataType;const g=Mn(n,t),p=Math.min(Math.ceil(Math.log(Math.min(n.width,n.height)/32)/Math.LN2),Math.ceil(Math.log(f/2/h)/Math.LN2));if(!P&&u&&(t.isGeographic||t.isWebMercator)){const v=b(t);if(P=sn(g)>0||null!=v&&g.width>v/4,!P&&null!=v){let S=-1;if(p<3)S=2**p*x*o;else if(n.storageInfo){const{maximumPyramidLevel:an=0,pyramidScalingFactor:ln=2}=n.storageInfo;S=ln**an*x*o}const N=Math.ceil(v/S);P=1===N||2===N&&v/2-g.xmax<S}}let d,_=h;const R=1.001,A=Math.min(2,Math.max(1.414,(null===(i=n.storageInfo)||void 0===i?void 0:i.pyramidScalingFactor)||2));if(P){_=f;const v=t.isGeographic?1341104507446289e-21:.29858214164761665,S=v*(96*m*39.37);d=nn(new O.A({x:v,y:v,spatialReference:{wkid:t.isGeographic?4326:3857}}),l,g),d.x*=_/S,d.y*=_/S}else{d={x:M.x,y:M.y};let v=0;for(;_<f*(R/2)&&v<p;)v++,_*=A,d.x*=A,d.y*=A;Math.max(_,f)/Math.min(_,f)<=R&&(_=f)}const k=[_],I=[{x:d.x,y:d.y}],z=Math.min(70.5310735,h)/R;for(;_>=z;)_/=A,d.x/=A,d.y/=A,k.push(_),I.push({x:d.x,y:d.y});if(a){const v=.001*M.x;let S=I.findIndex(N=>N.x>=M.x-v&&N.x<=M.x+v);S>-1?(I.length=S+1,k.length=S+1):(S=I.findIndex(N=>N.x<=M.x+v),S>0&&(I.length=S,k.length=S))}return{projectedPixelSize:y,scales:k,srcResolutions:I,isCustomTilingScheme:!P}}}}]);