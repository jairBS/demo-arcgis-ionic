"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4126],{34126:(Z,x,n)=>{n.r(x),n.d(x,{fromUrl:()=>c});var l=n(10467),U=n(5922),t=n(45272),e=n(68438),R=n(86537),M=n(23154),W=n(58443),H=n(64833),C=n(56151);const V={FeatureLayer:!0,SceneLayer:!0};function c(o){return j.apply(this,arguments)}function j(){return j=(0,l.A)(function*(o){var r;const f=null===(r=o.properties)||void 0===r?void 0:r.customParameters,d=yield function X(o,r){return K.apply(this,arguments)}(o.url,f),y={...o.properties,url:o.url};if(d.layers.length+d.tables.length===0)return null!=d.layerId&&(y.layerId=d.layerId),null!=d.sourceJSON&&(y.sourceJSON=d.sourceJSON),new d.Constructor(y);const s=new((yield Promise.all([n.e(9845),n.e(6669),n.e(751)]).then(n.bind(n,90751))).default)({title:d.parsedUrl.title});return yield function G(o,r,f){return J.apply(this,arguments)}(s,d,y),s}),j.apply(this,arguments)}function N(o,r){return o?o.find(f=>f.id===r):null}function J(){return(J=(0,l.A)(function*(o,r,f){function d(u,i,g,S){const P={...f,layerId:i,sublayerTitleMode:"service-name"};return null!=u&&(P.url=u),null!=g&&(P.sourceJSON=g),S(P)}const y=r.sublayerConstructorProvider;for(const{id:u,serverUrl:i}of r.layers){var s;const g=N(r.sublayerInfos,u),S=null!==(s=g&&(null==y?void 0:y(g)))&&void 0!==s?s:r.Constructor,P=d(i,u,g,z=>new S(z));o.add(P)}if(r.tables.length){const u=yield I("FeatureLayer");r.tables.forEach(({id:i,serverUrl:g})=>{const S=d(g,i,N(r.tableInfos,i),P=>new u(P));o.tables.add(S)})}})).apply(this,arguments)}function K(){return K=(0,l.A)(function*(o,r){let f=(0,e.qg)(o);if(null==f&&(f=yield function Q(o,r){return Y.apply(this,arguments)}(o,r)),null==f)throw new U.A("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:o});const{serverType:d,sublayer:y}=f;let s;const u={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},i="FeatureServer"===d,g="SceneServer"===d,S={parsedUrl:f,Constructor:null,layerId:(i||g)&&null!=y?y:void 0,layers:[],tables:[]};switch(d){case"MapServer":s=null!=y?"FeatureLayer":(yield function E(o,r){return T.apply(this,arguments)}(o,r))?"TileLayer":"MapImageLayer";break;case"ImageServer":{var P;const v=yield(0,C.V)(o,{customParameters:r}),{tileInfo:O,cacheType:F}=v;s=O?"LERC"!==(null==O||null===(P=O.format)||void 0===P?void 0:P.toUpperCase())||F&&"elevation"!==F.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const v=yield(0,C.V)(f.url.path,{customParameters:r});if(s="SceneLayer",v){const O=null==v?void 0:v.layers;if("Voxel"===(null==v?void 0:v.layerType))s="VoxelLayer";else if(null!=O&&O.length){var z;const F=null===(z=O[0])||void 0===z?void 0:z.layerType;null!=F&&null!=W.XX[F]&&(s=W.XX[F])}}break}case"3DTilesServer":throw new U.A("arcgis-layers:unsupported","fromUrl() not supported for 3DTiles layers");case"FeatureServer":if(s="FeatureLayer",null!=y){const v=yield(0,C.V)(o,{customParameters:r});S.sourceJSON=v,"Oriented Imagery Layer"===v.type&&(s="OrientedImageryLayer")}break;default:s=u[d]}if(V[s]&&null==y){var p;const v=yield function a(o,r,f){return m.apply(this,arguments)}(o,d,r);if(i&&(S.sublayerInfos=v.layerInfos,S.tableInfos=v.tableInfos),v.layers.length+v.tables.length!==1)S.layers=v.layers,S.tables=v.tables,i&&null!==(p=v.layerInfos)&&void 0!==p&&p.length&&(S.sublayerConstructorProvider=yield function $(o){return D.apply(this,arguments)}(v.layerInfos));else if(i||g){var b,w,k,q,_,nn;const O=null!==(b=null===(w=v.layerInfos)||void 0===w?void 0:w[0])&&void 0!==b?b:null===(k=v.tableInfos)||void 0===k?void 0:k[0];S.layerId=null!==(q=null===(_=v.layers[0])||void 0===_?void 0:_.id)&&void 0!==q?q:null===(nn=v.tables[0])||void 0===nn?void 0:nn.id,S.sourceJSON=O,i&&"Oriented Imagery Layer"===(null==O?void 0:O.type)&&(s="OrientedImageryLayer")}}return S.Constructor=yield I(s),S}),K.apply(this,arguments)}function Y(){return(Y=(0,l.A)(function*(o,r){var f,d;const y=yield(0,C.V)(o,{customParameters:r});let s=null,u=null;const i=y.type;if("Feature Layer"===i||"Table"===i?(s="FeatureServer",u=null!==(f=y.id)&&void 0!==f?f:null):"indexedVector"===i?s="VectorTileServer":y.hasOwnProperty("mapName")?s="MapServer":y.hasOwnProperty("bandCount")&&y.hasOwnProperty("pixelSizeX")?s="ImageServer":y.hasOwnProperty("maxRecordCount")&&y.hasOwnProperty("allowGeometryUpdates")?s="FeatureServer":y.hasOwnProperty("streamUrls")?s="StreamServer":B(y)?(s="SceneServer",u=y.id):y.hasOwnProperty("layers")&&B(null===(d=y.layers)||void 0===d?void 0:d[0])&&(s="SceneServer"),!s)return null;const g=null!=u?(0,e.iz)(o):null;return{title:null!=g&&y.name||(0,t.e7)(o),serverType:s,sublayer:u,url:{path:null!=g?g.serviceUrl:(0,t.An)(o).path}}})).apply(this,arguments)}function B(o){return null!=o&&o.hasOwnProperty("store")&&o.hasOwnProperty("id")&&"number"==typeof o.id}function m(){return m=(0,l.A)(function*(o,r,f){var d,y;let s,u,i=!1;switch(r){case"FeatureServer":{const P=yield(0,M.Q)(o,{customParameters:f});i=!!P.layersJSON,s=P.layersJSON||P.serviceJSON;break}case"SceneServer":{const P=yield function h(o,r){return L.apply(this,arguments)}(o,f);s=P.serviceInfo,u=P.tableServerUrl;break}default:s=yield(0,C.V)(o,{customParameters:f})}const g=null===(d=s)||void 0===d?void 0:d.layers,S=null===(y=s)||void 0===y?void 0:y.tables;return{layers:(null==g?void 0:g.map(P=>({id:P.id})).reverse())||[],tables:(null==S?void 0:S.map(P=>({serverUrl:u,id:P.id})).reverse())||[],layerInfos:i?g:[],tableInfos:i?S:[]}}),m.apply(this,arguments)}function L(){return(L=(0,l.A)(function*(o,r){var f;const d=yield(0,C.V)(o,{customParameters:r});if(!(null===(f=d.layers)||void 0===f?void 0:f[0]))return{serviceInfo:d};try{const{serverUrl:s}=yield(0,R.L)(o),u=yield(0,C.V)(s,{customParameters:r}).catch(()=>null);return u&&(d.tables=u.tables),{serviceInfo:d,tableServerUrl:s}}catch{return{serviceInfo:d}}})).apply(this,arguments)}function I(o){return A.apply(this,arguments)}function A(){return(A=(0,l.A)(function*(o){return(0,H.S[o])()})).apply(this,arguments)}function T(){return(T=(0,l.A)(function*(o,r){return(yield(0,C.V)(o,{customParameters:r})).tileInfo})).apply(this,arguments)}function D(){return(D=(0,l.A)(function*(o){const r=[],f=[];if(o.forEach(s=>{const{type:u}=s;"Oriented Imagery Layer"===u?(r.push(u),f.push(I("OrientedImageryLayer"))):(r.push(u),f.push(I("FeatureLayer")))}),!f.length)return;const d=yield Promise.all(f),y=new Map;return r.forEach((s,u)=>{y.set(s,d[u])}),s=>y.get(s.type)})).apply(this,arguments)}},86537:(Z,x,n)=>{n.d(x,{L:()=>C});var l=n(10467),U=n(77469),t=n(89563),e=n(5922),R=n(56492),M=n(68438),W=n(73874),H=n(46577);function C(a,m){return V.apply(this,arguments)}function V(){return V=(0,l.A)(function*(a,m){var h,L;const I=(0,M.qg)(a);if(!I)throw new e.A("invalid-url","Invalid scene service url");const A={...m,sceneServerUrl:I.url.path,layerId:null!==(h=I.sublayer)&&void 0!==h?h:void 0};if(null!==(L=A.sceneLayerItem)&&void 0!==L||(A.sceneLayerItem=yield function c(a){return j.apply(this,arguments)}(A)),null==A.sceneLayerItem)return K(A.sceneServerUrl.replace("/SceneServer","/FeatureServer"),A);const E=yield function Y(a){return B.apply(this,arguments)}(A);if(null==E||!E.url)throw new e.A("related-service-not-found","Could not find feature service through portal item relationship");A.featureServiceItem=E;const T=yield K(E.url,A);return T.portalItem=E,T}),V.apply(this,arguments)}function j(){return j=(0,l.A)(function*(a){const m=(yield N(a)).serviceItemId;if(!m)return null;const h=new H.default({id:m,apiKey:a.apiKey}),L=yield function J(a){return X.apply(this,arguments)}(a);null!=L&&(h.portal=new W.A({url:L}));try{return h.load({signal:a.signal})}catch(I){return(0,R.QP)(I),null}}),j.apply(this,arguments)}function N(a){return G.apply(this,arguments)}function G(){return(G=(0,l.A)(function*(a){if(a.rootDocument)return a.rootDocument;const m={query:{f:"json",...a.customParameters,token:a.apiKey},responseType:"json",signal:a.signal};try{const h=yield(0,t.A)(a.sceneServerUrl,m);a.rootDocument=h.data}catch{a.rootDocument={}}return a.rootDocument})).apply(this,arguments)}function X(){return(X=(0,l.A)(function*(a){const m=null==U.id?void 0:U.id.findServerInfo(a.sceneServerUrl);if(null!=m&&m.owningSystemUrl)return m.owningSystemUrl;const h=a.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const L=(yield(0,t.A)(h,{query:{f:"json"},responseType:"json",signal:a.signal})).data.owningSystemUrl;if(L)return L}catch(L){(0,R.QP)(L)}return null})).apply(this,arguments)}function K(a,m){return Q.apply(this,arguments)}function Q(){return(Q=(0,l.A)(function*(a,m){var h,L,I;const A=(0,M.qg)(a);if(!A)throw new e.A("invalid-feature-service-url","Invalid feature service url");const E=A.url.path,T=m.layerId;if(null==T)return{serverUrl:E};const $=N(m),D=m.featureServiceItem?yield m.featureServiceItem.fetchData("json"):null,o=null===(h=(null==D||null===(L=D.layers)||void 0===L?void 0:L[0])||(null==D||null===(I=D.tables)||void 0===I?void 0:I[0]))||void 0===h?void 0:h.customParameters,r=i=>{const g={query:{f:"json",...o},responseType:"json",authMode:i,signal:m.signal};return(0,t.A)(E,g)},f=r("anonymous").catch(()=>r("no-prompt")),[d,y]=yield Promise.all([f,$]),s=null==y?void 0:y.layers,u=d.data&&d.data.layers;if(!Array.isArray(u))throw new Error("expected layers array");if(Array.isArray(s)){for(let i=0;i<Math.min(s.length,u.length);i++)if(s[i].id===T)return{serverUrl:E,layerId:u[i].id}}else if(null!=T&&T<u.length)return{serverUrl:E,layerId:u[T].id};throw new Error("could not find matching associated sublayer")})).apply(this,arguments)}function B(){return(B=(0,l.A)(function*({sceneLayerItem:a,signal:m}){if(!a)return null;try{const h=(yield a.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:m})).find(I=>"Feature Service"===I.type)||null;if(!h)return null;const L=new H.default({portal:h.portal,id:h.id});return yield L.load(),L}catch(h){return(0,R.QP)(h),null}})).apply(this,arguments)}},64833:(Z,x,n)=>{n.d(x,{S:()=>U});var l=n(10467);const U={BingMapsLayer:(t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(6767)]).then(n.bind(n,16767))).default}),function(){return t.apply(this,arguments)}),BuildingSceneLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(6440),n.e(6338),n.e(5940),n.e(3647),n.e(152),n.e(9641),n.e(9550),n.e(893),n.e(451)]).then(n.bind(n,13305))).default});return function(){return t.apply(this,arguments)}}(),CatalogLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(1732),n.e(2248),n.e(5718),n.e(313),n.e(8304),n.e(6440),n.e(8528),n.e(5931),n.e(8570),n.e(564)]).then(n.bind(n,78512))).default});return function(){return t.apply(this,arguments)}}(),CSVLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(6440),n.e(6338),n.e(5940),n.e(4104)]).then(n.bind(n,34015))).default});return function(){return t.apply(this,arguments)}}(),DimensionLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(2076),n.e(4511)]).then(n.bind(n,94511))).default});return function(){return t.apply(this,arguments)}}(),ElevationLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(2016),n.e(2076),n.e(8147)]).then(n.bind(n,98147))).default});return function(){return t.apply(this,arguments)}}(),FeatureLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(6440),n.e(6338),n.e(5940),n.e(8460)]).then(n.bind(n,35940))).default});return function(){return t.apply(this,arguments)}}(),GeoJSONLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(2648)]).then(n.bind(n,88474))).default});return function(){return t.apply(this,arguments)}}(),GeoRSSLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(6337)]).then(n.bind(n,66337))).default});return function(){return t.apply(this,arguments)}}(),GroupLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(751)]).then(n.bind(n,90751))).default});return function(){return t.apply(this,arguments)}}(),ImageryLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(8304),n.e(9642),n.e(2758),n.e(87),n.e(9671),n.e(5042)]).then(n.bind(n,64123))).default});return function(){return t.apply(this,arguments)}}(),ImageryTileLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(9642),n.e(18),n.e(2016),n.e(2758),n.e(87),n.e(4585),n.e(9671),n.e(2076),n.e(153)]).then(n.bind(n,20153))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(152),n.e(2076),n.e(5821)]).then(n.bind(n,12138))).default});return function(){return t.apply(this,arguments)}}(),KMLLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(4784),n.e(8155)]).then(n.bind(n,27160))).default});return function(){return t.apply(this,arguments)}}(),LineOfSightLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(2076),n.e(6396)]).then(n.bind(n,89957))).default});return function(){return t.apply(this,arguments)}}(),LinkChartLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(1732),n.e(2248),n.e(5718),n.e(7936),n.e(8463),n.e(313),n.e(1495),n.e(13),n.e(8528),n.e(114),n.e(2246),n.e(2076),n.e(8293)]).then(n.bind(n,26994))).default});return function(){return t.apply(this,arguments)}}(),MapImageLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(1732),n.e(2248),n.e(5718),n.e(1721),n.e(8304),n.e(5931),n.e(2079),n.e(2076),n.e(2362)]).then(n.bind(n,39425))).default});return function(){return t.apply(this,arguments)}}(),MapNotesLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(6440),n.e(6338),n.e(5940),n.e(2076),n.e(9372)]).then(n.bind(n,72921))).default});return function(){return t.apply(this,arguments)}}(),MediaLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(2076),n.e(3073)]).then(n.bind(n,92072))).default});return function(){return t.apply(this,arguments)}}(),OGCFeatureLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(1732),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(5225),n.e(7935)]).then(n.bind(n,64368))).default});return function(){return t.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(5090),n.e(4717)]).then(n.bind(n,94717))).default});return function(){return t.apply(this,arguments)}}(),OrientedImageryLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(1721),n.e(6440),n.e(6338),n.e(5940),n.e(1742)]).then(n.bind(n,49027))).default});return function(){return t.apply(this,arguments)}}(),PointCloudLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(152),n.e(2076),n.e(294)]).then(n.bind(n,1852))).default});return function(){return t.apply(this,arguments)}}(),RouteLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(709),n.e(9348)]).then(n.bind(n,30380))).default});return function(){return t.apply(this,arguments)}}(),SceneLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(5434),n.e(3647),n.e(152),n.e(9641),n.e(9750),n.e(9550),n.e(3051),n.e(8864),n.e(893),n.e(2076),n.e(1365)]).then(n.bind(n,82262))).default});return function(){return t.apply(this,arguments)}}(),StreamLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(3290)]).then(n.bind(n,19373))).default});return function(){return t.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1721),n.e(6440),n.e(6338),n.e(230),n.e(3258)]).then(n.bind(n,11943))).default});return function(){return t.apply(this,arguments)}}(),TileLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(1732),n.e(2248),n.e(5718),n.e(1721),n.e(8304),n.e(5931),n.e(2016),n.e(2079),n.e(2076),n.e(460)]).then(n.bind(n,40460))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMesh3DTilesLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(1912)]).then(n.bind(n,41912))).default});return function(){return t.apply(this,arguments)}}(),UnknownLayer:function(){var t=(0,l.A)(function*(){return(yield n.e(482).then(n.bind(n,30482))).default});return function(){return t.apply(this,arguments)}}(),UnsupportedLayer:function(){var t=(0,l.A)(function*(){return(yield n.e(2605).then(n.bind(n,42605))).default});return function(){return t.apply(this,arguments)}}(),VectorTileLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(9093),n.e(2016),n.e(6517),n.e(2076),n.e(6989)]).then(n.bind(n,90769))).default});return function(){return t.apply(this,arguments)}}(),VoxelLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(6669),n.e(152),n.e(2076),n.e(7388)]).then(n.bind(n,24149))).default});return function(){return t.apply(this,arguments)}}(),WFSLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(1985),n.e(6669),n.e(2248),n.e(5718),n.e(313),n.e(1495),n.e(3650),n.e(1220)]).then(n.bind(n,3723))).default});return function(){return t.apply(this,arguments)}}(),WMSLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(2076),n.e(2138)]).then(n.bind(n,52138))).default});return function(){return t.apply(this,arguments)}}(),WMTSLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(5090),n.e(2076),n.e(7438)]).then(n.bind(n,67438))).default});return function(){return t.apply(this,arguments)}}(),WebTileLayer:function(){var t=(0,l.A)(function*(){return(yield Promise.all([n.e(9845),n.e(6669),n.e(5090)]).then(n.bind(n,75090))).default});return function(){return t.apply(this,arguments)}}()};var t},56151:(Z,x,n)=>{n.d(x,{V:()=>t});var l=n(10467),U=n(89563);function t(R,M){return e.apply(this,arguments)}function e(){return(e=(0,l.A)(function*(R,M){const{data:W}=yield(0,U.A)(R,{responseType:"json",query:{f:"json",...null==M?void 0:M.customParameters,token:null==M?void 0:M.apiKey}});return W})).apply(this,arguments)}}}]);