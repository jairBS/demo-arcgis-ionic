"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9150],{29150:(xn,F,a)=>{a.r(F),a.d(F,{getRampStops:()=>mn,realWorldMaxSize:()=>B,realWorldMinSize:()=>R});var M=a(10467),$=a(68677),G=a(47280),y=a(91515),q=a(76926),U=a(83393),H=a(54501),nn=(a(60421),a(67722)),ln=a(46602),en=a(55417);const B=30,R=12,N=[255,255,255],Y=[200,200,200],S=[128,128,128],tn=20,on=5;function mn(n,e,l,t,o,s,i){return j.apply(this,arguments)}function j(){return j=(0,M.A)(function*(n,e,l,t,o,s,i){var r,c;const h=e.legendOptions,v=null==h?void 0:h.customValues,f=i||(yield function dn(n,e){return W.apply(this,arguments)}(n,l)),m=e.stops,d=m&&m.length>1;if(!f||!v&&!(null!=e.minSize&&null!=e.maxSize||d&&!e.target))return;const p=(0,U.$d)(f);let x=!1,u=null,z=null;u=p&&!d?(0,y.LI)([e.minDataValue,e.maxDataValue]):null!=v?v:yield function _n(n,e,l,t){return K.apply(this,arguments)}(e,f,t,null==o?void 0:o.type);const _=null==n?void 0:n.authoringInfo,C="univariate-color-size"===(null==_?void 0:_.type),T=C&&"above-and-below"===(null==_?void 0:_.univariateTheme);if(!u&&d&&(u=m.map(b=>b.value),x=m.some(b=>!!b.label),"flow"===n.type&&(u=(0,y.LI)(u)),x&&(z=m.map(b=>b.label))),p&&null!=u&&(null===(r=u)||void 0===r?void 0:r.length)>2&&!T&&(u=[u[0],u[u.length-1]]),!u)return null;C&&5!==(null===(c=u)||void 0===c?void 0:c.length)&&(u=X({minSize:u[0],maxSize:u[u.length-1]}));const O=p?function yn(n,e){const l=null==n?void 0:n.authoringInfo,t="univariate-color-size"===(null==l?void 0:l.type);let o=[R,B];if(t){const s=e[0],i=e[e.length-1],r=R,c=B;o=e.map(h=>r+(h-s)/(i-s)*(c-r))}return t&&"below"===(null==l?void 0:l.univariateTheme)&&o.reverse(),o}(n,u):null,I=(0,U.k_)(f),En=x?null:function cn(n,e){const l=n.length-1;return n.map((t,o)=>(0,H.createStopLabel)(t,o,l,e))}(u,s);return(yield Promise.all(u.map(function(){var b=(0,M.A)(function*(k,A){const Z=p?O[A]:yield D(e,f,k,t,null==o?void 0:o.type);return{value:k,symbol:gn(T&&"class-breaks"===n.type?fn(n,A):f,Z),label:x?z[A]:En[A],size:Z,outlineSize:I}});return function(k,A){return b.apply(this,arguments)}}()))).reverse()}),j.apply(this,arguments)}function fn(n,e){const l=n.classBreakInfos,t=l.length,o=t<2||!(e>=2)?l[0].symbol.clone():l[t-1].symbol.clone();return n.visualVariables.some(s=>"color"===s.type)&&(o.type.includes("3d")?J(o):Q(o)),o}function W(){return(W=(0,M.A)(function*(n,e){var l;if("flow"===n.type)return(0,H.getSymbolForFlowRenderer)(n,e);if("pie-chart"===n.type)return new ln.A({color:null,outline:null!==(l=n.outline)&&void 0!==l&&l.width?n.outline:new en.A});let t=null,o=null;if("simple"===n.type)t=n.symbol;else if("class-breaks"===n.type){const i=n.classBreakInfos;t=i&&i[0]&&i[0].symbol,o=i.length>1}else if("unique-value"===n.type){var s;const i=n.uniqueValueInfos;t=null==i||null===(s=i[0])||void 0===s?void 0:s.symbol,o=null!=i&&i.length>1}return!t||function pn(n){return!!n&&((0,G.wk)(n)?!!n.symbolLayers&&n.symbolLayers.some(e=>e&&"fill"===e.type):n.type.includes("fill"))}(t)?null:(t=t.clone(),(e||o)&&(t.type.includes("3d")?J(t):Q(t)),t)})).apply(this,arguments)}function J(n){n.symbolLayers.forEach("line-3d"===n.type?e=>{e.material={color:S}}:e=>{var l;"icon"!==e.type||null!==(l=e.resource)&&void 0!==l&&l.href?e.material={color:Y}:(e.material={color:N},e.outline={color:S,size:1.5})})}function Q(n){const e=(0,nn.g4)();if("cim"===n.type)(0,q.Fe)(n,new $.A(Y));else if(n.type.includes("line"))n.color=S;else if(n.color=e?S:N,"simple-marker"===n.type)if(n.outline){var l;"#ffffff"===(null===(l=n.outline)||void 0===l||null===(l=l.color)||void 0===l?void 0:l.toHex())&&(n.outline.color=S)}else n.outline={color:S,width:1.5}}function K(){return(K=(0,M.A)(function*(n,e,l,t){const o=(yield Promise.resolve().then(a.bind(a,77522))).getSizeRangeAtScale(n,l,t),s=o&&X(o);if(!o||!s)return;let i=s.map(r=>function vn(n,e,l){const t=l.minSize,o=l.maxSize,s=e.minDataValue,i=e.maxDataValue;let r;return r=n<=t?s:n>=o?i:(n-t)/(o-t)*(i-s)+s,r}(r,n,o));i=(0,y.LI)(i);for(let r=1;r<i.length-1;r++){const c=yield hn(n,e,i[r],i[r-1],l,t);c&&(i[r]=c[0],s[r]=c[1])}return i})).apply(this,arguments)}function X(n){const e=n.minSize,t=on,o=(n.maxSize-e)/(t-1),s=[];for(let i=0;i<t;i++)s.push(e+o*i);return s}function hn(n,e,l,t,o,s){return V.apply(this,arguments)}function V(){return(V=(0,M.A)(function*(n,e,l,t,o,s){const i=yield D(n,e,l,o,s),r=yield D(n,e,t,o,s),c=(0,y.lc)(l),v=tn;let f=c.integer,m=null,g=null;l>0&&l<1&&(m=10**c.fractional,f=(0,y.lc)(l*=m).integer);for(let L=f-1;L>=0;L--){const P=10**L;let d=Math.floor(l/P)*P,E=Math.ceil(l/P)*P;null!=m&&(d/=m,E/=m);let p=(d+E)/2;[,p]=(0,y.LI)([d,p,E],{indexes:[1]});const x=yield D(n,e,d,o,s),u=yield D(n,e,E,o,s),z=yield D(n,e,p,o,s),_=(0,y.u5)(i,x,r,null),C=(0,y.u5)(i,u,r,null),T=(0,y.u5)(i,z,r,null);let O=_.previous<=v,I=C.previous<=v;if(O&&I&&(_.previous<=C.previous?(O=!0,I=!1):(I=!0,O=!1)),O?g=[d,x]:I?g=[E,u]:T.previous<=v&&(g=[p,z]),g)break}return g})).apply(this,arguments)}function D(n,e,l,t,o){return w.apply(this,arguments)}function w(){return(w=(0,M.A)(function*(n,e,l,t,o){const{getSize:s}=yield Promise.resolve().then(a.bind(a,77522));return s(n,l,{scale:t,view:o,shape:"simple-marker"===e.type?e.style:null})})).apply(this,arguments)}function gn(n,e){const l=n.clone();if((0,G.wk)(l))(0,U.$d)(l)||l.symbolLayers.forEach(t=>{"fill"!==t.type&&(t.size=e)});else if(function sn(n){return"esri.symbols.SimpleMarkerSymbol"===n.declaredClass}(l))l.size=e;else if(function rn(n){return"esri.symbols.PictureMarkerSymbol"===n.declaredClass}(l)){const t=l.width,o=l.height;l.height=e,l.width=e*(t/o)}else!function un(n){return"esri.symbols.SimpleLineSymbol"===n.declaredClass}(l)?function an(n){return"esri.symbols.TextSymbol"===n.declaredClass}(l)&&l.font&&(l.font.size=e):l.width=e;return l}}}]);