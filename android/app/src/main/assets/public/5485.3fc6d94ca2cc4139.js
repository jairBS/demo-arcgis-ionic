"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5485],{29430:(Z,K,o)=>{o.d(K,{$:()=>D,IB:()=>W,N2:()=>g,RH:()=>V,Ws:()=>Y,ZD:()=>T});var _=o(68677);function W(s){return"r"in s&&"g"in s&&"b"in s}function I(s){return"h"in s&&"s"in s&&"v"in s}function m(s){return"l"in s&&"a"in s&&"b"in s}function S(s){return"l"in s&&"c"in s&&"h"in s}o(53781),o(89141);const $=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],F=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function G(s,d){const y=[];let E,O;if(s[0].length!==d.length)throw new Error("dimensions do not match");const w=s.length,j=s[0].length;let k=0;for(E=0;E<w;E++){for(k=0,O=0;O<j;O++)k+=s[E][O]*d[O];y.push(k)}return y}function C(s){const d=[s.r/255,s.g/255,s.b/255].map(E=>E<=.04045?E/12.92:((E+.055)/1.055)**2.4),y=G($,d);return{x:100*y[0],y:100*y[1],z:100*y[2]}}function M(s){const d=G(F,[s.x/100,s.y/100,s.z/100]).map(y=>Math.min(1,Math.max(y<=.0031308?12.92*y:1.055*y**.4166666666666667-.055,0)));return{r:Math.round(255*d[0]),g:Math.round(255*d[1]),b:Math.round(255*d[2])}}function U(s){const d=[s.x/95.047,s.y/100,s.z/108.883].map(y=>y>.008856451679035631?y**.3333333333333333:7.787037037037035*y+.13793103448275862);return{l:116*d[1]-16,a:500*(d[0]-d[1]),b:200*(d[1]-d[2])}}function h(s){const d=s.l,y=[(d+16)/116+s.a/500,(d+16)/116,(d+16)/116-s.b/200].map(E=>E>6/29?E**3:3*(6/29)**2*(E-4/29));return{x:95.047*y[0],y:100*y[1],z:108.883*y[2]}}function D(s){return W(s)?s:S(s)?function p(s){return M(h(function i(s){const y=s.c,E=s.h;return{l:s.l,a:y*Math.cos(E),b:y*Math.sin(E)}}(s)))}(s):m(s)?function c(s){return M(h(s))}(s):function L(s){return"x"in s&&"y"in s&&"z"in s}(s)?M(s):I(s)?function P(s){const d=(s.h+360)%360/60,E=s.v/100*255,O=E*(s.s/100),w=O*(1-Math.abs(d%2-1));let j;switch(Math.floor(d)){case 0:j={r:O,g:w,b:0};break;case 1:j={r:w,g:O,b:0};break;case 2:j={r:0,g:O,b:w};break;case 3:j={r:0,g:w,b:O};break;case 4:j={r:w,g:0,b:O};break;case 5:case 6:j={r:O,g:0,b:w};break;default:j={r:0,g:0,b:0}}return j.r=Math.round(j.r+E-O),j.g=Math.round(j.g+E-O),j.b=Math.round(j.b+E-O),j}(s):s}function g(s){return I(s)?s:function R(s){const d=s.r,y=s.g,E=s.b,O=Math.max(d,y,E),w=O-Math.min(d,y,E);let j=O,k=0===w?0:O===d?(y-E)/w%6:O===y?(E-d)/w+2:(d-y)/w+4,X=0===w?0:w/j;return k<0&&(k+=6),k*=60,X*=100,j*=100/255,{h:k,s:X,v:j}}(D(s))}function T(s){return m(s)?s:function l(s){return U(C(s))}(D(s))}function V(s){return S(s)?s:function u(s){return function f(s){const d=s.l,y=s.a,E=s.b,O=Math.sqrt(y*y+E*E);let w=Math.atan2(E,y);return w=w>0?w:w+2*Math.PI,{l:d,c:O,h:w}}(U(C(s)))}(D(s))}function Y(s,d){const{r:y,g:E,b:O}=null!=d&&d.ignoreAlpha?s:function x(s){let{r:d,g:y,b:E,a:O}=s;return O<1&&(d=Math.round(O*d+255*(1-O)),y=Math.round(O*y+255*(1-O)),E=Math.round(O*E+255*(1-O))),new _.A({r:d,g:y,b:E})}(s);return.2126*y+.7152*E+.0722*O}var a,s;(s=a||(a={}))[s.Low=160]="Low",s[s.High=225]="High"},40856:(Z,K,o)=>{o.d(K,{X_:()=>W,i1:()=>I,zx:()=>$});var _=o(69287),b=o(82663);const B=96;function W(C,M){const U=M||C.extent,h=C.width,f=(0,b.GA)(null==U?void 0:U.spatialReference);return U&&h?U.width/h*f*b.dy*B:0}function I(C,M){return C/((0,b.GA)(M)*b.dy*B)}function $(C,M,U){return function F(C,M){return 0===M||(0,_.Sp)(C,M)||C<M}(C,M)&&function G(C,M){return 0===M||(0,_.Sp)(C,M)||C>M}(C,U)}},1684:(Z,K,o)=>{o.d(K,{$:()=>h});var _=o(10467),b=o(68677),B=o(29430),W=o(77806),I=o(48218),m=o(32117),S=o(5922),L=o(35150),$=o(721);function F(f,i,l,c,u){if(null==f)return null;const p=f.referencesGeometry()&&u?function C(f,i,l){const{transform:c,hasZ:u,hasM:p}=l;G.has(i)||G.set(i,function M(f){const i={};switch(f){case"esriGeometryPoint":return(l,c,u,p)=>(0,$.Tr)(c,i,l,u,p);case"esriGeometryPolygon":return(l,c,u,p)=>(0,$.$X)(c,i,l,u,p);case"esriGeometryPolyline":return(l,c,u,p)=>(0,$.P5)(c,i,l,u,p);case"esriGeometryMultipoint":return(l,c,u,p)=>(0,$.SW)(c,i,l,u,p);default:return L.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new S.A("mapview-arcade",`Unable to handle geometryType: ${f}`)),l=>l}}(i));const R=G.get(i)(f.geometry,c,u,p);return{...f,geometry:R}}(i,c,u):i,R=f.repurposeFeature(p);try{return f.evaluate({...l,$feature:R},f.services)}catch(P){return L.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",P),null}}const G=new Map,U=f=>{if(!f)return[0,0,0,0];const{r:i,g:l,b:c,a:u}=f;return[i,l,c,255*u]};class h{static findApplicableOverrides(i,l,c){if(i&&l){if(i.primitiveName){let u=!1;for(const p of c)if(p.primitiveName===i.primitiveName){u=!0;break}if(!u)for(const p of l)p.primitiveName===i.primitiveName&&c.push(p)}switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(i.effects)for(const u of i.effects)h.findApplicableOverrides(u,l,c);if(i.symbolLayers)for(const u of i.symbolLayers)h.findApplicableOverrides(u,l,c);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(i.effects)for(const u of i.effects)h.findApplicableOverrides(u,l,c);if(i.markerPlacement&&h.findApplicableOverrides(i.markerPlacement,l,c),"CIMVectorMarker"===i.type){if(i.markerGraphics)for(const u of i.markerGraphics)h.findApplicableOverrides(u,l,c),h.findApplicableOverrides(u.symbol,l,c)}else"CIMCharacterMarker"===i.type?h.findApplicableOverrides(i.symbol,l,c):"CIMHatchFill"===i.type?h.findApplicableOverrides(i.lineSymbol,l,c):"CIMPictureMarker"===i.type&&h.findApplicableOverrides(i.animatedSymbolProperties,l,c)}}}static findEffectOverrides(i,l){if(!i)return null;if("CIMGeometricEffectDashes"===i.type&&(0,m.K3)(i),!l||!i.primitiveName)return{type:"cim-effect-info",effect:i,overrides:[]};const c=i.primitiveName,u=[];for(const p of l)p.primitiveName===c&&u.push({...p,propertyName:(0,m.YF)(p.propertyName)});return{type:"cim-effect-info",effect:i,overrides:u}}static resolveSymbolOverrides(i,l,c,u,p,R,P){return(0,_.A)(function*(){if(null==i||!i.symbol)return null;let{symbol:D,primitiveOverrides:g}=i;const T=!!g;if(!T&&!u)return D;D=(0,W.o8)(D),g=(0,W.o8)(g);let V=!0;if(l||(l={attributes:{}},V=!1),T){if(V||(g=g.filter(N=>{var x;return!(null!==(x=N.valueExpressionInfo)&&void 0!==x&&x.expression.includes("$feature"))})),P||(g=g.filter(N=>{var x;return!(null!==(x=N.valueExpressionInfo)&&void 0!==x&&x.expression.includes("$view"))})),g.length>0){const N={spatialReference:c,fields:(0,m.O2)(l.attributes),geometryType:p};yield h.createRenderExpressions(g,N),h.evaluateOverrides(g,l,null!=p?p:"esriGeometryPoint",R,P)}h.applyOverrides(D,g)}return u&&h.applyDictionaryTextOverrides(D,l,u,null),D})()}static createRenderExpressions(i,l){return(0,_.A)(function*(){const c=[];for(const u of i){const p=u.valueExpressionInfo;if(!p||h._expressionToRenderExpression.has(p.expression))continue;const R=(0,I.Ad)(p.expression,l.spatialReference,l.fields);c.push(R),R.then(P=>h._expressionToRenderExpression.set(p.expression,P))}c.length>0&&(yield Promise.all(c))})()}static evaluateOverrides(i,l,c,u,p){const R={$view:{scale:null==p?void 0:p.scale}};for(const P of i){P.value&&"object"==typeof P.value&&(0,B.IB)(P.value)&&("Color"===P.propertyName||"StrokeColor"===P.propertyName)&&(P.value=U(P.value));const D=P.valueExpressionInfo;if(!D)continue;const g=h._expressionToRenderExpression.get(D.expression);g&&(P.value=F(g,l,R,c,u))}}static applyDictionaryTextOverrides(i,l,c,u,p="Normal"){if(null!=i&&i.type)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const R=i.symbolLayers;if(!R)return;for(const P of R)P&&"CIMVectorMarker"===P.type&&h.applyDictionaryTextOverrides(P,l,c,u,"CIMTextSymbol"===i.type?i.textCase:p)}break;case"CIMVectorMarker":{const R=i.markerGraphics;if(!R)return;for(const P of R)P&&h.applyDictionaryTextOverrides(P,l,c,u)}break;case"CIMMarkerGraphic":{const R=i.textString;if(R&&R.includes("[")){const P=(0,m.gQ)(R,c);i.textString=(0,m.FM)(l,P,u,p)}}}}static applyOverrides(i,l,c,u){if(i.primitiveName)for(const p of l)if(p.primitiveName===i.primitiveName){const R=(0,m.YF)(p.propertyName);if(u&&u.push({cim:i,nocapPropertyName:R,value:i[R]}),c){let P=!1;for(const D of c)D.primitiveName===i.primitiveName&&(P=!0);P||c.push(p)}null!=p.value&&(i[R]=p.value)}switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(i.effects)for(const p of i.effects)h.applyOverrides(p,l,c,u);if(i.symbolLayers)for(const p of i.symbolLayers)h.applyOverrides(p,l,c,u);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(i.effects)for(const p of i.effects)h.applyOverrides(p,l,c,u);if("CIMVectorMarker"===i.type&&i.markerGraphics)for(const p of i.markerGraphics)h.applyOverrides(p,l,c,u),h.applyOverrides(p.symbol,l,c,u)}}static restoreOverrides(i){for(const l of i)l.cim[l.nocapPropertyName]=l.value}static buildOverrideKey(i){let l="";for(const c of i)void 0!==c.value&&(l+=`${c.primitiveName}${c.propertyName}${JSON.stringify(c.value)}`);return l}static toValue(i,l){if("DashTemplate"===i)return l.split(" ").map(c=>Number(c));if("Color"===i){const c=new b.A(l).toRgba();return c[3]*=255,c}return l}}h._expressionToRenderExpression=new Map},29459:(Z,K,o)=>{o.d(K,{e:()=>R});var h,_=o(8189),b=o(31178),B=o(5605),W=o(5922),I=o(48900),m=o(85211),F=(o(3248),o(35150),o(40707),o(76576)),G=o(40856),C=o(88766),M=o(60746),U=o(66727);let f=h=class extends U.A{constructor(P){super(P),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new h({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,_._)([(0,m.MZ)({type:[Number,String],json:{write:!0}})],f.prototype,"left",void 0),(0,_._)([(0,m.MZ)({type:[Number,String],json:{write:!0}})],f.prototype,"right",void 0),(0,_._)([(0,m.MZ)({type:[Number,String],json:{write:!0}})],f.prototype,"top",void 0),(0,_._)([(0,m.MZ)({type:[Number,String],json:{write:!0}})],f.prototype,"bottom",void 0),f=h=(0,_._)([(0,F.$)("esri.views.layers.support.ClipRect")],f);const i=f;var l=o(75644);let c=class extends U.A{constructor(P){super(P),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,_._)([(0,m.MZ)({type:[[[Number]]],json:{write:!0}})],c.prototype,"path",void 0),c=(0,_._)([(0,F.$)("esri.views.layers.support.Path")],c);const p=b.A.ofType({key:"type",base:null,typeMap:{rect:i,path:c,geometry:l.A}}),R=P=>{let D=class extends P{constructor(){super(...arguments),this.attached=!1,this.clips=new p,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1,this.highlightOptions=null}initialize(){var g,T,V,N;const x=null===(g=null===(T=this.view)||void 0===T?void 0:T.spatialReferenceLocked)||void 0===g||g;(null===(V=this.view)||void 0===V?void 0:V.spatialReference)&&x&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new W.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new C.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,I.wB)(()=>this.suspended,a=>{this.container&&(this.container.visible=!a)},I.pc),(0,I.wB)(()=>this.updateSuspended,a=>{this.view&&!a&&this.updateRequested&&this.view.requestUpdate()},I.pc),(0,I.wB)(()=>{var a,v;return null!==(a=null===(v=this.layer)||void 0===v?void 0:v.opacity)&&void 0!==a?a:1},a=>{this.container&&(this.container.opacity=a)},I.pc),(0,I.wB)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",a=>{this.container&&(this.container.blendMode=a)},I.pc),(0,I.wB)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,a=>{this.container&&(this.container.effect=a)},I.pc),(0,I.wB)(()=>this.highlightOptions,a=>this.container.highlightOptions=a,I.pc),(0,I.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},I.pc),(0,I.wB)(()=>{var a;return{scale:null===(a=this.view)||void 0===a?void 0:a.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}},({scale:a})=>{const v=null!=a&&this.isVisibleAtScale(a);v!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",v)},I.pc)],"constructor"),null!==(N=this.view)&&void 0!==N&&N.whenLayerView?this.view.whenLayerView(this.layer).then(a=>{a===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){var g;const T=null===(g=this.view)||void 0===g?void 0:g.spatialReference;return null==T||this.supportsSpatialReference(T)}get updateSuspended(){return this.suspended}get updating(){var g;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null===(g=this._updatingHandles)||void 0===g||!g.updating))}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}isVisibleAtScale(g){const T=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!T)return!0;const{minScale:V,maxScale:N}=T;return(0,G.zx)(g,V,N)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(g){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",g),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(g))):this.updateRequested=!1}hitTest(g,T){return Promise.resolve(null)}supportsSpatialReference(g){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const g=super.getSuspendInfo(),T=!this.spatialReferenceSupported,V=this.visibleAtCurrentScale;return T&&(g.spatialReferenceNotSupported=T),V&&(g.outsideScaleRange=V),g}addAttachHandles(g){this.addHandles(g,"attach")}};return(0,_._)([(0,m.MZ)()],D.prototype,"attached",void 0),(0,_._)([(0,m.MZ)({type:p,set(g){const T=(0,B.V)(g,this._get("clips"),p);this._set("clips",T)}})],D.prototype,"clips",void 0),(0,_._)([(0,m.MZ)()],D.prototype,"container",void 0),(0,_._)([(0,m.MZ)()],D.prototype,"moving",void 0),(0,_._)([(0,m.MZ)({readOnly:!0})],D.prototype,"spatialReferenceSupported",null),(0,_._)([(0,m.MZ)({readOnly:!0})],D.prototype,"updateParameters",void 0),(0,_._)([(0,m.MZ)()],D.prototype,"updateRequested",void 0),(0,_._)([(0,m.MZ)()],D.prototype,"updateSuspended",null),(0,_._)([(0,m.MZ)()],D.prototype,"updating",null),(0,_._)([(0,m.MZ)()],D.prototype,"view",void 0),(0,_._)([(0,m.MZ)({readOnly:!0})],D.prototype,"visibleAtCurrentScale",void 0),(0,_._)([(0,m.MZ)({type:M.A})],D.prototype,"highlightOptions",void 0),D=(0,_._)([(0,F.$)("esri.views.2d.layers.LayerView2D")],D),D}},89652:(Z,K,o)=>{o.r(K),o.d(K,{default:()=>Y});var _=o(10467),b=o(8189),B=o(89952),W=o(31178),I=o(2993),m=o(17715),S=o(48900),L=o(85211),G=(o(3248),o(35150),o(76576)),C=o(58226),M=o(37304),U=o(23632),h=o(34720),f=o(51882),i=o(22560),l=o(48393),c=o(25735),u=o(29459),p=o(57052),R=o(80745),P=o(41474);const D=["route-info","direction-line","direction-point","polygon-barrier","polyline-barrier","point-barrier","stop"],g={graphic:null,property:null,oldValue:null,newValue:null};function T(a){return a instanceof C.A||a instanceof M.A||a instanceof U.A||a instanceof h.A||a instanceof f.A||a instanceof i.A||a instanceof l.A}let x=class extends((0,u.e)(P.A)){constructor(){super(...arguments),this._graphics=new W.A,this._highlightIds=new Map,this._networkFeatureMap=new Map,this._networkGraphicMap=new Map}get _routeItems(){return new I.A({getCollections:()=>null==this.layer||this.destroyed?[]:[null!=this.layer.routeInfo?new W.A([this.layer.routeInfo]):null,this.layer.directionLines,this.layer.directionPoints,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.pointBarriers,this.layer.stops]})}initialize(){this._updatingHandles.addOnCollectionChange(()=>this._routeItems,a=>this._routeItemsChanged(a),S.Vh)}destroy(){var a;this._networkFeatureMap.clear(),this._networkGraphicMap.clear(),this._graphics.removeAll(),null===(a=this._get("_routeItems"))||void 0===a||a.destroy()}attach(){this._createGraphicsView()}detach(){this._destroyGraphicsView()}fetchPopupFeaturesAtLocation(a,v){var A=this;return(0,_.A)(function*(){return A._graphicsView.hitTest(a).filter(({popupTemplate:H})=>!!H)})()}highlight(a){let v;v=T(a)?[this._getNetworkFeatureUid(a)]:function N(a){return Array.isArray(a)&&a.length>0&&T(a[0])}(a)?a.map(H=>this._getNetworkFeatureUid(H)):function V(a){return W.A.isCollection(a)&&a.length&&T(a.at(0))}(a)?a.map(H=>this._getNetworkFeatureUid(H)).toArray():[a.uid];const A=v.filter(B.Ru);return A.length?(this._addHighlight(A),(0,m.hA)(()=>this._removeHighlight(A))):(0,m.hA)()}hitTest(a,v){var A=this;return(0,_.A)(function*(){if(A.suspended)return null;const H=A._graphicsView.hitTest(a).filter(B.Ru).map(z=>A._networkGraphicMap.get(z));if(!H.length)return null;const{layer:J}=A;return H.reverse().map(z=>({type:"route",layer:J,mapPoint:a,networkFeature:z}))})()}isUpdating(){return this._graphicsView.updating}moveStart(){}moveEnd(){}update(a){this._graphicsView.processUpdate(a)}viewChange(){this._graphicsView.viewChange()}_addHighlight(a){for(const v of a)if(this._highlightIds.has(v)){const A=this._highlightIds.get(v);this._highlightIds.set(v,A+1)}else this._highlightIds.set(v,1);this._updateHighlight()}_createGraphic(a){const v=a.toGraphic();return v.layer=this.layer,v.sourceLayer=this.layer,v}_createGraphicsView(){const a=this.view,A=new p.A(a.featuresTilingScheme);this._graphicsView=new R.A({container:A,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),view:a}),this.container.addChild(A),this._updateHighlight()}_destroyGraphicsView(){this.container.removeChild(this._graphicsView.container),this._graphicsView.destroy()}_getDrawOrder(a){const v=this._networkGraphicMap.get(a);return D.indexOf(v.type)}_getNetworkFeatureUid(a){return this._networkFeatureMap.has(a)?this._networkFeatureMap.get(a).uid:null}_removeHighlight(a){for(const v of a)if(this._highlightIds.has(v)){const A=this._highlightIds.get(v)-1;0===A?this._highlightIds.delete(v):this._highlightIds.set(v,A)}this._updateHighlight()}_routeItemsChanged(a){if(a.removed.length){this._graphics.removeMany(a.removed.map(v=>{const A=this._networkFeatureMap.get(v);return this._networkFeatureMap.delete(v),this._networkGraphicMap.delete(A),A}));for(const v of a.removed)this.removeHandles(v)}if(a.added.length){this._graphics.addMany(a.added.map(v=>{const A=this._createGraphic(v);return null==A.symbol?null:(this._networkFeatureMap.set(v,A),this._networkGraphicMap.set(A,v),A)}).filter(B.Ru));for(const v of a.added)this.addHandles([(0,S.wB)(()=>v.geometry,(A,H)=>{this._updateGraphic(v,"geometry",A,H)}),(0,S.wB)(()=>v.symbol,(A,H)=>{this._updateGraphic(v,"symbol",A,H)})],v);this._graphics.sort((v,A)=>this._getDrawOrder(v)-this._getDrawOrder(A))}}_updateGraphic(a,v,A,H){if(!this._networkFeatureMap.has(a)){const z=this._createGraphic(a);return this._networkFeatureMap.set(a,z),this._networkGraphicMap.set(z,a),void this._graphics.add(z)}const J=this._networkFeatureMap.get(a);J[v]=A,g.graphic=J,g.property=v,g.oldValue=H,g.newValue=A,this._graphicsView.graphicUpdateHandler(g)}_updateHighlight(){const a=Array.from(this._highlightIds.keys()),v=(0,c.$r)("highlight");this._graphicsView.setHighlight(a.map(A=>({objectId:A,highlightFlags:v})))}};(0,b._)([(0,L.MZ)()],x.prototype,"_graphics",void 0),(0,b._)([(0,L.MZ)()],x.prototype,"_routeItems",null),x=(0,b._)([(0,G.$)("esri.views.2d.layers.RouteLayerView2D")],x);const Y=x},57052:(Z,K,o)=>{o.d(K,{A:()=>W});var _=o(69473),b=o(57641),B=o(62931);class W extends b.f{renderChildren(m){for(const S of this.children)S.setTransform(m.state);if(super.renderChildren(m),this.attributeView.update(),this.children.some(S=>S.hasData)){switch(m.drawPhase){case _.S5.MAP:this._renderChildren(m,_.RI.All);break;case _.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(m)}this._boundsRenderer&&this._boundsRenderer.doRender(m)}}_renderHighlight(m){(0,B.lB)(m,!1,S=>{this._renderChildren(S,_.RI.Highlight)})}}},41474:(Z,K,o)=>{o.d(K,{A:()=>U});var _=o(8189),b=o(98877),B=o(42425),W=o(3046),I=o(35150),m=o(11432),S=o(64261),L=o(85211),G=(o(3248),o(40707),o(76576)),C=o(56985);let M=class extends((0,W.sA)((0,S.g)(B.A.EventedMixin(b.A)))){constructor(h){super(h),this._updatingHandles=new C.U,this.layer=null,this.parent=null}initialize(){this.when().catch(h=>{if("layerview:create-error"!==h.name){var f;const i=this.layer&&this.layer.id||"no id",l=(null===(f=this.layer)||void 0===f?void 0:f.title)||"no title";I.A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${l}', id: '${i}')`,h)}})}destroy(){this._updatingHandles=(0,m.pR)(this._updatingHandles)}get fullOpacity(){var h,f,i,l;return(null!==(h=null===(f=this.layer)||void 0===f?void 0:f.opacity)&&void 0!==h?h:1)*(null!==(i=null===(l=this.parent)||void 0===l?void 0:l.fullOpacity)&&void 0!==i?i:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var h;return!this.suspended&&!0===(null===(h=this.layer)||void 0===h?void 0:h.legendEnabled)}get updating(){var h;return!!(null!==(h=this._updatingHandles)&&void 0!==h&&h.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var h;return!0===(null===(h=this.layer)||void 0===h?void 0:h.visible)}set visible(h){this._overrideIfSome("visible",h)}canResume(){var h,f,i;return this.visible&&(null===(h=this.layer)||void 0===h?void 0:h.loaded)&&!(null!==(f=this.parent)&&void 0!==f&&f.suspended)&&(null===(i=this.view)||void 0===i?void 0:i.ready)||!1}getSuspendInfo(){var h,f;const i=null!==(h=this.parent)&&void 0!==h&&h.suspended?this.parent.suspendInfo:{};return null!==(f=this.view)&&void 0!==f&&f.ready||(i.viewNotReady=!0),this.layer&&this.layer.loaded||(i.layerNotLoaded=!0),this.visible||(i.layerInvisible=!0),i}isUpdating(){return!1}};(0,_._)([(0,L.MZ)()],M.prototype,"fullOpacity",null),(0,_._)([(0,L.MZ)()],M.prototype,"layer",void 0),(0,_._)([(0,L.MZ)()],M.prototype,"parent",void 0),(0,_._)([(0,L.MZ)({readOnly:!0})],M.prototype,"suspended",null),(0,_._)([(0,L.MZ)({readOnly:!0})],M.prototype,"suspendInfo",null),(0,_._)([(0,L.MZ)({readOnly:!0})],M.prototype,"legendEnabled",null),(0,_._)([(0,L.MZ)({type:Boolean,readOnly:!0})],M.prototype,"updating",null),(0,_._)([(0,L.MZ)({readOnly:!0})],M.prototype,"updatingProgress",null),(0,_._)([(0,L.MZ)()],M.prototype,"visible",null),(0,_._)([(0,L.MZ)()],M.prototype,"view",void 0),M=(0,_._)([(0,G.$)("esri.views.layers.LayerView")],M);const U=M},66727:(Z,K,o)=>{o.d(K,{A:()=>$});var _=o(8189),b=o(71065),B=o(85211),S=(o(3248),o(35150),o(40707),o(76576));let L=class extends b.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,_._)([(0,B.MZ)({readOnly:!0})],L.prototype,"version",null),L=(0,_._)([(0,S.$)("esri.views.layers.support.ClipArea")],L);const $=L},75644:(Z,K,o)=>{o.d(K,{A:()=>f});var M,_=o(8189),B=(o(21152),o(85211)),S=(o(3248),o(35150),o(40707),o(76576)),L=o(68643),$=o(61320),F=o(66727),G=o(28067),C=o(55861);const U={base:L.A,key:"type",typeMap:{extent:G.A,polygon:C.A}};let h=M=class extends F.A{constructor(i){super(i),this.type="geometry",this.geometry=null}clone(){var i,l;return new M({geometry:null!==(i=null===(l=this.geometry)||void 0===l?void 0:l.clone())&&void 0!==i?i:null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,_._)([(0,B.MZ)({types:U,json:{read:$.rS,write:!0}})],h.prototype,"geometry",void 0),h=M=(0,_._)([(0,S.$)("esri.views.layers.support.Geometry")],h);const f=h}}]);