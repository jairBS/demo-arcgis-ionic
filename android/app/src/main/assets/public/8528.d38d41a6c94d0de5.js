"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8528],{78592:(tt,G,I)=>{I.d(G,{O3:()=>J,PU:()=>z,YW:()=>Z,ex:()=>q,hv:()=>K,zp:()=>Q});var k=I(69287),W=I(67685),A=I(53781),R=I(89141);const q=2.4;function Q(h){return(0,W.PN)(h*q)}function z(h){return(0,W.Lz)(h)/q}function $(h,j,S,B){let{color:a,ratio:u}=j,{color:i,ratio:s}=S;s===u&&(1===s?u-=1e-6:s+=1e-6);const c=(0,k.qE)((B-u)/(s-u),0,1);(0,A.l)(h,a.toArray(),i.toArray(),c)}function J(h){const S=new Uint8ClampedArray(2048);if((h=h.filter(({ratio:s})=>s>=0&&s<=1).sort((s,c)=>s.ratio-c.ratio).map(({color:s,ratio:c})=>({color:s,ratio:Math.max(c,.001)}))).length<1)return S;let B=h[0],a=h[0],u=1;const i=(0,R.vt)();for(let s=0;s<512;s++){const c=(s+.5)/512;for(;c>a.ratio&&u<h.length;)B=a,a=h[u++];$(i,B,a,c),S.set(i,4*s)}return S}function K(h,j,S){const B=Math.sqrt(h**2+j**2)/S;return B>1?0:3/(Math.PI*S**2)*(1-B**2)**2}function Z(h){return"function"==typeof h?h:h?j=>+j[h]:()=>1}},74784:(tt,G,I)=>{I.d(G,{A:()=>j});var k=I(8189),W=I(49976),A=I(71065),R=I(85211),$=(I(3248),I(35150),I(40707),I(15463)),J=I(76576);const K=new W.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),Z=new W.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let h=class extends A.oY{constructor(S){super(S),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(S){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",S)}set definedInterval(S){"defined-interval"===this.classificationMethod&&this._set("definedInterval",S)}};(0,k._)([(0,$.e)({classBreaksDef:"class-breaks-definition"})],h.prototype,"type",void 0),(0,k._)([(0,R.MZ)({json:{write:!0}})],h.prototype,"breakCount",void 0),(0,k._)([(0,R.MZ)({json:{write:!0}})],h.prototype,"classificationField",void 0),(0,k._)([(0,R.MZ)({type:String,json:{read:K.read,write:K.write}})],h.prototype,"classificationMethod",void 0),(0,k._)([(0,R.MZ)({json:{write:!0}})],h.prototype,"normalizationField",void 0),(0,k._)([(0,R.MZ)({json:{read:Z.read,write:Z.write}})],h.prototype,"normalizationType",void 0),(0,k._)([(0,R.MZ)({value:null,json:{write:!0}})],h.prototype,"standardDeviationInterval",null),(0,k._)([(0,R.MZ)({value:null,json:{write:!0}})],h.prototype,"definedInterval",null),h=(0,k._)([(0,J.$)("esri.rest.support.ClassBreaksDefinition")],h);const j=h},54076:(tt,G,I)=>{I.d(G,{t:()=>q});var k=I(35150);const W=()=>k.A.getLogger("esri.rest.support.generateRendererUtils");function A(a,u){return Number(a.toFixed(u))}function q(a){const{normalizationTotal:u}=a;return{classBreaks:Q(a),normalizationTotal:u}}function Q(a){var u;const i=a.definition,{classificationMethod:s,normalizationType:c,definedInterval:g}=i,b=null!==(u=i.breakCount)&&void 0!==u?u:1,v=[];let d=a.values;if(0===d.length)return[];d=d.sort((p,o)=>p-o);const D=d[0],T=d[d.length-1];if("equal-interval"===s)if(d.length>=b){const p=(T-D)/b;let o=D;for(let l=1;l<b;l++){const _=A(D+l*p,6);v.push({minValue:o,maxValue:_,label:z(o,_,c)}),o=_}v.push({minValue:o,maxValue:T,label:z(o,T,c)})}else d.forEach(p=>{v.push({minValue:p,maxValue:p,label:z(p,p,c)})});else if("natural-breaks"===s){const p=function $(a){const u=[],i=[];let s=Number.MIN_VALUE,c=1,g=-1;for(let b=0;b<a.length;b++){const v=a[b];v===s?(c++,i[g]=c):null!==v&&(u.push(v),s=v,c=1,i.push(c),g++)}return{uniqueValues:u,valueFrequency:i}}(d),l=function J(a,u,i){const s=a.length,c=[];i>s&&(i=s);for(let b=0;b<i;b++)c.push(Math.round(b*s/i-1));c.push(s-1);let g=K(c,a,u,i);return function Z(a,u,i,s,c,g){let b=0,v=0,d=0,D=0,T=!0;for(let p=0;p<2&&T;p++){0===p&&(T=!1);for(let o=0;o<g-1;o++)for(;i[o+1]+1!==i[o+2];){i[o+1]=i[o+1]+1;const l=B(o,i,s,c);d=l.sbMean,b=l.sbSdcm;const _=B(o+1,i,s,c);if(D=_.sbMean,v=_.sbSdcm,!(b+v<u[o]+u[o+1])){i[o+1]=i[o+1]-1;break}u[o]=b,u[o+1]=v,a[o]=d,a[o+1]=D,T=!0}for(let o=g-1;o>0;o--)for(;i[o]!==i[o-1]+1;){i[o]=i[o]-1;const l=B(o-1,i,s,c);d=l.sbMean,b=l.sbSdcm;const _=B(o,i,s,c);if(D=_.sbMean,v=_.sbSdcm,!(b+v<u[o-1]+u[o])){i[o]=i[o]+1;break}u[o-1]=b,u[o]=v,a[o-1]=d,a[o]=D,T=!0}}return T}(g.mean,g.sdcm,c,a,u,i)&&(g=K(c,a,u,i)),c}(p.uniqueValues,a.valueFrequency||p.valueFrequency,b);let _=D;for(let y=1;y<b;y++)if(p.uniqueValues.length>y){const N=A(p.uniqueValues[l[y]],6);v.push({minValue:_,maxValue:N,label:z(_,N,c)}),_=N}v.push({minValue:_,maxValue:T,label:z(_,T,c)})}else if("quantile"===s)if(d.length>=b&&D!==T){let p=D,o=Math.ceil(d.length/b),l=0;for(let _=1;_<b;_++){let y=o+l-1;y>d.length&&(y=d.length-1),y<0&&(y=0),v.push({minValue:p,maxValue:d[y],label:z(p,d[y],c)}),p=d[y],l+=o,o=Math.ceil((d.length-l)/(b-_))}v.push({minValue:p,maxValue:T,label:z(p,T,c)})}else{let p=-1;for(let o=0;o<d.length;o++){const l=d[o];l!==p&&(p=l,v.push({minValue:p,maxValue:l,label:z(p,l,c)}),p=l)}}else if("standard-deviation"===s){const p=function j(a){let u=0;for(let i=0;i<a.length;i++)u+=a[i];return u/=a.length,u}(d),o=function S(a,u){let i=0;for(let s=0;s<a.length;s++){const c=a[s];i+=(c-u)*(c-u)}return i/=a.length,Math.sqrt(i)}(d,p);if(0===o)v.push({minValue:d[0],maxValue:d[0],label:z(d[0],d[0],c)});else{const l=function h(a,u,i,s,c){let g=Math.max(s-a,u-s)/c/i;return g=g>=1?1:g>=.5?.5:.25,g}(D,T,b,p,o)*o;let _=0,y=D;for(let w=b;w>=1;w--){const H=A(p-(w-.5)*l,6);v.push({minValue:y,maxValue:H,label:z(y,H,c)}),y=H,_++}let N=A(p+.5*l,6);v.push({minValue:y,maxValue:N,label:z(y,N,c)}),y=N,_++;for(let w=1;w<=b;w++)N=_===2*b?T:A(p+(w+.5)*l,6),v.push({minValue:y,maxValue:N,label:z(y,N,c)}),y=N,_++}}else if("defined-interval"===s){if(!g)return v;const p=d[0],o=d[d.length-1],l=Math.ceil((o-p)/g);let _=p;for(let y=1;y<l;y++){const N=A(p+y*g,6);v.push({minValue:_,maxValue:N,label:z(_,N,c)}),_=N}v.push({minValue:_,maxValue:o,label:z(_,o,c)})}return v}function z(a,u,i){let s=null;return s=a===u?i&&"percent-of-total"===i?a+"%":a.toString():i&&"percent-of-total"===i?a+"% - "+u+"%":a+" - "+u,s}function K(a,u,i,s){let c=[],g=[],b=[],v=0;const d=[],D=[];for(let l=0;l<s;l++){const _=B(l,a,u,i);d.push(_.sbMean),D.push(_.sbSdcm),v+=D[l]}let T,p=v,o=!0;for(;o||v<p;){o=!1,c=[];for(let l=0;l<s;l++)c.push(a[l]);for(let l=0;l<s;l++)for(let _=a[l]+1;_<=a[l+1];_++)if(T=u[_],l>0&&_!==a[l+1]&&Math.abs(T-d[l])>Math.abs(T-d[l-1]))a[l]=_;else if(l<s-1&&a[l]!==_-1&&Math.abs(T-d[l])>Math.abs(T-d[l+1])){a[l+1]=_-1;break}p=v,v=0,g=[],b=[];for(let l=0;l<s;l++){g.push(d[l]),b.push(D[l]);const _=B(l,a,u,i);d[l]=_.sbMean,D[l]=_.sbSdcm,v+=D[l]}}if(v>p){for(let l=0;l<s;l++)a[l]=c[l],d[l]=g[l],D[l]=b[l];v=p}return{mean:d,sdcm:D}}function B(a,u,i,s){let c=0,g=0;for(let d=u[a]+1;d<=u[a+1];d++){const D=s[d];c+=i[d]*D,g+=D}g<=0&&W().warn("Exception in Natural Breaks calculation");const b=c/g;let v=0;for(let d=u[a]+1;d<=u[a+1];d++)v+=s[d]*(i[d]-b)**2;return{sbMean:b,sbSdcm:v}}},59377:(tt,G,I)=>{I.d(G,{$y:()=>st,FM:()=>u,G_:()=>B,Rw:()=>nt,Vb:()=>j,b3:()=>N,gJ:()=>h,jM:()=>rt,lv:()=>H,oZ:()=>y,qg:()=>a,z9:()=>S,zS:()=>at});var k=I(74784),W=I(54076);const A="<Null>",R="equal-interval",q=1,Q=5,z=10,$=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,J=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),K=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),Z=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function h(t){return null==t||"string"==typeof t&&!t?A:t}function j(t){return!(null!=t.normalizationField||null!=t.normalizationType||null!=t.minValue||null!=t.maxValue||t.sqlExpression&&t.supportsSQLExpression)}function S(t){const e=t.returnDistinct?[...new Set(t.values)]:t.values,n=e.filter(m=>null!=m).sort(),f=n.length,r={count:f,min:n[0],max:n[f-1]};return t.supportsNullCount&&(r.nullcount=e.length-f),t.percentileParams&&(r.median=a(e,t.percentileParams)),r}function B(t){const{values:e,useSampleStdDev:n,supportsNullCount:f}=t;let r=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,M=null,E=null,x=null,C=null,V=0;const P=null==t.minValue?-1/0:t.minValue,F=null==t.maxValue?1/0:t.maxValue;for(const O of e)Number.isFinite(O)?O>=P&&O<=F&&(M=null===M?O:M+O,r=Math.min(r,O),m=Math.max(m,O),V++):"string"==typeof O&&V++;if(V&&null!=M){E=M/V;let O=0;for(const U of e)Number.isFinite(U)&&U>=P&&U<=F&&(O+=(U-E)**2);C=n?V>1?O/(V-1):0:V>0?O/V:0,x=Math.sqrt(C)}else r=null,m=null;const L={avg:E,count:V,max:m,min:r,stddev:x,sum:M,variance:C};return f&&(L.nullcount=e.length-V),t.percentileParams&&(L.median=a(e,t.percentileParams)),L}function a(t,e){const{fieldType:n,value:f,orderBy:r,isDiscrete:m}=e,M=u(n,"desc"===r);if(0===(t=[...t].filter(L=>null!=L).sort((L,O)=>M(L,O))).length)return null;if(f<=0)return t[0];if(f>=1)return t[t.length-1];const E=(t.length-1)*f,x=Math.floor(E),C=x+1,V=E%1,P=t[x],F=t[C];return C>=t.length||m||"string"==typeof P||"string"==typeof F?P:P*(1-V)+F*V}function u(t,e){if(t){if(J.has(t))return l(e);if(K.has(t))return T(e,!1);if("esriFieldTypeTimestampOffset"===t)return function v(t){return t?b:g}(e);const m=T(e,!0);if("esriFieldTypeString"===t)return m;if("esriFieldTypeGUID"===t||"esriFieldTypeGlobalID"===t)return(M,E)=>m(_(M),_(E))}const n=e?1:-1,f=l(e),r=T(e,!0);return(m,M)=>"number"==typeof m&&"number"==typeof M?f(m,M):"string"==typeof m&&"string"==typeof M?r(m,M):n}const i=(t,e)=>null==t?null==e?0:1:null==e?-1:null,s=(t,e)=>null==t?null==e?0:-1:null==e?1:null,g=(t,e)=>{var n;return null!==(n=s(t,e))&&void 0!==n?n:t===e?0:new Date(t).getTime()-new Date(e).getTime()},b=(t,e)=>{var n;return null!==(n=i(t,e))&&void 0!==n?n:t===e?0:new Date(e).getTime()-new Date(t).getTime()},d=(t,e)=>{var n;return null!==(n=s(t,e))&&void 0!==n?n:t===e?0:t<e?-1:1},D=(t,e)=>{var n;return null!==(n=i(t,e))&&void 0!==n?n:t===e?0:t<e?1:-1};function T(t,e){if(!e)return t?D:d;const n=function c(t){return t?i:s}(t);return t?(f,r)=>{const m=n(f,r);return null!=m?m:(f=f.toUpperCase())>(r=r.toUpperCase())?-1:f<r?1:0}:(f,r)=>{const m=n(f,r);return null!=m?m:(f=f.toUpperCase())<(r=r.toUpperCase())?-1:f>r?1:0}}const p=(t,e)=>{var n;return null!==(n=i(t,e))&&void 0!==n?n:e-t},o=(t,e)=>{var n;return null!==(n=s(t,e))&&void 0!==n?n:t-e};function l(t){return t?p:o}function _(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function y(t,e){let n;for(n in t)Z.includes(n)&&(Number.isFinite(t[n])||(t[n]=null));return e&&["avg","stddev","variance"].forEach(f=>{var r;null!=t[f]&&(t[f]=Math.ceil(null!==(r=t[f])&&void 0!==r?r:0))}),t}function N(t){const e={};for(let n of t)(null==n||"string"==typeof n&&""===n.trim())&&(n=null),null==e[n]?e[n]={count:1,data:n}:e[n].count++;return{count:e}}function w(t){return"coded-value"!==(null==t?void 0:t.type)?[]:t.codedValues.map(e=>e.code)}function H(t,e,n,f){const r=t.count,m=[];if(n&&e){const M=[],E=w(e[0]);for(const x of E)if(e[1]){const C=w(e[1]);for(const V of C)if(e[2]){const P=w(e[2]);for(const F of P)M.push(`${h(x)}${f}${h(V)}${f}${h(F)}`)}else M.push(`${h(x)}${f}${h(V)}`)}else M.push(x);for(const x of M)r.hasOwnProperty(x)||(r[x]={data:x,count:0})}for(const M in r){const E=r[M];m.push({value:E.data,count:E.count,label:E.label})}return{uniqueValueInfos:m}}function at(t,e,n,f){let r=null;switch(e){case"log":0!==t&&(r=Math.log(t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(f)&&0!==f&&(r=t/f*100);break;case"field":Number.isFinite(n)&&0!==n&&(r=t/n);break;case"natural-log":t>0&&(r=Math.log(t));break;case"square-root":t>0&&(r=t**.5)}return r}function nt(t,e){const n=function ot(t){const{breakCount:e,field:n,normalizationField:f,normalizationType:r}=t,m=t.classificationMethod||R;return new k.A({breakCount:e,classificationField:n,classificationMethod:m,normalizationField:"field"===r?f:void 0,normalizationType:r,standardDeviationInterval:"standard-deviation"===m?t.standardDeviationInterval||q:void 0})}({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||Q});return t=function it(t,e,n){const f=null!=e?e:-1/0,r=null!=n?n:1/0;return t.filter(m=>Number.isFinite(m)&&m>=f&&m<=r)}(t,e.minValue,e.maxValue),(0,W.t)({definition:n,values:t,normalizationTotal:e.normalizationTotal})}function rt(t,e){var n,f;let r=t.classBreaks;const M=null===(n=r[0])||void 0===n?void 0:n.minValue,E=null===(f=r[r.length-1])||void 0===f?void 0:f.maxValue,x="standard-deviation"===e,C=$;return r=r.map(V=>{const P=V.label,F={minValue:V.minValue,maxValue:V.maxValue,label:P};if(x&&P){var L;const O=P.match(C),U=null!==(L=null==O?void 0:O.map(X=>+X.trim()))&&void 0!==L?L:[];2===U.length?(F.minStdDev=U[0],F.maxStdDev=U[1],U[0]<0&&U[1]>0&&(F.hasAvg=!0)):1===U.length&&(P.includes("<")?(F.minStdDev=null,F.maxStdDev=U[0]):P.includes(">")&&(F.minStdDev=U[0],F.maxStdDev=null))}return F}),{minValue:M,maxValue:E,classBreakInfos:r,normalizationTotal:t.normalizationTotal}}function st(t,e){var n,f;const r=function ut(t,e){const{field:n,classificationMethod:f,standardDeviationInterval:r,normalizationType:m,normalizationField:M,normalizationTotal:E,minValue:x,maxValue:C}=e,V=e.numBins||z;let P=null,F=null,L=null;if(f&&"equal-interval"!==f||m){const{classBreaks:Y}=nt(t,{field:n,normalizationType:m,normalizationField:M,normalizationTotal:E,classificationMethod:f,standardDeviationInterval:r,minValue:x,maxValue:C,numClasses:V});P=Y[0].minValue,F=Y[Y.length-1].maxValue,L=Y.map(lt=>[lt.minValue,lt.maxValue])}else{var O,U;if(null!=x&&null!=C)P=x,F=C;else{var X,et;const Y=B({values:t,minValue:x,maxValue:C,useSampleStdDev:!m,supportsNullCount:j({normalizationType:m,normalizationField:M,minValue:x,maxValue:C})});P=null!==(X=Y.min)&&void 0!==X?X:null,F=null!==(et=Y.max)&&void 0!==et?et:null}L=function ft(t,e,n){const f=(e-t)/n,r=[];let m,M=t;for(let E=1;E<=n;E++)m=M+f,m=Number(m.toFixed(16)),r.push([M,E===n?e:m]),M=m;return r}(null!==(O=P)&&void 0!==O?O:0,null!==(U=F)&&void 0!==U?U:0,V)}return{min:P,max:F,intervals:L}}(t,e);if(null==r.min&&null==r.max)return{bins:[],minValue:r.min,maxValue:r.max,normalizationTotal:e.normalizationTotal};const m=r.intervals,M=null!==(n=r.min)&&void 0!==n?n:0,E=null!==(f=r.max)&&void 0!==f?f:0,x=m.map((C,V)=>({minValue:m[V][0],maxValue:m[V][1],count:0}));for(const C of t)if(null!=C&&C>=M&&C<=E){const V=ct(m,C);V>-1&&x[V].count++}return{bins:x,minValue:M,maxValue:E,normalizationTotal:e.normalizationTotal}}function ct(t,e){let n=-1;for(let f=t.length-1;f>=0;f--)if(e>=t[f][0]){n=f;break}return n}}}]);