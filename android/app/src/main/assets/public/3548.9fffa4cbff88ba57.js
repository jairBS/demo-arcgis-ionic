"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3548],{50501:(Y,j,i)=>{i.d(j,{K:()=>y});const y=(d=>["operational-layers","basemap","ground"])()},81687:(Y,j,i)=>{i.d(j,{ui:()=>q,Yj:()=>S,id:()=>ee,kF:()=>u,fV:()=>v,C1:()=>ie,hG:()=>ne,hn:()=>te,ke:()=>O,Ih:()=>k,M6:()=>c,Qo:()=>Q,Fm:()=>_,PY:()=>l,OZ:()=>m});var y=i(12849),d=i(50501),P=i(28067),V=i(32034),E=i(88135),G=(i(89952),i(77806),i(97442)),w=i(88485),F=i(46873);const l={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:d.K}}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(o,s)=>!s.disablePopup},write:{enabled:!0,writer(o,s,a){s[a]=!o}}}},u={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:d.K}}},m={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:E.w}}},v={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:d.K}}},S={value:null,type:w.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:d.K}}};function Q(o){return{type:o,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const N={write:{enabled:!0,layerContainerTypes:d.K},read:!0},O={type:Number,json:{origins:{"web-document":N,"portal-item":{write:!0}}}},k={...O,json:{...O.json,origins:{"web-document":{...N,write:{enabled:!0,layerContainerTypes:d.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(o,s,a)=>{var p;return a&&"service"!==a.origin||!s.drawingInfo||void 0===s.drawingInfo.transparency?null!==(p=s.layerDefinition)&&void 0!==p&&p.drawingInfo&&void 0!==s.layerDefinition.drawingInfo.transparency?(0,F.D)(s.layerDefinition.drawingInfo.transparency):void 0:(0,F.D)(s.drawingInfo.transparency)}}}},q={type:y.A,readOnly:!0,get(){var o,s,a;const p=null!=(null===(o=this.layer)||void 0===o?void 0:o.timeInfo)?this.layer:null!=(null===(s=this.i3slayer)||void 0===s?void 0:s.timeInfo)?this.i3slayer:null;if(null==p)return null;const{datesInUnknownTimezone:f,timeOffset:x,useViewTime:C}=p,U=null===(a=this.view)||void 0===a?void 0:a.timeExtent;let R=p.timeExtent;f&&(R=function K(o){if(!o)return o;const{start:s,end:a}=o;return new y.A({start:null!=s?(0,G.S1)(s,s.getTimezoneOffset(),"minutes"):s,end:null!=a?(0,G.S1)(a,a.getTimezoneOffset(),"minutes"):a})}(R));let I=C?U&&R?U.intersection(R):U||R:R;if(!I||I.isEmpty||I.isAllTime)return I;x&&(I=I.offset(-x.value,x.unit)),f&&(I=function H(o){if(!o)return o;const{start:s,end:a}=o;return new y.A({start:null!=s?(0,G.S1)(s,-s.getTimezoneOffset(),"minutes"):s,end:null!=a?(0,G.S1)(a,-a.getTimezoneOffset(),"minutes"):a})}(I));const h=this._get("timeExtent");return I.equals(h)?h:I}},_={type:P.A,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(o,s)=>{const a=P.A.fromJSON(o);return null!=s.spatialReference&&"object"==typeof s.spatialReference&&(a.spatialReference=V.A.fromJSON(s.spatialReference)),a}}}},read:!1}},ee={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},te={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:d.K}}},name:"layerDefinition.minScale",write:!0}},ne={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:d.K}}},name:"layerDefinition.maxScale",write:!0}},ie={json:{write:{ignoreOrigin:!0,layerContainerTypes:d.K},origins:{"web-map":{read:!1,write:!1}}}}},88485:(Y,j,i)=>{i.d(j,{A:()=>F});var D,y=i(8189),d=i(49976),P=i(71065),V=i(11432),E=i(85211),b=(i(3248),i(35150),i(40707),i(17221)),L=i(76576),$=i(50305),B=i(10467),z=i(86300);let T=D=class extends P.oY{constructor(l){super(l)}collectRequiredFields(l,c){var u=this;return(0,B.A)(function*(){return(0,z.Dx)(l,c,u.expression)})()}clone(){return new D({expression:this.expression,title:this.title})}equals(l){return this.expression===l.expression&&this.title===l.title}};(0,y._)([(0,E.MZ)({type:String,json:{write:!0}})],T.prototype,"expression",void 0),(0,y._)([(0,E.MZ)({type:String,json:{write:!0}})],T.prototype,"title",void 0),T=D=(0,y._)([(0,L.$)("esri.layers.support.FeatureExpressionInfo")],T);const Z=T;var M,J=i(82575);const H=(0,d.O)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),K=new d.J({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let w=M=class extends P.oY{constructor(l){super(l),this.offset=null}readFeatureExpressionInfo(l,c){return null!=l?l:c.featureExpression&&0===c.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(l,c,u,m){c[u]=l.write({},m),"0"===l.expression&&(c.featureExpression={value:0})}get mode(){const{offset:l,featureExpressionInfo:c}=this;return this._isOverridden("mode")?this._get("mode"):null!=l||c?"relative-to-ground":"on-the-ground"}set mode(l){this._override("mode",l)}set unit(l){this._set("unit",l)}write(l,c){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(l,c):null}clone(){return new M({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(l){return this.mode===l.mode&&this.offset===l.offset&&this.unit===l.unit&&(0,V.CM)(this.featureExpressionInfo,l.featureExpressionInfo)}};(0,y._)([(0,E.MZ)({type:Z,json:{write:!0}})],w.prototype,"featureExpressionInfo",void 0),(0,y._)([(0,b.w)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],w.prototype,"readFeatureExpressionInfo",null),(0,y._)([(0,$.K)("featureExpressionInfo",{featureExpressionInfo:{type:Z},"featureExpression.value":{type:[0]}})],w.prototype,"writeFeatureExpressionInfo",null),(0,y._)([(0,E.MZ)({type:H.apiValues,nonNullable:!0,json:{type:H.jsonValues,read:H.read,write:{writer:H.write,isRequired:!0}}})],w.prototype,"mode",null),(0,y._)([(0,E.MZ)({type:Number,json:{write:!0}})],w.prototype,"offset",void 0),(0,y._)([(0,E.MZ)({type:J.KQ,json:{type:String,read:K.read,write:K.write}})],w.prototype,"unit",null),w=M=(0,y._)([(0,L.$)("esri.layers.support.ElevationInfo")],w);const F=w},82575:(Y,j,i)=>{i.d(j,{Ao:()=>P,KQ:()=>E});var y=i(48716);function P(g){return 1/(y.j[g]||1)}const E=function V(){const g=Object.keys(y.j);return g.sort(),g}()},93548:(Y,j,i)=>{i.r(j),i.d(j,{default:()=>c});var y=i(10467),d=i(8189),P=i(35150),V=i(56492),E=i(48900),g=i(85211),b=(i(3248),i(40707),i(76576)),L=i(27641),$=i(72663),B=i(29459),z=i(80745),D=i(9468),T=i(68418),Z=i(41474),J=i(81687),M=i(76974);const H=u=>{let m=class extends u{initialize(){this.exportImageParameters=new M.g({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){var v,S;return null!==(v=null===(S=this.view)||void 0===S?void 0:S.floors)&&void 0!==v?v:null}get exportImageVersion(){var v;return null!==(v=this.exportImageParameters)&&void 0!==v&&v.commitProperty("version"),this.commitProperty("timeExtent"),this.commitProperty("floors"),(this._get("exportImageVersion")||0)+1}canResume(){var v;return!(!super.canResume()||null!==(v=this.timeExtent)&&void 0!==v&&v.isEmpty)}};return(0,d._)([(0,g.MZ)()],m.prototype,"exportImageParameters",void 0),(0,d._)([(0,g.MZ)({readOnly:!0})],m.prototype,"floors",null),(0,d._)([(0,g.MZ)({readOnly:!0})],m.prototype,"exportImageVersion",null),(0,d._)([(0,g.MZ)()],m.prototype,"layer",void 0),(0,d._)([(0,g.MZ)()],m.prototype,"suspended",void 0),(0,d._)([(0,g.MZ)(J.ui)],m.prototype,"timeExtent",void 0),m=(0,d._)([(0,b.$)("esri.views.layers.MapImageLayerView")],m),m};var K=i(96081),w=i(47624),F=i(23868);let l=class extends(H((0,K.A)((0,B.e)(Z.A)))){constructor(){super(...arguments),this._highlightGraphics=new L.Y,this._updateHash=""}fetchPopupFeaturesAtLocation(u,m){return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(u,m)}update(u){const m=`${this.exportImageVersion}/${u.state.id}/${u.pixelRatio}/${u.stationary}`;this._updateHash!==m&&(this._updateHash=m,this.strategy.update(u).catch(v=>{(0,V.zf)(v)||P.A.getLogger(this).error(v)}),u.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(u.state.resolution)),this._highlightView.processUpdate(u)}attach(){const{imageMaxWidth:u,imageMaxHeight:m,version:v}=this.layer,S=v>=10.3,Q=v>=10;this._bitmapContainer=new $.l,this.container.addChild(this._bitmapContainer),this._highlightView=new z.A({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new D.A(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new w.Uh({createFetchPopupFeaturesQueryGeometry:(N,O)=>(0,F.V)(N,O,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(N,O)=>{this._highlightView.graphicUpdateHandler({graphic:N,property:O})},layerView:this,updatingHandles:this._updatingHandles}),this.strategy=new T.A({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:u,imageMaxHeight:m,imageRotationSupported:S,imageNormalizationSupported:Q,hidpi:!0}),this.addAttachHandles((0,E.wB)(()=>this.exportImageVersion,()=>this.requestUpdate())),this.requestUpdate()}detach(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}supportsSpatialReference(u){return this.layer.serviceSupportsSpatialReference(u)}doRefresh(){var u=this;return(0,y.A)(function*(){u._updateHash="",u.requestUpdate()})()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(u,m,v,S){return this.layer.fetchImage(u,m,v,{timeExtent:this.timeExtent,floors:this.floors,...S})}fetchImageBitmap(u,m,v,S){return this.layer.fetchImageBitmap(u,m,v,{timeExtent:this.timeExtent,floors:this.floors,...S})}highlight(u){return this._popupHighlightHelper.highlight(u)}};(0,d._)([(0,g.MZ)()],l.prototype,"strategy",void 0),(0,d._)([(0,g.MZ)()],l.prototype,"updating",void 0),l=(0,d._)([(0,b.$)("esri.views.2d.layers.MapImageLayerView2D")],l);const c=l}}]);