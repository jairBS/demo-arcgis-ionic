"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[313,9487],{47516:(Y,E,i)=>{i.d(E,{Xl:()=>ot,ct:()=>st,C$:()=>bt,PD:()=>Et,VZ:()=>gt,mm:()=>at,VA:()=>Mt,WP:()=>lt,iX:()=>nt,GA:()=>q,jp:()=>mt,tG:()=>It,lV:()=>dt,B5:()=>yt,Ye:()=>pt,sg:()=>ct,hM:()=>ft,S2:()=>ht,jD:()=>vt,Zm:()=>_t,$4:()=>At,bt:()=>it,rn:()=>ut});var s=i(10467),A=i(77469),I=i(47280),O=i(89447),a=i(5922),j=i(49976),d=i(63484),m=i(71224),h=i(87086);function g(){return(g=(0,s.A)(function*(t,e,n){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=v(t));const r=function l(t){return v(t)*function w(t){return t.capabilities.query.maxRecordCount||2e3}(t)}(t),o=t.capabilities.query.supportsPagination;e.start=0,e.num=r;let u=null;for(;;){const c=yield t.source.queryFeaturesJSON(e,n);if(null==u?u=c:u.features=u.features.concat(c.features),u.exceededTransferLimit=c.exceededTransferLimit,!o||!c.exceededTransferLimit)break;e.start+=r}return u})).apply(this,arguments)}function v(t){return t.capabilities.query.supportsMaxRecordCountFactor?h.A.MAX_MAX_RECORD_COUNT_FACTOR:1}var b=i(58443),tt=i(73747),et=i(13318),rt=i(52466),z=i(59487);const nt=new j.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});function ot(t,e,n,r){return D.apply(this,arguments)}function D(){return(D=(0,s.A)(function*(t,e,n,r){const o=yield x(t);if(yield F(t,e,r),!o.addAttachment)throw new a.A(r,"Layer source does not support addAttachment capability");return o.addAttachment(e,n)})).apply(this,arguments)}function F(t,e,n){var r;const{attributes:o}=e,{objectIdField:u}=t;return null!==(r=t.capabilities)&&void 0!==r&&null!==(r=r.data)&&void 0!==r&&r.supportsAttachment?e?o?u&&o[u]?Promise.resolve():Promise.reject(new a.A(n,`feature is missing the identifying attribute ${u}`)):Promise.reject(new a.A(n,"'attributes' are required on a feature to query attachments")):Promise.reject(new a.A(n,"A feature is required to add/delete/update attachments")):Promise.reject(new a.A(n,"this layer doesn't support attachments"))}function it(t,e,n,r,o){return R.apply(this,arguments)}function R(){return(R=(0,s.A)(function*(t,e,n,r,o){const u=yield x(t);if(yield F(t,e,o),!u.updateAttachment)throw new a.A(o,"Layer source does not support updateAttachment capability");return u.updateAttachment(e,n,r)})).apply(this,arguments)}function st(t,e,n){return S.apply(this,arguments)}function S(){return(S=(0,s.A)(function*(t,e,n){const{applyEdits:r}=yield i.e(3828).then(i.bind(i,13828)),o=yield t.load(),{source:u,globalIdField:c}=o;let p=n;return"feature"===o.type&&o.infoFor3D&&null!=e.deleteFeatures&&null!=c&&(p={...p,globalIdToObjectId:yield q(t,e.deleteFeatures,c)}),r(o,u,e,n)})).apply(this,arguments)}function ut(t,e,n){return C.apply(this,arguments)}function C(){return(C=(0,s.A)(function*(t,e,n){const{uploadAssets:r}=yield i.e(3828).then(i.bind(i,13828)),o=yield t.load();return r(o,o.source,e,n)})).apply(this,arguments)}function at(t,e,n,r){return L.apply(this,arguments)}function L(){return(L=(0,s.A)(function*(t,e,n,r){const o=yield x(t);if(yield F(t,e,r),!o.deleteAttachments)throw new a.A(r,"Layer source does not support deleteAttachments capability");return o.deleteAttachments(e,n)})).apply(this,arguments)}function lt(t,e,n){return T.apply(this,arguments)}function T(){return(T=(0,s.A)(function*(t,e,n){const r=(yield t.load({signal:null==e?void 0:e.signal})).source;if(!r.fetchRecomputedExtents)throw new a.A(n,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(e)})).apply(this,arguments)}function dt(t,e,n,r){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.A)(function*(t,e,n,r){var o,u;e=rt.A.from(e),yield t.load();const c=t.source,p=t.capabilities;if(null==p||null===(o=p.data)||void 0===o||!o.supportsAttachment)throw new a.A(r,"this layer doesn't support attachments");const{attachmentTypes:P,objectIds:f,globalIds:y,num:_,size:X,start:Ot,where:k}=e;if((null==p||null===(u=p.operations)||void 0===u||!u.supportsQueryAttachments)&&((null==P?void 0:P.length)>0||(null==y?void 0:y.length)>0||(null==X?void 0:X.length)>0||_||Ot||k))throw new a.A(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(null!=f&&f.length||null!=y&&y.length||k))throw new a.A(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!c.queryAttachments)throw new a.A(r,"Layer source does not support queryAttachments capability",e);return c.queryAttachments(e)})).apply(this,arguments)}function ct(t,e,n,r){return U.apply(this,arguments)}function U(){return(U=(0,s.A)(function*(t,e,n,r){var o;const u=yield x(t);if(!u.queryObjectIds)throw new a.A(r,"Layer source does not support queryObjectIds capability");return u.queryObjectIds(null!==(o=h.A.from(e))&&void 0!==o?o:t.createQuery(),n)})).apply(this,arguments)}function pt(t,e,n,r){return B.apply(this,arguments)}function B(){return(B=(0,s.A)(function*(t,e,n,r){var o;const u=yield x(t);if(!u.queryFeatureCount)throw new a.A(r,"Layer source does not support queryFeatureCount capability");return u.queryFeatureCount(null!==(o=h.A.from(e))&&void 0!==o?o:t.createQuery(),n)})).apply(this,arguments)}function yt(t,e,n,r){return G.apply(this,arguments)}function G(){return(G=(0,s.A)(function*(t,e,n,r){var o;const u=yield x(t);if(!u.queryExtent)throw new a.A(r,"Layer source does not support queryExtent capability");return u.queryExtent(null!==(o=h.A.from(e))&&void 0!==o?o:t.createQuery(),n)})).apply(this,arguments)}function ft(t,e,n,r){return $.apply(this,arguments)}function $(){return($=(0,s.A)(function*(t,e,n,r){const o=yield x(t);if(!o.queryRelatedFeatures)throw new a.A(r,"Layer source does not support queryRelatedFeatures capability");return o.queryRelatedFeatures(z.default.from(e),n)})).apply(this,arguments)}function ht(t,e,n,r){return K.apply(this,arguments)}function K(){return(K=(0,s.A)(function*(t,e,n,r){const o=yield x(t);if(!o.queryRelatedFeaturesCount)throw new a.A(r,"Layer source does not support queryRelatedFeaturesCount capability");return o.queryRelatedFeaturesCount(z.default.from(e),n)})).apply(this,arguments)}function mt(t){return N.apply(this,arguments)}function N(){return(N=(0,s.A)(function*(t){const e=t.source;if(null!=e&&e.refresh)try{const{dataChanged:n,updates:r}=yield e.refresh();if(null!=r&&(t.sourceJSON={...t.sourceJSON,...r},t.read(r,{origin:"service",url:t.parsedUrl})),n)return!0}catch{}if(t.definitionExpression)try{return(yield(0,d.G)(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1})).apply(this,arguments)}function gt(t){var e,n;const r=new h.A,o=null===(e=t.capabilities)||void 0===e?void 0:e.data,u=null===(n=t.capabilities)||void 0===n?void 0:n.query;r.historicMoment=t.historicMoment,r.gdbVersion=t.gdbVersion,r.returnGeometry=!0,u&&(r.compactGeometryEnabled=u.supportsCompactGeometry,r.defaultSpatialReferenceEnabled=u.supportsDefaultSpatialReference),o&&(o.supportsZ&&null!=t.returnZ&&(r.returnZ=t.returnZ),o.supportsM&&null!=t.returnM&&(r.returnM=t.returnM)),r.outFields=["*"];const{timeOffset:c,timeExtent:p}=t;return r.timeExtent=null!=c&&null!=p?p.offset(-c.value,c.unit):p||null,r.multipatchOption="multipatch"===t.geometryType?"xyFootprint":null,r}function vt(t){const{globalIdField:e,fields:n}=t;if(e)return e;if(n)for(const r of n)if("esriFieldTypeGlobalID"===r.type)return r.name}function _t(t){const{objectIdField:e,fields:n}=t;if(e)return e;if(n)for(const r of n)if("esriFieldTypeOID"===r.type)return r.name}function At(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}function x(t){return V.apply(this,arguments)}function V(){return(V=(0,s.A)(function*(t){return(yield t.load()).source})).apply(this,arguments)}function W(){return(W=(0,s.A)(function*(t,e){if(!A.id||A.id.findCredential(t))return;let n;try{const r=yield(0,b.wI)(t,e);r&&(n=yield A.id.checkSignInStatus(`${r}/sharing`))}catch{}if(n)try{const r=null!=e?e.signal:null;yield A.id.getCredential(t,{signal:r})}catch{}})).apply(this,arguments)}function Mt(t,e,n){return Q.apply(this,arguments)}function Q(){return Q=(0,s.A)(function*(t,e,n){var r;const o=null===(r=t.parsedUrl)||void 0===r?void 0:r.path;o&&t.authenticationTriggerEvent===e&&(yield function xt(t,e){return W.apply(this,arguments)}(o,n))}),Q.apply(this,arguments)}function bt(t){var e;return!(null!==(e=t.sourceJSON)&&void 0!==e&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}const J=(0,m.C)({types:I.xK});function Et(t,e){var n;if(t.defaultSymbol)return null!==(n=t.types)&&void 0!==n&&n.length?new et.A({defaultSymbol:J(t.defaultSymbol,t,e),field:t.typeIdField,uniqueValueInfos:t.types.map(r=>({id:r.id,symbol:J(r.symbol,r,e)}))}):new tt.A({symbol:J(t.defaultSymbol,t,e)})}function It(t){var e,n;let r=null===(e=t.sourceJSON)||void 0===e?void 0:e.cacheMaxAge;if(!r)return!1;const o=null===(n=t.editingInfo)||void 0===n||null===(n=n.lastEditDate)||void 0===n?void 0:n.getTime();return null==o||(r*=1e3,Date.now()-o<r)}function q(t,e,n){return H.apply(this,arguments)}function H(){return H=(0,s.A)(function*(t,e,n){if(null==e)return null;const r=[],{objectIdField:o}=t;if(e.forEach(f=>{let y=null;if("attributes"in f){const{attributes:_}=f;y={globalId:_[n],objectId:null!=_[o]&&-1!==_[o]?_[o]:null}}else y={globalId:f.globalId,objectId:null!=f.objectId&&-1!==f.objectId?f.objectId:null};null!=y.globalId&&(null!=y.objectId&&-1!==y.objectId||r.push(y.globalId))}),0===r.length)return null;const u=t.createQuery();u.where=r.map(f=>`${n}='${f}'`).join(" OR "),u.returnGeometry=!1,u.outFields=[o,n],u.cacheHint=!1;const c=yield(0,O.DZ)(function M(t,e,n){return g.apply(this,arguments)}(t,u));if(!c.ok)return null;const p=new Map,P=c.value.features;for(const f of P){const y=f.attributes[n],_=f.attributes[o];null!=y&&null!=_&&-1!==_&&p.set(y,_)}return p}),H.apply(this,arguments)}},3404:(Y,E,i)=>{i.d(E,{p:()=>j});var s=i(3248),A=i(35150),I=i(29141),O=i(73258),a=i(86300);function j(){return{fields:{type:[I.A],value:null,set:function(d){if(d&&(0,s.A)("big-integer-warning-enabled")){const M=d.filter(g=>"big-integer"===g.type||"oid"===g.type&&(g.length||0)>=8);if(M.length){var m,h;const g=M.map(l=>`'${l.name}'`).join(", ");A.A.getLogger(this).warn("#fields",`Layer (title: '${null!==(m=this.title)&&void 0!==m?m:"no title"}', id: '${null!==(h=this.id)&&void 0!==h?h:"no id"}') references big-integer field(s): ${g}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",d)}},fieldsIndex:{readOnly:!0,get(){return O.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(d){this._userOutFields=d,this.notifyChange("outFields")},get:function(){const d=this._userOutFields;if(null==d||!d.length)return null;if(d.includes("*"))return["*"];if(!this.fields)return d;for(const h of d){var m;(null===(m=this.fieldsIndex)||void 0===m?void 0:m.has(h))||A.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${h} found in outFields`,{layer:this,outFields:d})}return(0,a.DB)(this.fieldsIndex,d)}}}}},59487:(Y,E,i)=>{i.r(E),i.d(E,{default:()=>w});var g,s=i(8189),I=(i(21152),i(71065)),O=i(77806),a=i(85211),j=i(55739),d=i(76576),m=i(50305),h=i(93164),M=i(32034);let l=g=class extends I.oY{constructor(v){super(v),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(v,b){b.historicMoment=v&&v.getTime()}writeStart(v,b){b.resultOffset=this.start,b.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(b.definitionExpression="1=1")}clone(){return new g((0,O.o8)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,s._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],l.prototype,"cacheHint",void 0),(0,s._)([(0,a.MZ)({type:h.L,json:{write:!0}})],l.prototype,"dynamicDataSource",void 0),(0,s._)([(0,a.MZ)({type:String,json:{write:!0}})],l.prototype,"gdbVersion",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],l.prototype,"geometryPrecision",void 0),(0,s._)([(0,a.MZ)({type:Date})],l.prototype,"historicMoment",void 0),(0,s._)([(0,m.K)("historicMoment")],l.prototype,"_writeHistoricMoment",null),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],l.prototype,"maxAllowableOffset",void 0),(0,s._)([(0,a.MZ)({type:[Number],json:{write:!0}})],l.prototype,"objectIds",void 0),(0,s._)([(0,a.MZ)({type:[String],json:{write:!0}})],l.prototype,"orderByFields",void 0),(0,s._)([(0,a.MZ)({type:[String],json:{write:!0}})],l.prototype,"outFields",void 0),(0,s._)([(0,a.MZ)({type:M.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],l.prototype,"outSpatialReference",void 0),(0,s._)([(0,a.MZ)({json:{write:!0}})],l.prototype,"relationshipId",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],l.prototype,"start",void 0),(0,s._)([(0,m.K)("start"),(0,m.K)("num")],l.prototype,"writeStart",null),(0,s._)([(0,a.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],l.prototype,"num",void 0),(0,s._)([(0,a.MZ)({json:{write:!0}})],l.prototype,"returnGeometry",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:v=>({enabled:v})}}})],l.prototype,"returnM",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:v=>({enabled:v})}}})],l.prototype,"returnZ",void 0),(0,s._)([(0,a.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],l.prototype,"where",void 0),l=g=(0,s._)([(0,d.$)("esri.rest.support.RelationshipQuery")],l),l.from=(0,j.dp)(l);const w=l}}]);