"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5940],{35940:(J,C,i)=>{i.r(C),i.d(C,{default:()=>lt});var l=i(10467),s=i(8189),Z=i(92165),D=(i(79122),i(70176),i(92089),i(9826),i(15317),i(38582),i(73747),i(13318),i(85718)),j=i(36156),W=i(89563),I=i(47280),T=i(90660),A=i(31178),S=i(5922),O=i(77806),L=i(35150),B=i(39693),c=i(89221),K=i(56492),x=i(63484),Q=i(45272),p=i(85211),Me=i(48669),P=i(17221),X=i(76576),te=i(50305),ae=i(50501),Se=i(59598),Te=i(32034),Ie=i(95478),de=(i(21152),i(81098)),Oe=i(3248),De=i(55098),Ae=i(64261),Re=i(19284),be=i(55739),je=(i(40707),i(69039)),Pe=i(28872),ue=i(98789),pe=i(93327),Fe=i(28067),Le=i(55861),ye=i(6434);let _e=0,$=class extends(De.A.LoadableMixin((0,Ae.g)(A.A))){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){return this.addResolvingPromise(this._startWorker(null!=t?t.signal:null)),Promise.resolve(this)}destroy(){var t;null!==(t=this._connection)&&void 0!==t&&t.close(),this._connection=null}get _workerGeometryType(){var t;const e=null===(t=this.layer)||void 0===t?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(t,e={}){var r=this;return(0,l.A)(function*(){yield r.load(e);const o=yield r._connection.invoke("queryFeatures",t?t.toJSON():null,e);(0,ue.q)(t,r.layer.spatialReference,o);const n=pe.A.fromJSON(o);if(!r._requiresClientGraphicMapping())return n;const d=r.layer.objectIdField;for(const y of n.features){const g=r._idToClientGraphic.get(y.attributes[d]);g&&(y.geometry=g.geometry)}return n.geometryType=r.layer.geometryType,n})()}queryFeaturesJSON(t,e={}){var r=this;return(0,l.A)(function*(){if(r._requiresClientGraphicMapping())throw new S.A("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield r.load(e);const o=yield r._connection.invoke("queryFeatures",t?t.toJSON():null,e);return(0,ue.q)(t,r.layer.spatialReference,o),o})()}queryFeatureCount(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,e))}queryObjectIds(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,e))}queryExtent(t,e={}){return this.load(e).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,e)).then(r=>({count:r.count,extent:Fe.A.fromJSON(r.extent)}))}querySnapping(t,e={}){return this.load(e).then(()=>this._connection.invoke("querySnapping",t,e))}_applyEdits(t){var e=this;return(0,l.A)(function*(){if(!e._connection)throw new S.A("feature-layer-source:edit-failure","Memory source not loaded");const r=e.layer.objectIdField;let o=null;const n=[],d=[];yield Promise.all([e._prepareClientMapping(t.addFeatures,null),e._prepareClientMapping(t.updateFeatures,null)]);const y=_=>"objectId"in _&&null!=_.objectId?_.objectId:"attributes"in _&&null!=_.attributes[r]?_.attributes[r]:null;if(t.addFeatures&&(o=e._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const _ of t.deleteFeatures){const G=y(_);null!=G&&n.push(G)}const m=t.updateFeatures&&e._idToClientGraphic?new Map:null;if(t.updateFeatures)for(const _ of t.updateFeatures)if(d.push(e._serializeFeature(_)),m){const G=y(_);null!=G&&m.set(G,_)}(0,Pe.u)(o?o.features:null,d,e.layer.spatialReference);const{fullExtent:g,featureEditResults:M}=yield e._connection.invoke("applyEdits",{adds:o?o.features:[],updates:d,deletes:n});return e.fullExtent=g,o&&o.finish(M.uidToObjectId),e._updateClientGraphicIds(m,M),e._createEditsResult(M)})()}_prepareClientMapping(t,e){var r=this;return(0,l.A)(function*(){if("mesh"!==r._layerOrSourceGeometryType||null==t)return;const o=[];for(const{geometry:n}of t)null==n||"mesh"!==n.type||n.hasExtent||n.loaded||o.push(n.load({signal:e}));o.length&&(yield Promise.all(o))})()}_updateClientGraphicIds(t,e){if(this._idToClientGraphic){if(t)for(const r of e.updateResults){if(!r.success)continue;const o=t.get(r.objectId);null!=o&&this._addIdToClientGraphic(o)}for(const r of e.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const e=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:e?new S.A("feature-layer-source:edit-failure",e.description,{code:e.code}):null}}_prepareAddFeatures(t){const e=new Map,r=new Array(t.length);let o=null;for(let d=0;d<t.length;d++){const y=t[d],m=this._serializeFeature(y);o||null==y.geometry||(o=y.geometry.type),r[d]=m,e.set(`${m.uid}`,y)}const n=this;return{features:r,inferredGeometryType:o,finish(d){const y=n.sourceJSON.objectIdField;for(const m in d){const g=d[m],M=e.get(m);M&&(M.attributes||(M.attributes={}),-1===g?delete M.attributes[y]:M.attributes[y]=g,n._addIdToClientGraphic(M))}}}}_addIdToClientGraphic(t){var e;if(!this._idToClientGraphic)return;const o=null===(e=t.attributes)||void 0===e?void 0:e[this.sourceJSON.objectIdField];null!=o&&this._idToClientGraphic.set(o,t)}get _layerOrSourceGeometryType(){var t,e,r;return null!==(t=null===(e=this.layer)||void 0===e?void 0:e.geometryType)&&void 0!==t?t:null===(r=this.sourceJSON)||void 0===r?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return"mesh"===t||"multipatch"===t||"extent"===t}_serializeFeature(t){const{attributes:e}=t,r=this._geometryForSerialization(t),o=(_e++).toString();return r?{uid:o,geometry:r.toJSON(),attributes:e}:{uid:o,attributes:e}}_geometryForSerialization(t){const{geometry:e}=t;return null==e?null:this._geometryRequiresClientGraphicMapping(e)?e.extent?Le.A.fromExtent(e.extent):null:e}_startWorker(t){var e=this;return(0,l.A)(function*(){var r,o;e._connection=yield(0,Re.ho)("MemorySourceWorker",{strategy:(0,Oe.A)("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:e});const{fields:n,spatialReference:d,objectIdField:y,hasM:m,hasZ:g,timeInfo:M,dateFieldsTimeZone:_}=e.layer,G="defaults"===e.layer.originOf("spatialReference");yield e._prepareClientMapping(e.items,t);const N=e._prepareAddFeatures(e.items);e.addHandles(e.on("before-changes",z=>{L.A.getLogger(e).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),z.preventDefault()}));const ge={features:N.features,fields:null==n?void 0:n.map(z=>z.toJSON()),geometryType:ye.Y.toJSON(e._workerGeometryType),hasM:"mesh"!==e._layerOrSourceGeometryType&&m,hasZ:"mesh"===e._layerOrSourceGeometryType||g,objectIdField:y,spatialReference:G?null:d&&d.toJSON(),timeInfo:null!==(r=null==M?void 0:M.toJSON())&&void 0!==r?r:null,dateFieldsTimeZone:_},H=yield e._connection.invoke("load",ge,{signal:t});for(const z of H.warnings){var le;L.A.getLogger(e.layer).warn("#load()",`${z.message} (title: '${e.layer.title||"no title"}', id: '${null!==(le=e.layer.id)&&void 0!==le?le:"no id"}')`,{warning:z})}H.featureErrors.length&&L.A.getLogger(e.layer).warn("#load()",`Encountered ${H.featureErrors.length} validation errors while loading features. (title: '${e.layer.title||"no title"}', id: '${null!==(o=e.layer.id)&&void 0!==o?o:"no id"}')`,{errors:H.featureErrors});const Ee=H.layerDefinition;e._geometryTypeRequiresClientGraphicMapping(N.inferredGeometryType)&&(Ee.geometryType=ye.Y.toJSON(N.inferredGeometryType)),e.sourceJSON=Ee,e._requiresClientGraphicMapping()&&(e._idToClientGraphic=new Map),N.finish(H.assignedObjectIds)})()}};(0,s._)([(0,je.u)({Type:de.A,ensureType:(0,be.dp)(de.A)})],$.prototype,"itemType",void 0),(0,s._)([(0,p.MZ)()],$.prototype,"type",void 0),(0,s._)([(0,p.MZ)({constructOnly:!0})],$.prototype,"layer",void 0),(0,s._)([(0,p.MZ)({readOnly:!0})],$.prototype,"_workerGeometryType",null),(0,s._)([(0,p.MZ)()],$.prototype,"sourceJSON",void 0),$=(0,s._)([(0,X.$)("esri.layers.graphics.sources.MemorySource")],$);var Ce=i(94376),we=i(25936),Ze=i(93410),xe=i(23e3),Ue=i(58277),Be=i(31446),We=i(73783),Ke=i(61495),Ge=i(17049),Ne=i(43124),$e=i(85551),Je=i(98877);let Y=class extends Je.A{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};(0,s._)([(0,p.MZ)()],Y.prototype,"updating",void 0),(0,s._)([(0,p.MZ)()],Y.prototype,"status",void 0),Y=(0,s._)([(0,X.$)("esri.layers.support.PublishingInfo")],Y);const Ve=Y,ce="esri.layers.mixins.PublishableLayer",he=Symbol(ce),Qe=t=>{var e;let r=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const o=this._get("publishingInfo");if(o)return o;const n=new Ve;return this._checkPublishingStatus(n),n}_checkPublishingStatus(o){var n=this;let m=0;const g=function(){var _=(0,l.A)(function*(G){let N;o.updating=!0;try{N=yield n.fetchPublishingStatus()}catch{N="unavailable"}"published"!==N&&"unavailable"!==N||("publishing"===o.status&&n.refresh(),M.remove()),o.status=N,o.updating=!1,M.removed||(m=setTimeout(g,G,G+125))});return function(N){return _.apply(this,arguments)}}(),M={removed:!1,remove(){this.removed=!0,clearTimeout(m)}};this.when().catch(()=>M.remove()),g(250),this.addHandles(M)}};return e=he,(0,s._)([(0,p.MZ)({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=(0,s._)([(0,X.$)(ce)],r),r};var He=i(1151),ze=i(33036),Ye=i(84311),re=i(68438),V=i(81687),R=i(47516),ve=i(69741),fe=i(47063),Xe=i(3404),ie=i(86300),qe=i(20329),oe=i(73975),ke=i(90543),et=i(38488),tt=i(5540),rt=i(93164),it=i(8691),ot=i(87086),q=i(61569),st=i(41843),k=i(71655),nt=i(46873);const U="FeatureLayer";function ee(t,e){return new S.A("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function me(t){return t&&t instanceof A.A}const se=(0,Xe.p)();function ne(t,e,r){const o=!(null==r||!r.writeLayerSchema);return{enabled:o,ignoreOrigin:o}}let u=class extends((0,We.j)((0,Ke.J)((0,Be.F)(Qe((0,Ue.w6)((0,Ze.d)((0,Ne.f)((0,Ye.e)((0,ze.j)((0,He.J)((0,we.b)((0,Ge.q)((0,$e.A)((0,B.P)((0,xe.d)((0,Ce.p)((0,T.O)(Ie.A)))))))))))))))))){constructor(...t){var e;super(...t),e=this,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Te.A.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=(0,K.sg)(function(){var r=(0,l.A)(function*(o,n,d){const{save:y,saveAs:m}=yield Promise.all([i.e(2076),i.e(7881)]).then(i.bind(i,90639));switch(o){case k.X.SAVE:return y(e,n);case k.X.SAVE_AS:return m(e,d,n)}});return function(o,n,d){return r.apply(this,arguments)}}())}destroy(){var t;null===(t=this.source)||void 0===t||t.destroy()}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}load(t){var e,r=this;const o=null!=t?t.signal:null;if(null!==(e=this.portalItem)&&void 0!==e&&e.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(o).then(d=>this.initLayerProperties(d))),Promise.resolve(this);const n=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},t).catch(K.QP).then((0,l.A)(function*(){if(r.url&&null==r.layerId&&/FeatureServer|MapServer\/*$/i.test(r.url)){const d=yield r._fetchFirstValidLayerId(o);null!=d&&(r.layerId=d)}if(!r.url&&!r._hasMemorySource())throw new S.A("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return r.initLayerProperties(yield r.createGraphicsSource(o))})).then(()=>(0,R.VA)(this,"load",t));return this.addResolvingPromise(n),Promise.resolve(this)}readCapabilities(t,e){return(0,ke.S)(e=e.layerDefinition||e,this.url)}get createQueryVersion(){var t;return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(t=this._get("createQueryVersion"))&&void 0!==t?t:0)+1}get editingEnabled(){var t;return!(this.loaded&&(null===(t=this.capabilities)||void 0===t||!t.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(t){this._overrideIfSome("editingEnabled",t)}readEditingEnabled(t,e){return this._readEditingEnabled(e,!1)}readEditingEnabledFromWebMap(t,e,r){return this._readEditingEnabled(e,!0,r)}writeEditingEnabled(t,e){this._writeEditingEnabled(t,e,!1)}writeEditingEnabledToWebMap(t,e,r,o){this._writeEditingEnabled(t,e,!0,o)}get effectiveEditingEnabled(){return(0,R.C$)(this)}readIsTable(t,e){var r,o;return"Table"===(e=null!==(r=null===(o=e)||void 0===o?void 0:o.layerDefinition)&&void 0!==r?r:e).type||!e.geometryType}writeIsTable(t,e,r,o){null!=o&&o.writeLayerSchema&&(0,c.sM)(r,t?"Table":"Feature Layer",e)}readGlobalIdField(t,e){return(0,R.jD)(e.layerDefinition||e)}readObjectIdField(t,e){return(0,R.Zm)(e.layerDefinition||e)}get parsedUrl(){const t=(0,Q.An)(this.url);return null!=t&&(null!=this.dynamicDataSource?t.path=(0,Q.fj)(t.path,"dynamicLayer"):null!=this.layerId&&(t.path=(0,Q.fj)(t.path,this.layerId.toString()))),t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(t){(0,ie.yp)(t,this.fieldsIndex),this._set("renderer",t)}readRenderer(t,e,r){var o;const n=null===(o=(e=e.layerDefinition||e).drawingInfo)||void 0===o?void 0:o.renderer;if(n){var d;const y=null!==(d=(0,D.L)(n,e,r))&&void 0!==d?d:void 0;return y||L.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:e.drawingInfo.renderer,layer:this,context:r}),y}return(0,R.PD)(e,r)}set source(t){const e=this._get("source");e!==t&&(me(e)&&this._resetMemorySource(e),me(t)&&this._initMemorySource(t),this._set("source",t))}castSource(t){return t?Array.isArray(t)||t instanceof A.A?new $({layer:this,items:t}):t:null}readSource(t,e){var r;const o=pe.A.fromJSON(e.featureSet);return new $({layer:this,items:null!==(r=null==o?void 0:o.features)&&void 0!==r?r:[]})}readTemplates(t,e){var r;const o=e.editFieldsInfo,n=null==o?void 0:o.creatorField,d=null==o?void 0:o.editorField;return t=null===(r=t)||void 0===r?void 0:r.map(y=>ve.A.fromJSON(y)),this._fixTemplates(t,n),this._fixTemplates(t,d),t}readTitle(t,e){var r,o,n;const d=null!==(r=null===(o=e.layerDefinition)||void 0===o?void 0:o.name)&&void 0!==r?r:e.name,y=e.title||(null===(n=e.layerDefinition)||void 0===n?void 0:n.title);if(d){var m;const g=null===(m=this.portalItem)||void 0===m?void 0:m.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,re.yG)(this.url,d):d;let M=d;if(!M&&this.url){const _=(0,re.qg)(this.url);null!=_&&(M=_.title)}return M?("item-title-and-service-name"===this.sublayerTitleMode&&g&&g!==M&&(M=g+" - "+M),(0,re.cr)(M)):void 0}if("item-title"===this.sublayerTitleMode&&y)return y}readTitleFromWebMap(t,e){var r;return e.title||(null===(r=e.layerDefinition)||void 0===r?void 0:r.name)}readTypeIdField(t,e){let r=(e=e.layerDefinition||e).typeIdField;if(r&&e.fields){r=r.toLowerCase();const o=e.fields.find(n=>n.name.toLowerCase()===r);o&&(r=o.name)}return r}readTypes(t,e){var r;t=(e=e.layerDefinition||e).types;const o=e.editFieldsInfo,n=null==o?void 0:o.creatorField,d=null==o?void 0:o.editorField;return null===(r=t)||void 0===r?void 0:r.map(y=>(y=fe.A.fromJSON(y),this._fixTemplates(y.templates,n),this._fixTemplates(y.templates,d),y))}readVisible(t,e){var r;return null!=(null===(r=e.layerDefinition)||void 0===r?void 0:r.defaultVisibility)?!!e.layerDefinition.defaultVisibility:null!=e.visibility?!!e.visibility:void 0}addAttachment(t,e){var r=this;return(0,l.A)(function*(){return(0,R.Xl)(r,t,e,U)})()}updateAttachment(t,e,r){var o=this;return(0,l.A)(function*(){return(0,R.bt)(o,t,e,r,U)})()}applyEdits(t,e){var r=this;return(0,l.A)(function*(){return(0,R.ct)(r,t,e)})()}uploadAssets(t,e){var r=this;return(0,l.A)(function*(){return(0,R.rn)(r,t,e)})()}on(t,e){return super.on(t,e)}createPopupTemplate(t){return(0,st.tn)(this,t)}createGraphicsSource(t){var e=this;return(0,l.A)(function*(){if(e._hasMemorySource()&&e.source)return e.source.load({signal:t});const{default:r}=yield(0,K.qr)(Promise.all([i.e(1732),i.e(8304),i.e(5931),i.e(8570)]).then(i.bind(i,28570)),t);return new r({layer:e}).load({signal:t})})()}createQuery(){const t=(0,R.VZ)(this);t.dynamicDataSource=this.dynamicDataSource;const r=(0,x.m)(this.definitionExpression,null!=this.subtypeCode?`${this.subtypeField} = ${this.subtypeCode}`:null);return t.where=r||"1=1",t}deleteAttachments(t,e){var r=this;return(0,l.A)(function*(){return(0,R.mm)(r,t,e,U)})()}fetchRecomputedExtents(t){var e=this;return(0,l.A)(function*(){return(0,R.WP)(e,t,U)})()}getFeatureType(t){const{typeIdField:e,types:r}=this;if(!e||!t)return null;const o=t.attributes?t.attributes[e]:void 0;if(null==o)return null;let n=null;return null!=r&&r.some(d=>{const{id:y}=d;return null!=y&&(y.toString()===o.toString()&&(n=d),!!n)}),n}getFieldDomain(t,e){const o=this.getFeatureType(null==e?void 0:e.feature);if(o){const n=o.domains&&o.domains[t];if(n&&"inherited"!==n.type)return n}return this._getLayerDomain(t)}getField(t){return this.fieldsIndex.get(t)}queryAttachments(t,e){var r=this;return(0,l.A)(function*(){return(0,R.lV)(r,t,e,U)})()}queryFeatures(t,e){var r=this;return(0,l.A)(function*(){var o;const n=yield r.load(),d=yield n.source.queryFeatures(null!==(o=ot.A.from(t))&&void 0!==o?o:n.createQuery(),e);if(null!=d&&d.features)for(const y of d.features)y.layer=y.sourceLayer=n;return d})()}queryObjectIds(t,e){var r=this;return(0,l.A)(function*(){return(0,R.sg)(r,t,e,U)})()}queryFeatureCount(t,e){var r=this;return(0,l.A)(function*(){return(0,R.Ye)(r,t,e,U)})()}queryExtent(t,e){var r=this;return(0,l.A)(function*(){return(0,R.B5)(r,t,e,U)})()}queryRelatedFeatures(t,e){var r=this;return(0,l.A)(function*(){return(0,R.hM)(r,t,e,U)})()}queryRelatedFeaturesCount(t,e){var r=this;return(0,l.A)(function*(){return(0,R.S2)(r,t,e,U)})()}queryTopFeatures(t,e){var r=this;return(0,l.A)(function*(){var o;const{source:n,capabilities:d}=yield r.load();if(!n.queryTopFeatures||null==d||null===(o=d.query)||void 0===o||!o.supportsTopFeaturesQuery)throw new S.A(U,"Layer source does not support queryTopFeatures capability");const y=yield n.queryTopFeatures(q.A.from(t),e);if(null!=y&&y.features)for(const m of y.features)m.layer=m.sourceLayer=r;return y})()}queryTopObjectIds(t,e){var r=this;return(0,l.A)(function*(){const{source:o,capabilities:n}=yield r.load();if(!o.queryTopObjectIds||null==n||!n.query.supportsTopFeaturesQuery)throw new S.A(U,"Layer source does not support queryTopObjectIds capability");return o.queryTopObjectIds(q.A.from(t),e)})()}queryTopFeaturesExtent(t,e){var r=this;return(0,l.A)(function*(){var o;const{source:n,capabilities:d}=yield r.load();if(!n.queryTopExtents||null==d||null===(o=d.query)||void 0===o||!o.supportsTopFeaturesQuery)throw new S.A(U,"Layer source does not support queryTopExtents capability");return n.queryTopExtents(q.A.from(t),e)})()}queryTopFeatureCount(t,e){var r=this;return(0,l.A)(function*(){var o;const{source:n,capabilities:d}=yield r.load();if(!n.queryTopCount||null==d||null===(o=d.query)||void 0===o||!o.supportsTopFeaturesQuery)throw new S.A(U,"Layer source does not support queryFeatureCount capability");return n.queryTopCount(q.A.from(t),e)})()}read(t,e){const r=t.featureCollection;if((r||"Feature Collection"===t.type)&&(this.resourceInfo=t),r){const o=r.layers;o&&1===o.length&&(super.read(o[0],e),null!=r.showLegend&&super.read({showLegend:r.showLegend},e))}super.read(t,e),e&&"service"===e.origin&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(t,e){var r,o,n,d;e={...e,origin:null!==(r=null===(o=e)||void 0===o?void 0:o.origin)&&void 0!==r?r:void 0,writeLayerSchema:null!==(n=null===(d=e)||void 0===d?void 0:d.writeLayerSchema)&&void 0!==n?n:this._hasMemorySource()};const{origin:y,layerContainerType:m,messages:g}=e;if(this.dynamicDataSource)return null!=g&&g.push(ee(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(("web-map"===y||"web-scene"===y)&&"tables"!==m)return null!=g&&g.push(ee(this,`a table source can only be written to tables, not ${m}`)),null;if(this._hasMemorySource())return null!=g&&g.push(ee(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&("web-map"===y||"web-scene"===y)&&"tables"===m)return null!=g&&g.push(ee(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(t,e)}clone(){if(this._hasMemorySource())throw new S.A(U,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(t){var e;return!!this.loaded&&("memory"===(null===(e=this.source)||void 0===e?void 0:e.type)||(0,tt.D)(this,t))}save(t){var e=this;return(0,l.A)(function*(){return e._debouncedSaveOperations(k.X.SAVE,t)})()}saveAs(t,e){var r=this;return(0,l.A)(function*(){return r._debouncedSaveOperations(k.X.SAVE_AS,e,t)})()}_readEditingEnabled(t,e,r){var o;let n=null===(o=t.layerDefinition)||void 0===o?void 0:o.capabilities;return n?this._hasEditingCapability(n):(n=t.capabilities,e&&"web-map"===(null==r?void 0:r.origin)&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(t){return t.toLowerCase().split(",").map(e=>e.trim()).includes("editing")}_writeEditingEnabled(t,e,r,o){if(!t){var n;const d=null!==(n=this.capabilities)&&void 0!==n&&null!==(n=n.operations)&&void 0!==n&&n.supportsSync?"Query,Sync":"Query";(0,c.sM)("layerDefinition.capabilities",d,e),r&&(null==o||!o.writeLayerSchema)&&(e.capabilities=d)}}_getLayerDomain(t){const e=this.fieldsIndex.get(t);return e?e.domain:null}_fetchFirstValidLayerId(t){return(0,W.A)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(e=>{const r=e.data;if(r)return this.findFirstValidLayerId(r)})}initLayerProperties(t){var e=this;return(0,l.A)(function*(){var r;return e._set("source",t),t.sourceJSON&&(e.sourceJSON=t.sourceJSON,e.read(t.sourceJSON,{origin:"service",portalItem:e.portalItem,portal:null===(r=e.portalItem)||void 0===r?void 0:r.portal,url:e.parsedUrl})),e._verifySource(),e._verifyFields(),(0,ie.yp)(e.renderer,e.fieldsIndex),(0,ie.sv)(e.timeInfo,e.fieldsIndex),(0,it.L)(e,{origin:"service"})})()}hasDataChanged(){var t=this;return(0,l.A)(function*(){return(0,R.jp)(t)})()}fetchPublishingStatus(){var t=this;return(0,l.A)(function*(){const e=t.source;return null!=e&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"})()}_verifyFields(){var t,e,r;const o=null!==(t=null===(e=this.parsedUrl)||void 0===e?void 0:e.path)&&void 0!==t?t:"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+o+")"),this.isTable||this._hasMemorySource()||-1!==o.search(/\/FeatureServer\//i)||null!==(r=this.fields)&&void 0!==r&&r.some(n=>"geometry"===n.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+o+")")}_fixTemplates(t,e){t&&t.forEach(r=>{var o;const n=null===(o=r.prototype)||void 0===o?void 0:o.attributes;n&&e&&delete n[e]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new S.A("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new S.A("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(t){t.forEach(e=>{e.layer=this,e.sourceLayer=this}),this.addHandles([t.on("after-add",e=>{e.item.layer=this,e.item.sourceLayer=this}),t.on("after-remove",e=>{e.item.layer=null,e.item.sourceLayer=null})],"fl-source")}_resetMemorySource(t){t.forEach(e=>{e.layer=null,e.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(t){return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}};(0,s._)([(0,P.w)("service","capabilities")],u.prototype,"readCapabilities",null),(0,s._)([(0,p.MZ)({json:{origins:{"web-scene":{write:!1}},write:!0}})],u.prototype,"charts",void 0),(0,s._)([(0,p.MZ)({readOnly:!0})],u.prototype,"createQueryVersion",null),(0,s._)([(0,p.MZ)({json:{read:{source:"layerDefinition.copyrightText"}}})],u.prototype,"copyright",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"layerDefinition.displayField"}}})],u.prototype,"displayField",void 0),(0,s._)([(0,p.MZ)({types:I.Es,readOnly:!0})],u.prototype,"defaultSymbol",void 0),(0,s._)([(0,p.MZ)({type:rt.L})],u.prototype,"dynamicDataSource",void 0),(0,s._)([(0,p.MZ)({type:Boolean})],u.prototype,"editingEnabled",null),(0,s._)([(0,P.w)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],u.prototype,"readEditingEnabled",null),(0,s._)([(0,P.w)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],u.prototype,"readEditingEnabledFromWebMap",null),(0,s._)([(0,te.K)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],u.prototype,"writeEditingEnabled",null),(0,s._)([(0,te.K)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],u.prototype,"writeEditingEnabledToWebMap",null),(0,s._)([(0,p.MZ)({readOnly:!0})],u.prototype,"effectiveEditingEnabled",null),(0,s._)([(0,p.MZ)({...se.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:ne}}}}})],u.prototype,"fields",void 0),(0,s._)([(0,p.MZ)(se.fieldsIndex)],u.prototype,"fieldsIndex",void 0),(0,s._)([(0,p.MZ)({type:Se.A,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],u.prototype,"formTemplate",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"layerDefinition.extent"}}})],u.prototype,"fullExtent",void 0),(0,s._)([(0,p.MZ)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:ne,writer(t,e,r){const o=t?R.iX.toJSON(t):null;o&&(0,c.sM)(r,o,e)}}}},read:{source:"layerDefinition.geometryType",reader:R.iX.read}}})],u.prototype,"geometryType",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"layerDefinition.hasM"}}})],u.prototype,"hasM",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"layerDefinition.hasZ"}}})],u.prototype,"hasZ",void 0),(0,s._)([(0,p.MZ)(V.id)],u.prototype,"id",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],u.prototype,"infoFor3D",void 0),(0,s._)([(0,p.MZ)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],u.prototype,"isTable",void 0),(0,s._)([(0,P.w)("service","isTable",["type","geometryType"]),(0,P.w)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],u.prototype,"readIsTable",null),(0,s._)([(0,te.K)("web-map","isTable")],u.prototype,"writeIsTable",null),(0,s._)([(0,p.MZ)(V.kF)],u.prototype,"labelsVisible",void 0),(0,s._)([(0,p.MZ)({type:[qe.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:oe.w,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:oe.w,write:{enabled:!0,layerContainerTypes:ae.K}}},name:"layerDefinition.drawingInfo.labelingInfo",read:oe.w,write:!0}})],u.prototype,"labelingInfo",void 0),(0,s._)([(0,p.MZ)((()=>{const t=(0,O.o8)(V.Ih);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,r,o){(0,c.sM)(o,(0,nt.p)(e),r)}}},t})())],u.prototype,"opacity",void 0),(0,s._)([(0,p.MZ)(V.fV)],u.prototype,"legendEnabled",void 0),(0,s._)([(0,p.MZ)({type:["show","hide"],json:(()=>{const t=(0,O.o8)(V.C1.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],u.prototype,"listMode",void 0),(0,s._)([(0,P.w)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],u.prototype,"readGlobalIdField",null),(0,s._)([(0,p.MZ)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:ne}}}}})],u.prototype,"objectIdField",void 0),(0,s._)([(0,P.w)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],u.prototype,"readObjectIdField",null),(0,s._)([(0,p.MZ)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],u.prototype,"operationalLayerType",void 0),(0,s._)([(0,p.MZ)(se.outFields)],u.prototype,"outFields",void 0),(0,s._)([(0,p.MZ)({readOnly:!0})],u.prototype,"parsedUrl",null),(0,s._)([(0,p.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],u.prototype,"path",void 0),(0,s._)([(0,p.MZ)(V.M6)],u.prototype,"popupEnabled",void 0),(0,s._)([(0,p.MZ)({type:Z.A,json:{name:"popupInfo",write:!0}})],u.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)({readOnly:!0})],u.prototype,"defaultPopupTemplate",null),(0,s._)([(0,p.MZ)({types:j.H,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:j.X,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:ae.K,overridePolicy:(t,e,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,r)=>({ignoreOrigin:null==r?void 0:r.writeLayerSchema})}}})],u.prototype,"renderer",null),(0,s._)([(0,P.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,P.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],u.prototype,"readRenderer",null),(0,s._)([(0,p.MZ)()],u.prototype,"resourceInfo",void 0),(0,s._)([(0,p.MZ)((()=>{const t=(0,O.o8)(V.PY);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],u.prototype,"screenSizePerspectiveEnabled",void 0),(0,s._)([(0,p.MZ)({clonable:!1})],u.prototype,"source",null),(0,s._)([(0,Me.w)("source")],u.prototype,"castSource",null),(0,s._)([(0,P.w)("portal-item","source",["featureSet"]),(0,P.w)("web-map","source",["featureSet"])],u.prototype,"readSource",null),(0,s._)([(0,p.MZ)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],u.prototype,"spatialReference",void 0),(0,s._)([(0,p.MZ)({type:Number})],u.prototype,"subtypeCode",void 0),(0,s._)([(0,p.MZ)({type:[ve.A]})],u.prototype,"templates",void 0),(0,s._)([(0,P.w)("templates",["editFieldsInfo","creatorField","editorField","templates"])],u.prototype,"readTemplates",null),(0,s._)([(0,p.MZ)({type:et.A})],u.prototype,"timeInfo",void 0),(0,s._)([(0,p.MZ)()],u.prototype,"title",void 0),(0,s._)([(0,P.w)("service","title",["name"]),(0,P.w)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],u.prototype,"readTitle",null),(0,s._)([(0,P.w)("web-map","title",["layerDefinition.name","title"])],u.prototype,"readTitleFromWebMap",null),(0,s._)([(0,p.MZ)({type:String})],u.prototype,"sublayerTitleMode",void 0),(0,s._)([(0,p.MZ)({json:{read:!1}})],u.prototype,"type",void 0),(0,s._)([(0,p.MZ)({type:String})],u.prototype,"typeIdField",void 0),(0,s._)([(0,P.w)("service","typeIdField"),(0,P.w)("typeIdField",["layerDefinition.typeIdField"])],u.prototype,"readTypeIdField",null),(0,s._)([(0,p.MZ)({type:[fe.A]})],u.prototype,"types",void 0),(0,s._)([(0,P.w)("service","types",["types"]),(0,P.w)("types",["layerDefinition.types"])],u.prototype,"readTypes",null),(0,s._)([(0,p.MZ)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],u.prototype,"visible",void 0),(0,s._)([(0,P.w)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],u.prototype,"readVisible",null),u=(0,s._)([(0,X.$)("esri.layers.FeatureLayer")],u);const lt=u},31446:(J,C,i)=>{i.d(C,{F:()=>E});var l=i(8189),s=i(85211),b=(i(3248),i(35150),i(40707),i(76576)),a=i(66722);const v={write:{allowNull:!0}},E=h=>{let f=class extends h{constructor(){super(...arguments),this.featureEffect=null}};return(0,l._)([(0,s.MZ)({type:a.A,json:{origins:{"web-map":v,"portal-item":v}}})],f.prototype,"featureEffect",void 0),f=(0,l._)([(0,b.$)("esri.layers.mixins.FeatureEffectLayer")],f),f}},43124:(J,C,i)=>{i.d(C,{f:()=>f});var l=i(8189),s=i(89221),Z=i(85211),a=(i(3248),i(35150),i(40707),i(76576)),v=i(15848);function E(D,j,W){if(!D)return null;const I=D.find(A=>!!A.field);if(!I)return null;const T=new v.A;return T.read(I,W),[T]}function h(D,j,W,I){const T=D.find(A=>!!A.field);T&&(0,s.sM)(W,[T.toJSON()],j)}const f=D=>{let j=class extends D{constructor(){super(...arguments),this.orderBy=null}};return(0,l._)([(0,Z.MZ)({type:[v.A],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:E},write:{target:"layerDefinition.orderBy",writer:h}}})],j.prototype,"orderBy",void 0),j=(0,l._)([(0,a.$)("esri.layers.mixins.OrderedLayer")],j),j}},66722:(J,C,i)=>{i.d(C,{A:()=>A});var D,l=i(8189),s=i(5922),Z=i(71065),F=i(89221),w=i(85211),E=(i(3248),i(35150),i(40707),i(76576)),h=i(72211),f=i(95877);const j={read:{reader:h.LF},write:{writer:h.M9,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},W={read:{reader:h.LF},write:{writer:h.M9,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},I={name:"showExcludedLabels",default:!0};let T=D=class extends Z.oY{constructor(S){super(S),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(S,O){const L=super.write(S,O);if(null!=O&&O.origin){var B;if(L.filter){var c;const K=Object.keys(L.filter);if(K.length>1||"where"!==K[0])return null!==(c=O.messages)&&void 0!==c&&c.push(new s.A("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:O.layer,effect:this})),null}if("showExcludedLabels"in L)return null!==(B=O.messages)&&void 0!==B&&B.push(new s.A("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:O.layer,effect:this})),null}return L}clone(){return new D({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,l._)([(0,w.MZ)({type:f.A,json:{write:{allowNull:!0,writer(S,O,L,B){const c=null==S?void 0:S.write({},B);c&&0!==Object.keys(c).length?(0,F.sM)(L,c,O):(0,F.sM)(L,null,O)}}}})],T.prototype,"filter",void 0),(0,l._)([(0,w.MZ)({json:{write:!0,origins:{"web-map":j,"portal-item":j}}})],T.prototype,"includedEffect",void 0),(0,l._)([(0,w.MZ)({json:{write:!0,origins:{"web-map":W,"portal-item":W}}})],T.prototype,"excludedEffect",void 0),(0,l._)([(0,w.MZ)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":I,"portal-item":I}}})],T.prototype,"excludedLabelsVisible",void 0),T=D=(0,l._)([(0,E.$)("esri.layers.support.FeatureEffect")],T);const A=T},95877:(J,C,i)=>{i.d(C,{A:()=>T});var D,l=i(8189),s=i(21152),Z=i(12849),F=i(49976),w=i(71065),b=i(77806),a=i(85211),h=(i(3248),i(35150),i(76576)),f=i(87086);const j=new F.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),W=new F.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let I=D=class extends w.oY{constructor(A){super(A),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(A={}){const{where:S,geometry:O,spatialRelationship:L,timeExtent:B,objectIds:c,units:K,distance:x}=this;return new f.A({geometry:(0,b.o8)(O),objectIds:(0,b.o8)(c),spatialRelationship:L,timeExtent:(0,b.o8)(B),where:S,units:K,distance:x,...A})}clone(){const{where:A,geometry:S,spatialRelationship:O,timeExtent:L,objectIds:B,units:c,distance:K}=this;return new D({geometry:(0,b.o8)(S),objectIds:(0,b.o8)(B),spatialRelationship:O,timeExtent:(0,b.o8)(L),where:A,units:c,distance:K})}};(0,l._)([(0,a.MZ)({type:String,json:{write:!0}})],I.prototype,"where",void 0),(0,l._)([(0,a.MZ)({types:s.yR,json:{write:!0}})],I.prototype,"geometry",void 0),(0,l._)([(0,a.MZ)({type:j.apiValues,json:{name:"spatialRel",read:{reader:j.read},write:{allowNull:!1,writer:j.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],I.prototype,"spatialRelationship",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{write:{overridePolicy(A){return{enabled:null!=A&&null!=this.geometry}}}}})],I.prototype,"distance",void 0),(0,l._)([(0,a.MZ)({type:[Number],json:{write:!0}})],I.prototype,"objectIds",void 0),(0,l._)([(0,a.MZ)({type:W.apiValues,json:{read:W.read,write:{writer:W.write,overridePolicy(A){return{enabled:null!=A&&null!=this.geometry}}}}})],I.prototype,"units",void 0),(0,l._)([(0,a.MZ)({type:Z.A,json:{write:!0}})],I.prototype,"timeExtent",void 0),I=D=(0,l._)([(0,h.$)("esri.layers.support.FeatureFilter")],I);const T=I},15848:(J,C,i)=>{i.d(C,{A:()=>D});var E,l=i(8189),s=i(49976),Z=i(71065),F=i(85211),v=(i(3248),i(35150),i(40707),i(76576));const h=new s.J({asc:"ascending",desc:"descending"});let f=E=class extends Z.oY{constructor(j){super(j),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new E({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,l._)([(0,F.MZ)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,l._)([(0,F.MZ)({type:String,json:{write:!0}})],f.prototype,"valueExpression",void 0),(0,l._)([(0,F.MZ)({type:h.apiValues,json:{read:h.read,write:h.write}})],f.prototype,"order",void 0),f=E=(0,l._)([(0,v.$)("esri.layers.support.OrderByInfo")],f);const D=f},8691:(J,C,i)=>{i.d(C,{L:()=>w});var l=i(10467),s=i(89447),Z=i(56492),F=i(96996);function w(a,v,E){return b.apply(this,arguments)}function b(){return(b=(0,l.A)(function*(a,v,E){const h=a&&a.getAtOrigin&&a.getAtOrigin("renderer",v.origin);if(h&&"unique-value"===h.type&&h.styleOrigin){const f=yield(0,s.Ke)(h.populateFromStyle());if((0,Z.Te)(E),!1===f.ok){const D=f.error;null!=v&&v.messages&&v.messages.push(new F.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${D.message}`,{error:D,context:v})),a.clear("renderer",null==v?void 0:v.origin)}}})).apply(this,arguments)}},28872:(J,C,i)=>{i.d(C,{u:()=>F});var l=i(82663),s=i(58701);function Z(a,v,E){if(null==a.hasM||a.hasZ)for(const h of v)for(const f of h)f.length>2&&(f[2]*=E)}function F(a,v,E){if(!a&&!v||!E)return;const h=(0,l.G9)(E);w(a,E,h),w(v,E,h)}function w(a,v,E){if(a)for(const h of a)b(h.geometry,v,E)}function b(a,v,E){if(null==a||!a.spatialReference||(0,s.aI)(a.spatialReference,v))return;const h=(0,l.G9)(a.spatialReference)/E;if(1!==h)if("x"in a)null!=a.z&&(a.z*=h);else if("rings"in a)Z(a,a.rings,h);else if("paths"in a)Z(a,a.paths,h);else if("points"in a&&(null==a.hasM||a.hasZ))for(const f of a.points)f.length>2&&(f[2]*=h)}},61569:(J,C,i)=>{i.d(C,{A:()=>K});var I,l=i(8189),s=i(21152),Z=i(12849),F=i(49976),w=i(71065),b=i(77806),a=i(85211),v=i(55739),E=i(76576),h=i(50305),f=i(61320);i(3248),i(35150),i(40707);let T=I=class extends w.oY{constructor(x){super(x),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new I({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,l._)([(0,a.MZ)({type:[String],json:{write:!0}})],T.prototype,"groupByFields",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{write:!0}})],T.prototype,"topCount",void 0),(0,l._)([(0,a.MZ)({type:[String],json:{write:!0}})],T.prototype,"orderByFields",void 0),T=I=(0,l._)([(0,E.$)("esri.rest.support.TopFilter")],T);const A=T;var O,S=i(32034);const L=new F.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),B=new F.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let c=O=class extends w.oY{constructor(x){super(x),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(x,Q){Q.resultOffset=this.start,Q.resultRecordCount=this.num||10}clone(){return new O((0,b.o8)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,l._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"cacheHint",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{write:{overridePolicy:x=>({enabled:x>0})}}})],c.prototype,"distance",void 0),(0,l._)([(0,a.MZ)({types:s.yR,json:{read:f.rS,write:!0}})],c.prototype,"geometry",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"geometryPrecision",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"maxAllowableOffset",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],c.prototype,"num",void 0),(0,l._)([(0,a.MZ)({json:{write:!0}})],c.prototype,"objectIds",void 0),(0,l._)([(0,a.MZ)({type:[String],json:{write:!0}})],c.prototype,"orderByFields",void 0),(0,l._)([(0,a.MZ)({type:[String],json:{write:!0}})],c.prototype,"outFields",void 0),(0,l._)([(0,a.MZ)({type:S.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c.prototype,"outSpatialReference",void 0),(0,l._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"resultType",void 0),(0,l._)([(0,a.MZ)({json:{write:!0}})],c.prototype,"returnGeometry",void 0),(0,l._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:x=>({enabled:x})}}})],c.prototype,"returnM",void 0),(0,l._)([(0,a.MZ)({type:Boolean,json:{write:{overridePolicy:x=>({enabled:x})}}})],c.prototype,"returnZ",void 0),(0,l._)([(0,a.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],c.prototype,"start",void 0),(0,l._)([(0,h.K)("start"),(0,h.K)("num")],c.prototype,"writeStart",null),(0,l._)([(0,a.MZ)({type:String,json:{read:{source:"spatialRel",reader:L.read},write:{target:"spatialRel",writer:L.write}}})],c.prototype,"spatialRelationship",void 0),(0,l._)([(0,a.MZ)({type:Z.A,json:{write:!0}})],c.prototype,"timeExtent",void 0),(0,l._)([(0,a.MZ)({type:A,json:{write:!0}})],c.prototype,"topFilter",void 0),(0,l._)([(0,a.MZ)({type:String,json:{read:B.read,write:{writer:B.write,overridePolicy(x){return{enabled:null!=x&&null!=this.distance&&this.distance>0}}}}})],c.prototype,"units",void 0),(0,l._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"where",void 0),c=O=(0,l._)([(0,E.$)("esri.rest.support.TopFeaturesQuery")],c),c.from=(0,v.dp)(c);const K=c}}]);