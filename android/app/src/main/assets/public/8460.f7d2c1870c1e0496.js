"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8460,4098,3258,2282],{33087:(V,Z,d)=>{d.d(Z,{q:()=>B});var D=d(60611);class B{constructor(S,U){this._storage=new D.F,this.id="",this.name="",this.size=0,this._storage.maxSize=S,this._storage.register(this),U&&this._storage.registerRemoveFunc("",U)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(S,U,A=1){this._storage.put(this,S,U,A,1)}pop(S){return this._storage.pop(this,S)}get(S){return this._storage.get(this,S)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(S){this._storage.maxSize=S}resetHitRate(){}}},60611:(V,Z,d)=>{d.d(Z,{F:()=>A,Mn:()=>U});var S,j,D=d(12438);(j=S||(S={}))[j.ALL=0]="ALL",j[j.SOME=1]="SOME";class U{constructor(p,a,m){this.name=p,this._storage=a,this.id=L+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),m&&(this._storage.registerRemoveFunc(this.id,m),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(p){return this._storage.getSize(this,p)}resetHitRate(){this._hit=this._miss=0}put(p,a,m,v=0){this._storage.put(this,p,a,m,v)}pop(p){const a=this._storage.pop(this,p);return void 0===a?++this._miss:++this._hit,a}get(p){const a=this._storage.get(this,p);return void 0===a?++this._miss:++this._hit,a}peek(p){return this._storage.peek(this,p)}updateSize(p,a,m){this._storage.updateSize(this,p,a,m)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class A{get size(){return this._size}constructor(p=10485760){this._maxSize=p,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new D.A,this._users=new D.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(p){this._users.push(p)}deregister(p){this._users.removeUnordered(p)}registerRemoveFunc(p,a){this._removeFuncs.push([p,a])}deregisterRemoveFunc(p){this._removeFuncs.filterInPlace(a=>a[0]!==p)}get maxSize(){return this._maxSize}set maxSize(p){this._maxSize=Math.max(p,-1),this._checkSize()}getSize(p,a){var m;const v=this._db.get(p.id+a);return null!==(m=null==v?void 0:v.size)&&void 0!==m?m:0}put(p,a,m,v,T){const E=this._db.get(a=p.id+a);if(E&&(this._size-=E.size,p.size-=E.size,this._db.delete(a),E.entry!==m&&this._notifyRemove(a,E.entry,E.size,S.ALL)),v>this._maxSize)return void this._notifyRemove(a,m,v,S.ALL);if(void 0===m)return void console.warn("Refusing to cache undefined entry ");if(!v||v<0)return console.warn(`Refusing to cache entry with size ${v} for key ${a}`),void this._notifyRemove(a,m,0,S.ALL);const C=1+Math.max(T,-4)- -3;this._db.set(a,new W(m,v,C)),this._size+=v,p.size+=v,this._checkSize()}updateSize(p,a,m,v){const T=this._db.get(a=p.id+a);if(T&&T.entry===m){for(this._size-=T.size,p.size-=T.size;v>this._maxSize;){const E=this._notifyRemove(a,m,v,S.SOME);if(!(null!=E&&E>0))return void this._db.delete(a);v=E}T.size=v,this._size+=v,p.size+=v,this._checkSize()}}pop(p,a){const m=this._db.get(a=p.id+a);if(m)return this._size-=m.size,p.size-=m.size,this._db.delete(a),++this._hit,m.entry;++this._miss}get(p,a){const m=this._db.get(a=p.id+a);if(void 0!==m)return this._db.delete(a),m.lives=m.lifetime,this._db.set(a,m),++this._hit,m.entry;++this._miss}peek(p,a){const m=this._db.get(p.id+a);return m?++this._hit:++this._miss,null==m?void 0:m.entry}get performanceInfo(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},a={},m=new Array;this._db.forEach((E,C)=>{const b=E.lifetime;m[b]=(m[b]||0)+E.size,this._users.forAll(R=>{const{id:y,name:s}=R;C.startsWith(y)&&(a[s]=(a[s]||0)+E.size)})});const v={};this._users.forAll(E=>{const C=E.name;"hitRate"in E&&"number"==typeof E.hitRate&&!isNaN(E.hitRate)&&E.hitRate>0?(a[C]=a[C]||0,v[C]=Math.round(100*E.hitRate)+"%"):v[C]="0%"});const T=Object.keys(a);T.sort((E,C)=>a[C]-a[E]),T.forEach(E=>p[E]=Math.round(a[E]/2**20)+"MB / "+v[E]);for(let E=m.length-1;E>=0;--E){const C=m[E];C&&(p["Priority "+(E+-3-1)]=Math.round(C/this._size*100)+"%")}return p}resetStats(){this._hit=this._miss=0,this._users.forAll(p=>p.resetHitRate())}clear(p){const a=p.id;this._db.forEach((m,v)=>{v.startsWith(a)&&(this._size-=m.size,this._db.delete(v),this._notifyRemove(v,m.entry,m.size,S.ALL))}),p.size=0}clearAll(){this._db.forEach((p,a)=>this._notifyRemove(a,p.entry,p.size,S.ALL)),this._users.forAll(p=>p.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(p,a,m,v){let T;return this._removeFuncs.some(E=>{if(p.startsWith(E[0])){const C=E[1](a,v,m);return"number"==typeof C&&(T=C),!0}return!1}),T}_checkSize(){this._users.forAll(p=>this._checkSizeLimits(p)),this._checkSizeLimits()}_checkSizeLimits(p){const a=null!=p?p:this;if(a.maxSize<0||a.size<=a.maxSize)return;const m=null==p?void 0:p.id;let v=!0;for(;v;){v=!1;for(const[T,E]of this._db)if(0===E.lifetime&&(!m||T.startsWith(m))){if(this._purgeItem(T,E,p),a.size<=.9*a.maxSize)return;v||(v=this._db.has(T))}}for(const[T,E]of this._db)if((!m||T.startsWith(m))&&(this._purgeItem(T,E,p),a.size<=.9*a.maxSize))return}_purgeItem(p,a,m=this._users.find(v=>p.startsWith(v.id))){if(this._db.delete(p),a.lives<=1){this._size-=a.size,m&&(m.size-=a.size);const v=this._notifyRemove(p,a.entry,a.size,S.SOME);null!=v&&v>0&&(this._size+=v,m&&(m.size+=v),a.lives=a.lifetime,a.size=v,this._db.set(p,a))}else--a.lives,this._db.set(p,a)}}let L=0;class W{constructor(p,a,m){this.entry=p,this.size=a,this.lifetime=m,this.lives=m}}},24098:(V,Z,d)=>{d.d(Z,{GB:()=>B,Qo:()=>S,Y4:()=>f});var D=d(44549);class B{}function f(A){return A instanceof D.bo?A===B.instance:"unknown"===(null==A?void 0:A.toString().toLowerCase())}function S(A){return f(A)?B.instance:A}B.instance=new D.oh("Etc/UTC")},721:(V,Z,d)=>{d.d(Z,{$X:()=>q,Gy:()=>K,P5:()=>te,SW:()=>ee,Tr:()=>k,VV:()=>A}),d(61320);const f=(l,o,c)=>[o,c],S=(l,o,c)=>[o,c,l[2]],U=(l,o,c)=>[o,c,l[2],l[3]];function A(l){return l?{originPosition:"upper-left"===l.originPosition?"upperLeft":"lower-left"===l.originPosition?"lowerLeft":l.originPosition,scale:l.tolerance?[l.tolerance,l.tolerance]:[1,1],translate:null!=l.extent?[l.extent.xmin,l.extent.ymax]:[0,0]}:null}function E({scale:l,translate:o},c){return c*l[0]+o[0]}function C({scale:l,translate:o},c){return o[1]-c*l[1]}function b(l,o,c){const P=new Array(c.length);if(!c.length)return P;const[z,$]=l.scale;let G=E(l,c[0][0]),J=C(l,c[0][1]);P[0]=o(c[0],G,J);for(let X=1;X<c.length;X++){const Y=c[X];G+=Y[0]*z,J-=Y[1]*$,P[X]=o(Y,G,J)}return P}function R(l,o,c){const P=new Array(c.length);for(let z=0;z<c.length;z++)P[z]=b(l,o,c[z]);return P}function K(l,o,c,P,z){return o.x=function W({scale:l,translate:o},c){return Math.round((c-o[0])/l[0])}(l,c.x),o.y=function j({scale:l,translate:o},c){return Math.round((o[1]-c)/l[1])}(l,c.y),o!==c&&(P&&(o.z=c.z),z&&(o.m=c.m)),o}function ee(l,o,c,P,z){return null!=c&&(o.points=function s(l,o,c,P){return b(l,c?P?U:S:P?S:f,o)}(l,c.points,P,z)),o}function k(l,o,c,P,z){return null==c||(o.x=E(l,c.x),o.y=C(l,c.y),o!==c&&(P&&(o.z=c.z),z&&(o.m=c.m))),o}function q(l,o,c,P,z){return null!=c&&(o.rings=function g(l,o,c,P){return R(l,c?P?U:S:P?S:f,o)}(l,c.rings,P,z)),o}function te(l,o,c,P,z){return null!=c&&(o.paths=function h(l,o,c,P){return R(l,c?P?U:S:P?S:f,o)}(l,c.paths,P,z)),o}},94376:(V,Z,d)=>{d.d(Z,{p:()=>W});var D=d(8189),B=d(85211),A=(d(3248),d(35150),d(40707),d(76576));const W=j=>{let p=class extends j{get apiKey(){var a;return this._isOverridden("apiKey")?this._get("apiKey"):function L(j){return"portalItem"in j}(this)?null===(a=this.portalItem)||void 0===a?void 0:a.apiKey:null}set apiKey(a){null!=a?this._override("apiKey",a):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,D._)([(0,B.MZ)({type:String})],p.prototype,"apiKey",null),p=(0,D._)([(0,A.$)("esri.layers.mixins.APIKeyMixin")],p),p}},25936:(V,Z,d)=>{d.d(Z,{b:()=>W});var D=d(8189),B=d(35150),f=d(85211),A=(d(3248),d(40707),d(76576)),L=d(68438);const W=j=>{let p=class extends j{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const a=(0,L.qg)(this.url);if(null!=a&&a.title)return a.title}return this._get("title")||""}set title(a){this._set("title",a)}set url(a){this._set("url",(0,L.Jf)(a,B.A.getLogger(this)))}};return(0,D._)([(0,f.MZ)()],p.prototype,"title",null),(0,D._)([(0,f.MZ)({type:String})],p.prototype,"url",null),p=(0,D._)([(0,A.$)("esri.layers.mixins.ArcGISService")],p),p}},47063:(V,Z,d)=>{d.d(Z,{A:()=>T});var D=d(8189),B=d(90660),f=d(71065),S=d(85211),W=(d(3248),d(35150),d(40707),d(17221)),j=d(76576),p=d(50305),a=d(84546),m=d(69741);let v=class extends((0,B.O)(f.oY)){constructor(E){super(E),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(E){const C={};for(const b of Object.keys(E))C[b]=(0,a.rS)(E[b]);return C}writeDomains(E,C){const b={};for(const y of Object.keys(E)){var R;E[y]&&(b[y]=null===(R=E[y])||void 0===R?void 0:R.toJSON())}C.domains=b}};(0,D._)([(0,S.MZ)({json:{write:!0}})],v.prototype,"id",void 0),(0,D._)([(0,S.MZ)({json:{write:!0}})],v.prototype,"name",void 0),(0,D._)([(0,S.MZ)({json:{write:!0}})],v.prototype,"domains",void 0),(0,D._)([(0,W.w)("domains")],v.prototype,"readDomains",null),(0,D._)([(0,p.K)("domains")],v.prototype,"writeDomains",null),(0,D._)([(0,S.MZ)({type:[m.A],json:{write:!0}})],v.prototype,"templates",void 0),v=(0,D._)([(0,j.$)("esri.layers.support.FeatureType")],v);const T=v},73258:(V,Z,d)=>{d.d(Z,{A:()=>v});var D=d(5922),B=d(71065),f=d(35150),S=d(60797),U=d(24098),A=d(86300),L=d(22639),W=d(44549);const m=new Map;class v{static fromJSON(y){return new v(y.fields,y.timeZoneByFieldName)}static fromLayer(y){var s;return new v(null!==(s=y.fields)&&void 0!==s?s:[],b(y))}static fromLayerJSON(y){var s;return new v(null!==(s=y.fields)&&void 0!==s?s:[],b(y))}constructor(y=[],s){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=y||[],this._timeZoneByFieldName=s?new Map(s):null;const h=[];for(const i of this.fields){const _=null==i?void 0:i.name,O=E(_);if(_&&O){var g;const x=T(_);this._fieldsMap.set(_,i),this._fieldsMap.set(x,i),this._normalizedFieldsMap.set(O,i),h.push(`${x}:${i.type}:${null===(g=this._timeZoneByFieldName)||void 0===g?void 0:g.get(_)}`),(0,A.vE)(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):(0,A.WA)(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),(0,A.te)(i)||(0,A.Xz)(i)||(i.editable=null==i.editable||!!i.editable,i.nullable=null==i.nullable||!!i.nullable)}}h.sort(),this.uid=h.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)(0,A.te)(y)||(0,A.Xz)(y)||y.nullable||void 0!==(0,A.lD)(y)||this._requiredFields.push(y)}return this._requiredFields}equals(y){return this.uid===(null==y?void 0:y.uid)}has(y){return null!=this.get(y)}get(y){var s;if(!y)return;let h=this._fieldsMap.get(y);return h||(h=null!==(s=this._fieldsMap.get(T(y)))&&void 0!==s?s:this._normalizedFieldsMap.get(E(y)),h&&this._fieldsMap.set(y,h),h)}getTimeZone(y){const s=this.get(y&&"string"!=typeof y?y.name:y);return s?this._timeZoneByFieldName?this._timeZoneByFieldName.get(s.name):"date"===s.type||"esriFieldTypeDate"===s.type?(f.A.getLogger("esri.layers.support.FieldsIndex").error(new D.A("getTimeZone:no-timezone-information",`no time zone information for field '${s.name}'`)),L.n$):C.has(s.type)?L.L5:null:null}getLuxonTimeZone(y){const s=this.getTimeZone(y);return s?s===L.L5?U.GB.instance:s===L.n$?W.mQ.utcInstance:(0,S.tE)(m,s,()=>W.oh.create(s)):null}isDateField(y){return this._dateFieldsSet.has(this.get(y))}isTimeOnlyField(y){return(0,A.OH)(this.get(y))}isNumericField(y){return this._numericFieldsSet.has(this.get(y))}normalizeFieldName(y){var s,h;return null!==(s=null===(h=this.get(y))||void 0===h?void 0:h.name)&&void 0!==s?s:void 0}toJSON(){return{fields:this.fields.map(y=>(0,B.Wj)(y)?y.toJSON():y),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function T(R){return R.trim().toLowerCase()}function E(R){var y,s;return null!==(y=null===(s=(0,A.rS)(R))||void 0===s?void 0:s.toLowerCase())&&void 0!==y?y:""}const C=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function b(R){var y,s,h,g,i,_,O;const x=new Map;if(!R.fields)return x;const Q=!0===R.datesInUnknownTimezone,{timeInfo:F,editFieldsInfo:M}=R,K=null!==(y=F?"startField"in F?F.startField:F.startTimeField:"")&&void 0!==y?y:"",I=null!==(s=F?"endField"in F?F.endField:F.endTimeField:"")&&void 0!==s?s:"",w=function a(R){return"dateFieldsTimeZone"in R}(R)?null!==(h=R.dateFieldsTimeZone)&&void 0!==h?h:null:R.dateFieldsTimeReference?(0,L.ZS)(R.dateFieldsTimeReference):null,H=M?function j(R){return"timeZone"in R}(M)?null!==(g=M.timeZone)&&void 0!==g?g:w:M.dateFieldsTimeReference?(0,L.ZS)(M.dateFieldsTimeReference):null!=w?w:L.n$:null,N=F?function p(R){return"timeZone"in R}(F)?null!==(i=F.timeZone)&&void 0!==i?i:w:F.timeReference?(0,L.ZS)(F.timeReference):w:null,ee=new Map([[T(null!==(_=null==M?void 0:M.creationDateField)&&void 0!==_?_:""),H],[T(null!==(O=null==M?void 0:M.editDateField)&&void 0!==O?O:""),H],[T(K),N],[T(I),N]]);for(const{name:q,type:te}of R.fields)if(C.has(te))x.set(q,L.L5);else if("date"!==te&&"esriFieldTypeDate"!==te)x.set(q,null);else if(Q)x.set(q,L.L5);else{var k;const l=null!==(k=ee.get(T(null!=q?q:"")))&&void 0!==k?k:w;x.set(q,l)}return x}},64584:(V,Z,d)=>{d.d(Z,{A:()=>a});var j,D=d(8189),B=d(31178),f=d(71065),S=d(85211),W=(d(3248),d(35150),d(40707),d(76576));let p=j=class extends f.oY{constructor(m){super(m),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new B.A}clone(){return new j({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,D._)([(0,S.MZ)({type:String,json:{write:!0}})],p.prototype,"floorField",void 0),(0,D._)([(0,S.MZ)({json:{read:!1,write:!1}})],p.prototype,"viewAllMode",void 0),(0,D._)([(0,S.MZ)({json:{read:!1,write:!1}})],p.prototype,"viewAllLevelIds",void 0),p=j=(0,D._)([(0,W.$)("esri.layers.support.LayerFloorInfo")],p);const a=p},4858:(V,Z,d)=>{d.d(Z,{BI:()=>T,D3:()=>m,XJ:()=>v,lc:()=>a,mX:()=>C,rU:()=>E,tH:()=>g});var D=d(1119);const B="__begin__",f="__end__",S=new RegExp(B,"ig"),U=new RegExp(f,"ig"),A=new RegExp("^"+B,"i"),L=new RegExp(f+"$","i"),W='"',j=W+" + ",p=" + "+W;function a(i){return i.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function m(i){return i.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function v(i){const _={expression:"",type:"none"};return i.labelExpressionInfo?i.labelExpressionInfo.value?(_.expression=i.labelExpressionInfo.value,_.type="conventional"):i.labelExpressionInfo.expression&&(_.expression=i.labelExpressionInfo.expression,_.type="arcade"):null!=i.labelExpression&&(_.expression=a(i.labelExpression),_.type="conventional"),_}function T(i){const _=v(i);if(!_)return null;switch(_.type){case"conventional":return C(_.expression);case"arcade":return _.expression}return null}function E(i){const _=v(i);if(!_)return null;switch(_.type){case"conventional":return function R(i){const _=null==i?void 0:i.match(b);return(null==_?void 0:_[1].trim())||null}(_.expression);case"arcade":return g(_.expression)}return null}function C(i){let _;return i?(_=(0,D.HC)(i,O=>B+'$feature["'+O+'"]'+f),_=A.test(_)?_.replace(A,""):W+_,_=L.test(_)?_.replace(L,""):_+W,_=_.replaceAll(S,j).replaceAll(U,p)):_='""',_}const b=/^\s*\{([^}]+)\}\s*$/i,y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,s=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,h=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function g(i){if(!i)return null;let _=y.exec(i)||s.exec(i);return _?_[1]||_[3]:(_=h.exec(i),_?_[2]:null)}},90543:(V,Z,d)=>{d.d(Z,{S:()=>j});var D=d(3248),B=d(68438);function f(s,h,g){return!!U(s,h,g)}function S(s,h,g){return U(s,h,g)}function U(s,h,g){return s&&s.hasOwnProperty(h)?s[h]:g}const A={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function L(s){var h;const g=null==s||null===(h=s.supportedSpatialAggregationStatistics)||void 0===h?void 0:h.map(i=>i.toLowerCase());return{envelope:!(null==g||!g.includes("envelopeaggregate")),centroid:!(null==g||!g.includes("centroidaggregate")),convexHull:!(null==g||!g.includes("convexhullaggregate"))}}function W(s,h){var g;const i=null==s||null===(g=s.supportedOperationsWithCacheHint)||void 0===g?void 0:g.map(_=>_.toLowerCase());return!(null==i||!i.includes(h.toLowerCase()))}function j(s,h){return{analytics:p(s),attachment:a(s),data:m(s),metadata:v(s),operations:T(s.capabilities,s,h),query:E(s,h),queryRelated:C(s),queryTopFeatures:b(s),editing:R(s)}}function p(s){return{supportsCacheHint:W(s.advancedQueryCapabilities,"queryAnalytics")}}function a(s){const h=s.attachmentProperties,g={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:W(s.advancedQueryCapabilities,"queryAttachments"),supportsResize:f(s,"supportsAttachmentsResizing",!1)};return h&&Array.isArray(h)&&h.forEach(i=>{const _=A[i.name];_&&(g[_]=!!i.isEnabled)}),g}function m(s){return{isVersioned:f(s,"isDataVersioned",!1),supportsAttachment:f(s,"hasAttachments",!1),supportsM:f(s,"hasM",!1),supportsZ:f(s,"hasZ",!1)}}function v(s){return{supportsAdvancedFieldProperties:f(s,"supportsFieldDescriptionProperty",!1)}}function T(s,h,g){const i=s?s.toLowerCase().split(",").map(w=>w.trim()):[],_=g?(0,B.qg)(g):null,O=i.includes(null!=_&&"MapServer"===_.serverType?"data":"query"),x=i.includes("editing")&&!h.datesInUnknownTimezone;let Q=x&&i.includes("create"),F=x&&i.includes("delete"),M=x&&i.includes("update");const K=i.includes("changetracking"),I=h.advancedQueryCapabilities;return x&&!(Q||F||M)&&(Q=F=M=!0),{supportsCalculate:f(h,"supportsCalculate",!1),supportsTruncate:f(h,"supportsTruncate",!1),supportsValidateSql:f(h,"supportsValidateSql",!1),supportsAdd:Q,supportsDelete:F,supportsEditing:x,supportsChangeTracking:K,supportsQuery:O,supportsQueryAnalytics:f(I,"supportsQueryAnalytic",!1),supportsQueryAttachments:f(I,"supportsQueryAttachments",!1),supportsQueryTopFeatures:f(I,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:f(h,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:M,supportsExceedsLimitStatistics:f(h,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:f(h,"supportsAsyncConvert3D",!1)}}function E(s,h){var g;const i=s.advancedQueryCapabilities,_=s.ownershipBasedAccessControlForFeatures,O=s.archivingInfo,x=s.currentVersion,F=!(null==h?void 0:h.includes("MapServer"))||x>=(0,D.A)("mapserver-pbf-version-support"),M=(0,B.Wo)(h),K=new Set((null!==(g=s.supportedQueryFormats)&&void 0!==g?g:"").split(",").map(I=>I.toLowerCase().trim()));return{supportsStatistics:f(i,"supportsStatistics",s.supportsStatistics),supportsPercentileStatistics:f(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:f(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:L(i),supportsCentroid:f(i,"supportsReturningGeometryCentroid",!1),supportsDistance:f(i,"supportsQueryWithDistance",!1),supportsDistinct:f(i,"supportsDistinct",s.supportsAdvancedQueries),supportsExtent:f(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:f(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:f(i,"supportsHavingClause",!1),supportsOrderBy:f(i,"supportsOrderBy",s.supportsAdvancedQueries),supportsPagination:f(i,"supportsPagination",!1),supportsQuantization:f(s,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:f(s,"supportsQuantizationEditMode",!1),supportsQueryGeometry:f(s,"supportsReturningQueryGeometry",!1),supportsResultType:f(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:f(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:f(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:f(s,"useStandardizedQueries",!1),supportsTopFeaturesQuery:f(i,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:f(_,"allowAnonymousToQuery",!0),supportsQueryByOthers:f(_,"allowOthersToQuery",!0),supportsHistoricMoment:f(O,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:F&&K.has("pbf"),supportsDisjointSpatialRelationship:f(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:f(i,"supportsQueryWithCacheHint",!1)||W(i,"query"),supportsDefaultSpatialReference:f(i,"supportsDefaultSR",!1),supportsCompactGeometry:M,supportsFullTextSearch:f(i,"supportsFullTextSearch",!1),maxRecordCountFactor:S(s,"maxRecordCountFactor",void 0),maxRecordCount:S(s,"maxRecordCount",void 0),standardMaxRecordCount:S(s,"standardMaxRecordCount",void 0),tileMaxRecordCount:S(s,"tileMaxRecordCount",void 0)}}function C(s){const h=s.advancedQueryCapabilities,g=f(h,"supportsAdvancedQueryRelated",!1);return{supportsPagination:f(h,"supportsQueryRelatedPagination",!1),supportsCount:g,supportsOrderBy:g,supportsCacheHint:W(h,"queryRelated")}}function b(s){return{supportsCacheHint:W(s.advancedQueryCapabilities,"queryTopFilter")}}function R(s){const h=s.ownershipBasedAccessControlForFeatures,g=s?s.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:f(s,"allowGeometryUpdates",!0),supportsGlobalId:f(s,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:f(s,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:f(s,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:f(s,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:f(s,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:f(h,"allowAnonymousToDelete",!0),supportsDeleteByOthers:f(h,"allowOthersToDelete",!0),supportsUpdateByAnonymous:f(h,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:f(h,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:f(g,"supportsAsyncApplyEdits",!1),zDefault:S(s,"zDefault",void 0)}}},78592:(V,Z,d)=>{d.d(Z,{O3:()=>j,PU:()=>L,YW:()=>a,ex:()=>U,hv:()=>p,zp:()=>A});var D=d(69287),B=d(67685),f=d(53781),S=d(89141);const U=2.4;function A(m){return(0,B.PN)(m*U)}function L(m){return(0,B.Lz)(m)/U}function W(m,v,T,E){let{color:C,ratio:b}=v,{color:R,ratio:y}=T;y===b&&(1===y?b-=1e-6:y+=1e-6);const s=(0,D.qE)((E-b)/(y-b),0,1);(0,f.l)(m,C.toArray(),R.toArray(),s)}function j(m){const T=new Uint8ClampedArray(2048);if((m=m.filter(({ratio:y})=>y>=0&&y<=1).sort((y,s)=>y.ratio-s.ratio).map(({color:y,ratio:s})=>({color:y,ratio:Math.max(s,.001)}))).length<1)return T;let E=m[0],C=m[0],b=1;const R=(0,S.vt)();for(let y=0;y<512;y++){const s=(y+.5)/512;for(;s>C.ratio&&b<m.length;)E=C,C=m[b++];W(R,E,C,s),T.set(R,4*y)}return T}function p(m,v,T){const E=Math.sqrt(m**2+v**2)/T;return E>1?0:3/(Math.PI*T**2)*(1-E**2)**2}function a(m){return"function"==typeof m?m:m?v=>+v[m]:()=>1}},98789:(V,Z,d)=>{d.d(Z,{q:()=>B});var D=d(23743);function B(f,S,U){if(null==U||!U.features||!U.hasZ)return;const A=(0,D.N)(U.geometryType,S,f.outSpatialReference);if(null!=A)for(const L of U.features)A(L.geometry)}},93327:(V,Z,d)=>{d.d(Z,{A:()=>y});var C,D=d(8189),B=d(21152),f=d(81098),S=d(49976),U=d(71065),A=d(77806),L=d(85211),p=(d(3248),d(35150),d(17221)),a=d(76576),m=d(50305),v=d(32034),T=d(61320),E=d(29141);const b=new S.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let R=C=class extends U.oY{constructor(s){super(s),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(s,h){const g=v.A.fromJSON(h.spatialReference),i=[];for(let O=0;O<s.length;O++){var _;const x=s[O],Q=f.A.fromJSON(x),F=null===(_=x.geometry)||void 0===_?void 0:_.spatialReference;null==Q.geometry||F||(Q.geometry.spatialReference=g);const M=x.aggregateGeometries,K=Q.aggregateGeometries;if(M&&null!=K)for(const I in K){const w=K[I],H=M[I];null==w||(null==H?void 0:H.spatialReference)||(w.spatialReference=g)}i.push(Q)}return i}writeGeometryType(s,h,g,i){if(s)return void b.write(s,h,g,i);const{features:_}=this;if(_)for(const O of _)if(null!=(null==O?void 0:O.geometry))return void b.write(O.geometry.type,h,g,i)}readQueryGeometry(s,h){if(!s)return null;const g=!!s.spatialReference,i=(0,T.rS)(s);return i&&!g&&h.spatialReference&&(i.spatialReference=v.A.fromJSON(h.spatialReference)),i}writeSpatialReference(s,h){if(s)return void(h.spatialReference=s.toJSON());const{features:g}=this;if(g)for(const i of g)if(i&&null!=i.geometry&&i.geometry.spatialReference)return void(h.spatialReference=i.geometry.spatialReference.toJSON())}clone(){return new C(this.cloneProperties())}cloneProperties(){return(0,A.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(s){const h=this.write();if(h.features&&Array.isArray(s)&&s.length>0)for(let g=0;g<h.features.length;g++){const i=h.features[g];if(i.geometry){const _=null==s?void 0:s[g];i.geometry=(null==_?void 0:_.toJSON())||i.geometry}}return h}quantize(s){const{scale:[h,g],translate:[i,_]}=s,Q=this.features,F=this._getQuantizationFunction(this.geometryType,M=>Math.round((M-i)/h),M=>Math.round((_-M)/g));for(let M=0,K=Q.length;M<K;M++)null!=F&&F(Q[M].geometry)||(Q.splice(M,1),M--,K--);return this.transform=s,this}unquantize(){var s,h;const{geometryType:g,features:i,transform:_}=this;if(!_)return this;const{translate:[O,x],scale:[Q,F]}=_;let I=null,w=null;if(this.hasZ&&null!=(null==_||null===(s=_.scale)||void 0===s?void 0:s[2])){const{translate:[,,N],scale:[,,ee]}=_;I=k=>k*ee+N}if(this.hasM&&null!=(null==_||null===(h=_.scale)||void 0===h?void 0:h[3])){const{translate:[,,,N],scale:[,,,ee]}=_;w=k=>null==k?k:k*ee+N}const H=this._getHydrationFunction(g,N=>N*Q+O,N=>x-N*F,I,w);for(const{geometry:N}of i)null!=N&&H&&H(N);return this.transform=null,this}_quantizePoints(s,h,g){let i,_;const O=[];for(let x=0,Q=s.length;x<Q;x++){const F=s[x];if(x>0){const M=h(F[0]),K=g(F[1]);M===i&&K===_||(O.push([M-i,K-_]),i=M,_=K)}else i=h(F[0]),_=g(F[1]),O.push([i,_])}return O.length>0?O:null}_getQuantizationFunction(s,h,g){return"point"===s?i=>(i.x=h(i.x),i.y=g(i.y),i):"polyline"===s||"polygon"===s?i=>{const _=(0,T.Bi)(i)?i.rings:i.paths,O=[];for(let x=0,Q=_.length;x<Q;x++){const M=this._quantizePoints(_[x],h,g);M&&O.push(M)}return O.length>0?((0,T.Bi)(i)?i.rings=O:i.paths=O,i):null}:"multipoint"===s?i=>{const _=this._quantizePoints(i.points,h,g);return _&&_.length>0?(i.points=_,i):null}:"extent"===s?i=>i:null}_getHydrationFunction(s,h,g,i,_){return"point"===s?O=>{O.x=h(O.x),O.y=g(O.y),i&&(O.z=i(O.z))}:"polyline"===s||"polygon"===s?O=>{const x=(0,T.Bi)(O)?O.rings:O.paths;let Q,F;for(let M=0,K=x.length;M<K;M++){const I=x[M];for(let w=0,H=I.length;w<H;w++){const N=I[w];w>0?(Q+=N[0],F+=N[1]):(Q=N[0],F=N[1]),N[0]=h(Q),N[1]=g(F)}}if(i&&_)for(let M=0,K=x.length;M<K;M++){const I=x[M];for(let w=0,H=I.length;w<H;w++){const N=I[w];N[2]=i(N[2]),N[3]=_(N[3])}}else if(i)for(let M=0,K=x.length;M<K;M++){const I=x[M];for(let w=0,H=I.length;w<H;w++){const N=I[w];N[2]=i(N[2])}}else if(_)for(let M=0,K=x.length;M<K;M++){const I=x[M];for(let w=0,H=I.length;w<H;w++){const N=I[w];N[2]=_(N[2])}}}:"extent"===s?O=>{O.xmin=h(O.xmin),O.ymin=g(O.ymin),O.xmax=h(O.xmax),O.ymax=g(O.ymax),i&&null!=O.zmax&&null!=O.zmin&&(O.zmax=i(O.zmax),O.zmin=i(O.zmin)),_&&null!=O.mmax&&null!=O.mmin&&(O.mmax=_(O.mmax),O.mmin=_(O.mmin))}:"multipoint"===s?O=>{const x=O.points;let Q,F;for(let M=0,K=x.length;M<K;M++){const I=x[M];M>0?(Q+=I[0],F+=I[1]):(Q=I[0],F=I[1]),I[0]=h(Q),I[1]=g(F)}if(i&&_)for(let M=0,K=x.length;M<K;M++){const I=x[M];I[2]=i(I[2]),I[3]=_(I[3])}else if(i)for(let M=0,K=x.length;M<K;M++){const I=x[M];I[2]=i(I[2])}else if(_)for(let M=0,K=x.length;M<K;M++){const I=x[M];I[2]=_(I[2])}}:null}};(0,D._)([(0,L.MZ)({type:String,json:{write:!0}})],R.prototype,"displayFieldName",void 0),(0,D._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:s=>({enabled:s})}}})],R.prototype,"exceededTransferLimit",void 0),(0,D._)([(0,L.MZ)({type:[f.A],json:{write:!0}})],R.prototype,"features",void 0),(0,D._)([(0,p.w)("features")],R.prototype,"readFeatures",null),(0,D._)([(0,L.MZ)({type:[E.A],json:{write:!0}})],R.prototype,"fields",void 0),(0,D._)([(0,L.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:b.read}}})],R.prototype,"geometryType",void 0),(0,D._)([(0,m.K)("geometryType")],R.prototype,"writeGeometryType",null),(0,D._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:s=>({enabled:s})}}})],R.prototype,"hasM",void 0),(0,D._)([(0,L.MZ)({type:Boolean,json:{write:{overridePolicy:s=>({enabled:s})}}})],R.prototype,"hasZ",void 0),(0,D._)([(0,L.MZ)({types:B.yR,json:{write:!0}})],R.prototype,"queryGeometry",void 0),(0,D._)([(0,p.w)("queryGeometry")],R.prototype,"readQueryGeometry",null),(0,D._)([(0,L.MZ)({type:v.A,json:{write:!0}})],R.prototype,"spatialReference",void 0),(0,D._)([(0,m.K)("spatialReference")],R.prototype,"writeSpatialReference",null),(0,D._)([(0,L.MZ)({json:{write:!0}})],R.prototype,"transform",void 0),R=C=(0,D._)([(0,a.$)("esri.rest.support.FeatureSet")],R),R.prototype.toJSON.isDefaultToJSON=!0;const y=R},91644:(V,Z,d)=>{d.d(Z,{A7:()=>W,Cx:()=>j,Hk:()=>p,JJ:()=>T,UK:()=>L,jM:()=>m,x3:()=>v}),d(3248);var B=d(88521),f=d(55417),S=d(46602),U=d(47705),A=d(48254);const L=S.A.fromJSON(A.Cb),W=f.A.fromJSON(A.yM),j=B.A.fromJSON(A.WR),p=U.A.fromJSON(A.JZ),m=S.A.fromJSON(A.nC),v=f.A.fromJSON(A.HW),T=B.A.fromJSON(A.b6)},48254:(V,Z,d)=>{d.d(Z,{Cb:()=>f,HW:()=>W,JZ:()=>A,WR:()=>U,b6:()=>j,nC:()=>L,yM:()=>S});const D=[252,146,31,255],f={type:"esriSMS",style:"esriSMSCircle",size:6,color:D,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},S={type:"esriSLS",style:"esriSLSSolid",width:.75,color:D},U={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},A={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},L={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},W={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},j={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);