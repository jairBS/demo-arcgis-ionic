"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5565],{61597:(H,j,t)=>{t.d(j,{v:()=>n});var s=t(10467),N=t(56151);class n{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}fetchServiceMetadata(L,g){var c=this;return(0,s.A)(function*(){const d=c._serviceMetadatas.get(L);if(d)return d;const U=yield(0,N.V)(L,g);return c._serviceMetadatas.set(L,U),U})()}fetchItemData(L){var g=this;return(0,s.A)(function*(){const{id:c}=L;if(!c)return null;const{_itemDatas:d}=g;if(d.has(c))return d.get(c);const U=yield L.fetchData();return d.set(c,U),U})()}fetchCustomParameters(L,g){var c=this;return(0,s.A)(function*(){const d=yield c.fetchItemData(L);return d&&"object"==typeof d&&(g?g(d):d.customParameters)||null})()}}},86537:(H,j,t)=>{t.d(j,{L:()=>U});var s=t(10467),N=t(77469),n=t(89563),a=t(5922),L=t(56492),g=t(68438),c=t(73874),d=t(46577);function U(u,i){return V.apply(this,arguments)}function V(){return V=(0,s.A)(function*(u,i){var f,v;const m=(0,g.qg)(u);if(!m)throw new a.A("invalid-url","Invalid scene service url");const M={...i,sceneServerUrl:m.url.path,layerId:null!==(f=m.sublayer)&&void 0!==f?f:void 0};if(null!==(v=M.sceneLayerItem)&&void 0!==v||(M.sceneLayerItem=yield function $(u){return J.apply(this,arguments)}(M)),null==M.sceneLayerItem)return P(M.sceneServerUrl.replace("/SceneServer","/FeatureServer"),M);const O=yield function W(u){return x.apply(this,arguments)}(M);if(null==O||!O.url)throw new a.A("related-service-not-found","Could not find feature service through portal item relationship");M.featureServiceItem=O;const B=yield P(O.url,M);return B.portalItem=O,B}),V.apply(this,arguments)}function J(){return J=(0,s.A)(function*(u){const i=(yield K(u)).serviceItemId;if(!i)return null;const f=new d.default({id:i,apiKey:u.apiKey}),v=yield function e(u){return y.apply(this,arguments)}(u);null!=v&&(f.portal=new c.A({url:v}));try{return f.load({signal:u.signal})}catch(m){return(0,L.QP)(m),null}}),J.apply(this,arguments)}function K(u){return o.apply(this,arguments)}function o(){return(o=(0,s.A)(function*(u){if(u.rootDocument)return u.rootDocument;const i={query:{f:"json",...u.customParameters,token:u.apiKey},responseType:"json",signal:u.signal};try{const f=yield(0,n.A)(u.sceneServerUrl,i);u.rootDocument=f.data}catch{u.rootDocument={}}return u.rootDocument})).apply(this,arguments)}function y(){return(y=(0,s.A)(function*(u){const i=null==N.id?void 0:N.id.findServerInfo(u.sceneServerUrl);if(null!=i&&i.owningSystemUrl)return i.owningSystemUrl;const f=u.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const v=(yield(0,n.A)(f,{query:{f:"json"},responseType:"json",signal:u.signal})).data.owningSystemUrl;if(v)return v}catch(v){(0,L.QP)(v)}return null})).apply(this,arguments)}function P(u,i){return A.apply(this,arguments)}function A(){return(A=(0,s.A)(function*(u,i){var f,v,m;const M=(0,g.qg)(u);if(!M)throw new a.A("invalid-feature-service-url","Invalid feature service url");const O=M.url.path,B=i.layerId;if(null==B)return{serverUrl:O};const k=K(i),G=i.featureServiceItem?yield i.featureServiceItem.fetchData("json"):null,q=null===(f=(null==G||null===(v=G.layers)||void 0===v?void 0:v[0])||(null==G||null===(m=G.tables)||void 0===m?void 0:m[0]))||void 0===f?void 0:f.customParameters,b=F=>{const tt={query:{f:"json",...q},responseType:"json",authMode:F,signal:i.signal};return(0,n.A)(O,tt)},_=b("anonymous").catch(()=>b("no-prompt")),[w,z]=yield Promise.all([_,k]),Q=null==z?void 0:z.layers,X=w.data&&w.data.layers;if(!Array.isArray(X))throw new Error("expected layers array");if(Array.isArray(Q)){for(let F=0;F<Math.min(Q.length,X.length);F++)if(Q[F].id===B)return{serverUrl:O,layerId:X[F].id}}else if(null!=B&&B<X.length)return{serverUrl:O,layerId:X[B].id};throw new Error("could not find matching associated sublayer")})).apply(this,arguments)}function x(){return(x=(0,s.A)(function*({sceneLayerItem:u,signal:i}){if(!u)return null;try{const f=(yield u.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:i})).find(m=>"Feature Service"===m.type)||null;if(!f)return null;const v=new d.default({portal:f.portal,id:f.id});return yield v.load(),v}catch(f){return(0,L.QP)(f),null}})).apply(this,arguments)}},64833:(H,j,t)=>{t.d(j,{S:()=>N});var s=t(10467);const N={BingMapsLayer:(n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(6767)]).then(t.bind(t,16767))).default}),function(){return n.apply(this,arguments)}),BuildingSceneLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(6440),t.e(6338),t.e(5940),t.e(3647),t.e(152),t.e(9641),t.e(9550),t.e(893),t.e(451)]).then(t.bind(t,13305))).default});return function(){return n.apply(this,arguments)}}(),CatalogLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(1732),t.e(2248),t.e(5718),t.e(313),t.e(8304),t.e(6440),t.e(8528),t.e(5931),t.e(8570),t.e(564)]).then(t.bind(t,78512))).default});return function(){return n.apply(this,arguments)}}(),CSVLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(6440),t.e(6338),t.e(5940),t.e(4104)]).then(t.bind(t,34015))).default});return function(){return n.apply(this,arguments)}}(),DimensionLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(2076),t.e(4511)]).then(t.bind(t,94511))).default});return function(){return n.apply(this,arguments)}}(),ElevationLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(2016),t.e(2076),t.e(8147)]).then(t.bind(t,98147))).default});return function(){return n.apply(this,arguments)}}(),FeatureLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(6440),t.e(6338),t.e(5940),t.e(8460)]).then(t.bind(t,35940))).default});return function(){return n.apply(this,arguments)}}(),GeoJSONLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(2648)]).then(t.bind(t,88474))).default});return function(){return n.apply(this,arguments)}}(),GeoRSSLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(6337)]).then(t.bind(t,66337))).default});return function(){return n.apply(this,arguments)}}(),GroupLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(751)]).then(t.bind(t,90751))).default});return function(){return n.apply(this,arguments)}}(),ImageryLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(8304),t.e(9642),t.e(2758),t.e(87),t.e(9671),t.e(5042)]).then(t.bind(t,64123))).default});return function(){return n.apply(this,arguments)}}(),ImageryTileLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(9642),t.e(18),t.e(2016),t.e(2758),t.e(87),t.e(4585),t.e(9671),t.e(2076),t.e(153)]).then(t.bind(t,20153))).default});return function(){return n.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(152),t.e(2076),t.e(5821)]).then(t.bind(t,12138))).default});return function(){return n.apply(this,arguments)}}(),KMLLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(4784),t.e(8155)]).then(t.bind(t,27160))).default});return function(){return n.apply(this,arguments)}}(),LineOfSightLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(2076),t.e(6396)]).then(t.bind(t,89957))).default});return function(){return n.apply(this,arguments)}}(),LinkChartLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(1732),t.e(2248),t.e(5718),t.e(7936),t.e(8463),t.e(313),t.e(1495),t.e(13),t.e(8528),t.e(114),t.e(2246),t.e(2076),t.e(8293)]).then(t.bind(t,26994))).default});return function(){return n.apply(this,arguments)}}(),MapImageLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(1732),t.e(2248),t.e(5718),t.e(1721),t.e(8304),t.e(5931),t.e(2079),t.e(2076),t.e(2362)]).then(t.bind(t,39425))).default});return function(){return n.apply(this,arguments)}}(),MapNotesLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(6440),t.e(6338),t.e(5940),t.e(2076),t.e(9372)]).then(t.bind(t,72921))).default});return function(){return n.apply(this,arguments)}}(),MediaLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(2076),t.e(3073)]).then(t.bind(t,92072))).default});return function(){return n.apply(this,arguments)}}(),OGCFeatureLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(1732),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(5225),t.e(7935)]).then(t.bind(t,64368))).default});return function(){return n.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(5090),t.e(4717)]).then(t.bind(t,94717))).default});return function(){return n.apply(this,arguments)}}(),OrientedImageryLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(1721),t.e(6440),t.e(6338),t.e(5940),t.e(1742)]).then(t.bind(t,49027))).default});return function(){return n.apply(this,arguments)}}(),PointCloudLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(152),t.e(2076),t.e(294)]).then(t.bind(t,1852))).default});return function(){return n.apply(this,arguments)}}(),RouteLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(709),t.e(9348)]).then(t.bind(t,30380))).default});return function(){return n.apply(this,arguments)}}(),SceneLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(5434),t.e(3647),t.e(152),t.e(9641),t.e(9750),t.e(9550),t.e(3051),t.e(8864),t.e(893),t.e(2076),t.e(1365)]).then(t.bind(t,82262))).default});return function(){return n.apply(this,arguments)}}(),StreamLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(3290)]).then(t.bind(t,19373))).default});return function(){return n.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1721),t.e(6440),t.e(6338),t.e(230),t.e(3258)]).then(t.bind(t,11943))).default});return function(){return n.apply(this,arguments)}}(),TileLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(1732),t.e(2248),t.e(5718),t.e(1721),t.e(8304),t.e(5931),t.e(2016),t.e(2079),t.e(2076),t.e(460)]).then(t.bind(t,40460))).default});return function(){return n.apply(this,arguments)}}(),IntegratedMesh3DTilesLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(1912)]).then(t.bind(t,41912))).default});return function(){return n.apply(this,arguments)}}(),UnknownLayer:function(){var n=(0,s.A)(function*(){return(yield t.e(482).then(t.bind(t,30482))).default});return function(){return n.apply(this,arguments)}}(),UnsupportedLayer:function(){var n=(0,s.A)(function*(){return(yield t.e(2605).then(t.bind(t,42605))).default});return function(){return n.apply(this,arguments)}}(),VectorTileLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(9093),t.e(2016),t.e(6517),t.e(2076),t.e(6989)]).then(t.bind(t,90769))).default});return function(){return n.apply(this,arguments)}}(),VoxelLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(6669),t.e(152),t.e(2076),t.e(7388)]).then(t.bind(t,24149))).default});return function(){return n.apply(this,arguments)}}(),WFSLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(1985),t.e(6669),t.e(2248),t.e(5718),t.e(313),t.e(1495),t.e(3650),t.e(1220)]).then(t.bind(t,3723))).default});return function(){return n.apply(this,arguments)}}(),WMSLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(2076),t.e(2138)]).then(t.bind(t,52138))).default});return function(){return n.apply(this,arguments)}}(),WMTSLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(5090),t.e(2076),t.e(7438)]).then(t.bind(t,67438))).default});return function(){return n.apply(this,arguments)}}(),WebTileLayer:function(){var n=(0,s.A)(function*(){return(yield Promise.all([t.e(9845),t.e(6669),t.e(5090)]).then(t.bind(t,75090))).default});return function(){return n.apply(this,arguments)}}()};var n},43092:(H,j,t)=>{t.d(j,{PC:()=>$,WZ:()=>g,XH:()=>d,_r:()=>n,ay:()=>V,bO:()=>a,nu:()=>J,pJ:()=>c,z8:()=>U});var s=t(10467),N=t(86537);function n(o){const e={id:o.id,name:o.name};return"Oriented Imagery Layer"===o.type&&(e.layerType="OrientedImageryLayer"),e}function a(o,e,y){return L.apply(this,arguments)}function L(){return(L=(0,s.A)(function*(o,e,y){var P,A;if(null==(null===(P=o)||void 0===P?void 0:P.layers)||null==(null===(A=o)||void 0===A?void 0:A.tables)){var W,x,u;const i=yield y.fetchServiceMetadata(e,{customParameters:null===(W=c(o))||void 0===W?void 0:W.customParameters});(o=o||{}).layers=o.layers||(null==i||null===(x=i.layers)||void 0===x?void 0:x.map(n)),o.tables=o.tables||(null==i||null===(u=i.tables)||void 0===u?void 0:u.map(n))}return o})).apply(this,arguments)}function g(o){const{layers:e,tables:y}=o;return null!=e&&e.length?e[0].id:null!=y&&y.length?y[0].id:null}function c(o){if(!o)return null;const{layers:e,tables:y}=o;return null!=e&&e.length?e[0]:null!=y&&y.length?y[0]:null}function d(o){var e,y,P,A;return(null!==(e=null==o||null===(y=o.layers)||void 0===y?void 0:y.length)&&void 0!==e?e:0)+(null!==(P=null==o||null===(A=o.tables)||void 0===A?void 0:A.length)&&void 0!==P?P:0)}function U(o){var e;const y=[];return null!=o&&null!==(e=o.layers)&&void 0!==e&&e.forEach(P=>{"SubtypeGroupLayer"===P.layerType&&y.push(P.id)}),y}function V(o){var e;return null==o||null===(e=o.layers)||void 0===e?void 0:e.filter(({layerType:y})=>"OrientedImageryLayer"===y).map(({id:y})=>y)}function $(o){var e;return null==o||null===(e=o.layers)||void 0===e?void 0:e.filter(({layerType:y})=>"CatalogLayer"===y).map(({id:y})=>y)}function J(o,e,y){return K.apply(this,arguments)}function K(){return(K=(0,s.A)(function*(o,e,y){var P,A,W;if(null==o||!o.url)return null!==(P=e)&&void 0!==P?P:{};if(null!==(A=e)&&void 0!==A||(e={}),!e.layers){var x;const m=yield y.fetchServiceMetadata(o.url);e.layers=null===(x=m.layers)||void 0===x?void 0:x.map(n)}const{serverUrl:u,portalItem:i}=yield(0,N.L)(o.url,{sceneLayerItem:o,customParameters:null===(W=c(e))||void 0===W?void 0:W.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(null==u)return e.tables=[],e;if(!e.tables&&i){const m=yield i.fetchData();if(null!=m&&m.tables)e.tables=m.tables.map(n);else{var f,v;const M=yield y.fetchServiceMetadata(u,{customParameters:null===(f=c(m))||void 0===f?void 0:f.customParameters});e.tables=null==M||null===(v=M.tables)||void 0===v?void 0:v.map(n)}}if(e.tables)for(const m of e.tables)m.url=`${u}/${m.id}`;return e})).apply(this,arguments)}},15565:(H,j,t)=>{t.r(j),t.d(j,{fromItem:()=>V,selectLayerClassPath:()=>o});var s=t(10467),N=t(5922),n=t(86537),a=t(61597),L=t(58443),g=t(64833),c=t(46577),d=t(43092),U=t(69927);function V(l){return $.apply(this,arguments)}function $(){return $=(0,s.A)(function*(l){!l.portalItem||l.portalItem instanceof c.default||(l={...l,portalItem:new c.default(l.portalItem)});const r=yield function J(l){return K.apply(this,arguments)}(l.portalItem);return new r.constructor({portalItem:l.portalItem,...r.properties})}),$.apply(this,arguments)}function K(){return K=(0,s.A)(function*(l){yield l.load();const r=new a.v;return function y(l){return P.apply(this,arguments)}(yield o(l,r))}),K.apply(this,arguments)}function o(l,r){return e.apply(this,arguments)}function e(){return e=(0,s.A)(function*(l,r){switch(l.type){case"3DTiles Service":return{className:"IntegratedMesh3DTilesLayer"};case"CSV":return{className:"CSVLayer"};case"Feature Collection":return function v(l){return m.apply(this,arguments)}(l);case"Feature Service":return function x(l,r){return u.apply(this,arguments)}(l,r);case"Feed":case"Stream Service":return{className:"StreamLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"Group Layer":return{className:"GroupLayer"};case"Image Service":return function M(l,r){return O.apply(this,arguments)}(l,r);case"KML":return{className:"KMLLayer"};case"Map Service":return function A(l,r){return W.apply(this,arguments)}(l,r);case"Media Layer":return{className:"MediaLayer"};case"Scene Service":return function i(l,r){return f.apply(this,arguments)}(l,r);case"Vector Tile Service":return{className:"VectorTileLayer"};case"WFS":return{className:"WFSLayer"};case"WMS":return{className:"WMSLayer"};case"WMTS":return{className:"WMTSLayer"};default:throw new N.A("portal:unknown-item-type","Unknown item type '${type}'",{type:l.type})}}),e.apply(this,arguments)}function P(){return(P=(0,s.A)(function*(l){const h=g.S[l.className];return{constructor:yield h(),properties:l.properties}})).apply(this,arguments)}function W(){return W=(0,s.A)(function*(l,r){return(yield function et(l,r){return nt.apply(this,arguments)}(l,r))?{className:"TileLayer"}:{className:"MapImageLayer"}}),W.apply(this,arguments)}function u(){return(u=(0,s.A)(function*(l,r){const h=yield ot(l,r);if("object"==typeof h){const{sourceJSON:S,className:I}=h,T={sourceJSON:S};return null!=h.id&&(T.layerId=h.id),{className:I||"FeatureLayer",properties:T}}return{className:"GroupLayer"}})).apply(this,arguments)}function f(){return(f=(0,s.A)(function*(l,r){const h=yield ot(l,r,(0,s.A)(function*(){try{var I;if(!l.url)return[];const{serverUrl:T}=yield(0,n.L)(l.url,{sceneLayerItem:l}),E=yield r.fetchServiceMetadata(T);return null!==(I=null==E?void 0:E.tables)&&void 0!==I?I:[]}catch{return[]}}));if("object"==typeof h){var S;const I={};let T;if(null!=h.id?(I.layerId=h.id,T=`${l.url}/layers/${h.id}`):T=l.url,null!==(S=l.typeKeywords)&&void 0!==S&&S.length)for(const R of Object.keys(L.XX))if(l.typeKeywords.includes(R))return{className:L.XX[R]};const E=yield r.fetchServiceMetadata(T,{customParameters:yield r.fetchCustomParameters(l,R=>{var D;return null===(D=(0,d.pJ)(R))||void 0===D?void 0:D.customParameters})});return{className:L.XX[null==E?void 0:E.layerType]||"SceneLayer",properties:I}}if(!1===h){const I=yield r.fetchServiceMetadata(l.url);if("Voxel"===(null==I?void 0:I.layerType))return{className:"VoxelLayer"}}return{className:"GroupLayer"}})).apply(this,arguments)}function m(){return(m=(0,s.A)(function*(l){yield l.load();const r=(0,U.Y)(l,"Map Notes"),h=(0,U.Y)(l,"Markup");if(r||h)return{className:"MapNotesLayer"};if((0,U.Y)(l,"Route Layer"))return{className:"RouteLayer"};const S=yield l.fetchData();return 1===(0,d.XH)(S)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function O(){return(O=(0,s.A)(function*(l,r){var h,S,I,T;yield l.load();const E=null!==(h=null===(S=l.typeKeywords)||void 0===S?void 0:S.map(p=>p.toLowerCase()))&&void 0!==h?h:[];if(E.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(E.includes("tiled imagery"))return{className:"ImageryTileLayer"};const R=yield r.fetchItemData(l),D=null==R?void 0:R.layerType;if("ArcGISTiledImageServiceLayer"===D)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===D)return{className:"ImageryLayer"};const C=yield r.fetchServiceMetadata(l.url,{customParameters:yield r.fetchCustomParameters(l)}),Y=null===(I=C.cacheType)||void 0===I?void 0:I.toLowerCase(),Z=null===(T=C.capabilities)||void 0===T?void 0:T.toLowerCase().includes("tilesonly");return"map"===Y||Z?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function nt(){return(nt=(0,s.A)(function*(l,r){const{tileInfo:h}=yield r.fetchServiceMetadata(l.url,{customParameters:yield r.fetchCustomParameters(l)});return h})).apply(this,arguments)}function ot(l,r,h){return lt.apply(this,arguments)}function lt(){return(lt=(0,s.A)(function*(l,r,h){const{url:S,type:I}=l,T="Feature Service"===I;if(!S)return{};if(/\/\d+$/.test(S)){if(T){const D=yield r.fetchServiceMetadata(S,{customParameters:yield r.fetchCustomParameters(l,C=>{var Y;return null===(Y=(0,d.pJ)(C))||void 0===Y?void 0:Y.customParameters})});if("Oriented Imagery Layer"===D.type)return{id:D.id,className:"OrientedImageryLayer",sourceJSON:D}}return{}}yield l.load();let E=yield r.fetchItemData(l);if(T){const D=yield(0,d.bO)(E,S,r),C=st(D);if("object"==typeof C){const Y=(0,d.z8)(D),Z=(0,d.ay)(D),p=(0,d.PC)(D);C.className=null!=C.id&&Y.includes(C.id)?"SubtypeGroupLayer":null!=C.id&&null!=Z&&Z.includes(C.id)?"OrientedImageryLayer":null!=C.id&&null!=p&&p.includes(C.id)?"CatalogLayer":"FeatureLayer"}return C}if("Scene Service"===I&&(E=yield(0,d.nu)(l,E,r)),(0,d.XH)(E)>0)return st(E);const R=yield r.fetchServiceMetadata(S);return h&&(R.tables=yield h()),st(R)})).apply(this,arguments)}function st(l){return 1===(0,d.XH)(l)&&{id:(0,d.WZ)(l)}}},56151:(H,j,t)=>{t.d(j,{V:()=>n});var s=t(10467),N=t(89563);function n(L,g){return a.apply(this,arguments)}function a(){return(a=(0,s.A)(function*(L,g){const{data:c}=yield(0,N.A)(L,{responseType:"json",query:{f:"json",...null==g?void 0:g.customParameters,token:null==g?void 0:g.apiKey}});return c})).apply(this,arguments)}}}]);