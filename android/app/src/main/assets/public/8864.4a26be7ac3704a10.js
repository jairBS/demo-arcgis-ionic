"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8864],{92405:(Pt,ct,c)=>{c.d(ct,{e:()=>tt});var G,Y,R=c(93293),q={exports:{}};G=q,void 0!==(Y=function(){function N(r,h,d){d=d||2;var v,_,M,O,W,nt,yt,St=h&&h.length,Tt=St?h[0]*d:r.length,gt=B(r,0,Tt,d,!0),it=[];if(!gt||gt.next===gt.prev)return it;if(St&&(gt=function L(r,h,d,v){var _,M,O,W=[];for(_=0,M=h.length;_<M;_++)(O=B(r,h[_]*v,_<M-1?h[_+1]*v:r.length,v,!1))===O.next&&(O.steiner=!0),W.push(rt(O));for(W.sort(V),_=0;_<W.length;_++)d=C(d=D(W[_],d),d.next);return d}(r,h,gt,d)),r.length>80*d){v=M=r[0],_=O=r[1];for(var ot=d;ot<Tt;ot+=d)(W=r[ot])<v&&(v=W),(nt=r[ot+1])<_&&(_=nt),W>M&&(M=W),nt>O&&(O=nt);yt=0!==(yt=Math.max(M-v,O-_))?1/yt:0}return U(gt,it,d,v,_,yt),it}function B(r,h,d,v,_){var M,O;if(_===$t(r,h,d,v)>0)for(M=h;M<d;M+=v)O=Wt(M,r[M],r[M+1],O);else for(M=d-v;M>=h;M-=v)O=Wt(M,r[M],r[M+1],O);if(O&&pt(O,O.next)){var W=O.next;ft(O),O=W}return O}function C(r,h){if(!r)return r;h||(h=r);var d,v=r;do{if(d=!1,v.steiner||!pt(v,v.next)&&0!==st(v.prev,v,v.next))v=v.next;else{var _=v.prev;if(ft(v),(v=h=_)===v.next)break;d=!0}}while(d||v!==h);return h}function U(r,h,d,v,_,M,O){if(r){!O&&M&&function I(r,h,d,v){var _=r;do{null===_.z&&(_.z=X(_.x,_.y,h,d,v)),_.prevZ=_.prev,_.nextZ=_.next,_=_.next}while(_!==r);_.prevZ.nextZ=null,_.prevZ=null,function $(r){var h,d,v,_,M,O,W,nt,yt=1;do{for(d=r,r=null,M=null,O=0;d;){for(O++,v=d,W=0,h=0;h<yt&&(W++,v=v.nextZ);h++);for(nt=yt;W>0||nt>0&&v;)0!==W&&(0===nt||!v||d.z<=v.z)?(_=d,d=d.nextZ,W--):(_=v,v=v.nextZ,nt--),M?M.nextZ=_:r=_,_.prevZ=M,M=_;d=v}M.nextZ=null,yt*=2}while(O>1)}(_)}(r,v,_,M);for(var W,nt,yt=r;r.prev!==r.next;)if(W=r.prev,nt=r.next,M?S(r,v,_,M):F(r))h.push(W.i/d),h.push(r.i/d),h.push(nt.i/d),ft(r),r=nt.next,yt=nt.next;else if((r=nt)===yt){O?1===O?U(r=Q(C(r),h,d),h,d,v,_,M,2):2===O&&A(r,h,d,v,_,M):U(C(r),h,d,v,_,M,1);break}}}function F(r){var h=r.prev,d=r,v=r.next;if(st(h,d,v)>=0)return!1;for(var _=r.next.next;_!==r.prev;){if(mt(h.x,h.y,d.x,d.y,v.x,v.y,_.x,_.y)&&st(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function S(r,h,d,v){var _=r.prev,M=r,O=r.next;if(st(_,M,O)>=0)return!1;for(var yt=_.x>M.x?_.x>O.x?_.x:O.x:M.x>O.x?M.x:O.x,St=_.y>M.y?_.y>O.y?_.y:O.y:M.y>O.y?M.y:O.y,Tt=X(_.x<M.x?_.x<O.x?_.x:O.x:M.x<O.x?M.x:O.x,_.y<M.y?_.y<O.y?_.y:O.y:M.y<O.y?M.y:O.y,h,d,v),gt=X(yt,St,h,d,v),it=r.prevZ,ot=r.nextZ;it&&it.z>=Tt&&ot&&ot.z<=gt;){if(it!==r.prev&&it!==r.next&&mt(_.x,_.y,M.x,M.y,O.x,O.y,it.x,it.y)&&st(it.prev,it,it.next)>=0||(it=it.prevZ,ot!==r.prev&&ot!==r.next&&mt(_.x,_.y,M.x,M.y,O.x,O.y,ot.x,ot.y)&&st(ot.prev,ot,ot.next)>=0))return!1;ot=ot.nextZ}for(;it&&it.z>=Tt;){if(it!==r.prev&&it!==r.next&&mt(_.x,_.y,M.x,M.y,O.x,O.y,it.x,it.y)&&st(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ot&&ot.z<=gt;){if(ot!==r.prev&&ot!==r.next&&mt(_.x,_.y,M.x,M.y,O.x,O.y,ot.x,ot.y)&&st(ot.prev,ot,ot.next)>=0)return!1;ot=ot.nextZ}return!0}function Q(r,h,d){var v=r;do{var _=v.prev,M=v.next.next;!pt(_,M)&&Dt(_,v,v.next,M)&&Rt(_,M)&&Rt(M,_)&&(h.push(_.i/d),h.push(v.i/d),h.push(M.i/d),ft(v),ft(v.next),v=r=M),v=v.next}while(v!==r);return C(v)}function A(r,h,d,v,_,M){var O=r;do{for(var W=O.next.next;W!==O.prev;){if(O.i!==W.i&&Mt(O,W)){var nt=Et(O,W);return O=C(O,O.next),nt=C(nt,nt.next),U(O,h,d,v,_,M),void U(nt,h,d,v,_,M)}W=W.next}O=O.next}while(O!==r)}function V(r,h){return r.x-h.x}function x(r){if(r.next.prev===r)return r;let h=r;for(;;){const d=h.next;if(d.prev===h||d===h||d===r)break;h=d}return h}function D(r,h){var d=function K(r,h){var d,v=h,_=r.x,M=r.y,O=-1/0;do{if(M<=v.y&&M>=v.next.y&&v.next.y!==v.y){var W=v.x+(M-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(W<=_&&W>O){if(O=W,W===_){if(M===v.y)return v;if(M===v.next.y)return v.next}d=v.x<v.next.x?v:v.next}}v=v.next}while(v!==h);if(!d)return null;if(_===O)return d;var nt,yt=d,St=d.x,Tt=d.y,gt=1/0;v=d;do{_>=v.x&&v.x>=St&&_!==v.x&&mt(M<Tt?_:O,M,St,Tt,M<Tt?O:_,M,v.x,v.y)&&(nt=Math.abs(M-v.y)/(_-v.x),Rt(v,r)&&(nt<gt||nt===gt&&(v.x>d.x||v.x===d.x&&et(d,v)))&&(d=v,gt=nt)),v=v.next}while(v!==yt);return d}(r,h);if(!d)return h;var v=Et(d,r),_=C(d,d.next);let M=x(v);return C(M,M.next),_=x(_),x(h===d?_:h)}function et(r,h){return st(r.prev,r,h.prev)<0&&st(h.next,r,r.next)<0}function X(r,h,d,v,_){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-d)*_)|r<<8))|r<<4))|r<<2))|r<<1))|(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-v)*_)|h<<8))|h<<4))|h<<2))|h<<1))<<1}function rt(r){var h=r,d=r;do{(h.x<d.x||h.x===d.x&&h.y<d.y)&&(d=h),h=h.next}while(h!==r);return d}function mt(r,h,d,v,_,M,O,W){return(_-O)*(h-W)-(r-O)*(M-W)>=0&&(r-O)*(v-W)-(d-O)*(h-W)>=0&&(d-O)*(M-W)-(_-O)*(v-W)>=0}function Mt(r,h){return r.next.i!==h.i&&r.prev.i!==h.i&&!function ut(r,h){var d=r;do{if(d.i!==r.i&&d.next.i!==r.i&&d.i!==h.i&&d.next.i!==h.i&&Dt(d,d.next,r,h))return!0;d=d.next}while(d!==r);return!1}(r,h)&&(Rt(r,h)&&Rt(h,r)&&function Ut(r,h){var d=r,v=!1,_=(r.x+h.x)/2,M=(r.y+h.y)/2;do{d.y>M!=d.next.y>M&&d.next.y!==d.y&&_<(d.next.x-d.x)*(M-d.y)/(d.next.y-d.y)+d.x&&(v=!v),d=d.next}while(d!==r);return v}(r,h)&&(st(r.prev,r,h.prev)||st(r,h.prev,h))||pt(r,h)&&st(r.prev,r,r.next)>0&&st(h.prev,h,h.next)>0)}function st(r,h,d){return(h.y-r.y)*(d.x-h.x)-(h.x-r.x)*(d.y-h.y)}function pt(r,h){return r.x===h.x&&r.y===h.y}function Dt(r,h,d,v){var _=k(st(r,h,d)),M=k(st(r,h,v)),O=k(st(d,v,r)),W=k(st(d,v,h));return _!==M&&O!==W||!(0!==_||!ht(r,d,h))||!(0!==M||!ht(r,v,h))||!(0!==O||!ht(d,r,v))||!(0!==W||!ht(d,h,v))}function ht(r,h,d){return h.x<=Math.max(r.x,d.x)&&h.x>=Math.min(r.x,d.x)&&h.y<=Math.max(r.y,d.y)&&h.y>=Math.min(r.y,d.y)}function k(r){return r>0?1:r<0?-1:0}function Rt(r,h){return st(r.prev,r,r.next)<0?st(r,h,r.next)>=0&&st(r,r.prev,h)>=0:st(r,h,r.prev)<0||st(r,r.next,h)<0}function Et(r,h){var d=new Jt(r.i,r.x,r.y),v=new Jt(h.i,h.x,h.y),_=r.next,M=h.prev;return r.next=h,h.prev=r,d.next=_,_.prev=d,v.next=d,d.prev=v,M.next=v,v.prev=M,v}function Wt(r,h,d,v){var _=new Jt(r,h,d);return v?(_.next=v.next,_.prev=v,v.next.prev=_,v.next=_):(_.prev=_,_.next=_),_}function ft(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Jt(r,h,d){this.i=r,this.x=h,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $t(r,h,d,v){for(var _=0,M=h,O=d-v;M<d;M+=v)_+=(r[O]-r[M])*(r[M+1]+r[O+1]),O=M;return _}return N.deviation=function(r,h,d,v){var _=h&&h.length,O=Math.abs($t(r,0,_?h[0]*d:r.length,d));if(_)for(var W=0,nt=h.length;W<nt;W++)O-=Math.abs($t(r,h[W]*d,W<nt-1?h[W+1]*d:r.length,d));var Tt=0;for(W=0;W<v.length;W+=3){var gt=v[W]*d,it=v[W+1]*d,ot=v[W+2]*d;Tt+=Math.abs((r[gt]-r[ot])*(r[it+1]-r[gt+1])-(r[gt]-r[it])*(r[ot+1]-r[gt+1]))}return 0===O&&0===Tt?0:Math.abs((Tt-O)/O)},N.flatten=function(r){for(var h=r[0][0].length,d={vertices:[],holes:[],dimensions:h},v=0,_=0;_<r.length;_++){for(var M=0;M<r[_].length;M++)for(var O=0;O<h;O++)d.vertices.push(r[_][M][O]);_>0&&d.holes.push(v+=r[_-1].length)}return d},N}())&&(G.exports=Y);const tt=(0,R.g)(q.exports)},58864:(Pt,ct,c)=>{c.d(ct,{A:()=>Cr});var R=c(10467),G=c(8189),J=c(23159),Y=c(5922),q=c(55098),tt=c(35150),N=c(64261),B=c(56492),C=c(48900),U=c(85211),Q=(c(3248),c(40707),c(76576)),A=c(25866),L=c(28067),V=c(68643),x=c(13303),D=c(55861),K=c(63842),et=c(86507);const rt="Expected location to be a Point instance";class mt extends Y.A{constructor(){super("invalid-input:location",rt)}}var Mt=c(38352),st=c(58315),pt=c(36812),Dt=c(39465),ht=c(78559),k=c(92405),ut=c(41510),Rt=c(15268),Ut=c(23653),Et=c(83034),Wt=c(38118),Jt=(c(21152),c(69287)),$t=c(82663),r=c(28714),h=c(22515);c(83346),c(98176),c(21674),c(40972);const nt=(0,h.vt)();function qt(t,e,s,i,u,y,E){u*=3;for(let T=0;T<y;++T){const j=t[e];i[u++]=j[0],i[u++]=j[1],i[u++]=E?j[2]:0,e+=s}return u/3}function Ne(t,e,s){if(e){const u=function W(t,e,s){const i=function O(t,e,s,i){const u=Array.isArray(e[0])?(E,T)=>e[E][T]:(E,T)=>e[3*E+T],y=i?(0,$t.GA)(i)/(0,$t.G9)(i):1;return(0,h.lU)(t,(E,T)=>(0,r.s)(E,u(T,0)*y,u(T,1)*y,u(T,2)),s)}(nt,t,e,s)?(0,h.Qj)(nt):[0,0,1];return Math.abs(i[2])>Math.cos((0,Jt.kU)(80))?ut._.Z:Math.abs(i[1])>Math.abs(i[0])?ut._.Y:ut._.X}(t,t.length-1,s);if(u===ut._.X)return!(0,Rt.$3)(t,ut._.Y,ut._.Z);if(u===ut._.Y)return!(0,Rt.$3)(t,ut._.X,ut._.Z)}return!(0,Rt.$3)(t,ut._.X,ut._.Y)}var te,t;(t=te||(te={}))[t.NONE=0]="NONE",t[t.CCW_IS_HOLE=1]="CCW_IS_HOLE";var se=c(2296),Qt=c(99750);let ie=null;function me(t){if(0===t.length)return se.v_;const e=(0,se.vt)([Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY]);return(0,se.Hq)(e,t),e}function ge(t,e){const[s,i,u,y,E,T]=me(t);return new L.A({xmin:s,ymin:i,zmin:u,xmax:y,ymax:E,zmax:T,spatialReference:e})}var Ct=c(16590),ae=c(1490);const Xt="esri.geometry.support.meshUtils.centerAt";const _e=(0,A.vt)(),ye=(0,A.vt)(),Qe=(0,A.vt)();var xe=c(45272);function le(){return le=(0,R.A)(function*(t,e,s){const{source:i}=e,{loadGLTFMesh:u}=yield(0,B.qr)(Promise.all([c.e(8295),c.e(7080)]).then(c.bind(c,7080)),s),y=yield function qe(t,e){return ce.apply(this,arguments)}(i,s);(0,B.Te)(s);const E=u(new x.A({x:0,y:0,z:0,spatialReference:t.spatialReference}),y.url,{resolveFile:ke(y),signal:null==s?void 0:s.signal,expectedType:y.type});E.then(()=>y.dispose(),()=>y.dispose());const{vertexAttributes:T,components:j}=yield E;t.vertexAttributes=T,t.components=j}),le.apply(this,arguments)}function ke(t){const e=(0,xe.nM)(t.url);return s=>{var i;const u=(0,xe.V1)(s,e,e),y=u?u.replace(/^ *\.\//,""):null;return null!==(i=y?t.files.get(y):null)&&void 0!==i?i:s}}function ce(){return ce=(0,R.A)(function*(t,e){if(Array.isArray(t)){if(!t.length)throw new Y.A("mesh-load-external:missing-assets","There must be at least one file to load");return t[0]instanceof File?function er(t){return Te(t.map(e=>({name:e.name,mimeType:e.type,source:Ae(e)})))}(t):function rr(t,e){return pe.apply(this,arguments)}(t,e)}return Ae(t)}),ce.apply(this,arguments)}function ue(){return ue=(0,R.A)(function*(t,e){const{parts:s,assetMimeType:i,assetName:u}=t;if(1===s.length)return new Zt(s[0].partUrl);const y=yield t.toBlob(e);return(0,B.Te)(e),Zt.fromBlob(y,Oe(u,i))}),ue.apply(this,arguments)}function Ae(t){return Zt.fromBlob(t,Oe(t.name,t.type))}function pe(){return pe=(0,R.A)(function*(t,e){const s=yield(0,B.nA)(t.map(function(){var i=(0,R.A)(function*(u){const y=yield function tr(t,e){return ue.apply(this,arguments)}(u);return(0,B.Te)(e),{name:u.assetName,mimeType:u.assetMimeType,source:y}});return function(u){return i.apply(this,arguments)}}()));if((0,B.G4)(e))throw s.forEach(i=>i.source.dispose()),(0,B.NK)();return Te(s)}),pe.apply(this,arguments)}const Me=/^model\/gltf\+json$/,Ee=/^model\/gltf-binary$/,he=/\.gltf$/i,nr=/\.glb$/i;function Te(t){const e=new Map;let s,i=null;for(const{name:u,mimeType:y,source:E}of t)null===i&&(Me.test(y)||he.test(u)?(i=E.url,s="gltf"):(Ee.test(y)||nr.test(u))&&(i=E.url,s="glb")),e.set(u,E.url),E.files.forEach((T,j)=>e.set(j,T));if(null==i)throw new Y.A("mesh-load-external:missing-files","Missing files to load external mesh source");return new Zt(i,()=>t.forEach(({source:u})=>u.dispose()),e,s)}class Zt{constructor(e,s=(()=>{}),i=new Map,u){this.url=e,this.dispose=s,this.files=i,this.type=u}static fromBlob(e,s){const i=URL.createObjectURL(e);return new Zt(i,()=>URL.revokeObjectURL(i),void 0,s)}}function Oe(t,e){return Me.test(e)||he.test(t)?"gltf":Ee.test(e)||he.test(t)?"glb":void 0}var or=c(90660),sr=c(31178),ee=c(33019);let Bt=class extends or.P{constructor(){super(),this.externalSources=new sr.A,this._explicitDisplaySource=null,this.addHandles((0,C.on)(()=>this.externalSources,"after-remove",({item:t})=>{t===this._explicitDisplaySource&&(this._explicitDisplaySource=null)},{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){var t;return null!==(t=this._explicitDisplaySource)&&void 0!==t?t:this._implicitDisplaySource}set displaySource(t){if(null!=t&&!(0,ee.yr)(t))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=t,t&&this.externalSources.every(e=>!(0,ee.in)(e,t))&&this.externalSources.add(t)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(t){return this.externalSources.items.filter(e=>(0,ee.eN)(e,t))}get _implicitDisplaySource(){return this.externalSources.find(ee.yr)}};(0,G._)([(0,U.MZ)()],Bt.prototype,"externalSources",void 0),(0,G._)([(0,U.MZ)()],Bt.prototype,"displaySource",null),(0,G._)([(0,U.MZ)()],Bt.prototype,"_implicitDisplaySource",null),(0,G._)([(0,U.MZ)()],Bt.prototype,"_explicitDisplaySource",void 0),Bt=(0,G._)([(0,Q.$)("esri.geometry.support.meshUtils.Metadata")],Bt);var De=c(32954);const kt={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function re(t,e,s){t.isPlane||function hr(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5}(t),function dr(t,e){if(null!=e){Kt[0]=e[0],Kt[4]=e[1],Kt[8]=e[2];for(let s=0;s<t.position.length;s+=3){for(let i=0;i<3;i++)vt[i]=t.position[s+i];(0,r.t)(vt,vt,Kt);for(let i=0;i<3;i++)t.position[s+i]=vt[i]}if(e[0]!==e[1]||e[1]!==e[2]){Kt[0]=1/e[0],Kt[4]=1/e[1],Kt[8]=1/e[2];for(let s=0;s<t.normal.length;s+=3){for(let i=0;i<3;i++)vt[i]=t.normal[s+i];(0,r.t)(vt,vt,Kt),(0,r.n)(vt,vt);for(let i=0;i<3;i++)t.normal[s+i]=vt[i]}}}}(t,function fr(t,e,s){const i=(0,Qt.getUnitScale)(e,s);if(null==t&&1===i)return null;if(null==t)return[i,i,i];if("number"==typeof t){const u=t*i;return[u,u,u]}return[null!=t.width?t.width*i:i,null!=t.depth?t.depth*i:i,null!=t.height?t.height*i:i]}(null==s?void 0:s.size,null==s?void 0:s.unit,e.spatialReference));const{vertexAttributes:i,vertexSpace:u,transform:y}=(0,Qt.georeferenceByTransform)(t,e,{vertexSpace:null==s?void 0:s.vertexSpace,geographic:null==s?void 0:s.geographic});return{vertexAttributes:new Dt.H({...i,uv:t.uv}),vertexSpace:u,transform:y,components:[new et.A({faces:t.faces,material:(null==s?void 0:s.material)||null})],spatialReference:e.spatialReference}}const vr={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},mr={south:0,east:1,north:2,west:3,up:4,down:5},vt=(0,A.vt)(),Kt=(0,De.vt)();var gr=c(31610),jt=c(92771),ne=c(62789),_r=c(19890),Pe=c(14214),fe=c(65580),Re=c(37605),Lt=c(30429);function Ce(t,e,{vertexSpace:s,spatialReference:i}){if("georeferenced"===s.type){const w=t;if(!(0,Ct.g)(e,w,i))return!1;const{origin:P}=s;return(0,r.f)(t,w,P),!0}const u=(0,fe.lO)(i),y=t;if(!(0,Ct.g)(e,y,u))return!1;const{origin:E}=s,T=je;if(!(0,Re.l)(i,E,T,u))return!1;const j=(0,jt.B8)(je,T);return null!=j&&((0,r.e)(t,y,j),!0)}const je=(0,ne.vt)(),de="esri.geometry.support.meshUtils.rotate";function zt(t,e,s,i=A.uY){if(null!=t){(0,jt.$0)(oe,(0,K.$I)(e),(0,K.yo)(e));for(let u=0;u<t.length;u+=s){for(let y=0;y<3;y++)Vt[y]=t[u+y]-i[y];(0,r.e)(Vt,Vt,oe);for(let y=0;y<3;y++)t[u+y]=Vt[y]+i[y]}}}const Vt=(0,A.vt)(),Le=(0,ne.vt)(),Ie=(0,K.vt)(),oe=(0,ne.vt)(),Ue=(0,De.vt)(),Se=(0,A.vt)(),we=(0,Pe.vt)(),ve="esri.geometry.support.meshUtils.scale";function be(t,e,s=A.uY){if(t)for(let i=0;i<t.length;i+=3){for(let u=0;u<3;u++)Gt[u]=t[i+u]-s[u];(0,r.h)(Gt,Gt,e);for(let u=0;u<3;u++)t[i+u]=Gt[u]+s[u]}}const Gt=(0,A.vt)(),Pr=(0,A.vt)(),We=(0,ne.vt)(),Be=(0,A.vt)();var It;const Ke="esri.geometry.Mesh";function wt(){return tt.A.getLogger(Ke)}const Rr={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:Mt.A,local:st.A}};let At=It=class extends(q.A.LoadableMixin((0,N.g)(V.A))){constructor(t){super(t),this.components=null,this.vertexSpace=new Mt.A,this.transform=null,this.metadata=new Bt,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new Dt.H,this.type="mesh"}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.addHandles((0,C.wB)(()=>{var t;return{vertexAttributes:this.vertexAttributes,components:null===(t=this.components)||void 0===t?void 0:t.map(e=>e.clone())}},()=>this._clearSources(),{once:!0,sync:!0}))})}get hasExtent(){var t;return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=(null===(t=this.metadata.displaySource)||void 0===t?void 0:t.extent)}get _transformedExtent(){const{components:t,spatialReference:e,vertexAttributes:s,vertexSpace:i}=this,u=s.position;if(0===u.length||t&&0===t.length)return new L.A({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:e});if((0,ht.Hq)(i)){const{_untransformedBounds:y,transform:E}=this;return function He([t,e,s,i,u,y],E,T,j){var w;null!==(w=ie)&&void 0!==w||(ie=new Float64Array(24));const P=ie;return P[0]=t,P[1]=e,P[2]=s,P[3]=t,P[4]=u,P[5]=s,P[6]=i,P[7]=u,P[8]=s,P[9]=i,P[10]=e,P[11]=s,P[12]=t,P[13]=e,P[14]=y,P[15]=t,P[16]=u,P[17]=y,P[18]=i,P[19]=u,P[20]=y,P[21]=i,P[22]=e,P[23]=y,(0,Qt.project)({positions:P,transform:E,vertexSpace:T,inSpatialReference:j,outSpatialReference:j,outPositions:P}),ge(P,j)}(y,E,i,e)}return ge(u,e)}get _untransformedBounds(){return me(this.vertexAttributes.position)}get anchor(){const t=(0,ht.MW)(this.vertexSpace,this.spatialReference);if(null!=t)return t;const{center:e,zmin:s}=this._transformedExtent;return new x.A({x:e.x,y:e.y,z:s,spatialReference:this.spatialReference})}get origin(){const t=(0,ht.MW)(this.vertexSpace,this.spatialReference);return null!=t?t:this._transformedExtent.center}get extent(){var t;return this.loaded||null==(null===(t=this.metadata)||void 0===t||null===(t=t.displaySource)||void 0===t?void 0:t.extent)?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(t){this._checkIfLoaded("addComponent()")&&(this.components||(this.components=[]),this.components.push(et.A.from(t)),this.notifyChange("components"))}removeComponent(t){if(this._checkIfLoaded("removeComponent()")){if(this.components){const e=this.components.indexOf(t);if(-1!==e)return this.components.splice(e,1),void this.notifyChange("components")}wt().error("removeComponent()","Provided component is not part of the list of components")}}rotate(t,e,s,i){return(0,K.AU)(t,e,s,$e),function yr(t,e,s){var i,u;if(null===(i=t.vertexAttributes)||void 0===i||!i.position||0===e[3])return;const{spatialReference:y,vertexSpace:E}=t,T=null!==(u=null==s?void 0:s.origin)&&void 0!==u?u:t.anchor,w=(0,ae.QD)(de,E,y,null==s?void 0:s.geographic);(0,ht.CK)(t)?function xr(t,e,s){var i;null!==(i=t.transform)&&void 0!==i||(t.transform=new pt.A);const{vertexSpace:u,transform:y,spatialReference:E}=t,[T,j,w]=u.origin,P=new x.A({x:T,y:j,z:w,spatialReference:E}),H=Vt;if(P.equals(s))(0,r.s)(H,0,0,0);else if(!Ce(H,s,t))return void tt.A.getLogger(de).error(`Failed to project specified origin (wkid:${s.spatialReference.wkid}) to mesh (wkid:${E.wkid}) ${u.type} vertex space. Projection may be possible after calling projection.load().`);(0,_r.x8)(we,(0,K.yo)(e),(0,K.$I)(e));const z=(0,jt.O7)(Le,we,A.uY,A.Un,H),{localMatrix:Z}=y,at=(0,jt.lw)(Le,z,Z);y.scale=(0,jt.IL)((0,A.vt)(),at),(0,jt.hs)(at,at,(0,r.i)(Vt,y.scale)),y.rotation=(0,K.ui)(at),y.translation=(0,jt.sC)((0,A.vt)(),at)}(t,e,T):w?function Ar(t,e,s){const i=t.spatialReference,u=(0,fe.lO)(i),y=Se;(0,Ct.g)(s,y,u)||(0,Ct.g)(t.origin,y,u);const E=t.vertexAttributes.position,T=t.vertexAttributes.normal,j=t.vertexAttributes.tangent,w=new Float64Array(E.length),P=null!=T?new Float32Array(T.length):null,H=null!=j?new Float32Array(j.length):null;(0,Re.l)(u,y,oe,u),(0,gr.z0)(Ue,oe);const z=Ie;(0,r.t)((0,K.yo)(Ie),(0,K.yo)(e),Ue),z[3]=e[3],(0,Lt.gr)(E,i,w),null!=T&&null!=P&&(0,Lt.X4)(T,E,w,i,P),null!=j&&null!=H&&(0,Lt.xA)(j,E,w,i,H),zt(w,z,3,y),(0,Lt.$5)(w,E,i),null!=T&&null!=P&&(zt(P,z,3),(0,Lt.si)(P,E,w,i,T)),null!=j&&null!=H&&(zt(H,z,4),(0,Lt.Mv)(H,E,w,i,j)),t.vertexAttributesChanged()}(t,e,T):function Mr(t,e,s){const i=Se;if(!(0,Ct.g)(s,i,t.spatialReference)){const u=t.origin;i[0]=u.x,i[1]=u.y,i[2]=u.z,tt.A.getLogger(de).error(`Failed to project specified origin (wkid:${s.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}zt(t.vertexAttributes.position,e,3,i),zt(t.vertexAttributes.normal,e,3),zt(t.vertexAttributes.tangent,e,4),t.vertexAttributesChanged()}(t,e,T)}(this,$e,i),this}offset(t,e,s){if(!this._checkIfLoaded("offset()"))return this;const{vertexSpace:i,vertexAttributes:u}=this,y=null==u?void 0:u.position;if(!y)return this;if((0,ht.Hq)(i)){const[E,T,j]=i.origin;i.origin=(0,A.fA)(E+t,T+e,j+s)}else{for(let E=0;E<y.length;E+=3)y[E]+=t,y[E+1]+=e,y[E+2]+=s;this.vertexAttributesChanged()}return this}scale(t,e){return this._checkIfLoaded("scale()")?(function Er(t,e,s){var i,u;if(null===(i=t.vertexAttributes)||void 0===i||!i.position)return;const{vertexSpace:y,spatialReference:E}=t,T=null!==(u=null==s?void 0:s.origin)&&void 0!==u?u:t.anchor,w=(0,ae.QD)(ve,y,E,null==s?void 0:s.geographic);(0,ht.CK)(t)?function Tr(t,e,s){var i;null!==(i=t.transform)&&void 0!==i||(t.transform=new pt.A);const{vertexSpace:u,transform:y,spatialReference:E}=t,[T,j,w]=u.origin,P=new x.A({x:T,y:j,z:w,spatialReference:E}),H=Gt;if(P.equals(s))(0,r.s)(H,0,0,0);else if(!Ce(H,s,t))return void tt.A.getLogger(ve).error(`Failed to project specified origin (wkid:${s.spatialReference.wkid}) to mesh (wkid:${E.wkid}) ${u.type} vertex space. Projection may be possible after calling projection.load().`);const z=(0,r.s)(Pr,e,e,e),Z=(0,jt.O7)(We,Pe.zK,A.uY,z,H),{localMatrix:at}=y,lt=(0,jt.lw)(We,Z,at);y.scale=(0,jt.IL)((0,A.vt)(),lt),(0,jt.hs)(lt,lt,(0,r.i)(Gt,y.scale)),y.rotation=(0,K.ui)(lt),y.translation=(0,jt.sC)((0,A.vt)(),lt)}(t,e,T):w?function Or(t,e,s){const i=t.spatialReference,u=(0,fe.lO)(i),y=Be;(0,Ct.g)(s,y,u)||(0,Ct.g)(t.origin,y,u);const E=t.vertexAttributes.position,T=t.vertexAttributes.normal,j=t.vertexAttributes.tangent,w=new Float64Array(E.length),P=null!=T?new Float32Array(T.length):null,H=null!=j?new Float32Array(j.length):null;(0,Lt.gr)(E,i,w),null!=T&&null!=P&&(0,Lt.X4)(T,E,w,i,P),null!=j&&null!=H&&(0,Lt.xA)(j,E,w,i,H),be(w,e,y),(0,Lt.$5)(w,E,i),null!=T&&null!=P&&(0,Lt.si)(P,E,w,i,T),null!=j&&null!=H&&(0,Lt.Mv)(H,E,w,i,j),t.vertexAttributesChanged()}(t,e,T):function Dr(t,e,s){const i=Be;if(!(0,Ct.g)(s,i,t.spatialReference)){const u=t.origin;i[0]=u.x,i[1]=u.y,i[2]=u.z,tt.A.getLogger(ve).error(`Failed to project specified origin (wkid:${s.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}be(t.vertexAttributes.position,e,i),t.vertexAttributesChanged()}(t,e,T)}(this,t,e),this):this}centerAt(t,e){return this._checkIfLoaded("centerAt()")?(function ze(t,e,s){var i,u;if(null===(i=t.vertexAttributes)||void 0===i||!i.position)return;const{vertexSpace:y}=t,E=null!==(u=null==s?void 0:s.origin)&&void 0!==u?u:t.anchor,j=(0,ae.QD)(Xt,y,E.spatialReference,null==s?void 0:s.geographic);(0,ht.Hq)(y)?function Ve(t,e,s){const{vertexSpace:i}=t;if(!(0,ht.Hq)(i))return;const u=ye,y=_e;if(!(0,Ct.g)(e,y,t.spatialReference))return void tt.A.getLogger(Xt).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!(0,Ct.g)(s,u,t.spatialReference)){const T=t.origin;u[0]=T.x,u[1]=T.y,u[2]=T.z,tt.A.getLogger(Xt).error(`Failed to project specified origin (wkid:${s.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const E=(0,r.f)(Qe,y,u);i.origin=(0,r.g)((0,A.vt)(),i.origin,E)}(t,e,E):j?function Ge(t,e,s){const i=(0,Qt.ungeoreferenceGlobal)(t.vertexAttributes,s),{position:u,normal:y,tangent:E}=(0,Qt.georeferenceGlobal)(i,e,!1);t.vertexAttributes.position=u,t.vertexAttributes.normal=y,t.vertexAttributes.tangent=E,t.vertexAttributesChanged()}(t,e,E):function Ye(t,e,s){const i=ye,u=_e;if((0,Ct.g)(e,u,t.spatialReference)){if(!(0,Ct.g)(s,i,t.spatialReference)){const y=t.origin;i[0]=y.x,i[1]=y.y,i[2]=y.z,tt.A.getLogger(Xt).error(`Failed to project specified origin (wkid:${s.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(function Je(t,e,s){if(t)for(let i=0;i<t.length;i+=3)for(let u=0;u<3;u++)t[i+u]+=e[u]-s[u]})(t.vertexAttributes.position,u,i),t.vertexAttributesChanged()}else tt.A.getLogger(Xt).error(`Failed to project centerAt location (wkid:${e.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(t,e,E)}(this,t,e),this):this}load(t){const{metadata:{displaySource:e}}=this;return e&&this.addResolvingPromise(function Xe(t,e,s){return le.apply(this,arguments)}(this,e,t)),Promise.resolve(this)}addExternalSources(t){this.metadata.externalSources.addMany(t)}updateDisplaySource(t){this.metadata.displaySource=t}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(t){var e,s;let i=null;if(this.components){const y=new Map,E=new Map;i=this.components.map(T=>T.cloneWithDeduplication(y,E))}const u={components:i,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:t,transform:null!==(e=null===(s=this.transform)||void 0===s?void 0:s.clone())&&void 0!==e?e:null,metadata:this.metadata.clone()};return new It(u)}cloneShallow(){return new It({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var e=this;return(0,R.A)(function*(){const s=Promise.all([c.e(2076),c.e(2109)]).then(c.bind(c,62109)),i=e.load(),u=yield Promise.all([s,i]),{toBinaryGLTF:y}=u[0];return y(e,t)})()}get memoryUsage(){let t=0;if(t+=this.vertexAttributes.memoryUsage,null!=this.components)for(const e of this.components)t+=e.memoryUsage;return t}_clearSources(){this.metadata.clearSources()}_checkIfLoaded(t){return!!this.loaded||(wt().error(t,"Mesh must be loaded before applying operations"),!1)}static createBox(t,e){if(!(t instanceof x.A))return wt().error(".createBox()",rt),null;const s=new It(re(function ir(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:s}=vr,i=4*t.length,u=new Float64Array(3*i),y=new Float32Array(3*i),E=new Float32Array(2*i),T=new Uint32Array(2*t.length*3);let j=0,w=0,P=0,H=0;for(let z=0;z<t.length;z++){const Z=t[z],at=j/3;for(const xt of e)T[H++]=at+xt;const lt=Z.corners;for(let xt=0;xt<4;xt++){const bt=lt[xt];let _t=0;E[P++]=.25*s[xt][0]+Z.uvOrigin[0],E[P++]=Z.uvOrigin[1]-.25*s[xt][1];for(let dt=0;dt<3;dt++)0!==Z.axis[dt]?(u[j++]=.5*Z.axis[dt],y[w++]=Z.axis[dt]):(u[j++]=.5*bt[_t++],y[w++]=0)}}return{position:u,normal:y,uv:E,faces:T}}(),t,e));return null!=e&&e.imageFace&&"all"!==e.imageFace?function ar(t,e){const s=t.components[0],i=s.faces,u=mr[e],y=6*u,E=new Array(6),T=new Array(i.length-6);let j=0,w=0;for(let P=0;P<i.length;P++)P>=y&&P<y+6?E[j++]=i[P]:T[w++]=i[P];if(null!=t.vertexAttributes.uv){const P=new Float32Array(t.vertexAttributes.uv),H=4*u*2,z=[0,1,1,1,1,0,0,0];for(let Z=0;Z<z.length;Z++)P[H+Z]=z[Z];t.vertexAttributes.uv=P}return t.components=[new et.A({faces:E,material:s.material}),new et.A({faces:T})],t}(s,e.imageFace):s}static createSphere(t,e){return t instanceof x.A?new It(re(function lr(t=0){const e=Math.round(8*2**t),s=2*e,i=(e-1)*(s+1)+2*s,u=new Float64Array(3*i),y=new Float32Array(3*i),E=new Float32Array(2*i),T=new Uint32Array((e-1)*s*2*3);let j=0,w=0,P=0,H=0;for(let z=0;z<=e;z++){const Z=z/e*Math.PI+.5*Math.PI,at=Math.cos(Z),lt=Math.sin(Z);vt[2]=lt;const xt=0===z||z===e,bt=xt?s-1:s;for(let _t=0;_t<=bt;_t++){const dt=_t/bt*2*Math.PI;vt[0]=-Math.sin(dt)*at,vt[1]=Math.cos(dt)*at;for(let Ot=0;Ot<3;Ot++)u[j]=.5*vt[Ot],y[j]=vt[Ot],++j;E[w++]=(_t+(xt?.5:0))/s,E[w++]=z/e,0!==z&&_t!==s&&(z!==e&&(T[P++]=H,T[P++]=H+1,T[P++]=H-s),1!==z&&(T[P++]=H,T[P++]=H-s,T[P++]=H-s-1)),H++}}return{position:u,normal:y,uv:E,faces:T}}((null==e?void 0:e.densificationFactor)||0),t,e)):(wt().error(".createSphere()",rt),null)}static createCylinder(t,e){return t instanceof x.A?new It(re(function cr(t=0){const s=Math.round(16*2**t),i=4*(s+1)+2*s,u=new Float64Array(3*i),y=new Float32Array(3*i),E=new Float32Array(2*i),T=new Uint32Array(4*s*3);let j=0,w=0,P=0,H=0,z=0;for(let Z=0;Z<=5;Z++){const at=0===Z||5===Z,lt=Z<=1||Z>=4,xt=2===Z||4===Z,bt=at?s-1:s;for(let _t=0;_t<=bt;_t++){const dt=_t/bt*2*Math.PI,Ot=at?0:.5;vt[0]=Ot*Math.sin(dt),vt[1]=Ot*-Math.cos(dt),vt[2]=Z<=2?.5:-.5;for(let Yt=0;Yt<3;Yt++)u[j++]=vt[Yt],y[w++]=lt?2===Yt?Z<=1?1:-1:0:2===Yt?0:vt[Yt]/Ot;E[P++]=(_t+(at?.5:0))/s,E[P++]=Z<=1?1*Z/3:Z<=3?1*(Z-2)/3+1/3:1*(Z-4)/3+2/3,xt||0===Z||_t===s||(5!==Z&&(T[H++]=z,T[H++]=z+1,T[H++]=z-s),1!==Z&&(T[H++]=z,T[H++]=z-s,T[H++]=z-s-1)),z++}}return{position:u,normal:y,uv:E,faces:T}}((null==e?void 0:e.densificationFactor)||0),t,e)):(wt().error(".createCylinder()",rt),null)}static createPlane(t,e){var s;if(!(t instanceof x.A))return wt().error(".createPlane()",rt),null;const i=null!==(s=null==e?void 0:e.facing)&&void 0!==s?s:"up",u=function ur(t,e){const s="number"==typeof e?e:null!=e?e.width:1,i="number"==typeof e?e:null!=e?e.height:1;switch(t){case"up":case"down":return{width:s,depth:i};case"north":case"south":return{width:s,height:i};case"east":case"west":return{depth:s,height:i}}}(i,null==e?void 0:e.size);return new It(re(function pr(t){const e=kt.facingAxisOrderSwap[t],s=kt.position,i=kt.normal,u=new Float64Array(s.length),y=new Float32Array(i.length);let E=0;for(let T=0;T<4;T++){const j=E;for(let w=0;w<3;w++){const P=e[w],H=Math.abs(P)-1,z=P>=0?1:-1;u[E]=s[j+H]*z,y[E]=i[j+H]*z,E++}}return{position:u,normal:y,uv:new Float32Array(kt.uv),faces:new Uint32Array(kt.faces),isPlane:!0}}(i),t,{...e,size:u}))}static createFromPolygon(t,e){var s;if(!(t instanceof D.A))return wt().error(".createFromPolygon()","Expected polygon to be a Polygon instance"),null;const i=function ot(t){const e=function Fe(t,e,s,i){const u=t.length,y=new Array(u),E=new Array(u),T=new Array(u);let j=0,w=0,P=0,H=0;for(let at=0;at<u;++at)H+=t[at].length;const z=(0,Ut.jh)(3*H);let Z=0;for(let at=u-1;at>=0;at--){const lt=t[at],xt=s===te.CCW_IS_HOLE&&Ne(lt,e,i);if(xt&&1!==u)y[j++]=lt;else{let bt=lt.length;for(let dt=0;dt<j;++dt)bt+=y[dt].length;const _t={index:Z,pathLengths:new Array(j+1),count:bt,holeIndices:new Array(j)};_t.pathLengths[0]=lt.length,lt.length>0&&(T[P++]={index:Z,count:lt.length}),Z=xt?qt(lt,lt.length-1,-1,z,Z,lt.length,e):qt(lt,0,1,z,Z,lt.length,e);for(let dt=0;dt<j;++dt){const Ot=y[dt];_t.holeIndices[dt]=Z,_t.pathLengths[dt+1]=Ot.length,Ot.length>0&&(T[P++]={index:Z,count:Ot.length}),Z=qt(Ot,0,1,z,Z,Ot.length,e)}j=0,_t.count>0&&(E[w++]=_t)}}for(let at=0;at<j;++at){const lt=y[at];lt.length>0&&(T[P++]={index:Z,count:lt.length}),Z=qt(lt,0,1,z,Z,lt.length,e)}return E.length=w,T.length=P,{position:z,polygons:E,outlines:T}}(t.rings,t.hasZ,te.CCW_IS_HOLE,t.spatialReference),s=new Array;let i=0,u=0;for(const T of e.polygons){const w=T.index,P=(0,Ut.l5)(e.position,3*w,3*T.count),H=T.holeIndices.map(Z=>Z-w),z=(0,Et.Dg)((0,k.e)(P,H,3));s.push({position:P,faces:z}),i+=P.length,u+=z.length}const y=function Ze(t,e,s){if(1===t.length)return t[0];const i=(0,Ut.jh)(e),u=new Array(s);let y=0,E=0,T=0;for(const j of t){for(let w=0;w<j.position.length;w++)i[y++]=j.position[w];for(const w of j.faces)u[E++]=w+T;T=y/3}return{position:i,faces:(0,Et.Dg)(u)}}(s,i,u),E=Array.isArray(y.position)?(0,Wt.b)(y.position,3,{originalIndices:y.faces}):(0,Wt.b)(y.position.buffer,6,{originalIndices:y.faces});return y.position=(0,Ut.xm)(new Float64Array(E.buffer)),y.faces=E.indices,y}(t);return new It({vertexAttributes:new Dt.H({position:i.position}),components:[new et.A({faces:i.faces,shading:"flat",material:null!==(s=null==e?void 0:e.material)&&void 0!==s?s:null})],spatialReference:t.spatialReference,vertexSpace:new Mt.A})}static createFromGLTF(t,e,s){return(0,R.A)(function*(){if(!(t instanceof x.A)){const u=new mt;throw wt().error(".createfromGLTF()",u.message),u}const{loadGLTFMesh:i}=yield(0,B.qr)(Promise.all([c.e(8295),c.e(7080)]).then(c.bind(c,7080)),s);return new It(yield i(t,e,s))})()}static createFromFiles(t,e,s){return(0,R.A)(function*(){if((0,J.eO)(wt(),"`Mesh.createFromFiles` is deprecated in favor of 'SceneLayer.convertMesh'",{replacement:"SceneLayer.convertMesh",version:"4.29"}),!(t instanceof x.A)){const u=new mt;throw(u=>{wt().error(".createFromFiles()",u.message)})(u),u}if(null==s||!s.layer)throw new Y.A("invalid:no-layer","SceneLayer required for file to mesh conversion.");return s.layer.convertMesh(e,{location:t,...s})})()}static createWithExternalSource(t,e,s){var i,u,y,E;const T=null!==(i=null==s?void 0:s.extent)&&void 0!==i?i:null,{x:j,y:w,z:P,spatialReference:H}=t,z=null!==(u=null==s||null===(y=s.transform)||void 0===y?void 0:y.clone())&&void 0!==u?u:new pt.A,Z=(0,A.fA)(j,w,null!=P?P:0),at=(0,ht.by)(null!==(E=null==s?void 0:s.vertexSpace)&&void 0!==E?E:(0,ht.Uj)(H),Z),lt={source:e,extent:T},xt=new Bt;return xt.externalSources.push(lt),new It({metadata:xt,transform:z,vertexSpace:at,spatialReference:H})}static createIncomplete(t,e){var s,i,u;const{x:y,y:E,z:T,spatialReference:j}=t,w=null!==(s=null==e||null===(i=e.transform)||void 0===i?void 0:i.clone())&&void 0!==s?s:new pt.A,P=(0,A.fA)(y,E,null!=T?T:0),H=(0,ht.by)(null!==(u=null==e?void 0:e.vertexSpace)&&void 0!==u?u:(0,ht.Uj)(j),P),z=new It({transform:w,vertexSpace:H,spatialReference:j});return z.addResolvingPromise(Promise.reject(new Y.A("mesh-incomplete","Mesh resources are not complete"))),z}};(0,G._)([(0,U.MZ)({type:[et.A],json:{write:!0}})],At.prototype,"components",void 0),(0,G._)([(0,U.MZ)({nonNullable:!0,types:Rr,constructOnly:!0,json:{write:!0}})],At.prototype,"vertexSpace",void 0),(0,G._)([(0,U.MZ)({type:pt.A,json:{write:!0}})],At.prototype,"transform",void 0),(0,G._)([(0,U.MZ)({constructOnly:!0})],At.prototype,"metadata",void 0),(0,G._)([(0,U.MZ)()],At.prototype,"hasExtent",null),(0,G._)([(0,U.MZ)()],At.prototype,"_transformedExtent",null),(0,G._)([(0,U.MZ)()],At.prototype,"_untransformedBounds",null),(0,G._)([(0,U.MZ)()],At.prototype,"anchor",null),(0,G._)([(0,U.MZ)()],At.prototype,"origin",null),(0,G._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],At.prototype,"extent",null),(0,G._)([(0,U.MZ)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],At.prototype,"hasZ",void 0),(0,G._)([(0,U.MZ)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],At.prototype,"hasM",void 0),(0,G._)([(0,U.MZ)({type:Dt.H,nonNullable:!0,json:{write:!0}})],At.prototype,"vertexAttributes",void 0),At=It=(0,G._)([(0,Q.$)(Ke)],At);const $e=(0,K.vt)(),Cr=At},23653:(Pt,ct,c)=>{c.d(ct,{Ns:()=>tt,jh:()=>G,l5:()=>Y,s:()=>q,xm:()=>J});var R=c(79139);function G(N,B=!1){return N<=R.y9?B?new Array(N).fill(0):new Array(N):new Float64Array(N)}function J(N){return((0,R.cy)(N)?N.length:N.byteLength/8)<=R.y9?Array.from(N):new Float64Array(N)}function Y(N,B,C){return Array.isArray(N)?N.slice(B,B+C):N.subarray(B,B+C)}function q(N,B){for(let C=0;C<B.length;++C)N[C]=B[C];return N}function tt(N){return Array.isArray(N)?new Float64Array(N):N}},86507:(Pt,ct,c)=>{c.d(ct,{A:()=>A});var S,R=c(8189),G=c(71065),J=c(77806),Y=c(35150),q=c(85211),tt=c(48669),N=c(76576),B=c(55739),C=c(14891),U=c(73490),F=c(39465);let Q=S=class extends G.oY{static from(L){return(0,B.PZ)(S,L)}constructor(L){super(L),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(L){return(0,F.b)(L,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},Y.A.getLogger(this))}castMaterial(L){return(0,B.PZ)(L&&"object"==typeof L&&("metallic"in L||"roughness"in L||"metallicRoughnessTexture"in L)?U.A:C.A,L)}clone(){return new S({faces:(0,J.o8)(this.faces),shading:this.shading,material:(0,J.o8)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(L,V){const x={faces:(0,J.o8)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(L,V):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new S(x)}get memoryUsage(){let L=0;return null!=this.faces&&(L+=this.faces.byteLength),null!=this.material&&(L+=this.material.memoryUsage),L}};(0,R._)([(0,q.MZ)({json:{write:!0}})],Q.prototype,"faces",void 0),(0,R._)([(0,tt.w)("faces")],Q.prototype,"castFaces",null),(0,R._)([(0,q.MZ)({type:C.A,json:{write:!0}})],Q.prototype,"material",void 0),(0,R._)([(0,tt.w)("material")],Q.prototype,"castMaterial",null),(0,R._)([(0,q.MZ)()],Q.prototype,"name",void 0),(0,R._)([(0,q.MZ)({type:String,json:{write:!0}})],Q.prototype,"shading",void 0),(0,R._)([(0,q.MZ)({type:Boolean})],Q.prototype,"trustSourceNormals",void 0),Q=S=(0,R._)([(0,N.$)("esri.geometry.support.MeshComponent")],Q);const A=Q},38352:(Pt,ct,c)=>{c.d(ct,{A:()=>F});var R=c(8189),G=c(90660),J=c(71065),Y=c(85211),B=(c(3248),c(35150),c(40707),c(15463)),C=c(76576);let U=class extends((0,G.O)(J.oY)){constructor(S){super(S),this.type="georeferenced",this.origin=null}};(0,R._)([(0,B.e)({georeferenced:"georeferenced"},{readOnly:!0})],U.prototype,"type",void 0),(0,R._)([(0,Y.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],U.prototype,"origin",void 0),U=(0,R._)([(0,C.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],U);const F=U},58315:(Pt,ct,c)=>{c.d(ct,{A:()=>S});var R=c(8189),G=c(90660),J=c(71065),Y=c(85211),B=(c(3248),c(35150),c(40707),c(15463)),C=c(76576),U=c(25866);let F=class extends((0,G.O)(J.oY)){constructor(Q){super(Q),this.type="local",this.origin=(0,U.vt)()}};(0,R._)([(0,B.e)({local:"local"},{readOnly:!0})],F.prototype,"type",void 0),(0,R._)([(0,Y.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],F.prototype,"origin",void 0),F=(0,R._)([(0,C.$)("esri.geometry.support.MeshLocalVertexSpace")],F);const S=F},14891:(Pt,ct,c)=>{c.d(ct,{A:()=>Q});var F,R=c(8189),G=c(68677),J=c(71065),Y=c(85211),B=(c(3248),c(35150),c(40707),c(76576)),C=c(33495),U=c(59723);let S=F=class extends J.oY{constructor(A){super(A),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(A,L){const V=null!=A?A.get(this):null;if(V)return V;const x=new F(this.clonePropertiesWithDeduplication(L));return null!=A&&A.set(this,x),x}clonePropertiesWithDeduplication(A){var L,V,x,D;return{color:null!=this.color?this.color.clone():null,colorTexture:null===(L=this.colorTexture)||void 0===L?void 0:L.cloneWithDeduplication(A),normalTexture:null===(V=this.normalTexture)||void 0===V?void 0:V.cloneWithDeduplication(A),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:null===(x=this.colorTextureTransform)||void 0===x?void 0:x.clone(),normalTextureTransform:null===(D=this.normalTextureTransform)||void 0===D?void 0:D.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let A=0;return A+=null!=this.color?16:0,null!=this.colorTexture&&(A+=this.colorTexture.memoryUsage),A+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(A+=this.normalTexture.memoryUsage),A+=null!=this.normalTextureTransform?20:0,A}};(0,R._)([(0,Y.MZ)({type:G.A,json:{write:!0}})],S.prototype,"color",void 0),(0,R._)([(0,Y.MZ)({type:C.A,json:{write:!0}})],S.prototype,"colorTexture",void 0),(0,R._)([(0,Y.MZ)({type:U.A,json:{write:!0}})],S.prototype,"colorTextureTransform",void 0),(0,R._)([(0,Y.MZ)({type:C.A,json:{write:!0}})],S.prototype,"normalTexture",void 0),(0,R._)([(0,Y.MZ)({type:U.A,json:{write:!0}})],S.prototype,"normalTextureTransform",void 0),(0,R._)([(0,Y.MZ)({nonNullable:!0,json:{write:!0}})],S.prototype,"alphaMode",void 0),(0,R._)([(0,Y.MZ)({nonNullable:!0,json:{write:!0}})],S.prototype,"alphaCutoff",void 0),(0,R._)([(0,Y.MZ)({nonNullable:!0,json:{write:!0}})],S.prototype,"doubleSided",void 0),S=F=(0,R._)([(0,B.$)("esri.geometry.support.MeshMaterial")],S);const Q=S},73490:(Pt,ct,c)=>{c.d(ct,{A:()=>Q});var F,R=c(8189),G=c(68677),J=c(85211),N=(c(3248),c(35150),c(40707),c(76576)),B=c(14891),C=c(33495),U=c(59723);let S=F=class extends B.A{constructor(A){super(A),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(A,L){const V=null!=A?A.get(this):null;if(V)return V;const x=new F(this.clonePropertiesWithDeduplication(L));return null!=A&&A.set(this,x),x}getMemoryUsage(){let A=super.getMemoryUsage();return A+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(A+=this.emissiveTexture.memoryUsage),A+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(A+=this.occlusionTexture.memoryUsage),A+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(A+=this.metallicRoughnessTexture.memoryUsage),A+=null!=this.metallicRoughnessTextureTransform?20:0,A}clonePropertiesWithDeduplication(A){var L,V,x,D,K,et,I;return{...super.clonePropertiesWithDeduplication(A),emissiveColor:null===(L=this.emissiveColor)||void 0===L?void 0:L.clone(),emissiveTexture:null===(V=this.emissiveTexture)||void 0===V?void 0:V.cloneWithDeduplication(A),emissiveTextureTransform:null===(x=this.emissiveTextureTransform)||void 0===x?void 0:x.clone(),occlusionTexture:null===(D=this.occlusionTexture)||void 0===D?void 0:D.cloneWithDeduplication(A),occlusionTextureTransform:null===(K=this.occlusionTextureTransform)||void 0===K?void 0:K.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:null===(et=this.metallicRoughnessTexture)||void 0===et?void 0:et.cloneWithDeduplication(A),metallicRoughnessTextureTransform:null===(I=this.metallicRoughnessTextureTransform)||void 0===I?void 0:I.clone()}}};(0,R._)([(0,J.MZ)({type:G.A,json:{write:!0}})],S.prototype,"emissiveColor",void 0),(0,R._)([(0,J.MZ)({type:C.A,json:{write:!0}})],S.prototype,"emissiveTexture",void 0),(0,R._)([(0,J.MZ)({type:U.A,json:{write:!0}})],S.prototype,"emissiveTextureTransform",void 0),(0,R._)([(0,J.MZ)({type:C.A,json:{write:!0}})],S.prototype,"occlusionTexture",void 0),(0,R._)([(0,J.MZ)({type:U.A,json:{write:!0}})],S.prototype,"occlusionTextureTransform",void 0),(0,R._)([(0,J.MZ)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],S.prototype,"metallic",void 0),(0,R._)([(0,J.MZ)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],S.prototype,"roughness",void 0),(0,R._)([(0,J.MZ)({type:C.A,json:{write:!0}})],S.prototype,"metallicRoughnessTexture",void 0),(0,R._)([(0,J.MZ)({type:U.A,json:{write:!0}})],S.prototype,"metallicRoughnessTextureTransform",void 0),S=F=(0,R._)([(0,N.$)("esri.geometry.support.MeshMaterialMetallicRoughness")],S);const Q=S},33495:(Pt,ct,c)=>{c.d(ct,{A:()=>V});var S,R=c(8189),J=(c(3248),c(48116)),Y=c(71065),q=c(85211),tt=c(55739),B=(c(40707),c(17221)),C=c(76576),U=c(50305),F=c(88135);const Q=new WeakMap;let A=0,L=S=class extends Y.oY{constructor(x){super(x),this.wrap="repeat"}get url(){return this._get("url")||null}set url(x){this._set("url",x),x&&this._set("data",null)}get data(){return this._get("data")||null}set data(x){this._set("data",x),x&&this._set("url",null)}writeData(x,D,K,et){if(x instanceof HTMLImageElement){const I={type:"image-element",src:(0,F.t)(x.src,et),crossOrigin:x.crossOrigin};D[K]=I}else if(x instanceof HTMLCanvasElement){const I=x.getContext("2d").getImageData(0,0,x.width,x.height),$={type:"canvas-element",imageData:this._encodeImageData(I)};D[K]=$}else if(x instanceof HTMLVideoElement){const I={type:"video-element",src:(0,F.t)(x.src,et),autoplay:x.autoplay,loop:x.loop,muted:x.muted,crossOrigin:x.crossOrigin,preload:x.preload};D[K]=I}else if(x instanceof ImageData){const I={type:"image-data",imageData:this._encodeImageData(x)};D[K]=I}}readData(x){switch(x.type){case"image-element":{const D=new Image;return D.src=x.src,D.crossOrigin=x.crossOrigin,D}case"canvas-element":{const D=this._decodeImageData(x.imageData),K=document.createElement("canvas");return K.width=D.width,K.height=D.height,K.getContext("2d").putImageData(D,0,0),K}case"image-data":return this._decodeImageData(x.imageData);case"video-element":{const D=document.createElement("video");return D.src=x.src,D.crossOrigin=x.crossOrigin,D.autoplay=x.autoplay,D.loop=x.loop,D.muted=x.muted,D.preload=x.preload,D}default:return}}get transparent(){const x=this.data,D=this.url;if(x instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(x.getContext("2d").getImageData(0,0,x.width,x.height));if(x instanceof ImageData)return this._imageDataContainsTransparent(x);if(D){const K=D.substr(D.length-4,4).toLowerCase(),et=D.substr(0,15).toLocaleLowerCase();if(".png"===K||"data:image/png;"===et)return!0}return!1}set transparent(x){this._overrideIfSome("transparent",x)}get contentHash(){const x="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",D=(K="")=>`d:${K},t:${this.transparent},w:${x}`;return null!=this.url?D(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?D(this.data.src):(Q.has(this.data)||Q.set(this.data,++A),D(Q.get(this.data))):D()}get memoryUsage(){let x=0;if(x+=null!=this.url?this.url.length:0,null!=this.data){const D=this.data;"data"in D?x+=D.data.byteLength:D instanceof HTMLImageElement?x+=D.naturalWidth*D.naturalHeight*3:D instanceof HTMLCanvasElement&&(x+=D.width*D.height*3)}return x}clone(){const x={url:this.url,data:this.data,wrap:this._cloneWrap()};return new S(x)}cloneWithDeduplication(x){const D=x.get(this);if(D)return D;const K=this.clone();return x.set(this,K),K}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(x){let D="";for(let K=0;K<x.data.length;K++)D+=String.fromCharCode(x.data[K]);return{data:btoa(D),width:x.width,height:x.height}}_decodeImageData(x){const D=atob(x.data),K=new Uint8ClampedArray(D.length);for(let et=0;et<D.length;et++)K[et]=D.charCodeAt(et);return(0,J.eV)(K,x.width,x.height)}_imageDataContainsTransparent(x){for(let D=3;D<x.data.length;D+=4)if(255!==x.data[D])return!0;return!1}static from(x){return"string"==typeof x?new S({url:x}):x instanceof HTMLImageElement||x instanceof HTMLCanvasElement||x instanceof ImageData||x instanceof HTMLVideoElement?new S({data:x}):(0,tt.PZ)(S,x)}};(0,R._)([(0,q.MZ)({type:String,json:{write:F.w}})],L.prototype,"url",null),(0,R._)([(0,q.MZ)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,q.MZ)()],L.prototype,"data",null),(0,R._)([(0,U.K)("data")],L.prototype,"writeData",null),(0,R._)([(0,B.w)("data")],L.prototype,"readData",null),(0,R._)([(0,q.MZ)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],L.prototype,"transparent",null),(0,R._)([(0,q.MZ)({json:{write:!0}})],L.prototype,"wrap",void 0),(0,R._)([(0,q.MZ)({readOnly:!0})],L.prototype,"contentHash",null),L=S=(0,R._)([(0,C.$)("esri.geometry.support.MeshTexture")],L);const V=L},59723:(Pt,ct,c)=>{c.d(ct,{A:()=>U});var R=c(8189),G=c(90660),J=c(71065),Y=c(85211),B=(c(3248),c(35150),c(40707),c(76576));let C=class extends((0,G.O)(J.oY)){constructor(F){super(F),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};(0,R._)([(0,Y.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],C.prototype,"offset",void 0),(0,R._)([(0,Y.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],C.prototype,"rotation",void 0),(0,R._)([(0,Y.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],C.prototype,"scale",void 0),C=(0,R._)([(0,B.$)("esri.geometry.support.MeshTextureTransform")],C);const U=C},39465:(Pt,ct,c)=>{c.d(ct,{H:()=>C,b:()=>F});var B,R=c(8189),G=c(71065),J=c(77806),Y=c(35150),q=c(85211),tt=c(48669),N=c(76576);let C=B=class extends G.oY{constructor(A){super(A),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(A){return F(A,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},Y.A.getLogger(this))}castPosition(A){return A&&A instanceof Float32Array&&Y.A.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),F(A,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},Y.A.getLogger(this))}castUv(A){return F(A,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},Y.A.getLogger(this))}castNormal(A){return F(A,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},Y.A.getLogger(this))}castTangent(A){return F(A,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},Y.A.getLogger(this))}clone(){const A={position:(0,J.o8)(this.position),uv:(0,J.o8)(this.uv),normal:(0,J.o8)(this.normal),tangent:(0,J.o8)(this.tangent),color:(0,J.o8)(this.color)};return new B(A)}clonePositional(){const A={position:(0,J.o8)(this.position),normal:(0,J.o8)(this.normal),tangent:(0,J.o8)(this.tangent),uv:this.uv,color:this.color};return new B(A)}get memoryUsage(){let A=0;return A+=this.position.byteLength,null!=this.uv&&(A+=this.uv.byteLength),null!=this.normal&&(A+=this.normal.byteLength),null!=this.tangent&&(A+=this.tangent.byteLength),null!=this.color&&(A+=this.color.byteLength),A}};function U(A,L,V,x){const{loggerTag:D,stride:K}=L;return A.length%K!=0?(x.error(D,`Invalid array length, expected a multiple of ${K}`),new V([])):A}function F(A,L,V,x,D){if(!A)return A;if(A instanceof L)return U(A,x,L,D);for(const K of V)if(A instanceof K)return U(new L(A),x,L,D);if(Array.isArray(A))return U(new L(A),x,L,D);{const K=V.map(et=>`'${et.name}'`);return D.error(`Failed to set property, expected one of ${K}, but got ${A.constructor.name}`),new L([])}}function S(A,L,V){L[V]=function Q(A){const L=new Array(A.length);for(let V=0;V<A.length;V++)L[V]=A[V];return L}(A)}(0,R._)([(0,q.MZ)({json:{write:S}})],C.prototype,"color",void 0),(0,R._)([(0,tt.w)("color")],C.prototype,"castColor",null),(0,R._)([(0,q.MZ)({nonNullable:!0,json:{write:S}})],C.prototype,"position",void 0),(0,R._)([(0,tt.w)("position")],C.prototype,"castPosition",null),(0,R._)([(0,q.MZ)({json:{write:S}})],C.prototype,"uv",void 0),(0,R._)([(0,tt.w)("uv")],C.prototype,"castUv",null),(0,R._)([(0,q.MZ)({json:{write:S}})],C.prototype,"normal",void 0),(0,R._)([(0,tt.w)("normal")],C.prototype,"castNormal",null),(0,R._)([(0,q.MZ)({json:{write:S}})],C.prototype,"tangent",void 0),(0,R._)([(0,tt.w)("tangent")],C.prototype,"castTangent",null),C=B=(0,R._)([(0,N.$)("esri.geometry.support.MeshVertexAttributes")],C)},33019:(Pt,ct,c)=>{c.d(ct,{Bq:()=>N,Qp:()=>tt,WN:()=>K,dK:()=>et,eN:()=>A,fH:()=>D,in:()=>L,yr:()=>B});var R=c(10467),G=c(89563),J=c(89952),Y=c(56492),q=c(6829);class tt{constructor($,X,rt){this.assetName=$,this.assetMimeType=X,this.parts=rt}equals($){return this===$||this.assetName===$.assetName&&this.assetMimeType===$.assetMimeType&&(0,J.aI)(this.parts,$.parts,(X,rt)=>X.equals(rt))}isOnService($){return this.parts.every(X=>X.isOnService($))}makeHash(){let $="";for(const X of this.parts)$+=X.partHash;return $}toBlob($){var X=this;return(0,R.A)(function*(){const{parts:rt}=X;if(1===rt.length)return rt[0].toBlob($);const mt=yield Promise.all(rt.map(Mt=>Mt.toBlob($)));return(0,Y.Te)($),new Blob(mt)})()}}class N{constructor($,X){this.partUrl=$,this.partHash=X}equals($){return this===$||this.partUrl===$.partUrl&&this.partHash===$.partHash}isOnService($){return this.partUrl.startsWith(`${$.path}/assets/`)}toBlob($){var X=this;return(0,R.A)(function*(){const{data:rt}=yield(0,G.A)(X.partUrl,{responseType:"blob"});return(0,Y.Te)($),rt})()}}function B(I){return function S(I){return!!I&&(Array.isArray(I)?I.some(Q):Q(I))}(null==I?void 0:I.source)}function C(I){return!!Array.isArray(I)&&I.every($=>$ instanceof tt)}const U=/^(model\/gltf\+json)|(model\/gltf-binary)$/,F=/\.(gltf|glb)/i;function Q(I){if(I instanceof File){const{type:$,name:X}=I;return U.test($)||F.test(X)}return U.test(I.assetMimeType)||F.test(I.assetName)}function A(I,$){if(!I)return!1;const{source:X}=I;return function V(I,$){return Array.isArray(I)?I.length>0&&I.every(rt=>x(rt,$)):x(I,$)}(X,$)}function L(I,$){if(I===$)return!0;const{source:X}=I,{source:rt}=$;if(X===rt)return!0;if(C(X)&&C(rt)){if(X.length!==rt.length)return!1;const mt=(pt,Dt)=>pt.assetName<Dt.assetName?-1:pt.assetName>Dt.assetName?1:0,Mt=[...X].sort(mt),st=[...rt].sort(mt);for(let pt=0;pt<Mt.length;++pt)if(!Mt[pt].equals(st[pt]))return!1;return!0}return!1}function x(I,$){return I instanceof tt&&I.isOnService($)}function D(I,$){var X;return I instanceof File?(0,q.rq)(I,$):null!==(X=(0,q.R_)(I.assetMimeType,$))&&void 0!==X?X:(0,q.E1)(I.assetName,$)}function K(I){return Array.isArray(I)?I:[I]}function et(I){return!!I.original}},38118:(Pt,ct,c)=>{c.d(ct,{b:()=>J});var R=c(69287),G=c(83034);function J(B,C,U){var F;const S=Array.isArray(B),Q=S?B.length/C:B.byteLength/(4*C),A=S?B:new Uint32Array(B,0,Q*C),L=null!==(F=null==U?void 0:U.minReduction)&&void 0!==F?F:0,V=(null==U?void 0:U.originalIndices)||null,x=V?V.length:0,D=(null==U?void 0:U.componentOffsets)||null;let K=0;if(D)for(let k=0;k<D.length-1;k++){const ut=D[k+1]-D[k];ut>K&&(K=ut)}else K=Q;const et=Math.floor(1.1*K)+1;(null==N||N.length<2*et)&&(N=new Uint32Array((0,R.cU)(2*et)));for(let k=0;k<2*et;k++)N[k]=0;let I=0;const $=!!D&&!!V,X=$?x:Q;let rt=(0,G.my)(Q);const mt=new Uint32Array(x);let st=0!==L?Math.ceil(7.84*1.96/(L*L)*L*(1-L)):X,pt=1,Dt=D?D[1]:X;for(let k=0;k<X;k++){if(k===st){const ft=1-I/k;if(ft+1.96*Math.sqrt(ft*(1-ft)/k)<L)return null;st*=2}if(k===Dt){for(let ft=0;ft<2*et;ft++)N[ft]=0;if(V)for(let ft=D[pt-1];ft<D[pt];ft++)mt[ft]=rt[V[ft]];Dt=D[++pt]}const ut=$?V[k]:k,Rt=ut*C,Ut=tt(A,Rt,C);let Et=Ut%et,Wt=I;for(;0!==N[2*Et+1];){if(N[2*Et]===Ut){const ft=N[2*Et+1]-1;if(Y(A,Rt,ft*C,C)){Wt=rt[ft];break}}Et++,Et>=et&&(Et-=et)}Wt===I&&(N[2*Et]=Ut,N[2*Et+1]=ut+1,I++),rt[ut]=Wt}if(0!==L&&1-I/Q<L)return null;if($){for(let k=D[pt-1];k<mt.length;k++)mt[k]=rt[V[k]];rt=(0,G.Dg)(mt)}const ht=S?new Array(I):new Uint32Array(I*C);I=0;for(let k=0;k<X;k++)rt[k]===I&&(q(A,($?V[k]:k)*C,ht,I*C,C),I++);if(V&&!$){const k=new Uint32Array(x);for(let ut=0;ut<k.length;ut++)k[ut]=rt[V[ut]];rt=(0,G.Dg)(k)}return{buffer:Array.isArray(ht)?ht:ht.buffer,indices:rt,uniqueCount:I}}function Y(B,C,U,F){for(let S=0;S<F;S++)if(B[C+S]!==B[U+S])return!1;return!0}function q(B,C,U,F,S){for(let Q=0;Q<S;Q++)U[F+Q]=B[C+Q]}function tt(B,C,U){let F=0;for(let S=0;S<U;S++)F=B[C+S]+F|0,F=F+(F<<11)+(F>>>2)|0;return F>>>0}let N=null}}]);