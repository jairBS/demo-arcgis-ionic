"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[564,9927,4098,3258,4314],{33087:(q,Q,o)=>{o.d(Q,{q:()=>S});var f=o(60611);class S{constructor(C,Z){this._storage=new f.F,this.id="",this.name="",this.size=0,this._storage.maxSize=C,this._storage.register(this),Z&&this._storage.registerRemoveFunc("",Z)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(C,Z,b=1){this._storage.put(this,C,Z,b,1)}pop(C){return this._storage.pop(this,C)}get(C){return this._storage.get(this,C)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(C){this._storage.maxSize=C}resetHitRate(){}}},60611:(q,Q,o)=>{o.d(Q,{F:()=>b,Mn:()=>Z});var C,x,f=o(12438);(x=C||(C={}))[x.ALL=0]="ALL",x[x.SOME=1]="SOME";class Z{constructor(i,h,P){this.name=i,this._storage=h,this.id=I+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),P&&(this._storage.registerRemoveFunc(this.id,P),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(i){return this._storage.getSize(this,i)}resetHitRate(){this._hit=this._miss=0}put(i,h,P,E=0){this._storage.put(this,i,h,P,E)}pop(i){const h=this._storage.pop(this,i);return void 0===h?++this._miss:++this._hit,h}get(i){const h=this._storage.get(this,i);return void 0===h?++this._miss:++this._hit,h}peek(i){return this._storage.peek(this,i)}updateSize(i,h,P){this._storage.updateSize(this,i,h,P)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class b{get size(){return this._size}constructor(i=10485760){this._maxSize=i,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new f.A,this._users=new f.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(i){this._users.push(i)}deregister(i){this._users.removeUnordered(i)}registerRemoveFunc(i,h){this._removeFuncs.push([i,h])}deregisterRemoveFunc(i){this._removeFuncs.filterInPlace(h=>h[0]!==i)}get maxSize(){return this._maxSize}set maxSize(i){this._maxSize=Math.max(i,-1),this._checkSize()}getSize(i,h){var P;const E=this._db.get(i.id+h);return null!==(P=null==E?void 0:E.size)&&void 0!==P?P:0}put(i,h,P,E,U){const v=this._db.get(h=i.id+h);if(v&&(this._size-=v.size,i.size-=v.size,this._db.delete(h),v.entry!==P&&this._notifyRemove(h,v.entry,v.size,C.ALL)),E>this._maxSize)return void this._notifyRemove(h,P,E,C.ALL);if(void 0===P)return void console.warn("Refusing to cache undefined entry ");if(!E||E<0)return console.warn(`Refusing to cache entry with size ${E} for key ${h}`),void this._notifyRemove(h,P,0,C.ALL);const D=1+Math.max(U,-4)- -3;this._db.set(h,new F(P,E,D)),this._size+=E,i.size+=E,this._checkSize()}updateSize(i,h,P,E){const U=this._db.get(h=i.id+h);if(U&&U.entry===P){for(this._size-=U.size,i.size-=U.size;E>this._maxSize;){const v=this._notifyRemove(h,P,E,C.SOME);if(!(null!=v&&v>0))return void this._db.delete(h);E=v}U.size=E,this._size+=E,i.size+=E,this._checkSize()}}pop(i,h){const P=this._db.get(h=i.id+h);if(P)return this._size-=P.size,i.size-=P.size,this._db.delete(h),++this._hit,P.entry;++this._miss}get(i,h){const P=this._db.get(h=i.id+h);if(void 0!==P)return this._db.delete(h),P.lives=P.lifetime,this._db.set(h,P),++this._hit,P.entry;++this._miss}peek(i,h){const P=this._db.get(i.id+h);return P?++this._hit:++this._miss,null==P?void 0:P.entry}get performanceInfo(){const i={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},h={},P=new Array;this._db.forEach((v,D)=>{const W=v.lifetime;P[W]=(P[W]||0)+v.size,this._users.forAll(K=>{const{id:B,name:d}=K;D.startsWith(B)&&(h[d]=(h[d]||0)+v.size)})});const E={};this._users.forAll(v=>{const D=v.name;"hitRate"in v&&"number"==typeof v.hitRate&&!isNaN(v.hitRate)&&v.hitRate>0?(h[D]=h[D]||0,E[D]=Math.round(100*v.hitRate)+"%"):E[D]="0%"});const U=Object.keys(h);U.sort((v,D)=>h[D]-h[v]),U.forEach(v=>i[v]=Math.round(h[v]/2**20)+"MB / "+E[v]);for(let v=P.length-1;v>=0;--v){const D=P[v];D&&(i["Priority "+(v+-3-1)]=Math.round(D/this._size*100)+"%")}return i}resetStats(){this._hit=this._miss=0,this._users.forAll(i=>i.resetHitRate())}clear(i){const h=i.id;this._db.forEach((P,E)=>{E.startsWith(h)&&(this._size-=P.size,this._db.delete(E),this._notifyRemove(E,P.entry,P.size,C.ALL))}),i.size=0}clearAll(){this._db.forEach((i,h)=>this._notifyRemove(h,i.entry,i.size,C.ALL)),this._users.forAll(i=>i.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(i,h,P,E){let U;return this._removeFuncs.some(v=>{if(i.startsWith(v[0])){const D=v[1](h,E,P);return"number"==typeof D&&(U=D),!0}return!1}),U}_checkSize(){this._users.forAll(i=>this._checkSizeLimits(i)),this._checkSizeLimits()}_checkSizeLimits(i){const h=null!=i?i:this;if(h.maxSize<0||h.size<=h.maxSize)return;const P=null==i?void 0:i.id;let E=!0;for(;E;){E=!1;for(const[U,v]of this._db)if(0===v.lifetime&&(!P||U.startsWith(P))){if(this._purgeItem(U,v,i),h.size<=.9*h.maxSize)return;E||(E=this._db.has(U))}}for(const[U,v]of this._db)if((!P||U.startsWith(P))&&(this._purgeItem(U,v,i),h.size<=.9*h.maxSize))return}_purgeItem(i,h,P=this._users.find(E=>i.startsWith(E.id))){if(this._db.delete(i),h.lives<=1){this._size-=h.size,P&&(P.size-=h.size);const E=this._notifyRemove(i,h.entry,h.size,C.SOME);null!=E&&E>0&&(this._size+=E,P&&(P.size+=E),h.lives=h.lifetime,h.size=E,this._db.set(i,h))}else--h.lives,this._db.set(i,h)}}let I=0;class F{constructor(i,h,P){this.entry=i,this.size=h,this.lifetime=P,this.lives=P}}},24098:(q,Q,o)=>{o.d(Q,{GB:()=>S,Qo:()=>C,Y4:()=>A});var f=o(44549);class S{}function A(b){return b instanceof f.bo?b===S.instance:"unknown"===(null==b?void 0:b.toString().toLowerCase())}function C(b){return A(b)?S.instance:b}S.instance=new f.oh("Etc/UTC")},721:(q,Q,o)=>{o.d(Q,{$X:()=>le,Gy:()=>_,P5:()=>ce,SW:()=>oe,Tr:()=>ne,VV:()=>b}),o(61320);const A=(M,m,T)=>[m,T],C=(M,m,T)=>[m,T,M[2]],Z=(M,m,T)=>[m,T,M[2],M[3]];function b(M){return M?{originPosition:"upper-left"===M.originPosition?"upperLeft":"lower-left"===M.originPosition?"lowerLeft":M.originPosition,scale:M.tolerance?[M.tolerance,M.tolerance]:[1,1],translate:null!=M.extent?[M.extent.xmin,M.extent.ymax]:[0,0]}:null}function v({scale:M,translate:m},T){return T*M[0]+m[0]}function D({scale:M,translate:m},T){return m[1]-T*M[1]}function W(M,m,T){const H=new Array(T.length);if(!T.length)return H;const[Y,ee]=M.scale;let se=v(M,T[0][0]),re=D(M,T[0][1]);H[0]=m(T[0],se,re);for(let te=1;te<T.length;te++){const ae=T[te];se+=ae[0]*Y,re-=ae[1]*ee,H[te]=m(ae,se,re)}return H}function K(M,m,T){const H=new Array(T.length);for(let Y=0;Y<T.length;Y++)H[Y]=W(M,m,T[Y]);return H}function _(M,m,T,H,Y){return m.x=function F({scale:M,translate:m},T){return Math.round((T-m[0])/M[0])}(M,T.x),m.y=function x({scale:M,translate:m},T){return Math.round((m[1]-T)/M[1])}(M,T.y),m!==T&&(H&&(m.z=T.z),Y&&(m.m=T.m)),m}function oe(M,m,T,H,Y){return null!=T&&(m.points=function d(M,m,T,H){return W(M,T?H?Z:C:H?C:A,m)}(M,T.points,H,Y)),m}function ne(M,m,T,H,Y){return null==T||(m.x=v(M,T.x),m.y=D(M,T.y),m!==T&&(H&&(m.z=T.z),Y&&(m.m=T.m))),m}function le(M,m,T,H,Y){return null!=T&&(m.rings=function R(M,m,T,H){return K(M,T?H?Z:C:H?C:A,m)}(M,T.rings,H,Y)),m}function ce(M,m,T,H,Y){return null!=T&&(m.paths=function O(M,m,T,H){return K(M,T?H?Z:C:H?C:A,m)}(M,T.paths,H,Y)),m}},78512:(q,Q,o)=>{o.r(Q),o.d(Q,{default:()=>Ce});var f=o(10467),S=o(8189),A=o(89563),C=o(90660),Z=o(31178),b=o(5922),I=o(39693),F=o(56492),x=o(45272),i=o(85211),P=(o(3248),o(35150)),U=(o(40707),o(76576)),v=o(95478),D=o(17715),W=o(33087),K=o(60797),B=o(93410),d=o(33036),O=o(81687),R=o(64833),p=o(15848),g=o(73874),z=o(46577),N=o(59377);class ${constructor(J,X){this.objectId=J,this.itemSource=X,this.count=0,this.layer=null,this.sortValue=void 0}}const y=new W.q(20,w=>w.destroy());let c=class extends((0,d.j)((0,B.d)((0,I.P)(v.A)))){constructor(w){super(w),this._oidToReference=new Map,this._layerToReference=new Map,this._portals=new Map,this.layers=new Z.A,this.maximumVisibleSublayers=10,this.opacity=1,this.title="Layers In View",this.type="catalog-dynamic-group",this.visible=!0}load(w){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}get _orderBy(){var w,J;return null!==(w=null===(J=this.parent.orderBy)||void 0===J?void 0:J.find(X=>!X.valueExpression&&X.field))&&void 0!==w?w:new p.A({field:this.parent.objectIdField})}get _referenceComparator(){const w=this._orderBy,J=this.parent.fieldsIndex.get(w.field),X=(0,N.FM)(null==J?void 0:J.toJSON().type,"descending"===w.order);return(k,ie)=>X(k.sortValue,ie.sortValue)||k.objectId-k.objectId}acquireLayer(w){const J=w.getObjectId(),X=(0,K.tE)(this._oidToReference,J,()=>this._createLayerReference(w));return X.count++,(0,D.hA)(()=>{X.count--,X.count||this._disposeLayerReference(X)})}_createLayerReference(w){const J=w.getObjectId(),X=w.getAttribute(this.parent.itemSourceField),k=new $(J,X);if(y.get(X))return this._addLayer(y.pop(X),k,w),k;let ie;try{ie=JSON.parse(X)}catch(de){return P.A.getLogger(this).error(de),k}return this._createLayer(ie).then(de=>{this.destroyed||0===k.count?(y.get(X)||y.put(k.itemSource,de),k.layer=null):this._addLayer(de,k,w)}).catch(()=>{}),k}_addLayer(w,J,X){this._layerToReference.set(w,J),J.sortValue=X.getAttribute(this._orderBy.field),J.layer=w,w.parent=this,this.layers.add(w),this.layers.sort((k,ie)=>this._referenceComparator(this._layerToReference.get(k),this._layerToReference.get(ie)))}_disposeLayerReference(w){w.layer&&(this._layerToReference.delete(w.layer),this.layers.remove(w.layer),y.put(w.itemSource,w.layer)),this._oidToReference.delete(w.objectId)}_createLayer(w){var J=this;return(0,f.A)(function*(){if(!function L(w){return"object"==typeof w&&null!=w&&"itemId"in w&&"portalUrl"in w}(w))return new(yield R.S.UnsupportedLayer());const{itemId:X,portalUrl:k}=w,ie=(0,K.tE)(J._portals,k,()=>new g.A({url:k}));return v.A.fromPortalItem(new z.default({id:X,portal:ie}))})()}};(0,S._)([(0,i.MZ)()],c.prototype,"_orderBy",null),(0,S._)([(0,i.MZ)()],c.prototype,"_referenceComparator",null),(0,S._)([(0,i.MZ)({readOnly:!0})],c.prototype,"layers",void 0),(0,S._)([(0,i.MZ)()],c.prototype,"maximumVisibleSublayers",void 0),(0,S._)([(0,i.MZ)(O.ke)],c.prototype,"opacity",void 0),(0,S._)([(0,i.MZ)({type:String,json:{name:"title",write:!0}})],c.prototype,"title",void 0),(0,S._)([(0,i.MZ)({json:{read:!1}})],c.prototype,"type",void 0),(0,S._)([(0,i.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],c.prototype,"visible",void 0),c=(0,S._)([(0,U.$)("esri.layers.catalog.CatalogDynamicGroupLayer")],c);const _=c;var j=o(92165),H=(o(79122),o(70176),o(92089),o(9826),o(15317),o(38582),o(73747),o(13318),o(85718),o(36156)),Y=o(31446),ee=o(20329),se=o(73975),re=o(41843);let te=class extends((0,d.j)((0,Y.F)((0,B.d)((0,I.P)(v.A))))){constructor(w){super(w),this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.opacity=1,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.type="catalog-footprint",this.visible=!0}load(w){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}get fields(){return this.parent.fields}get fieldsIndex(){return this.parent.fieldsIndex}get geometryType(){return this.parent.geometryType}get objectIdField(){return this.parent.objectIdField}get orderBy(){return this.parent.orderBy}createPopupTemplate(w){return(0,re.tn)({fields:this.parent.fields,objectIdField:this.parent.objectIdField,title:this.title},w)}createQuery(){return this.parent.createQuery()}queryFeatures(w,J){return this.parent.queryFeatures(w,J)}};(0,S._)([(0,i.MZ)({readOnly:!0})],te.prototype,"defaultPopupTemplate",null),(0,S._)([(0,i.MZ)({type:[ee.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:se.w,write:!0}})],te.prototype,"labelingInfo",void 0),(0,S._)([(0,i.MZ)(O.kF)],te.prototype,"labelsVisible",void 0),(0,S._)([(0,i.MZ)(O.fV)],te.prototype,"legendEnabled",void 0),(0,S._)([(0,i.MZ)(O.ke)],te.prototype,"opacity",void 0),(0,S._)([(0,i.MZ)(O.M6)],te.prototype,"popupEnabled",void 0),(0,S._)([(0,i.MZ)({type:j.A,json:{name:"popupInfo",write:!0}})],te.prototype,"popupTemplate",void 0),(0,S._)([(0,i.MZ)({types:H.H,json:{name:"layerDefinition.drawingInfo.renderer"}})],te.prototype,"renderer",void 0),(0,S._)([(0,i.MZ)({json:{read:!1}})],te.prototype,"type",void 0),(0,S._)([(0,i.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],te.prototype,"visible",void 0),te=(0,S._)([(0,U.$)("esri.layers.catalog.CatalogFootprintLayer")],te);const ae=te;var pe=o(28570),_e=o(89962),me=o(94376),ve=o(25936),Ee=o(23e3),ge=o(73783),Me=o(17049),Pe=o(43124),Oe=o(85551),De=o(1151),Ie=o(84311),Le=o(47516),Se=o(3404),Ae=o(5540),he=o(87086);const fe=(0,Se.p)();let ue=class extends((0,ge.j)((0,B.d)((0,Pe.f)((0,Ie.e)((0,d.j)((0,De.J)((0,ve.b)((0,Me.q)((0,Oe.A)((0,I.P)((0,Ee.d)((0,me.p)((0,C.O)(v.A)))))))))))))){constructor(w){super(w),this.dynamicGroupLayer=new _({parent:this}),this.fields=null,this.fieldsIndex=null,this.footprintLayer=new ae({parent:this}),this.itemSourceField="cd_itemsource",this.itemTypeField="cd_itemtype",this.layers=new Z.A([this.dynamicGroupLayer,this.footprintLayer]),this.source=new pe.default({layer:this}),this.type="catalog"}load(w){var J=this;const X=null!=w?w.signal:null,k=this.loadFromPortal({supportedTypes:["Feature Service"]},w).catch(F.QP).then((0,f.A)(function*(){var ie;if(!J.url)throw new b.A("catalog-layer:missing-url","Catalog layer must be created with a url");if(J.url&&null==J.layerId){const de=yield J._fetchFirstValidLayerId(X);if(null==de)throw new b.A("catalog-layer:missing-layerId","There is no Catalog Layer in the service",{service:J.url});J.layerId=de}yield J.source.load(),J.source.sourceJSON&&(J.sourceJSON=J.source.sourceJSON,J.read(J.source.sourceJSON,{origin:"service",portalItem:J.portalItem,portal:null===(ie=J.portalItem)||void 0===ie?void 0:ie.portal,url:J.parsedUrl}))})).then(()=>(0,Le.VA)(this,"load",w));return this.addResolvingPromise(k),Promise.resolve(this)}get createQueryVersion(){var w;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(null!==(w=this._get("createQueryVersion"))&&void 0!==w?w:0)+1}get parsedUrl(){const w=(0,x.An)(this.url);return null!=w&&null!=this.layerId&&(w.path=(0,x.fj)(w.path,this.layerId.toString())),w}createQuery(){var w;const J=new he.A,X=null===(w=this.capabilities)||void 0===w?void 0:w.query;J.returnGeometry=!0,X&&(J.compactGeometryEnabled=X.supportsCompactGeometry,J.defaultSpatialReferenceEnabled=X.supportsDefaultSpatialReference),J.outFields=["*"];const{timeOffset:k,timeExtent:ie}=this;return J.timeExtent=null!=k&&null!=ie?ie.offset(-k.value,k.unit):ie||null,J}getField(w){return this.fieldsIndex.get(w)}getFieldDomain(w,J){var X;return null===(X=this.fieldsIndex.get(w))||void 0===X?void 0:X.domain}queryFeatures(w,J){var X=this;return(0,f.A)(function*(){var k;const ie=yield X.load(),de=yield ie.source.queryFeatures(null!==(k=he.A.from(w))&&void 0!==k?k:ie.createQuery(),J);if(null!=de&&de.features)for(const ye of de.features)ye.layer=ye.sourceLayer=ie.footprintLayer;return de})()}queryObjectIds(w,J){var X=this;return(0,f.A)(function*(){var k;return(yield X.load()).source.queryObjectIds(null!==(k=he.A.from(w))&&void 0!==k?k:X.createQuery(),J)})()}queryFeatureCount(w,J){var X=this;return(0,f.A)(function*(){var k;return(yield X.load()).source.queryFeatureCount(null!==(k=he.A.from(w))&&void 0!==k?k:X.createQuery(),J)})()}queryExtent(w,J){var X=this;return(0,f.A)(function*(){var k;return(yield X.load()).source.queryExtent(null!==(k=he.A.from(w))&&void 0!==k?k:X.createQuery(),J)})()}serviceSupportsSpatialReference(w){return this.loaded&&(0,Ae.D)(this,w)}read(w,J){super.read(w,J);let X=w.footprintLayer;X||"service"!==(null==J?void 0:J.origin)||(X={layerDefinition:{drawingInfo:(0,_e.F0)(w.geometryType)}}),this.footprintLayer.read(X,J)}_fetchFirstValidLayerId(w){return(0,A.A)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:w}).then(J=>{var X;const k=J.data;if(k)return Array.isArray(k.layers)?null===(X=k.layers.find(ie=>"Catalog Layer"===ie.type))||void 0===X?void 0:X.id:void 0})}};(0,S._)([(0,i.MZ)({readOnly:!0})],ue.prototype,"createQueryVersion",null),(0,S._)([(0,i.MZ)({...fe.fields,json:{origins:{service:{name:"fields"}}}})],ue.prototype,"fields",void 0),(0,S._)([(0,i.MZ)(fe.fieldsIndex)],ue.prototype,"fieldsIndex",void 0),(0,S._)([(0,i.MZ)({json:{read:!1,write:!1}})],ue.prototype,"footprintLayer",void 0),(0,S._)([(0,i.MZ)()],ue.prototype,"itemSourceField",void 0),(0,S._)([(0,i.MZ)()],ue.prototype,"itemTypeField",void 0),(0,S._)([(0,i.MZ)()],ue.prototype,"layers",void 0),(0,S._)([(0,i.MZ)({value:"CatalogLayer",type:["CatalogLayer"]})],ue.prototype,"operationalLayerType",void 0),(0,S._)([(0,i.MZ)()],ue.prototype,"outFields",void 0),(0,S._)([(0,i.MZ)({readOnly:!0})],ue.prototype,"parsedUrl",null),(0,S._)([(0,i.MZ)()],ue.prototype,"source",void 0),(0,S._)([(0,i.MZ)({json:{read:!1}})],ue.prototype,"type",void 0),ue=(0,S._)([(0,U.$)("esri.layers.CatalogLayer")],ue);const Ce=ue},72211:(q,Q,o)=>{o.d(Q,{LF:()=>Z,M9:()=>b,zu:()=>i});var f=o(5922),S=o(89221),A=o(79845),C=o(26073);function Z(E,U,v){try{return function F(E){if(!E||0===E.length)return null;if(function x(E){const U=E[0];return!!U&&"scale"in U}(E)){const U=[];for(const v of E)U.push({scale:v.scale,value:i(v.value)});return U}return i(E)}(E)}catch(W){var D;null==v||null===(D=v.messages)||void 0===D||D.push(W)}return null}function b(E,U,v,D){try{const W=function I(E){const U=(0,A.q)(E);return U?(0,C.dw)(U)?U.map(v=>v.toJSON()):U.map(({scale:v,effects:D})=>({scale:v,value:D.map(W=>W.toJSON())})):null}(E);(0,S.sM)(v,W,U)}catch(W){D.messages&&D.messages.push(W)}}function i(E){if(null==E||!E.length)return"";const U=[];for(const v of E){let D=[];switch(v.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":D=[h(v,"amount")];break;case"blur":D=[h(v,"radius","pt")];break;case"hue-rotate":D=[h(v,"angle","deg")];break;case"drop-shadow":D=[h(v,"xoffset","pt"),h(v,"yoffset","pt"),h(v,"blurRadius","pt"),P(v,"color")];break;case"bloom":D=[h(v,"strength"),h(v,"radius","pt"),h(v,"threshold")]}const W=`${v.type}(${D.filter(Boolean).join(" ")})`;(0,A.q)(W),U.push(W)}return U.join(" ")}function h(E,U,v){if(null==E[U])throw new f.A("effect:missing-parameter",`Missing parameter '${U}' in ${E.type} effect`,{effect:E});return v?E[U]+v:""+E[U]}function P(E,U){if(null==E[U])throw new f.A("effect:missing-parameter",`Missing parameter '${U}' in ${E.type} effect`,{effect:E});const v=E[U];return`rgba(${v[0]||0}, ${v[1]||0}, ${v[2]||0}, ${v[3]/255||0})`}},94376:(q,Q,o)=>{o.d(Q,{p:()=>F});var f=o(8189),S=o(85211),b=(o(3248),o(35150),o(40707),o(76576));const F=x=>{let i=class extends x{get apiKey(){var h;return this._isOverridden("apiKey")?this._get("apiKey"):function I(x){return"portalItem"in x}(this)?null===(h=this.portalItem)||void 0===h?void 0:h.apiKey:null}set apiKey(h){null!=h?this._override("apiKey",h):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,f._)([(0,S.MZ)({type:String})],i.prototype,"apiKey",null),i=(0,f._)([(0,b.$)("esri.layers.mixins.APIKeyMixin")],i),i}},25936:(q,Q,o)=>{o.d(Q,{b:()=>F});var f=o(8189),S=o(35150),A=o(85211),b=(o(3248),o(40707),o(76576)),I=o(68438);const F=x=>{let i=class extends x{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const h=(0,I.qg)(this.url);if(null!=h&&h.title)return h.title}return this._get("title")||""}set title(h){this._set("title",h)}set url(h){this._set("url",(0,I.Jf)(h,S.A.getLogger(this)))}};return(0,f._)([(0,A.MZ)()],i.prototype,"title",null),(0,f._)([(0,A.MZ)({type:String})],i.prototype,"url",null),i=(0,f._)([(0,b.$)("esri.layers.mixins.ArcGISService")],i),i}},93410:(q,Q,o)=>{o.d(Q,{d:()=>x});var f=o(8189),S=o(85211),b=(o(3248),o(35150),o(40707),o(76576)),I=o(72211);const F={read:{reader:I.LF},write:{allowNull:!0,writer:I.M9}},x=i=>{let h=class extends i{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,f._)([(0,S.MZ)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],h.prototype,"blendMode",void 0),(0,f._)([(0,S.MZ)({json:{read:!1,write:!1,origins:{"web-map":F,"portal-item":F}}})],h.prototype,"effect",void 0),h=(0,f._)([(0,b.$)("esri.layers.mixins.BlendLayer")],h),h}},23e3:(q,Q,o)=>{o.d(Q,{d:()=>I});var f=o(8189),S=o(85211),b=(o(3248),o(35150),o(40707),o(76576));const I=F=>{let x=class extends F{constructor(){super(...arguments),this.customParameters=null}};return(0,f._)([(0,S.MZ)({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],x.prototype,"customParameters",void 0),x=(0,f._)([(0,b.$)("esri.layers.mixins.CustomParametersMixin")],x),x}},31446:(q,Q,o)=>{o.d(Q,{F:()=>x});var f=o(8189),S=o(85211),b=(o(3248),o(35150),o(40707),o(76576)),I=o(66722);const F={write:{allowNull:!0}},x=i=>{let h=class extends i{constructor(){super(...arguments),this.featureEffect=null}};return(0,f._)([(0,S.MZ)({type:I.A,json:{origins:{"web-map":F,"portal-item":F}}})],h.prototype,"featureEffect",void 0),h=(0,f._)([(0,b.$)("esri.layers.mixins.FeatureEffectLayer")],h),h}},43124:(q,Q,o)=>{o.d(Q,{f:()=>h});var f=o(8189),S=o(89221),A=o(85211),I=(o(3248),o(35150),o(40707),o(76576)),F=o(15848);function x(P,E,U){if(!P)return null;const v=P.find(W=>!!W.field);if(!v)return null;const D=new F.A;return D.read(v,U),[D]}function i(P,E,U,v){const D=P.find(W=>!!W.field);D&&(0,S.sM)(U,[D.toJSON()],E)}const h=P=>{let E=class extends P{constructor(){super(...arguments),this.orderBy=null}};return(0,f._)([(0,A.MZ)({type:[F.A],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:x},write:{target:"layerDefinition.orderBy",writer:i}}})],E.prototype,"orderBy",void 0),E=(0,f._)([(0,I.$)("esri.layers.mixins.OrderedLayer")],E),E}},85551:(q,Q,o)=>{o.d(Q,{A:()=>p});var f=o(10467),S=o(8189),A=o(23098),C=o(77469),Z=o(89563),b=o(89447),I=o(5922),F=o(35150),x=o(11432),i=o(56492),h=o(45272),P=o(85211),v=(o(3248),o(40707),o(17221)),D=o(76576),W=o(50305),K=o(58443),B=o(73874),d=o(46577),O=o(52606),R=o(69927);const p=z=>{let N=class extends z{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,x.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem($){$!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",$))}readPortalItem($,y,c){if(y.itemId)return new d.default({id:y.itemId,portal:null==c?void 0:c.portal})}writePortalItem($,y){null!=$&&$.id&&(y.itemId=$.id)}loadFromPortal($,y){var c=this;return(0,f.A)(function*(){var _;if(null!==(_=c.portalItem)&&void 0!==_&&_.id)try{const{load:L}=yield Promise.all([o.e(5565),o.e(2076),o.e(6180)]).then(o.bind(o,56180));return(0,i.Te)(y),yield L({instance:c,supportedTypes:$.supportedTypes,validateItem:$.validateItem,supportsData:$.supportsData,layerModuleTypeMap:$.layerModuleTypeMap},y)}catch(L){throw(0,i.zf)(L)||F.A.getLogger(c).warn(`Failed to load layer (${c.title}, ${c.id}) portal item (${c.portalItem.id})\n  ${L}`),L}})()}finishLoadEditablePortalLayer($){var y=this;return(0,f.A)(function*(){y._set("userHasEditingPrivileges",yield y._fetchUserHasEditingPrivileges($).catch(c=>((0,i.QP)(c),!0)))})()}setUserPrivileges($,y){var c=this;return(0,f.A)(function*(){if(!A.A.userPrivilegesApplied)return c.finishLoadEditablePortalLayer(y);if(c.url)try{const{features:{edit:_,fullEdit:L},content:{updateItem:j}}=yield c._fetchUserPrivileges($,y);c._set("userHasEditingPrivileges",_),c._set("userHasFullEditingPrivileges",L),c._set("userHasUpdateItemPrivileges",j)}catch(_){(0,i.QP)(_)}})()}_fetchUserPrivileges($,y){var c=this;return(0,f.A)(function*(){let _=c.portalItem;if(!$||!_||!_.loaded||_.sourceUrl)return c._fetchFallbackUserPrivileges(y);const L=$===_.id;if(L&&_.portal.user)return(0,R.It)(_);let j,G;if(L)j=_.portal.url;else try{j=yield(0,K.wI)(c.url,y)}catch(le){(0,i.QP)(le)}if(!j||!(0,h.b8)(j,_.portal.url))return c._fetchFallbackUserPrivileges(y);try{const le=null!=y?y.signal:null;G=yield null==C.id?void 0:C.id.getCredential(`${j}/sharing`,{prompt:!1,signal:le})}catch(le){(0,i.QP)(le)}if(!G)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(L?yield _.reload():(_=new d.default({id:$,portal:{url:j}}),yield _.load(y)),_.portal.user)return(0,R.It)(_)}catch(le){(0,i.QP)(le)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges($){var y=this;return(0,f.A)(function*(){let c=!0;try{c=yield y._fetchUserHasEditingPrivileges($)}catch(_){(0,i.QP)(_)}return{features:{edit:c,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges($){var y=this;return(0,f.A)(function*(){const c=y.url?null==C.id?void 0:C.id.findCredential(y.url):null;if(!c)return!0;const _=g.credential===c?g.user:yield y._fetchEditingUser($);return g.credential=c,g.user=_,null==(null==_?void 0:_.privileges)||_.privileges.includes("features:user:edit")})()}_fetchEditingUser($){var y=this;return(0,f.A)(function*(){var c,_;const L=null===(c=y.portalItem)||void 0===c||null===(c=c.portal)||void 0===c?void 0:c.user;if(L)return L;const j=C.id.findServerInfo(null!==(_=y.url)&&void 0!==_?_:"");if(null==j||!j.owningSystemUrl)return null;const G=`${j.owningSystemUrl}/sharing/rest`,V=B.A.getDefault();if(V&&V.loaded&&(0,h.S8)(V.restUrl)===(0,h.S8)(G))return V.user;const oe=`${G}/community/self`,ne=null!=$?$.signal:null,le=yield(0,b.Ke)((0,Z.A)(oe,{authMode:"no-prompt",query:{f:"json"},signal:ne}));return le.ok?O.A.fromJSON(le.value.data):null})()}read($,y){y&&(y.layer=this),super.read($,y)}write($,y){var c;const _=null==y?void 0:y.portal,L=(null===(c=this.portalItem)||void 0===c?void 0:c.id)&&(this.portalItem.portal||B.A.getDefault());return _&&L&&!(0,h.ut)(L.restUrl,_.restUrl)?(y.messages&&y.messages.push(new I.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write($,{...y,layer:this})}};return(0,S._)([(0,P.MZ)({type:d.default})],N.prototype,"portalItem",null),(0,S._)([(0,v.w)("web-document","portalItem",["itemId"])],N.prototype,"readPortalItem",null),(0,S._)([(0,W.K)("web-document","portalItem",{itemId:{type:String}})],N.prototype,"writePortalItem",null),(0,S._)([(0,P.MZ)({clonable:!1})],N.prototype,"resourceReferences",void 0),(0,S._)([(0,P.MZ)({type:Boolean,readOnly:!0})],N.prototype,"userHasEditingPrivileges",void 0),(0,S._)([(0,P.MZ)({type:Boolean,readOnly:!0})],N.prototype,"userHasFullEditingPrivileges",void 0),(0,S._)([(0,P.MZ)({type:Boolean,readOnly:!0})],N.prototype,"userHasUpdateItemPrivileges",void 0),N=(0,S._)([(0,D.$)("esri.layers.mixins.PortalLayer")],N),N},g={credential:null,user:null}},1151:(q,Q,o)=>{o.d(Q,{J:()=>y});var f=o(10467),S=o(8189),A=o(35150),C=o(56492),Z=o(85211),b=o(48669),x=(o(40707),o(3248),o(76576)),i=o(50501),h=o(31178),v=(o(89447),o(5922),o(76410),o(34703));const D=new h.A,W=new WeakMap;function O(c,_){return Number.isFinite(c)&&Number.isFinite(_)?_<=0?c:O(_,c%_):0}let R=0,p=0;function g(){const c=Date.now();let _=!1;for(const j of D){const G=j.deref();var L;G?G.refreshInterval&&c-(null!==(L=W.get(G))&&void 0!==L?L:0)+5>=6e4*G.refreshInterval&&(W.set(G,c),G.refresh(c)):_=!0}if(_)for(let j=D.length-1;j>=0;j--)D.at(j).deref()||D.removeAt(j)}(0,v.fm)(()=>{const c=Date.now();let _=0;for(const L of D){const j=L.deref();j&&(_=O(Math.round(6e4*j.refreshInterval),_),j.refreshInterval?W.get(j)||W.set(j,c):W.delete(j))}if(_!==p){if(p=_,clearInterval(R),0===p)return void(R=0);R=setInterval(g,p)}});const y=c=>{let _=class extends c{constructor(...L){super(...L),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,C.sg)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function K(c){(function d(c){return null!=c&&"object"==typeof c&&"refreshInterval"in c&&"refresh"in c})(c)&&D.push(new WeakRef(c))}(this)},()=>{})}destroy(){!function B(c){const _=D.find(L=>L.deref()===c);_&&D.remove(_)}(this)}castRefreshInterval(L){return L>=.1?L:L<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(L=Date.now()){(0,C.QZ)(this._debounceHasDataChanged()).then(j=>{j&&this._set("refreshTimestamp",L),this.emit("refresh",{dataChanged:j})},j=>{A.A.getLogger(this).error(j),this.emit("refresh",{dataChanged:!1,error:j})})}hasDataChanged(){return(0,f.A)(function*(){return!0})()}get test(){const L=this;return{set refreshInterval(j){L._set("refreshInterval",j)}}}};return(0,S._)([(0,Z.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:i.K}}}}})],_.prototype,"refreshInterval",void 0),(0,S._)([(0,b.w)("refreshInterval")],_.prototype,"castRefreshInterval",null),(0,S._)([(0,Z.MZ)({readOnly:!0})],_.prototype,"refreshTimestamp",void 0),(0,S._)([(0,Z.MZ)({readOnly:!0})],_.prototype,"refreshParameters",null),_=(0,S._)([(0,x.$)("esri.layers.mixins.RefreshableLayer")],_),_}},33036:(q,Q,o)=>{o.d(Q,{j:()=>I});var f=o(8189),S=o(85211),b=(o(3248),o(35150),o(40707),o(76576));const I=x=>{let i=class extends x{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const h={minScale:this.minScale,maxScale:this.maxScale},P=this.parent;P&&"effectiveScaleRange"in P&&function F(x,i){x.minScale=x.minScale>0?i.minScale>0?Math.min(x.minScale,i.minScale):x.minScale:i.minScale,x.maxScale=x.maxScale>0?i.maxScale>0?Math.max(x.maxScale,i.maxScale):x.maxScale:i.maxScale}(h,P.effectiveScaleRange);const E=this._get("effectiveScaleRange");return E&&E.minScale===h.minScale&&E.maxScale===h.maxScale?E:h}};return(0,f._)([(0,S.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"minScale",void 0),(0,f._)([(0,S.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],i.prototype,"maxScale",void 0),(0,f._)([(0,S.MZ)({readOnly:!0})],i.prototype,"effectiveScaleRange",null),i=(0,f._)([(0,b.$)("esri.layers.mixins.ScaleRangeLayer")],i),i}},66722:(q,Q,o)=>{o.d(Q,{A:()=>W});var P,f=o(8189),S=o(5922),A=o(71065),C=o(89221),Z=o(85211),x=(o(3248),o(35150),o(40707),o(76576)),i=o(72211),h=o(95877);const E={read:{reader:i.LF},write:{writer:i.M9,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},U={read:{reader:i.LF},write:{writer:i.M9,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},v={name:"showExcludedLabels",default:!0};let D=P=class extends A.oY{constructor(K){super(K),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(K,B){const d=super.write(K,B);if(null!=B&&B.origin){var O;if(d.filter){var R;const p=Object.keys(d.filter);if(p.length>1||"where"!==p[0])return null!==(R=B.messages)&&void 0!==R&&R.push(new S.A("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:B.layer,effect:this})),null}if("showExcludedLabels"in d)return null!==(O=B.messages)&&void 0!==O&&O.push(new S.A("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:B.layer,effect:this})),null}return d}clone(){return new P({filter:null!=this.filter?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,f._)([(0,Z.MZ)({type:h.A,json:{write:{allowNull:!0,writer(K,B,d,O){const R=null==K?void 0:K.write({},O);R&&0!==Object.keys(R).length?(0,C.sM)(d,R,B):(0,C.sM)(d,null,B)}}}})],D.prototype,"filter",void 0),(0,f._)([(0,Z.MZ)({json:{write:!0,origins:{"web-map":E,"portal-item":E}}})],D.prototype,"includedEffect",void 0),(0,f._)([(0,Z.MZ)({json:{write:!0,origins:{"web-map":U,"portal-item":U}}})],D.prototype,"excludedEffect",void 0),(0,f._)([(0,Z.MZ)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":v,"portal-item":v}}})],D.prototype,"excludedLabelsVisible",void 0),D=P=(0,f._)([(0,x.$)("esri.layers.support.FeatureEffect")],D);const W=D},95877:(q,Q,o)=>{o.d(Q,{A:()=>D});var P,f=o(8189),S=o(21152),A=o(12849),C=o(49976),Z=o(71065),b=o(77806),I=o(85211),i=(o(3248),o(35150),o(76576)),h=o(87086);const E=new C.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),U=new C.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let v=P=class extends Z.oY{constructor(W){super(W),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(W={}){const{where:K,geometry:B,spatialRelationship:d,timeExtent:O,objectIds:R,units:p,distance:g}=this;return new h.A({geometry:(0,b.o8)(B),objectIds:(0,b.o8)(R),spatialRelationship:d,timeExtent:(0,b.o8)(O),where:K,units:p,distance:g,...W})}clone(){const{where:W,geometry:K,spatialRelationship:B,timeExtent:d,objectIds:O,units:R,distance:p}=this;return new P({geometry:(0,b.o8)(K),objectIds:(0,b.o8)(O),spatialRelationship:B,timeExtent:(0,b.o8)(d),where:W,units:R,distance:p})}};(0,f._)([(0,I.MZ)({type:String,json:{write:!0}})],v.prototype,"where",void 0),(0,f._)([(0,I.MZ)({types:S.yR,json:{write:!0}})],v.prototype,"geometry",void 0),(0,f._)([(0,I.MZ)({type:E.apiValues,json:{name:"spatialRel",read:{reader:E.read},write:{allowNull:!1,writer:E.write,overridePolicy(){return{enabled:null!=this.geometry}}}}})],v.prototype,"spatialRelationship",void 0),(0,f._)([(0,I.MZ)({type:Number,json:{write:{overridePolicy(W){return{enabled:null!=W&&null!=this.geometry}}}}})],v.prototype,"distance",void 0),(0,f._)([(0,I.MZ)({type:[Number],json:{write:!0}})],v.prototype,"objectIds",void 0),(0,f._)([(0,I.MZ)({type:U.apiValues,json:{read:U.read,write:{writer:U.write,overridePolicy(W){return{enabled:null!=W&&null!=this.geometry}}}}})],v.prototype,"units",void 0),(0,f._)([(0,I.MZ)({type:A.A,json:{write:!0}})],v.prototype,"timeExtent",void 0),v=P=(0,f._)([(0,i.$)("esri.layers.support.FeatureFilter")],v);const D=v},73258:(q,Q,o)=>{o.d(Q,{A:()=>E});var f=o(5922),S=o(71065),A=o(35150),C=o(60797),Z=o(24098),b=o(86300),I=o(22639),F=o(44549);const P=new Map;class E{static fromJSON(B){return new E(B.fields,B.timeZoneByFieldName)}static fromLayer(B){var d;return new E(null!==(d=B.fields)&&void 0!==d?d:[],W(B))}static fromLayerJSON(B){var d;return new E(null!==(d=B.fields)&&void 0!==d?d:[],W(B))}constructor(B=[],d){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=B||[],this._timeZoneByFieldName=d?new Map(d):null;const O=[];for(const p of this.fields){const g=null==p?void 0:p.name,z=v(g);if(g&&z){var R;const N=U(g);this._fieldsMap.set(g,p),this._fieldsMap.set(N,p),this._normalizedFieldsMap.set(z,p),O.push(`${N}:${p.type}:${null===(R=this._timeZoneByFieldName)||void 0===R?void 0:R.get(g)}`),(0,b.vE)(p)?(this.dateFields.push(p),this._dateFieldsSet.add(p)):(0,b.WA)(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p)),(0,b.te)(p)||(0,b.Xz)(p)||(p.editable=null==p.editable||!!p.editable,p.nullable=null==p.nullable||!!p.nullable)}}O.sort(),this.uid=O.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const B of this.fields)(0,b.te)(B)||(0,b.Xz)(B)||B.nullable||void 0!==(0,b.lD)(B)||this._requiredFields.push(B)}return this._requiredFields}equals(B){return this.uid===(null==B?void 0:B.uid)}has(B){return null!=this.get(B)}get(B){var d;if(!B)return;let O=this._fieldsMap.get(B);return O||(O=null!==(d=this._fieldsMap.get(U(B)))&&void 0!==d?d:this._normalizedFieldsMap.get(v(B)),O&&this._fieldsMap.set(B,O),O)}getTimeZone(B){const d=this.get(B&&"string"!=typeof B?B.name:B);return d?this._timeZoneByFieldName?this._timeZoneByFieldName.get(d.name):"date"===d.type||"esriFieldTypeDate"===d.type?(A.A.getLogger("esri.layers.support.FieldsIndex").error(new f.A("getTimeZone:no-timezone-information",`no time zone information for field '${d.name}'`)),I.n$):D.has(d.type)?I.L5:null:null}getLuxonTimeZone(B){const d=this.getTimeZone(B);return d?d===I.L5?Z.GB.instance:d===I.n$?F.mQ.utcInstance:(0,C.tE)(P,d,()=>F.oh.create(d)):null}isDateField(B){return this._dateFieldsSet.has(this.get(B))}isTimeOnlyField(B){return(0,b.OH)(this.get(B))}isNumericField(B){return this._numericFieldsSet.has(this.get(B))}normalizeFieldName(B){var d,O;return null!==(d=null===(O=this.get(B))||void 0===O?void 0:O.name)&&void 0!==d?d:void 0}toJSON(){return{fields:this.fields.map(B=>(0,S.Wj)(B)?B.toJSON():B),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function U(K){return K.trim().toLowerCase()}function v(K){var B,d;return null!==(B=null===(d=(0,b.rS)(K))||void 0===d?void 0:d.toLowerCase())&&void 0!==B?B:""}const D=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function W(K){var B,d,O,R,p,g,z;const N=new Map;if(!K.fields)return N;const $=!0===K.datesInUnknownTimezone,{timeInfo:y,editFieldsInfo:c}=K,_=null!==(B=y?"startField"in y?y.startField:y.startTimeField:"")&&void 0!==B?B:"",L=null!==(d=y?"endField"in y?y.endField:y.endTimeField:"")&&void 0!==d?d:"",j=function h(K){return"dateFieldsTimeZone"in K}(K)?null!==(O=K.dateFieldsTimeZone)&&void 0!==O?O:null:K.dateFieldsTimeReference?(0,I.ZS)(K.dateFieldsTimeReference):null,G=c?function x(K){return"timeZone"in K}(c)?null!==(R=c.timeZone)&&void 0!==R?R:j:c.dateFieldsTimeReference?(0,I.ZS)(c.dateFieldsTimeReference):null!=j?j:I.n$:null,V=y?function i(K){return"timeZone"in K}(y)?null!==(p=y.timeZone)&&void 0!==p?p:j:y.timeReference?(0,I.ZS)(y.timeReference):j:null,oe=new Map([[U(null!==(g=null==c?void 0:c.creationDateField)&&void 0!==g?g:""),G],[U(null!==(z=null==c?void 0:c.editDateField)&&void 0!==z?z:""),G],[U(_),V],[U(L),V]]);for(const{name:le,type:ce}of K.fields)if(D.has(ce))N.set(le,I.L5);else if("date"!==ce&&"esriFieldTypeDate"!==ce)N.set(le,null);else if($)N.set(le,I.L5);else{var ne;const M=null!==(ne=oe.get(U(null!=le?le:"")))&&void 0!==ne?ne:j;N.set(le,M)}return N}},20329:(q,Q,o)=>{o.d(Q,{A:()=>c});var v,f=o(8189),S=o(47280),A=o(49976),C=o(71065),Z=o(77806),b=o(67685),I=o(85211),i=(o(3248),o(35150),o(17221)),h=o(76576),P=o(50305),U=(o(40707),o(4858));let D=v=class extends C.oY{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(_,L){return L.value?(0,U.mX)(L.value):_}writeExpression(_,L,j){null!=this.value&&(_=(0,U.mX)(this.value)),null!=_&&(L[j]=_)}clone(){return new v({expression:this.expression,title:this.title,value:this.value})}};(0,f._)([(0,I.MZ)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],D.prototype,"expression",void 0),(0,f._)([(0,i.w)("expression",["expression","value"])],D.prototype,"readExpression",null),(0,f._)([(0,P.K)("expression")],D.prototype,"writeExpression",null),(0,f._)([(0,I.MZ)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"title",void 0),(0,f._)([(0,I.MZ)({json:{read:!1,write:!1}})],D.prototype,"value",void 0),D=v=(0,f._)([(0,h.$)("esri.layers.support.LabelExpressionInfo")],D);const W=D;var O,K=o(58443),B=o(91644),d=o(35564);const R=new A.J({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function p(_,L,j){return{enabled:!(0,K.TU)(null==j?void 0:j.layer)}}function g(_){var L;return!_||"service"!==_.origin&&"map-image"!==(null===(L=_.layer)||void 0===L?void 0:L.type)}function N(_){var L;return!!function z(_){return"map-image"===(null==_?void 0:_.type)}(_)&&!(null===(L=_.capabilities)||void 0===L||null===(L=L.exportMap)||void 0===L||!L.supportsArcadeExpressionForLabeling)}let y=O=class extends C.oY{static evaluateWhere(_,L){const j=(G,V,oe)=>{switch(V){case"=":return G==oe;case"<>":return G!=oe;case">":return G>oe;case">=":return G>=oe;case"<":return G<oe;case"<=":return G<=oe}return!1};try{if(null==_)return!0;const G=_.split(" ");if(3===G.length)return j(L[G[0]],G[1],G[2]);if(7===G.length){const V=j(L[G[0]],G[1],G[2]),oe=G[3],ne=j(L[G[4]],G[5],G[6]);switch(oe){case"AND":return V&&ne;case"OR":return V||ne}}return!1}catch{console.log("Error.: can't parse = "+_)}}constructor(_){super(_),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=B.Hk,this.useCodedValues=void 0,this.where=null}readLabelExpression(_,L){const j=L.labelExpressionInfo;if(!j||!j.value&&!j.expression)return _}writeLabelExpression(_,L,j){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)_=(0,U.D3)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const G=(0,U.tH)(this.labelExpressionInfo.expression);G&&(_="["+G+"]")}null!=_&&(L[j]=_)}writeLabelExpressionInfo(_,L,j,G){if(null==_&&null!=this.labelExpression&&g(G))_=new W({expression:this.getLabelExpressionArcade()});else if(!_)return;const V=_.toJSON(G);V.expression&&(L[j]=V)}writeMaxScale(_,L){(_||this.minScale)&&(L.maxScale=_)}writeMinScale(_,L){(_||this.maxScale)&&(L.minScale=_)}getLabelExpression(){return(0,U.XJ)(this)}getLabelExpressionArcade(){return(0,U.BI)(this)}getLabelExpressionSingleField(){return(0,U.rU)(this)}hash(){return JSON.stringify(this)}clone(){return new O({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,Z.o8)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,Z.o8)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,f._)([(0,I.MZ)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,f._)([(0,I.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:p}}}}})],y.prototype,"allowOverrun",void 0),(0,f._)([(0,I.MZ)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:p}}}}})],y.prototype,"deconflictionStrategy",void 0),(0,f._)([(0,I.MZ)({type:String,json:{write:{overridePolicy(_,L,j){return this.labelExpressionInfo&&"service"===(null==j?void 0:j.origin)&&N(j.layer)?{enabled:!1}:{allowNull:!0}}}}})],y.prototype,"labelExpression",void 0),(0,f._)([(0,i.w)("labelExpression")],y.prototype,"readLabelExpression",null),(0,f._)([(0,P.K)("labelExpression")],y.prototype,"writeLabelExpression",null),(0,f._)([(0,I.MZ)({type:W,json:{write:{overridePolicy:(_,L,j)=>function $(_){return g(_)||N(null==_?void 0:_.layer)}(j)?{allowNull:!0}:{enabled:!1}}}})],y.prototype,"labelExpressionInfo",void 0),(0,f._)([(0,P.K)("labelExpressionInfo")],y.prototype,"writeLabelExpressionInfo",null),(0,f._)([(0,I.MZ)({type:R.apiValues,json:{type:R.jsonValues,read:R.read,write:R.write}})],y.prototype,"labelPlacement",void 0),(0,f._)([(0,I.MZ)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],y.prototype,"labelPosition",void 0),(0,f._)([(0,I.MZ)({type:Number})],y.prototype,"maxScale",void 0),(0,f._)([(0,P.K)("maxScale")],y.prototype,"writeMaxScale",null),(0,f._)([(0,I.MZ)({type:Number})],y.prototype,"minScale",void 0),(0,f._)([(0,P.K)("minScale")],y.prototype,"writeMinScale",null),(0,f._)([(0,I.MZ)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:p}}}}})],y.prototype,"repeatLabel",void 0),(0,f._)([(0,I.MZ)({type:Number,cast:b.cr,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:p}}}}})],y.prototype,"repeatLabelDistance",void 0),(0,f._)([(0,I.MZ)({types:S.em,json:{origins:{"web-scene":{types:S.Rv,write:d.oO,default:null}},write:d.oO,default:null}})],y.prototype,"symbol",void 0),(0,f._)([(0,I.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"useCodedValues",void 0),(0,f._)([(0,I.MZ)({type:String,json:{write:!0}})],y.prototype,"where",void 0),y=O=(0,f._)([(0,h.$)("esri.layers.support.LabelClass")],y);const c=y},64584:(q,Q,o)=>{o.d(Q,{A:()=>h});var x,f=o(8189),S=o(31178),A=o(71065),C=o(85211),F=(o(3248),o(35150),o(40707),o(76576));let i=x=class extends A.oY{constructor(P){super(P),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new S.A}clone(){return new x({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,f._)([(0,C.MZ)({type:String,json:{write:!0}})],i.prototype,"floorField",void 0),(0,f._)([(0,C.MZ)({json:{read:!1,write:!1}})],i.prototype,"viewAllMode",void 0),(0,f._)([(0,C.MZ)({json:{read:!1,write:!1}})],i.prototype,"viewAllLevelIds",void 0),i=x=(0,f._)([(0,F.$)("esri.layers.support.LayerFloorInfo")],i);const h=i},15848:(q,Q,o)=>{o.d(Q,{A:()=>P});var x,f=o(8189),S=o(49976),A=o(71065),C=o(85211),F=(o(3248),o(35150),o(40707),o(76576));const i=new S.J({asc:"ascending",desc:"descending"});let h=x=class extends A.oY{constructor(E){super(E),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new x({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,f._)([(0,C.MZ)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,f._)([(0,C.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),(0,f._)([(0,C.MZ)({type:i.apiValues,json:{read:i.read,write:i.write}})],h.prototype,"order",void 0),h=x=(0,f._)([(0,F.$)("esri.layers.support.OrderByInfo")],h);const P=h},4858:(q,Q,o)=>{o.d(Q,{BI:()=>U,D3:()=>P,XJ:()=>E,lc:()=>h,mX:()=>D,rU:()=>v,tH:()=>R});var f=o(1119);const S="__begin__",A="__end__",C=new RegExp(S,"ig"),Z=new RegExp(A,"ig"),b=new RegExp("^"+S,"i"),I=new RegExp(A+"$","i"),F='"',x=F+" + ",i=" + "+F;function h(p){return p.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function P(p){return p.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function E(p){const g={expression:"",type:"none"};return p.labelExpressionInfo?p.labelExpressionInfo.value?(g.expression=p.labelExpressionInfo.value,g.type="conventional"):p.labelExpressionInfo.expression&&(g.expression=p.labelExpressionInfo.expression,g.type="arcade"):null!=p.labelExpression&&(g.expression=h(p.labelExpression),g.type="conventional"),g}function U(p){const g=E(p);if(!g)return null;switch(g.type){case"conventional":return D(g.expression);case"arcade":return g.expression}return null}function v(p){const g=E(p);if(!g)return null;switch(g.type){case"conventional":return function K(p){const g=null==p?void 0:p.match(W);return(null==g?void 0:g[1].trim())||null}(g.expression);case"arcade":return R(g.expression)}return null}function D(p){let g;return p?(g=(0,f.HC)(p,z=>S+'$feature["'+z+'"]'+A),g=b.test(g)?g.replace(b,""):F+g,g=I.test(g)?g.replace(I,""):g+F,g=g.replaceAll(C,x).replaceAll(Z,i)):g='""',g}const W=/^\s*\{([^}]+)\}\s*$/i,B=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,d=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,O=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function R(p){if(!p)return null;let g=B.exec(p)||d.exec(p);return g?g[1]||g[3]:(g=O.exec(p),g?g[2]:null)}},73975:(q,Q,o)=>{o.d(Q,{w:()=>I,z:()=>i});var f=o(5922),S=o(77806),A=o(35150),C=o(20329);const Z=()=>A.A.getLogger("esri.layers.support.labelingInfo"),b=/\[([^\[\]]+)\]/gi;function I(P,E,U){return P?P.map(v=>{const D=new C.A;if(D.read(v,U),D.labelExpression){var W;const K=E.fields||(null===(W=E.layerDefinition)||void 0===W?void 0:W.fields)||this.fields;D.labelExpression=D.labelExpression.replaceAll(b,(B,d)=>`[${function F(P,E){if(!E)return P;const U=P.toLowerCase();for(let v=0;v<E.length;v++){const D=E[v].name;if(D.toLowerCase()===U)return D}return P}(d,K)}]`)}return D}):null}const x={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function i(P,E){const U=(0,S.o8)(P);return U.some(v=>function h(P,E){const U=P.labelPlacement,v=x[E];if(!P.symbol)return Z().warn("No ILabelClass symbol specified."),!0;if(!v)return Z().error(new f.A("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${E}' is not supported`)),!0;if(!v.includes(U)){const D=v[0];U&&Z().warn(`Found invalid label placement type ${U} for ${E}. Defaulting to ${D}`),P.labelPlacement=D}return!1}(v,E))?[]:U}},90543:(q,Q,o)=>{o.d(Q,{S:()=>x});var f=o(3248),S=o(68438);function A(d,O,R){return!!Z(d,O,R)}function C(d,O,R){return Z(d,O,R)}function Z(d,O,R){return d&&d.hasOwnProperty(O)?d[O]:R}const b={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function I(d){var O;const R=null==d||null===(O=d.supportedSpatialAggregationStatistics)||void 0===O?void 0:O.map(p=>p.toLowerCase());return{envelope:!(null==R||!R.includes("envelopeaggregate")),centroid:!(null==R||!R.includes("centroidaggregate")),convexHull:!(null==R||!R.includes("convexhullaggregate"))}}function F(d,O){var R;const p=null==d||null===(R=d.supportedOperationsWithCacheHint)||void 0===R?void 0:R.map(g=>g.toLowerCase());return!(null==p||!p.includes(O.toLowerCase()))}function x(d,O){return{analytics:i(d),attachment:h(d),data:P(d),metadata:E(d),operations:U(d.capabilities,d,O),query:v(d,O),queryRelated:D(d),queryTopFeatures:W(d),editing:K(d)}}function i(d){return{supportsCacheHint:F(d.advancedQueryCapabilities,"queryAnalytics")}}function h(d){const O=d.attachmentProperties,R={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:F(d.advancedQueryCapabilities,"queryAttachments"),supportsResize:A(d,"supportsAttachmentsResizing",!1)};return O&&Array.isArray(O)&&O.forEach(p=>{const g=b[p.name];g&&(R[g]=!!p.isEnabled)}),R}function P(d){return{isVersioned:A(d,"isDataVersioned",!1),supportsAttachment:A(d,"hasAttachments",!1),supportsM:A(d,"hasM",!1),supportsZ:A(d,"hasZ",!1)}}function E(d){return{supportsAdvancedFieldProperties:A(d,"supportsFieldDescriptionProperty",!1)}}function U(d,O,R){const p=d?d.toLowerCase().split(",").map(j=>j.trim()):[],g=R?(0,S.qg)(R):null,z=p.includes(null!=g&&"MapServer"===g.serverType?"data":"query"),N=p.includes("editing")&&!O.datesInUnknownTimezone;let $=N&&p.includes("create"),y=N&&p.includes("delete"),c=N&&p.includes("update");const _=p.includes("changetracking"),L=O.advancedQueryCapabilities;return N&&!($||y||c)&&($=y=c=!0),{supportsCalculate:A(O,"supportsCalculate",!1),supportsTruncate:A(O,"supportsTruncate",!1),supportsValidateSql:A(O,"supportsValidateSql",!1),supportsAdd:$,supportsDelete:y,supportsEditing:N,supportsChangeTracking:_,supportsQuery:z,supportsQueryAnalytics:A(L,"supportsQueryAnalytic",!1),supportsQueryAttachments:A(L,"supportsQueryAttachments",!1),supportsQueryTopFeatures:A(L,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:A(O,"supportsAttachmentsResizing",!1),supportsSync:p.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:A(O,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:A(O,"supportsAsyncConvert3D",!1)}}function v(d,O){var R;const p=d.advancedQueryCapabilities,g=d.ownershipBasedAccessControlForFeatures,z=d.archivingInfo,N=d.currentVersion,y=!(null==O?void 0:O.includes("MapServer"))||N>=(0,f.A)("mapserver-pbf-version-support"),c=(0,S.Wo)(O),_=new Set((null!==(R=d.supportedQueryFormats)&&void 0!==R?R:"").split(",").map(L=>L.toLowerCase().trim()));return{supportsStatistics:A(p,"supportsStatistics",d.supportsStatistics),supportsPercentileStatistics:A(p,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:A(p,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:I(p),supportsCentroid:A(p,"supportsReturningGeometryCentroid",!1),supportsDistance:A(p,"supportsQueryWithDistance",!1),supportsDistinct:A(p,"supportsDistinct",d.supportsAdvancedQueries),supportsExtent:A(p,"supportsReturningQueryExtent",!1),supportsGeometryProperties:A(p,"supportsReturningGeometryProperties",!1),supportsHavingClause:A(p,"supportsHavingClause",!1),supportsOrderBy:A(p,"supportsOrderBy",d.supportsAdvancedQueries),supportsPagination:A(p,"supportsPagination",!1),supportsQuantization:A(d,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:A(d,"supportsQuantizationEditMode",!1),supportsQueryGeometry:A(d,"supportsReturningQueryGeometry",!1),supportsResultType:A(p,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:A(p,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:A(p,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:A(d,"useStandardizedQueries",!1),supportsTopFeaturesQuery:A(p,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:A(g,"allowAnonymousToQuery",!0),supportsQueryByOthers:A(g,"allowOthersToQuery",!0),supportsHistoricMoment:A(z,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&_.has("pbf"),supportsDisjointSpatialRelationship:A(p,"supportsDisjointSpatialRel",!1),supportsCacheHint:A(p,"supportsQueryWithCacheHint",!1)||F(p,"query"),supportsDefaultSpatialReference:A(p,"supportsDefaultSR",!1),supportsCompactGeometry:c,supportsFullTextSearch:A(p,"supportsFullTextSearch",!1),maxRecordCountFactor:C(d,"maxRecordCountFactor",void 0),maxRecordCount:C(d,"maxRecordCount",void 0),standardMaxRecordCount:C(d,"standardMaxRecordCount",void 0),tileMaxRecordCount:C(d,"tileMaxRecordCount",void 0)}}function D(d){const O=d.advancedQueryCapabilities,R=A(O,"supportsAdvancedQueryRelated",!1);return{supportsPagination:A(O,"supportsQueryRelatedPagination",!1),supportsCount:R,supportsOrderBy:R,supportsCacheHint:F(O,"queryRelated")}}function W(d){return{supportsCacheHint:F(d.advancedQueryCapabilities,"queryTopFilter")}}function K(d){const O=d.ownershipBasedAccessControlForFeatures,R=d?d.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:A(d,"allowGeometryUpdates",!0),supportsGlobalId:A(d,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:A(d,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:A(d,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:A(d,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:A(d,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:A(O,"allowAnonymousToDelete",!0),supportsDeleteByOthers:A(O,"allowOthersToDelete",!0),supportsUpdateByAnonymous:A(O,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:A(O,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:A(R,"supportsAsyncApplyEdits",!1),zDefault:C(d,"zDefault",void 0)}}},69927:(q,Q,o)=>{o.d(Q,{It:()=>v,LG:()=>I,OM:()=>i,Sm:()=>h,Y:()=>F,bK:()=>x,mm:()=>U,sQ:()=>P});var f=o(10467),S=o(11817),A=o(32034),C=o(55039);function b(){return(b=(0,f.A)(function*(D){const W=D.spatialReference;if(W.isWGS84)return D.clone();if(W.isWebMercator)return(0,C.ci)(D);const K=A.A.WGS84;return yield(0,S.initializeProjection)(W,K),(0,S.project)(D,K)})).apply(this,arguments)}function I(D,W){if(!F(D,W)){const K=D.typeKeywords;K?K.push(W):D.typeKeywords=[W]}}function F(D,W){var K;return!(null===(K=D.typeKeywords)||void 0===K||!K.includes(W))}function x(D){return F(D,U.HOSTED_SERVICE)}function i(D,W){const K=D.typeKeywords;if(K){const B=K.indexOf(W);B>-1&&K.splice(B,1)}}function h(D,W,K){K?I(D,W):i(D,W)}function P(D){return E.apply(this,arguments)}function E(){return E=(0,f.A)(function*(D){const W=D.clone().normalize();let K;if(W.length>1)for(const B of W)K?B.width>K.width&&(K=B):K=B;else K=W[0];return function Z(D){return b.apply(this,arguments)}(K)}),E.apply(this,arguments)}const U={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function v(D){var W;const{portal:K,isOrgItem:B,itemControl:d}=D,O=null===(W=K.user)||void 0===W?void 0:W.privileges;let R=!O||O.includes("features:user:edit"),p=!!B&&!(null==O||!O.includes("features:user:fullEdit"));const g="update"===d||"admin"===d;return g?p=R=!0:p&&(R=!0),{features:{edit:R,fullEdit:p},content:{updateItem:g}}}},28872:(q,Q,o)=>{o.d(Q,{u:()=>C});var f=o(82663),S=o(58701);function A(I,F,x){if(null==I.hasM||I.hasZ)for(const i of F)for(const h of i)h.length>2&&(h[2]*=x)}function C(I,F,x){if(!I&&!F||!x)return;const i=(0,f.G9)(x);Z(I,x,i),Z(F,x,i)}function Z(I,F,x){if(I)for(const i of I)b(i.geometry,F,x)}function b(I,F,x){if(null==I||!I.spatialReference||(0,S.aI)(I.spatialReference,F))return;const i=(0,f.G9)(I.spatialReference)/x;if(1!==i)if("x"in I)null!=I.z&&(I.z*=i);else if("rings"in I)A(I,I.rings,i);else if("paths"in I)A(I,I.paths,i);else if("points"in I&&(null==I.hasM||I.hasZ))for(const h of I.points)h.length>2&&(h[2]*=i)}},98789:(q,Q,o)=>{o.d(Q,{q:()=>S});var f=o(23743);function S(A,C,Z){if(null==Z||!Z.features||!Z.hasZ)return;const b=(0,f.N)(Z.geometryType,C,A.outSpatialReference);if(null!=b)for(const I of Z.features)b(I.geometry)}},52466:(q,Q,o)=>{o.d(Q,{A:()=>i});var F,f=o(8189),S=o(71065),A=o(77806),C=o(85211),Z=o(55739),b=o(76576),I=o(50305);let x=F=class extends S.oY{constructor(h){super(h),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(h,P){P.resultOffset=this.start,P.resultRecordCount=this.num||10}clone(){return new F((0,A.o8)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,f._)([(0,C.MZ)({type:[String],json:{write:!0}})],x.prototype,"attachmentTypes",void 0),(0,f._)([(0,C.MZ)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],x.prototype,"attachmentsWhere",void 0),(0,f._)([(0,C.MZ)({type:Boolean,json:{write:!0}})],x.prototype,"cacheHint",void 0),(0,f._)([(0,C.MZ)({type:[String],json:{write:!0}})],x.prototype,"keywords",void 0),(0,f._)([(0,C.MZ)({type:[Number],json:{write:!0}})],x.prototype,"globalIds",void 0),(0,f._)([(0,C.MZ)({json:{write:!0}})],x.prototype,"name",void 0),(0,f._)([(0,C.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],x.prototype,"num",void 0),(0,f._)([(0,C.MZ)({type:[Number],json:{write:!0}})],x.prototype,"objectIds",void 0),(0,f._)([(0,C.MZ)({type:Boolean,json:{default:!1,write:!0}})],x.prototype,"returnMetadata",void 0),(0,f._)([(0,C.MZ)({type:[Number],json:{write:!0}})],x.prototype,"size",void 0),(0,f._)([(0,C.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],x.prototype,"start",void 0),(0,f._)([(0,I.K)("start"),(0,I.K)("num")],x.prototype,"writeStart",null),(0,f._)([(0,C.MZ)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],x.prototype,"where",void 0),x=F=(0,f._)([(0,b.$)("esri.rest.support.AttachmentQuery")],x),x.from=(0,Z.dp)(x);const i=x},93327:(q,Q,o)=>{o.d(Q,{A:()=>B});var D,f=o(8189),S=o(21152),A=o(81098),C=o(49976),Z=o(71065),b=o(77806),I=o(85211),i=(o(3248),o(35150),o(17221)),h=o(76576),P=o(50305),E=o(32034),U=o(61320),v=o(29141);const W=new C.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let K=D=class extends Z.oY{constructor(d){super(d),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(d,O){const R=E.A.fromJSON(O.spatialReference),p=[];for(let z=0;z<d.length;z++){var g;const N=d[z],$=A.A.fromJSON(N),y=null===(g=N.geometry)||void 0===g?void 0:g.spatialReference;null==$.geometry||y||($.geometry.spatialReference=R);const c=N.aggregateGeometries,_=$.aggregateGeometries;if(c&&null!=_)for(const L in _){const j=_[L],G=c[L];null==j||(null==G?void 0:G.spatialReference)||(j.spatialReference=R)}p.push($)}return p}writeGeometryType(d,O,R,p){if(d)return void W.write(d,O,R,p);const{features:g}=this;if(g)for(const z of g)if(null!=(null==z?void 0:z.geometry))return void W.write(z.geometry.type,O,R,p)}readQueryGeometry(d,O){if(!d)return null;const R=!!d.spatialReference,p=(0,U.rS)(d);return p&&!R&&O.spatialReference&&(p.spatialReference=E.A.fromJSON(O.spatialReference)),p}writeSpatialReference(d,O){if(d)return void(O.spatialReference=d.toJSON());const{features:R}=this;if(R)for(const p of R)if(p&&null!=p.geometry&&p.geometry.spatialReference)return void(O.spatialReference=p.geometry.spatialReference.toJSON())}clone(){return new D(this.cloneProperties())}cloneProperties(){return(0,b.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(d){const O=this.write();if(O.features&&Array.isArray(d)&&d.length>0)for(let R=0;R<O.features.length;R++){const p=O.features[R];if(p.geometry){const g=null==d?void 0:d[R];p.geometry=(null==g?void 0:g.toJSON())||p.geometry}}return O}quantize(d){const{scale:[O,R],translate:[p,g]}=d,$=this.features,y=this._getQuantizationFunction(this.geometryType,c=>Math.round((c-p)/O),c=>Math.round((g-c)/R));for(let c=0,_=$.length;c<_;c++)null!=y&&y($[c].geometry)||($.splice(c,1),c--,_--);return this.transform=d,this}unquantize(){var d,O;const{geometryType:R,features:p,transform:g}=this;if(!g)return this;const{translate:[z,N],scale:[$,y]}=g;let L=null,j=null;if(this.hasZ&&null!=(null==g||null===(d=g.scale)||void 0===d?void 0:d[2])){const{translate:[,,V],scale:[,,oe]}=g;L=ne=>ne*oe+V}if(this.hasM&&null!=(null==g||null===(O=g.scale)||void 0===O?void 0:O[3])){const{translate:[,,,V],scale:[,,,oe]}=g;j=ne=>null==ne?ne:ne*oe+V}const G=this._getHydrationFunction(R,V=>V*$+z,V=>N-V*y,L,j);for(const{geometry:V}of p)null!=V&&G&&G(V);return this.transform=null,this}_quantizePoints(d,O,R){let p,g;const z=[];for(let N=0,$=d.length;N<$;N++){const y=d[N];if(N>0){const c=O(y[0]),_=R(y[1]);c===p&&_===g||(z.push([c-p,_-g]),p=c,g=_)}else p=O(y[0]),g=R(y[1]),z.push([p,g])}return z.length>0?z:null}_getQuantizationFunction(d,O,R){return"point"===d?p=>(p.x=O(p.x),p.y=R(p.y),p):"polyline"===d||"polygon"===d?p=>{const g=(0,U.Bi)(p)?p.rings:p.paths,z=[];for(let N=0,$=g.length;N<$;N++){const c=this._quantizePoints(g[N],O,R);c&&z.push(c)}return z.length>0?((0,U.Bi)(p)?p.rings=z:p.paths=z,p):null}:"multipoint"===d?p=>{const g=this._quantizePoints(p.points,O,R);return g&&g.length>0?(p.points=g,p):null}:"extent"===d?p=>p:null}_getHydrationFunction(d,O,R,p,g){return"point"===d?z=>{z.x=O(z.x),z.y=R(z.y),p&&(z.z=p(z.z))}:"polyline"===d||"polygon"===d?z=>{const N=(0,U.Bi)(z)?z.rings:z.paths;let $,y;for(let c=0,_=N.length;c<_;c++){const L=N[c];for(let j=0,G=L.length;j<G;j++){const V=L[j];j>0?($+=V[0],y+=V[1]):($=V[0],y=V[1]),V[0]=O($),V[1]=R(y)}}if(p&&g)for(let c=0,_=N.length;c<_;c++){const L=N[c];for(let j=0,G=L.length;j<G;j++){const V=L[j];V[2]=p(V[2]),V[3]=g(V[3])}}else if(p)for(let c=0,_=N.length;c<_;c++){const L=N[c];for(let j=0,G=L.length;j<G;j++){const V=L[j];V[2]=p(V[2])}}else if(g)for(let c=0,_=N.length;c<_;c++){const L=N[c];for(let j=0,G=L.length;j<G;j++){const V=L[j];V[2]=g(V[2])}}}:"extent"===d?z=>{z.xmin=O(z.xmin),z.ymin=R(z.ymin),z.xmax=O(z.xmax),z.ymax=R(z.ymax),p&&null!=z.zmax&&null!=z.zmin&&(z.zmax=p(z.zmax),z.zmin=p(z.zmin)),g&&null!=z.mmax&&null!=z.mmin&&(z.mmax=g(z.mmax),z.mmin=g(z.mmin))}:"multipoint"===d?z=>{const N=z.points;let $,y;for(let c=0,_=N.length;c<_;c++){const L=N[c];c>0?($+=L[0],y+=L[1]):($=L[0],y=L[1]),L[0]=O($),L[1]=R(y)}if(p&&g)for(let c=0,_=N.length;c<_;c++){const L=N[c];L[2]=p(L[2]),L[3]=g(L[3])}else if(p)for(let c=0,_=N.length;c<_;c++){const L=N[c];L[2]=p(L[2])}else if(g)for(let c=0,_=N.length;c<_;c++){const L=N[c];L[2]=g(L[2])}}:null}};(0,f._)([(0,I.MZ)({type:String,json:{write:!0}})],K.prototype,"displayFieldName",void 0),(0,f._)([(0,I.MZ)({type:Boolean,json:{write:{overridePolicy:d=>({enabled:d})}}})],K.prototype,"exceededTransferLimit",void 0),(0,f._)([(0,I.MZ)({type:[A.A],json:{write:!0}})],K.prototype,"features",void 0),(0,f._)([(0,i.w)("features")],K.prototype,"readFeatures",null),(0,f._)([(0,I.MZ)({type:[v.A],json:{write:!0}})],K.prototype,"fields",void 0),(0,f._)([(0,I.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:W.read}}})],K.prototype,"geometryType",void 0),(0,f._)([(0,P.K)("geometryType")],K.prototype,"writeGeometryType",null),(0,f._)([(0,I.MZ)({type:Boolean,json:{write:{overridePolicy:d=>({enabled:d})}}})],K.prototype,"hasM",void 0),(0,f._)([(0,I.MZ)({type:Boolean,json:{write:{overridePolicy:d=>({enabled:d})}}})],K.prototype,"hasZ",void 0),(0,f._)([(0,I.MZ)({types:S.yR,json:{write:!0}})],K.prototype,"queryGeometry",void 0),(0,f._)([(0,i.w)("queryGeometry")],K.prototype,"readQueryGeometry",null),(0,f._)([(0,I.MZ)({type:E.A,json:{write:!0}})],K.prototype,"spatialReference",void 0),(0,f._)([(0,P.K)("spatialReference")],K.prototype,"writeSpatialReference",null),(0,f._)([(0,I.MZ)({json:{write:!0}})],K.prototype,"transform",void 0),K=D=(0,f._)([(0,h.$)("esri.rest.support.FeatureSet")],K),K.prototype.toJSON.isDefaultToJSON=!0;const B=K},41843:(q,Q,o)=>{o.d(Q,{tn:()=>E});var f=o(92165),S=o(86300),A=o(54042),I=(o(75432),o(65121),o(558),o(8975)),h=(o(90792),o(83902),o(98089),o(61099)),P=o(17580);function E({displayField:y,editFieldsInfo:c,fields:_,objectIdField:L,title:j},G){if(!_)return null;const V=function B(y,c){var _;const L=null==c?void 0:c.visibleFieldNames;return function D(y,c){const _=y;return c&&(y=y.filter(L=>!c.includes(L.type))),y===_&&(y=y.slice()),y.sort(W),y}(null!==(_=y.fields)&&void 0!==_?_:[],(null==c?void 0:c.ignoreFieldTypes)||$).map(j=>new h.A({fieldName:j.name,isEditable:(0,S.R$)(j,y),label:j.alias,format:R(j),visible:v(j,{...y,visibleFieldNames:L})}))}({editFieldsInfo:c,fields:_,objectIdField:L},G);if(!V.length)return null;const oe=function z(y){const c=(0,S.mB)(y),{titleBase:_}=y;return c?`${_}: {${c.trim()}}`:null!=_?_:""}({titleBase:j,fields:_,displayField:y}),ne=function p(){return[new I.A,new A.A]}();return new f.A({title:oe,content:ne,fieldInfos:V})}const v=(y,c)=>c.visibleFieldNames?c.visibleFieldNames.has(y.name):(0,S.Bz)(y,c);function W(y,c){return"oid"===y.type?-1:"oid"===c.type?1:N(y)?-1:N(c)?1:(y.alias||y.name).toLocaleLowerCase().localeCompare((c.alias||c.name).toLocaleLowerCase())}function R(y){switch(y.type){case"small-integer":case"integer":case"single":return new P.A({digitSeparator:!0,places:0});case"double":return new P.A({digitSeparator:!0,places:2});case"string":return(0,S.JL)(y.name)?new P.A({digitSeparator:!0,places:0}):null;default:return null}}function N(y){return"name"===(y.name&&y.name.toLowerCase())||"name"===(y.alias&&y.alias.toLowerCase())}const $=["geometry","blob","raster","guid","xml"]},91644:(q,Q,o)=>{o.d(Q,{A7:()=>F,Cx:()=>x,Hk:()=>i,JJ:()=>U,UK:()=>I,jM:()=>P,x3:()=>E}),o(3248);var S=o(88521),A=o(55417),C=o(46602),Z=o(47705),b=o(48254);const I=C.A.fromJSON(b.Cb),F=A.A.fromJSON(b.yM),x=S.A.fromJSON(b.WR),i=Z.A.fromJSON(b.JZ),P=C.A.fromJSON(b.nC),E=A.A.fromJSON(b.HW),U=S.A.fromJSON(b.b6)},48254:(q,Q,o)=>{o.d(Q,{Cb:()=>A,HW:()=>F,JZ:()=>b,WR:()=>Z,b6:()=>x,nC:()=>I,yM:()=>C});const f=[252,146,31,255],A={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},C={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f},Z={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},b={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},I={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},F={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},x={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);