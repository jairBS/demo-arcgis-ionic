"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7361],{67571:(f,u,r)=>{r.d(u,{O:()=>h});class h{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(t,s){var e;return null===(e=this._outer.get(t))||void 0===e?void 0:e.get(s)}set(t,s,e){const _=this._outer.get(t);_?_.set(s,e):this._outer.set(t,new Map([[s,e]]))}delete(t,s){const e=this._outer.get(t);e&&(e.delete(s),0===e.size&&this._outer.delete(t))}forEach(t){this._outer.forEach((s,e)=>t(s,e))}}},67361:(f,u,r)=>{r.r(u),r.d(u,{BufferObject:()=>h.g,FramebufferObject:()=>c.H,Program:()=>t.B,ProgramCache:()=>s.J,Renderbuffer:()=>e.l,ShaderCompiler:()=>_.Z,Texture:()=>o.g,VertexArrayObject:()=>n.Z,createContext:()=>l.q,createProgram:()=>a.r,glslifyDefineMap:()=>i.I});var h=r(32788),c=r(79061),t=r(23063),s=r(93987),e=r(17107),_=r(87805),o=r(26136),n=r(45513),i=r(37488),a=r(80831),l=r(61189)},93987:(f,u,r)=>{r.d(u,{J:()=>t});var h=r(67571),c=r(23063);class t{constructor(e){this._rctx=e,this._store=new h.O}dispose(){this._store.forEach(e=>e.forEach(_=>_.dispose())),this._store.clear()}acquire(e,_,o,n){const i=this._store.get(e,_);if(null!=i)return i.ref(),i;const a=new c.B(this._rctx,e,_,o,n);return a.ref(),this._store.set(e,_,a),a}get test(){let e=0;return this._store.forEach(_=>_.forEach(o=>e+=o.hasGLName?2:1)),{cachedWebGLProgramObjects:e}}}},80831:(f,u,r)=>{r.d(u,{r:()=>c});var h=r(23063);function c(t,s,e=""){return new h.B(t,e+s.shaders.vertexShader,e+s.shaders.fragmentShader,s.attributes)}},87805:(f,u,r)=>{r.d(u,{Z:()=>h});class h{constructor(t){this._readFile=t}resolveIncludes(t){return this._resolve(t)}_resolve(t,s=new Map){if(s.has(t))return s.get(t);const e=this._read(t);if(!e)throw new Error(`cannot find shader file ${t}`);const _=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let o=_.exec(e);const n=[];for(;null!=o;)n.push({path:o[1],start:o.index,length:o[0].length}),o=_.exec(e);let i=0,a="";return n.forEach(l=>{a+=e.slice(i,l.start),a+=s.has(l.path)?"":this._resolve(l.path,s),i=l.start+l.length}),a+=e.slice(i),s.set(t,a),a}_read(t){return this._readFile(t)}}},45513:(f,u,r)=>{r.d(u,{Z:()=>o});var h=r(35150),c=r(11432),t=r(79139),s=r(50915),e=r(84757);const _=()=>h.A.getLogger("esri.views.webgl.VertexArrayObject");let o=class{constructor(n,i,a,l,d=null){this._context=n,this._locations=i,this._layout=a,this._buffers=l,this._indexBuffer=d,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Object.keys(this._buffers).reduce((n,i)=>n+this._buffers[i].usedMemory,null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*t.zQ}dispose(){if(this._context){this._context.getBoundVAO()===this&&this._context.bindVAO(null);for(const i in this._buffers){var n;null!==(n=this._buffers[i])&&void 0!==n&&n.dispose(),delete this._buffers[i]}this._indexBuffer=(0,c.WD)(this._indexBuffer),this.disposeVAOOnly()}else(this._glName||Object.getOwnPropertyNames(this._buffers).length>0)&&_().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(s.vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:n}=this._context,i=n.createVertexArray();n.bindVertexArray(i),this._bindLayout(),n.bindVertexArray(null),this._glName=i,this._context.instanceCounter.increment(s.vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:n,_layout:i,_indexBuffer:a}=this;n||_().error("Vertex buffer dictionary is empty!");const l=this._context.gl;for(const d in n){const g=n[d];g||_().error("Vertex buffer is uninitialized!");const E=i[d];E||_().error("Vertex element descriptor is empty!"),(0,e.yu)(this._context,this._locations,g,E)}null!=a&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,a.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}}},37488:(f,u,r)=>{function h(t){const{options:s,value:e}=t;return"number"==typeof s[e]}function c(t){let s="";for(const e in t){const _=t[e];if("boolean"==typeof _)_&&(s+=`#define ${e}\n`);else if("number"==typeof _)s+=`#define ${e} ${_.toFixed()}\n`;else if("object"==typeof _)if(h(_)){const{value:o,options:n,namespace:i}=_,a=i?`${i}_`:"";for(const l in n)s+=`#define ${a}${l} ${n[l].toFixed()}\n`;s+=`#define ${e} ${a}${o}\n`}else{const o=_.options;let n=0;for(const i in o)s+=`#define ${o[i]} ${(n++).toFixed()}\n`;s+=`#define ${e} ${o[_.value]}\n`}}return s}r.d(u,{I:()=>c})}}]);