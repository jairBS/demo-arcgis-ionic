"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3258,4098],{24098:(N,E,r)=>{r.d(E,{GB:()=>v,Qo:()=>O,Y4:()=>y});var T=r(44549);class v{}function y(n){return n instanceof T.bo?n===v.instance:"unknown"===(null==n?void 0:n.toString().toLowerCase())}function O(n){return y(n)?v.instance:n}v.instance=new T.oh("Etc/UTC")},73258:(N,E,r)=>{r.d(E,{A:()=>M});var T=r(5922),v=r(71065),y=r(35150),O=r(60797),L=r(24098),n=r(86300),a=r(22639),Z=r(44549);const A=new Map;class M{static fromJSON(i){return new M(i.fields,i.timeZoneByFieldName)}static fromLayer(i){var t;return new M(null!==(t=i.fields)&&void 0!==t?t:[],P(i))}static fromLayerJSON(i){var t;return new M(null!==(t=i.fields)&&void 0!==t?t:[],P(i))}constructor(i=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=i||[],this._timeZoneByFieldName=t?new Map(t):null;const d=[];for(const l of this.fields){const _=null==l?void 0:l.name,p=S(_);if(_&&p){var h;const m=f(_);this._fieldsMap.set(_,l),this._fieldsMap.set(m,l),this._normalizedFieldsMap.set(p,l),d.push(`${m}:${l.type}:${null===(h=this._timeZoneByFieldName)||void 0===h?void 0:h.get(_)}`),(0,n.vE)(l)?(this.dateFields.push(l),this._dateFieldsSet.add(l)):(0,n.WA)(l)&&(this._numericFieldsSet.add(l),this.numericFields.push(l)),(0,n.te)(l)||(0,n.Xz)(l)||(l.editable=null==l.editable||!!l.editable,l.nullable=null==l.nullable||!!l.nullable)}}d.sort(),this.uid=d.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const i of this.fields)(0,n.te)(i)||(0,n.Xz)(i)||i.nullable||void 0!==(0,n.lD)(i)||this._requiredFields.push(i)}return this._requiredFields}equals(i){return this.uid===(null==i?void 0:i.uid)}has(i){return null!=this.get(i)}get(i){var t;if(!i)return;let d=this._fieldsMap.get(i);return d||(d=null!==(t=this._fieldsMap.get(f(i)))&&void 0!==t?t:this._normalizedFieldsMap.get(S(i)),d&&this._fieldsMap.set(i,d),d)}getTimeZone(i){const t=this.get(i&&"string"!=typeof i?i.name:i);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(y.A.getLogger("esri.layers.support.FieldsIndex").error(new T.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),a.n$):w.has(t.type)?a.L5:null:null}getLuxonTimeZone(i){const t=this.getTimeZone(i);return t?t===a.L5?L.GB.instance:t===a.n$?Z.mQ.utcInstance:(0,O.tE)(A,t,()=>Z.oh.create(t)):null}isDateField(i){return this._dateFieldsSet.has(this.get(i))}isTimeOnlyField(i){return(0,n.OH)(this.get(i))}isNumericField(i){return this._numericFieldsSet.has(this.get(i))}normalizeFieldName(i){var t,d;return null!==(t=null===(d=this.get(i))||void 0===d?void 0:d.name)&&void 0!==t?t:void 0}toJSON(){return{fields:this.fields.map(i=>(0,v.Wj)(i)?i.toJSON():i),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function f(s){return s.trim().toLowerCase()}function S(s){var i,t;return null!==(i=null===(t=(0,n.rS)(s))||void 0===t?void 0:t.toLowerCase())&&void 0!==i?i:""}const w=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function P(s){var i,t,d,h,l,_,p;const m=new Map;if(!s.fields)return m;const I=!0===s.datesInUnknownTimezone,{timeInfo:o,editFieldsInfo:u}=s,W=null!==(i=o?"startField"in o?o.startField:o.startTimeField:"")&&void 0!==i?i:"",j=null!==(t=o?"endField"in o?o.endField:o.endTimeField:"")&&void 0!==t?t:"",c=function U(s){return"dateFieldsTimeZone"in s}(s)?null!==(d=s.dateFieldsTimeZone)&&void 0!==d?d:null:s.dateFieldsTimeReference?(0,a.ZS)(s.dateFieldsTimeReference):null,B=u?function $(s){return"timeZone"in s}(u)?null!==(h=u.timeZone)&&void 0!==h?h:c:u.dateFieldsTimeReference?(0,a.ZS)(u.dateFieldsTimeReference):null!=c?c:a.n$:null,C=o?function R(s){return"timeZone"in s}(o)?null!==(l=o.timeZone)&&void 0!==l?l:c:o.timeReference?(0,a.ZS)(o.timeReference):c:null,z=new Map([[f(null!==(_=null==u?void 0:u.creationDateField)&&void 0!==_?_:""),B],[f(null!==(p=null==u?void 0:u.editDateField)&&void 0!==p?p:""),B],[f(W),C],[f(j),C]]);for(const{name:F,type:D}of s.fields)if(w.has(D))m.set(F,a.L5);else if("date"!==D&&"esriFieldTypeDate"!==D)m.set(F,null);else if(I)m.set(F,a.L5);else{var g;const K=null!==(g=z.get(f(null!=F?F:"")))&&void 0!==g?g:c;m.set(F,K)}return m}}}]);